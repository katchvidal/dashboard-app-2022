"use strict";var uC=Object.defineProperty,lC=Object.defineProperties,cC=Object.getOwnPropertyDescriptors,_E=Object.getOwnPropertySymbols,dC=Object.prototype.hasOwnProperty,hC=Object.prototype.propertyIsEnumerable,yE=(ke,ye,S)=>ye in ke?uC(ke,ye,{enumerable:!0,configurable:!0,writable:!0,value:S}):ke[ye]=S,vE=(ke,ye)=>{for(var S in ye||(ye={}))dC.call(ye,S)&&yE(ke,S,ye[S]);if(_E)for(var S of _E(ye))hC.call(ye,S)&&yE(ke,S,ye[S]);return ke},EE=(ke,ye)=>lC(ke,cC(ye));(self.webpackChunkingreo_egreso_app=self.webpackChunkingreo_egreso_app||[]).push([[179],{7128:(ke,ye,S)=>{S.d(ye,{nm:()=>ir});var p=S(6351),de=(S(5e3),S(3692),S(5867),S(5861)),Te=S(9681),be=S(4859),ce=S(2090),_e=S(1877);const ee=new Map,fe={activated:!1,tokenObservers:[]},Ae={initialized:!1,enabled:!1};function Ye(le){return ee.get(le)||fe}function Je(le,Q){ee.set(le,Q)}function ot(){return Ae}class Ge{constructor(Q,me,$e,qe,Rt){if(this.operation=Q,this.retryPolicy=me,this.getWaitDuration=$e,this.lowerBound=qe,this.upperBound=Rt,this.pending=null,this.nextErrorWaitInterval=qe,qe>Rt)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Q){var me=this;return(0,de.Z)(function*(){me.stop();try{me.pending=new ce.BH,yield function ut(le){return new Promise(Q=>{setTimeout(Q,le)})}(me.getNextRun(Q)),me.pending.resolve(),yield me.pending.promise,me.pending=new ce.BH,yield me.operation(),me.pending.resolve(),yield me.pending.promise,me.process(!0).catch(()=>{})}catch($e){me.retryPolicy($e)?me.process(!1).catch(()=>{}):me.stop()}})()}getNextRun(Q){if(Q)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const me=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),me}}}const je=new ce.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Xe(le){if(!Ye(le).activated)throw je.create("use-before-activation",{appName:le.name})}function dt(le,Q){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,de.Z)(function*({url:le,body:Q},me){const $e={"Content-Type":"application/json"},qe=me.getImmediate({optional:!0});if(qe){const hr=yield qe.getHeartbeatsHeader();hr&&($e["X-Firebase-Client"]=hr)}const Rt={method:"POST",body:JSON.stringify(Q),headers:$e};let yn,Nn;try{yn=yield fetch(le,Rt)}catch(hr){throw je.create("fetch-network-error",{originalErrorMessage:hr.message})}if(200!==yn.status)throw je.create("fetch-status-error",{httpStatus:yn.status});try{Nn=yield yn.json()}catch(hr){throw je.create("fetch-parse-error",{originalErrorMessage:hr.message})}const gn=Nn.ttl.match(/^([\d.]+)(s)$/);if(!gn||!gn[2]||isNaN(Number(gn[1])))throw je.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Nn.ttl}`});const Sn=1e3*Number(gn[1]),ai=Date.now();return{token:Nn.token,expireTimeMillis:ai+Sn,issuedAtTimeMillis:ai}})).apply(this,arguments)}function nn(le,Q){const{projectId:me,appId:$e,apiKey:qe}=le.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${me}/apps/${$e}:exchangeDebugToken?key=${qe}`,body:{debug_token:Q}}}const en="firebase-app-check-store";let En=null;function on(){return En||(En=new Promise((le,Q)=>{try{const me=indexedDB.open("firebase-app-check-database",1);me.onsuccess=$e=>{le($e.target.result)},me.onerror=$e=>{var qe;Q(je.create("storage-open",{originalErrorMessage:null===(qe=$e.target.error)||void 0===qe?void 0:qe.message}))},me.onupgradeneeded=$e=>{0===$e.oldVersion&&$e.target.result.createObjectStore(en,{keyPath:"compositeKey"})}}catch(me){Q(je.create("storage-open",{originalErrorMessage:me.message}))}}),En)}function Ln(){return(Ln=(0,de.Z)(function*(le,Q){const $e=(yield on()).transaction(en,"readwrite"),Rt=$e.objectStore(en).put({compositeKey:le,value:Q});return new Promise((yn,Nn)=>{Rt.onsuccess=gn=>{yn()},$e.onerror=gn=>{var Sn;Nn(je.create("storage-set",{originalErrorMessage:null===(Sn=gn.target.error)||void 0===Sn?void 0:Sn.message}))}})})).apply(this,arguments)}const qn=new _e.Yd("@firebase/app-check");function pr(le,Q){return(0,ce.hl)()?function Jt(le,Q){return function Hn(le,Q){return Ln.apply(this,arguments)}(function Ar(le){return`${le.options.appId}-${le.name}`}(le),Q)}(le,Q).catch(me=>{qn.warn(`Failed to write token to IndexedDB. Error: ${me}`)}):Promise.resolve()}function Dr(){return ot().enabled}function Hr(){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,de.Z)(function*(){const le=ot();if(le.enabled&&le.token)return le.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const vr={error:"UNKNOWN_ERROR"};function $r(le){return ce.US.encodeString(JSON.stringify(le),!1)}function Vt(le){return an.apply(this,arguments)}function an(){return(an=(0,de.Z)(function*(le,Q=!1){const me=le.app;Xe(me);const $e=Ye(me);let Rt,qe=$e.token;if(!qe){const gn=yield $e.cachedTokenPromise;gn&&gr(gn)&&(qe=gn)}if(!Q&&qe&&gr(qe))return{token:qe.token};let Nn,yn=!1;if(Dr()){$e.exchangeTokenPromise||($e.exchangeTokenPromise=dt(nn(me,yield Hr()),le.heartbeatServiceProvider).then(Sn=>($e.exchangeTokenPromise=void 0,Sn)),yn=!0);const gn=yield $e.exchangeTokenPromise;return yield pr(me,gn),Je(me,Object.assign(Object.assign({},$e),{token:gn})),{token:gn.token}}try{$e.exchangeTokenPromise||($e.exchangeTokenPromise=$e.provider.getToken().then(gn=>($e.exchangeTokenPromise=void 0,gn)),yn=!0),qe=yield $e.exchangeTokenPromise}catch(gn){"appCheck/throttled"===gn.code?qn.warn(gn.message):qn.error(gn),Rt=gn}return qe?(Nn={token:qe.token},Je(me,Object.assign(Object.assign({},$e),{token:qe})),yield pr(me,qe)):Nn=jn(Rt),yn&&di(me,Nn),Nn})).apply(this,arguments)}function Or(le,Q){const me=Ye(le),$e=me.tokenObservers.filter(qe=>qe.next!==Q);0===$e.length&&me.tokenRefresher&&me.tokenRefresher.isRunning()&&me.tokenRefresher.stop(),Je(le,Object.assign(Object.assign({},me),{tokenObservers:$e}))}function zr(le){const{app:Q}=le,me=Ye(Q);let $e=me.tokenRefresher;$e||($e=function Bn(le){const{app:Q}=le;return new Ge((0,de.Z)(function*(){let $e;if($e=Ye(Q).token?yield Vt(le,!0):yield Vt(le),$e.error)throw $e.error}),()=>!0,()=>{const me=Ye(Q);if(me.token){let $e=me.token.issuedAtTimeMillis+.5*(me.token.expireTimeMillis-me.token.issuedAtTimeMillis)+3e5;return $e=Math.min($e,me.token.expireTimeMillis-3e5),Math.max(0,$e-Date.now())}return 0},3e4,96e4)}(le),Je(Q,Object.assign(Object.assign({},me),{tokenRefresher:$e}))),!$e.isRunning()&&me.isTokenAutoRefreshEnabled&&$e.start()}function di(le,Q){const me=Ye(le).tokenObservers;for(const $e of me)try{"EXTERNAL"===$e.type&&null!=Q.error?$e.error(Q.error):$e.next(Q)}catch(qe){}}function gr(le){return le.expireTimeMillis-Date.now()>0}function jn(le){return{token:$r(vr),error:le}}class Me{constructor(Q,me){this.app=Q,this.heartbeatServiceProvider=me}_delete(){const{tokenObservers:Q}=Ye(this.app);for(const me of Q)Or(this.app,me.next);return Promise.resolve()}}const Oi="app-check-internal";!function oi(){(0,Te._registerComponent)(new be.wA("app-check",le=>function Pe(le,Q){return new Me(le,Q)}(le.getProvider("app").getImmediate(),le.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((le,Q,me)=>{le.getProvider(Oi).initialize()})),(0,Te._registerComponent)(new be.wA(Oi,le=>function Ue(le){return{getToken:Q=>Vt(le,Q),addTokenListener:Q=>function Wt(le,Q,me,$e){const{app:qe}=le,Rt=Ye(qe),yn={next:me,error:$e,type:Q};if(Je(qe,Object.assign(Object.assign({},Rt),{tokenObservers:[...Rt.tokenObservers,yn]})),Rt.token&&gr(Rt.token)){const Nn=Rt.token;Promise.resolve().then(()=>{me({token:Nn.token}),zr(le)}).catch(()=>{})}Rt.cachedTokenPromise.then(()=>zr(le))}(le,"INTERNAL",Q),removeTokenListener:Q=>Or(le.app,Q)}}(le.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Te.registerVersion)("@firebase/app-check","0.5.8")}();class ir{constructor(){return(0,p.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(ke,ye,S)=>{S.d(ye,{Ot:()=>Ee,ZF:()=>at,hX:()=>Ye,z6:()=>de});var p=S(5867),M=S(5e3),G=S(6351);class Ee{constructor(Ge){return Ge}}class de{constructor(){return(0,p.C6)()}}const ce=new M.OlP("angularfire2._apps"),_e={provide:Ee,useFactory:function be(Qe){return Qe&&1===Qe.length?Qe[0]:new Ee((0,p.Mq)())},deps:[[new M.FiY,ce]]},ee={provide:de,deps:[[new M.FiY,ce]]};function fe(Qe){return(Ge,ut)=>{const At=Ge.runOutsideAngular(()=>Qe(ut));return new Ee(At)}}let Ae=(()=>{class Qe{constructor(ut){(0,p.KN)("angularfire",G.q4.full,"core"),(0,p.KN)("angularfire",G.q4.full,"app"),(0,p.KN)("angular",M.q4F.full,ut.toString())}}return Qe.\u0275fac=function(ut){return new(ut||Qe)(M.LFG(M.Lbi))},Qe.\u0275mod=M.oAB({type:Qe}),Qe.\u0275inj=M.cJS({providers:[_e,ee]}),Qe})();function Ye(Qe,...Ge){return{ngModule:Ae,providers:[{provide:ce,useFactory:fe(Qe),multi:!0,deps:[M.R0b,M.zs3,G.HU,...Ge]}]}}const at=(0,G.u3)(p.ZF,!0)},1041:(ke,ye,S)=>{S.d(ye,{zQ:()=>dt,ww:()=>Ke,rT:()=>Xe,f7:()=>ze,L6:()=>je,_Q:()=>it,lh:()=>Fe,Qv:()=>At,nw:()=>et});var p=S(5e3),M=S(7579),G=S(9646),Ee=S(8306),de=S(8996),Te=S(6451),be=S(4707),ce=S(3099);function _e(_t,St,nn){let rn,Ot=!1;return _t&&"object"==typeof _t?({bufferSize:rn=1/0,windowTime:St=1/0,refCount:Ot=!1,scheduler:nn}=_t):rn=null!=_t?_t:1/0,(0,ce.B)({connector:()=>new be.t(rn,St,nn),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ot})}var ee=S(3900),fe=S(576);function Ae(_t,St){return(0,fe.m)(St)?(0,ee.w)(()=>_t,St):(0,ee.w)(()=>_t)}var Ye=S(5363),Je=S(4004),ot=S(590),bt=S(9468),at=S(9300),tt=S(6351),xe=S(2011),wt=S(9808),Qe=S(7128),Ge=S(127);const At=new p.OlP("angularfire2.auth.use-emulator"),je=new p.OlP("angularfire2.auth.settings"),it=new p.OlP("angularfire2.auth.tenant-id"),Xe=new p.OlP("angularfire2.auth.langugage-code"),Fe=new p.OlP("angularfire2.auth.use-device-language"),ze=new p.OlP("angularfire.auth.persistence"),et=(_t,St,nn,rn,Ot,en,Cn,En)=>(0,xe.cc)(`${_t.name}.auth`,"AngularFireAuth",_t.name,()=>{const on=St.runOutsideAngular(()=>_t.auth());if(nn&&on.useEmulator(...nn),rn&&(on.tenantId=rn),on.languageCode=Ot,en&&on.useDeviceLanguage(),Cn)for(const[sn,Jt]of Object.entries(Cn))on.settings[sn]=Jt;return En&&on.setPersistence(En),on},[nn,rn,Ot,en,Cn,En]);let dt=(()=>{class _t{constructor(nn,rn,Ot,en,Cn,En,on,sn,Jt,Wn,ar,Hn){const Ln=new M.x,Cr=(0,G.of)(void 0).pipe((0,Ye.Q)(Cn.outsideAngular),(0,ee.w)(()=>en.runOutsideAngular(()=>Promise.resolve().then(S.bind(S,5881)))),(0,Je.U)(()=>(0,xe.on)(nn,en,rn)),(0,Je.U)(ur=>et(ur,en,En,sn,Jt,Wn,on,ar)),_e({bufferSize:1,refCount:!1}));if((0,wt.PM)(Ot))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,G.of)(null);else{Cr.pipe((0,ot.P)()).subscribe();const Ar=Cr.pipe((0,ee.w)(Ut=>Ut.getRedirectResult().then(pr=>pr,()=>null)),tt.iC,_e({bufferSize:1,refCount:!1})),qn=Cr.pipe((0,ee.w)(Ut=>new Ee.y(pr=>({unsubscribe:en.runOutsideAngular(()=>Ut.onAuthStateChanged(An=>pr.next(An),An=>pr.error(An),()=>pr.complete()))})))),jr=Cr.pipe((0,ee.w)(Ut=>new Ee.y(pr=>({unsubscribe:en.runOutsideAngular(()=>Ut.onIdTokenChanged(An=>pr.next(An),An=>pr.error(An),()=>pr.complete()))}))));this.authState=Ar.pipe(Ae(qn),(0,bt.R)(Cn.outsideAngular),(0,Ye.Q)(Cn.insideAngular)),this.user=Ar.pipe(Ae(jr),(0,bt.R)(Cn.outsideAngular),(0,Ye.Q)(Cn.insideAngular)),this.idToken=this.user.pipe((0,ee.w)(Ut=>Ut?(0,de.D)(Ut.getIdToken()):(0,G.of)(null))),this.idTokenResult=this.user.pipe((0,ee.w)(Ut=>Ut?(0,de.D)(Ut.getIdTokenResult()):(0,G.of)(null))),this.credential=(0,Te.T)(Ar,Ln,this.authState.pipe((0,at.h)(Ut=>!Ut))).pipe((0,Je.U)(Ut=>(null==Ut?void 0:Ut.user)?Ut:null),(0,bt.R)(Cn.outsideAngular),(0,Ye.Q)(Cn.insideAngular))}return(0,xe.pX)(this,Cr,en,{spy:{apply:(ur,Ar,qn)=>{(ur.startsWith("signIn")||ur.startsWith("createUser"))&&qn.then(jr=>Ln.next(jr))}}})}}return _t.\u0275fac=function(nn){return new(nn||_t)(p.LFG(xe.Dh),p.LFG(xe.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(tt.HU),p.LFG(At,8),p.LFG(je,8),p.LFG(it,8),p.LFG(Xe,8),p.LFG(Fe,8),p.LFG(ze,8),p.LFG(Qe.nm,8))},_t.\u0275prov=p.Yz7({token:_t,factory:_t.\u0275fac,providedIn:"any"}),_t})(),Ke=(()=>{class _t{constructor(){Ge.Z.registerVersion("angularfire",tt.q4.full,"auth-compat")}}return _t.\u0275fac=function(nn){return new(nn||_t)},_t.\u0275mod=p.oAB({type:_t}),_t.\u0275inj=p.cJS({providers:[dt]}),_t})()},6185:(ke,ye,S)=>{S.d(ye,{ST:()=>Ue,yb:()=>Et});var p=S(5e3),M=S(4986),G=S(8306),Ee=S(8996),de=S(9646),Te=S(6351),be=S(4482),ce=S(5403);function _e(){return(0,be.e)((ue,j)=>{let oe,He=!1;ue.subscribe((0,ce.x)(j,gt=>{const Ht=oe;oe=gt,He&&j.next([Ht,gt]),He=!0}))})}var ee=S(8675),fe=S(4004),Ae=S(5026),Ye=S(1884),Je=S(9300),ot=S(2011),bt=S(9808),tt=(S(5881),S(3942)),xe=S(5525),wt=S(2090),Qe=S(4859);function At(ue,j){if(void 0===j)return{merge:!1};if(void 0!==j.mergeFields&&void 0!==j.merge)throw new xe.WA("invalid-argument",`Invalid options passed to function ${ue}(): You cannot specify both "merge" and "mergeFields".`);return j}function je(){if("undefined"==typeof Uint8Array)throw new xe.WA("unimplemented","Uint8Arrays are not available in this environment.")}function it(){if(!(0,xe.Me)())throw new xe.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Xe{constructor(j){this._delegate=j}static fromBase64String(j){return it(),new Xe(xe.Jj.fromBase64String(j))}static fromUint8Array(j){return je(),new Xe(xe.Jj.fromUint8Array(j))}toBase64(){return it(),this._delegate.toBase64()}toUint8Array(){return je(),this._delegate.toUint8Array()}isEqual(j){return this._delegate.isEqual(j._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Fe(ue){return function ze(ue,j){if("object"!=typeof ue||null===ue)return!1;const oe=ue;for(const He of j)if(He in oe&&"function"==typeof oe[He])return!0;return!1}(ue,["next","error","complete"])}class et{enableIndexedDbPersistence(j,oe){return(0,xe.ST)(j._delegate,{forceOwnership:oe})}enableMultiTabIndexedDbPersistence(j){return(0,xe.fH)(j._delegate)}clearIndexedDbPersistence(j){return(0,xe.Fc)(j._delegate)}}class dt{constructor(j,oe,He){this._delegate=oe,this._persistenceProvider=He,this.INTERNAL={delete:()=>this.terminate()},j instanceof xe.l7||(this._appCompat=j)}get _databaseId(){return this._delegate._databaseId}settings(j){const oe=this._delegate._getSettings();!j.merge&&oe.host!==j.host&&(0,xe.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),j.merge&&delete(j=Object.assign(Object.assign({},oe),j)).merge,this._delegate._setSettings(j)}useEmulator(j,oe,He={}){(0,xe.at)(this._delegate,j,oe,He)}enableNetwork(){return(0,xe.Ix)(this._delegate)}disableNetwork(){return(0,xe.TF)(this._delegate)}enablePersistence(j){let oe=!1,He=!1;return j&&(oe=!!j.synchronizeTabs,He=!!j.experimentalForceOwningTab,(0,xe.Wi)("synchronizeTabs",oe,"experimentalForceOwningTab",He)),oe?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,He)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,xe.Mx)(this._delegate)}onSnapshotsInSync(j){return(0,xe.sc)(this._delegate,j)}get app(){if(!this._appCompat)throw new xe.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(j){try{return new Hn(this,(0,xe.hJ)(this._delegate,j))}catch(oe){throw en(oe,"collection()","Firestore.collection()")}}doc(j){try{return new Ot(this,(0,xe.JU)(this._delegate,j))}catch(oe){throw en(oe,"doc()","Firestore.doc()")}}collectionGroup(j){try{return new Jt(this,(0,xe.B$)(this._delegate,j))}catch(oe){throw en(oe,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(j){return(0,xe.i3)(this._delegate,oe=>j(new St(this,oe)))}batch(){return(0,xe.qY)(this._delegate),new nn(new xe.PU(this._delegate,j=>(0,xe.GL)(this._delegate,j)))}loadBundle(j){return(0,xe.Pb)(this._delegate,j)}namedQuery(j){return(0,xe.L$)(this._delegate,j).then(oe=>oe?new Jt(this,oe):null)}}class Ke extends xe.u7{constructor(j){super(),this.firestore=j}convertBytes(j){return new Xe(new xe.Jj(j))}convertReference(j){const oe=this.convertDocumentKey(j,this.firestore._databaseId);return Ot.forKey(oe,this.firestore,null)}}class St{constructor(j,oe){this._firestore=j,this._delegate=oe,this._userDataWriter=new Ke(j)}get(j){const oe=Ln(j);return this._delegate.get(oe).then(He=>new on(this._firestore,new xe.xU(this._firestore._delegate,this._userDataWriter,He._key,He._document,He.metadata,oe.converter)))}set(j,oe,He){const gt=Ln(j);return He?(At("Transaction.set",He),this._delegate.set(gt,oe,He)):this._delegate.set(gt,oe),this}update(j,oe,He,...gt){const Ht=Ln(j);return 2===arguments.length?this._delegate.update(Ht,oe):this._delegate.update(Ht,oe,He,...gt),this}delete(j){const oe=Ln(j);return this._delegate.delete(oe),this}}class nn{constructor(j){this._delegate=j}set(j,oe,He){const gt=Ln(j);return He?(At("WriteBatch.set",He),this._delegate.set(gt,oe,He)):this._delegate.set(gt,oe),this}update(j,oe,He,...gt){const Ht=Ln(j);return 2===arguments.length?this._delegate.update(Ht,oe):this._delegate.update(Ht,oe,He,...gt),this}delete(j){const oe=Ln(j);return this._delegate.delete(oe),this}commit(){return this._delegate.commit()}}class rn{constructor(j,oe,He){this._firestore=j,this._userDataWriter=oe,this._delegate=He}fromFirestore(j,oe){const He=new xe.$q(this._firestore._delegate,this._userDataWriter,j._key,j._document,j.metadata,null);return this._delegate.fromFirestore(new sn(this._firestore,He),null!=oe?oe:{})}toFirestore(j,oe){return oe?this._delegate.toFirestore(j,oe):this._delegate.toFirestore(j)}static getInstance(j,oe){const He=rn.INSTANCES;let gt=He.get(j);gt||(gt=new WeakMap,He.set(j,gt));let Ht=gt.get(oe);return Ht||(Ht=new rn(j,new Ke(j),oe),gt.set(oe,Ht)),Ht}}rn.INSTANCES=new WeakMap;class Ot{constructor(j,oe){this.firestore=j,this._delegate=oe,this._userDataWriter=new Ke(j)}static forPath(j,oe,He){if(j.length%2!=0)throw new xe.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${j.canonicalString()} has ${j.length}`);return new Ot(oe,new xe.my(oe._delegate,He,new xe.Ky(j)))}static forKey(j,oe,He){return new Ot(oe,new xe.my(oe._delegate,He,j))}get id(){return this._delegate.id}get parent(){return new Hn(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(j){try{return new Hn(this.firestore,(0,xe.hJ)(this._delegate,j))}catch(oe){throw en(oe,"collection()","DocumentReference.collection()")}}isEqual(j){return(j=(0,wt.m9)(j))instanceof xe.my&&(0,xe.Eo)(this._delegate,j)}set(j,oe){oe=At("DocumentReference.set",oe);try{return oe?(0,xe.pl)(this._delegate,j,oe):(0,xe.pl)(this._delegate,j)}catch(He){throw en(He,"setDoc()","DocumentReference.set()")}}update(j,oe,...He){try{return 1===arguments.length?(0,xe.r7)(this._delegate,j):(0,xe.r7)(this._delegate,j,oe,...He)}catch(gt){throw en(gt,"updateDoc()","DocumentReference.update()")}}delete(){return(0,xe.oe)(this._delegate)}onSnapshot(...j){const oe=Cn(j),He=En(j,gt=>new on(this.firestore,new xe.xU(this.firestore._delegate,this._userDataWriter,gt._key,gt._document,gt.metadata,this._delegate.converter)));return(0,xe.cf)(this._delegate,oe,He)}get(j){let oe;return oe="cache"===(null==j?void 0:j.source)?(0,xe.kl)(this._delegate):"server"===(null==j?void 0:j.source)?(0,xe.Xk)(this._delegate):(0,xe.QT)(this._delegate),oe.then(He=>new on(this.firestore,new xe.xU(this.firestore._delegate,this._userDataWriter,He._key,He._document,He.metadata,this._delegate.converter)))}withConverter(j){return new Ot(this.firestore,this._delegate.withConverter(j?rn.getInstance(this.firestore,j):null))}}function en(ue,j,oe){return ue.message=ue.message.replace(j,oe),ue}function Cn(ue){for(const j of ue)if("object"==typeof j&&!Fe(j))return j;return{}}function En(ue,j){var oe,He;let gt;return gt=Fe(ue[0])?ue[0]:Fe(ue[1])?ue[1]:"function"==typeof ue[0]?{next:ue[0],error:ue[1],complete:ue[2]}:{next:ue[1],error:ue[2],complete:ue[3]},{next:Ht=>{gt.next&&gt.next(j(Ht))},error:null===(oe=gt.error)||void 0===oe?void 0:oe.bind(gt),complete:null===(He=gt.complete)||void 0===He?void 0:He.bind(gt)}}class on{constructor(j,oe){this._firestore=j,this._delegate=oe}get ref(){return new Ot(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(j){return this._delegate.data(j)}get(j,oe){return this._delegate.get(j,oe)}isEqual(j){return(0,xe.qK)(this._delegate,j._delegate)}}class sn extends on{data(j){const oe=this._delegate.data(j);return(0,xe.K9)(void 0!==oe,"Document in a QueryDocumentSnapshot should exist"),oe}}class Jt{constructor(j,oe){this.firestore=j,this._delegate=oe,this._userDataWriter=new Ke(j)}where(j,oe,He){try{return new Jt(this.firestore,(0,xe.IO)(this._delegate,(0,xe.ar)(j,oe,He)))}catch(gt){throw en(gt,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(j,oe){try{return new Jt(this.firestore,(0,xe.IO)(this._delegate,(0,xe.Xo)(j,oe)))}catch(He){throw en(He,/(orderBy|where)\(\)/,"Query.$1()")}}limit(j){try{return new Jt(this.firestore,(0,xe.IO)(this._delegate,(0,xe.b9)(j)))}catch(oe){throw en(oe,"limit()","Query.limit()")}}limitToLast(j){try{return new Jt(this.firestore,(0,xe.IO)(this._delegate,(0,xe.vh)(j)))}catch(oe){throw en(oe,"limitToLast()","Query.limitToLast()")}}startAt(...j){try{return new Jt(this.firestore,(0,xe.IO)(this._delegate,(0,xe.e0)(...j)))}catch(oe){throw en(oe,"startAt()","Query.startAt()")}}startAfter(...j){try{return new Jt(this.firestore,(0,xe.IO)(this._delegate,(0,xe.TQ)(...j)))}catch(oe){throw en(oe,"startAfter()","Query.startAfter()")}}endBefore(...j){try{return new Jt(this.firestore,(0,xe.IO)(this._delegate,(0,xe.Lx)(...j)))}catch(oe){throw en(oe,"endBefore()","Query.endBefore()")}}endAt(...j){try{return new Jt(this.firestore,(0,xe.IO)(this._delegate,(0,xe.Wu)(...j)))}catch(oe){throw en(oe,"endAt()","Query.endAt()")}}isEqual(j){return(0,xe.iE)(this._delegate,j._delegate)}get(j){let oe;return oe="cache"===(null==j?void 0:j.source)?(0,xe.UQ)(this._delegate):"server"===(null==j?void 0:j.source)?(0,xe.zN)(this._delegate):(0,xe.PL)(this._delegate),oe.then(He=>new ar(this.firestore,new xe.W(this.firestore._delegate,this._userDataWriter,this._delegate,He._snapshot)))}onSnapshot(...j){const oe=Cn(j),He=En(j,gt=>new ar(this.firestore,new xe.W(this.firestore._delegate,this._userDataWriter,this._delegate,gt._snapshot)));return(0,xe.cf)(this._delegate,oe,He)}withConverter(j){return new Jt(this.firestore,this._delegate.withConverter(j?rn.getInstance(this.firestore,j):null))}}class Wn{constructor(j,oe){this._firestore=j,this._delegate=oe}get type(){return this._delegate.type}get doc(){return new sn(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ar{constructor(j,oe){this._firestore=j,this._delegate=oe}get query(){return new Jt(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(j=>new sn(this._firestore,j))}docChanges(j){return this._delegate.docChanges(j).map(oe=>new Wn(this._firestore,oe))}forEach(j,oe){this._delegate.forEach(He=>{j.call(oe,new sn(this._firestore,He))})}isEqual(j){return(0,xe.qK)(this._delegate,j._delegate)}}class Hn extends Jt{constructor(j,oe){super(j,oe),this.firestore=j,this._delegate=oe}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const j=this._delegate.parent;return j?new Ot(this.firestore,j):null}doc(j){try{return new Ot(this.firestore,void 0===j?(0,xe.JU)(this._delegate):(0,xe.JU)(this._delegate,j))}catch(oe){throw en(oe,"doc()","CollectionReference.doc()")}}add(j){return(0,xe.ET)(this._delegate,j).then(oe=>new Ot(this.firestore,oe))}isEqual(j){return(0,xe.Eo)(this._delegate,j._delegate)}withConverter(j){return new Hn(this.firestore,this._delegate.withConverter(j?rn.getInstance(this.firestore,j):null))}}function Ln(ue){return(0,xe.Cf)(ue,xe.my)}class Cr{constructor(...j){this._delegate=new xe.Lz(...j)}static documentId(){return new Cr(xe.Xb.keyField().canonicalString())}isEqual(j){return(j=(0,wt.m9)(j))instanceof xe.Lz&&this._delegate._internalPath.isEqual(j._internalPath)}}class ur{constructor(j){this._delegate=j}static serverTimestamp(){const j=(0,xe.Bt)();return j._methodName="FieldValue.serverTimestamp",new ur(j)}static delete(){const j=(0,xe.AK)();return j._methodName="FieldValue.delete",new ur(j)}static arrayUnion(...j){const oe=(0,xe.vr)(...j);return oe._methodName="FieldValue.arrayUnion",new ur(oe)}static arrayRemove(...j){const oe=(0,xe.Ab)(...j);return oe._methodName="FieldValue.arrayRemove",new ur(oe)}static increment(j){const oe=(0,xe.nP)(j);return oe._methodName="FieldValue.increment",new ur(oe)}isEqual(j){return this._delegate.isEqual(j._delegate)}}const Ar={Firestore:dt,GeoPoint:xe.F8,Timestamp:xe.EK,Blob:Xe,Transaction:St,WriteBatch:nn,DocumentReference:Ot,DocumentSnapshot:on,Query:Jt,QueryDocumentSnapshot:sn,QuerySnapshot:ar,CollectionReference:Hn,FieldPath:Cr,FieldValue:ur,setLogLevel:function _t(ue){(0,xe.Ub)(ue)},CACHE_SIZE_UNLIMITED:xe.IX};!function jr(ue){(function qn(ue,j){ue.INTERNAL.registerComponent(new Qe.wA("firestore-compat",oe=>{const He=oe.getProvider("app-compat").getImmediate(),gt=oe.getProvider("firestore").getImmediate();return j(He,gt)},"PUBLIC").setServiceProps(Object.assign({},Ar)))})(ue,(j,oe)=>new dt(j,oe,new et)),ue.registerVersion("@firebase/firestore-compat","0.1.18")}(tt.Z);var Ut=S(1041),pr=S(7128),An=S(127);function Dr(ue,j){return function pn(ue,j=M.z){return new G.y(oe=>{let He;return null!=j?j.schedule(()=>{He=ue.onSnapshot({includeMetadataChanges:!0},oe)}):He=ue.onSnapshot({includeMetadataChanges:!0},oe),()=>{null!=He&&He()}})}(ue,j)}function Gr(ue,j){return Dr(ue,j).pipe((0,fe.U)(oe=>({payload:oe,type:"query"})))}function Tn(ue,j){return Gr(ue,j).pipe((0,ee.O)(void 0),_e(),(0,fe.U)(([oe,He])=>{const gt=He.payload.docChanges(),Ht=gt.map(wn=>({type:wn.type,payload:wn}));return oe&&JSON.stringify(oe.payload.metadata)!==JSON.stringify(He.payload.metadata)&&He.payload.docs.forEach((wn,Gt)=>{const Mn=gt.find(Le=>Le.doc.ref.isEqual(wn.ref)),st=null==oe?void 0:oe.payload.docs.find(Le=>Le.ref.isEqual(wn.ref));Mn&&JSON.stringify(Mn.doc.metadata)===JSON.stringify(wn.metadata)||!Mn&&st&&JSON.stringify(st.metadata)===JSON.stringify(wn.metadata)||Ht.push({type:"modified",payload:{oldIndex:Gt,newIndex:Gt,type:"modified",doc:wn}})}),Ht}))}function vr(ue,j,oe){return Tn(ue,oe).pipe((0,Ae.R)((He,gt)=>function $r(ue,j,oe){return j.forEach(He=>{oe.indexOf(He.type)>-1&&(ue=function an(ue,j){switch(j.type){case"added":if(!ue[j.newIndex]||!ue[j.newIndex].doc.ref.isEqual(j.doc.ref))return Vt(ue,j.newIndex,0,j);break;case"modified":if(null==ue[j.oldIndex]||ue[j.oldIndex].doc.ref.isEqual(j.doc.ref)){if(j.oldIndex!==j.newIndex){const oe=ue.slice();return oe.splice(j.oldIndex,1),oe.splice(j.newIndex,0,j),oe}return Vt(ue,j.newIndex,1,j)}break;case"removed":if(ue[j.oldIndex]&&ue[j.oldIndex].doc.ref.isEqual(j.doc.ref))return Vt(ue,j.oldIndex,1)}return ue}(ue,He))}),ue}(He,gt.map(Ht=>Ht.payload),j),[]),(0,Ye.x)(),(0,fe.U)(He=>He.map(gt=>({type:gt.type,payload:gt}))))}function Vt(ue,j,oe,...He){const gt=ue.slice();return gt.splice(j,oe,...He),gt}function Wt(ue){return(!ue||0===ue.length)&&(ue=["added","removed","modified"]),ue}class Or{constructor(j,oe,He){this.ref=j,this.query=oe,this.afs=He}stateChanges(j){let oe=Tn(this.query,this.afs.schedulers.outsideAngular);return j&&j.length>0&&(oe=oe.pipe((0,fe.U)(He=>He.filter(gt=>j.indexOf(gt.type)>-1)))),oe.pipe((0,ee.O)(void 0),_e(),(0,Je.h)(([He,gt])=>gt.length>0||!He),(0,fe.U)(([He,gt])=>gt),Te.iC)}auditTrail(j){return this.stateChanges(j).pipe((0,Ae.R)((oe,He)=>[...oe,...He],[]))}snapshotChanges(j){const oe=Wt(j);return vr(this.query,oe,this.afs.schedulers.outsideAngular).pipe(Te.iC)}valueChanges(j={}){return Gr(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(oe=>oe.payload.docs.map(He=>j.idField?Object.assign(Object.assign({},He.data()),{[j.idField]:He.id}):He.data())),Te.iC)}get(j){return(0,Ee.D)(this.query.get(j)).pipe(Te.iC)}add(j){return this.ref.add(j)}doc(j){return new zr(this.ref.doc(j),this.afs)}}class zr{constructor(j,oe){this.ref=j,this.afs=oe}set(j,oe){return this.ref.set(j,oe)}update(j){return this.ref.update(j)}delete(){return this.ref.delete()}collection(j,oe){const He=this.ref.collection(j),{ref:gt,query:Ht}=Pe(He,oe);return new Or(gt,Ht,this.afs)}snapshotChanges(){return function Hr(ue,j){return Dr(ue,j).pipe((0,ee.O)(void 0),_e(),(0,fe.U)(([oe,He])=>He.exists?(null==oe?void 0:oe.exists)?{payload:He,type:"modified"}:{payload:He,type:"added"}:{payload:He,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Te.iC)}valueChanges(j={}){return this.snapshotChanges().pipe((0,fe.U)(({payload:oe})=>j.idField?Object.assign(Object.assign({},oe.data()),{[j.idField]:oe.id}):oe.data()))}get(j){return(0,Ee.D)(this.ref.get(j)).pipe(Te.iC)}}class Bn{constructor(j,oe){this.query=j,this.afs=oe}stateChanges(j){return j&&0!==j.length?Tn(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(oe=>oe.filter(He=>j.indexOf(He.type)>-1)),(0,Je.h)(oe=>oe.length>0),Te.iC):Tn(this.query,this.afs.schedulers.outsideAngular).pipe(Te.iC)}auditTrail(j){return this.stateChanges(j).pipe((0,Ae.R)((oe,He)=>[...oe,...He],[]))}snapshotChanges(j){const oe=Wt(j);return vr(this.query,oe,this.afs.schedulers.outsideAngular).pipe(Te.iC)}valueChanges(j={}){return Gr(this.query,this.afs.schedulers.outsideAngular).pipe((0,fe.U)(He=>He.payload.docs.map(gt=>j.idField?Object.assign({[j.idField]:gt.id},gt.data()):gt.data())),Te.iC)}get(j){return(0,Ee.D)(this.query.get(j)).pipe(Te.iC)}}const di=new p.OlP("angularfire2.enableFirestorePersistence"),gr=new p.OlP("angularfire2.firestore.persistenceSettings"),jn=new p.OlP("angularfire2.firestore.settings"),Me=new p.OlP("angularfire2.firestore.use-emulator");function Pe(ue,j=(oe=>oe)){return{query:j(ue),ref:ue}}let Ue=(()=>{class ue{constructor(oe,He,gt,Ht,wn,Gt,Mn,st,Le,te,he,re,Ve,ht,Lt,Yt,Jn){this.schedulers=Mn;const Gn=(0,ot.on)(oe,Gt,He),fn=Le;te&&(0,Ut.nw)(Gn,Gt,he,Ve,ht,Lt,re,Yt),[this.firestore,this.persistenceEnabled$]=(0,ot.cc)(`${Gn.name}.firestore`,"AngularFirestore",Gn.name,()=>{const rr=Gt.runOutsideAngular(()=>Gn.firestore());if(Ht&&rr.settings(Ht),fn&&rr.useEmulator(...fn),gt&&!(0,bt.PM)(wn)){const pe=()=>{try{return(0,Ee.D)(rr.enablePersistence(st||void 0).then(()=>!0,()=>!1))}catch(Sr){return"undefined"!=typeof console&&console.warn(Sr),(0,de.of)(!1)}};return[rr,Gt.runOutsideAngular(pe)]}return[rr,(0,de.of)(!1)]},[Ht,fn,gt])}collection(oe,He){let gt;gt="string"==typeof oe?this.firestore.collection(oe):oe;const{ref:Ht,query:wn}=Pe(gt,He),Gt=this.schedulers.ngZone.run(()=>Ht);return new Or(Gt,wn,this)}collectionGroup(oe,He){const gt=He||(wn=>wn),Ht=this.firestore.collectionGroup(oe);return new Bn(gt(Ht),this)}doc(oe){let He;He="string"==typeof oe?this.firestore.doc(oe):oe;const gt=this.schedulers.ngZone.run(()=>He);return new zr(gt,this)}createId(){return this.firestore.collection("_").doc().id}}return ue.\u0275fac=function(oe){return new(oe||ue)(p.LFG(ot.Dh),p.LFG(ot.xv,8),p.LFG(di,8),p.LFG(jn,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(Te.HU),p.LFG(gr,8),p.LFG(Me,8),p.LFG(Ut.zQ,8),p.LFG(Ut.Qv,8),p.LFG(Ut.L6,8),p.LFG(Ut._Q,8),p.LFG(Ut.rT,8),p.LFG(Ut.lh,8),p.LFG(Ut.f7,8),p.LFG(pr.nm,8))},ue.\u0275prov=p.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"any"}),ue})(),Et=(()=>{class ue{constructor(){An.Z.registerVersion("angularfire",Te.q4.full,"fst-compat")}static enablePersistence(oe){return{ngModule:ue,providers:[{provide:di,useValue:!0},{provide:gr,useValue:oe}]}}}return ue.\u0275fac=function(oe){return new(oe||ue)},ue.\u0275mod=p.oAB({type:ue}),ue.\u0275inj=p.cJS({providers:[Ue]}),ue})()},2011:(ke,ye,S)=>{S.d(ye,{Dh:()=>ce,GT:()=>Te,cc:()=>Je,hO:()=>Ye,on:()=>ee,pX:()=>de,xv:()=>_e});var p=S(5e3),M=S(127),G=S(6351);ke=S.hmd(ke);const Ee=["ngOnDestroy"],de=(tt,xe,wt,Qe={})=>new Proxy(tt,{get:(Ge,ut)=>wt.runOutsideAngular(()=>{var At;if(tt[ut])return(null===(At=null==Qe?void 0:Qe.spy)||void 0===At?void 0:At.get)&&Qe.spy.get(ut,tt[ut]),tt[ut];if(Ee.indexOf(ut)>-1)return()=>{};const je=xe.toPromise().then(it=>{const Xe=it&&it[ut];return"function"==typeof Xe?Xe.bind(it):Xe&&Xe.then?Xe.then(Fe=>wt.run(()=>Fe)):wt.run(()=>Xe)});return new Proxy(()=>{},{get:(it,Xe)=>je[Xe],apply:(it,Xe,Fe)=>je.then(ze=>{var et;const dt=ze&&ze(...Fe);return(null===(et=null==Qe?void 0:Qe.spy)||void 0===et?void 0:et.apply)&&Qe.spy.apply(ut,Fe,dt),dt})})})}),Te=(tt,xe)=>{xe.forEach(wt=>{Object.getOwnPropertyNames(wt.prototype||wt).forEach(Qe=>{Object.defineProperty(tt.prototype,Qe,Object.getOwnPropertyDescriptor(wt.prototype||wt,Qe))})})};class be{constructor(xe){return xe}}const ce=new p.OlP("angularfire2.app.options"),_e=new p.OlP("angularfire2.app.name");function ee(tt,xe,wt){const Ge="object"==typeof wt&&wt||{};Ge.name=Ge.name||"string"==typeof wt&&wt||"[DEFAULT]";const At=M.Z.apps.filter(je=>je&&je.name===Ge.name)[0]||xe.runOutsideAngular(()=>M.Z.initializeApp(tt,Ge));try{JSON.stringify(tt)!==JSON.stringify(At.options)&&fe("error",`${At.name} Firebase App already initialized with different options${ke.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new be(At)}const fe=(tt,...xe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[tt](...xe)},Ae={provide:be,useFactory:ee,deps:[ce,p.R0b,[new p.FiY,_e]]};let Ye=(()=>{class tt{constructor(wt){M.Z.registerVersion("angularfire",G.q4.full,"core"),M.Z.registerVersion("angularfire",G.q4.full,"app-compat"),M.Z.registerVersion("angular",p.q4F.full,wt.toString())}static initializeApp(wt,Qe){return{ngModule:tt,providers:[{provide:ce,useValue:wt},{provide:_e,useValue:Qe}]}}}return tt.\u0275fac=function(wt){return new(wt||tt)(p.LFG(p.Lbi))},tt.\u0275mod=p.oAB({type:tt}),tt.\u0275inj=p.cJS({providers:[Ae]}),tt})();function Je(tt,xe,wt,Qe,Ge){const[,ut,At]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===tt)||[];if(ut)return function ot(tt,xe){try{return tt.toString()===xe.toString()}catch(wt){return tt===xe}}(Ge,At)||(at("error",`${xe} was already initialized on the ${wt} Firebase App with different settings.${bt?" You may need to reload as Firebase is not HMR aware.":""}`),at("warn",{is:Ge,was:At})),ut;{const je=Qe();return globalThis.\u0275AngularfireInstanceCache.push([tt,je,Ge]),je}}const bt=!!ke.hot,at=(tt,...xe)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[tt](...xe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(ke,ye,S)=>{S.d(ye,{q4:()=>Ku,iC:()=>Zu,fc:()=>qu,HU:()=>Oa,vb:()=>yu,JM:()=>ns,u3:()=>ci});var p=S(5e3),M=S(5867),G=S(5861),Ee=S(9681),de=S(2090),Te=S(4859),be=S(1877),ce=S(8766);const _e="@firebase/installations",Ae="w:0.5.9",Ye="FIS_v2",xe=new de.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function wt(P){return P instanceof de.ZR&&P.code.includes("request-failed")}function Qe({projectId:P}){return`https://firebaseinstallations.googleapis.com/v1/projects/${P}/installations`}function Ge(P){return{token:P.token,requestStatus:2,expiresIn:ze(P.expiresIn),creationTime:Date.now()}}function ut(P,B){return At.apply(this,arguments)}function At(){return(At=(0,G.Z)(function*(P,B){const Re=(yield B.json()).error;return xe.create("request-failed",{requestName:P,serverCode:Re.code,serverMessage:Re.message,serverStatus:Re.status})})).apply(this,arguments)}function je({apiKey:P}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P})}function it(P,{refreshToken:B}){const ne=je(P);return ne.append("Authorization",function et(P){return`${Ye} ${P}`}(B)),ne}function Xe(P){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,G.Z)(function*(P){const B=yield P();return B.status>=500&&B.status<600?P():B})).apply(this,arguments)}function ze(P){return Number(P.replace("s","000"))}function dt(P,B){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,G.Z)(function*({appConfig:P,heartbeatServiceProvider:B},{fid:ne}){const Re=Qe(P),rt=je(P),ft=B.getImmediate({optional:!0});if(ft){const kn=yield ft.getHeartbeatsHeader();kn&&rt.append("x-firebase-client",kn)}const ln={method:"POST",headers:rt,body:JSON.stringify({fid:ne,authVersion:Ye,appId:P.appId,sdkVersion:Ae})},Kn=yield Xe(()=>fetch(Re,ln));if(Kn.ok){const kn=yield Kn.json();return{fid:kn.fid||ne,registrationStatus:2,refreshToken:kn.refreshToken,authToken:Ge(kn.authToken)}}throw yield ut("Create Installation",Kn)})).apply(this,arguments)}function _t(P){return new Promise(B=>{setTimeout(B,P)})}const nn=/^[cdef][\w-]{21}$/;function Ot(){try{const P=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(P),P[0]=112+P[0]%16;const ne=function en(P){return function St(P){return btoa(String.fromCharCode(...P)).replace(/\+/g,"-").replace(/\//g,"_")}(P).substr(0,22)}(P);return nn.test(ne)?ne:""}catch(P){return""}}function Cn(P){return`${P.appName}!${P.appId}`}const En=new Map;function on(P,B){const ne=Cn(P);Wn(ne,B),function ar(P,B){const ne=function Ln(){return!Hn&&"BroadcastChannel"in self&&(Hn=new BroadcastChannel("[Firebase] FID Change"),Hn.onmessage=P=>{Wn(P.data.key,P.data.fid)}),Hn}();ne&&ne.postMessage({key:P,fid:B}),function Cr(){0===En.size&&Hn&&(Hn.close(),Hn=null)}()}(ne,B)}function Wn(P,B){const ne=En.get(P);if(ne)for(const Re of ne)Re(B)}let Hn=null;const qn="firebase-installations-store";let jr=null;function Ut(){return jr||(jr=(0,ce.X3)("firebase-installations-database",1,{upgrade:(P,B)=>{0===B&&P.createObjectStore(qn)}})),jr}function pr(P,B){return An.apply(this,arguments)}function An(){return(An=(0,G.Z)(function*(P,B){const ne=Cn(P),rt=(yield Ut()).transaction(qn,"readwrite"),ft=rt.objectStore(qn),$t=yield ft.get(ne);return yield ft.put(B,ne),yield rt.done,(!$t||$t.fid!==B.fid)&&on(P,B.fid),B})).apply(this,arguments)}function pn(P){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,G.Z)(function*(P){const B=Cn(P),Re=(yield Ut()).transaction(qn,"readwrite");yield Re.objectStore(qn).delete(B),yield Re.done})).apply(this,arguments)}function Hr(P,B){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,G.Z)(function*(P,B){const ne=Cn(P),rt=(yield Ut()).transaction(qn,"readwrite"),ft=rt.objectStore(qn),$t=yield ft.get(ne),ln=B($t);return void 0===ln?yield ft.delete(ne):yield ft.put(ln,ne),yield rt.done,ln&&(!$t||$t.fid!==ln.fid)&&on(P,ln.fid),ln})).apply(this,arguments)}function Tn(P){return vr.apply(this,arguments)}function vr(){return(vr=(0,G.Z)(function*(P){let B;const ne=yield Hr(P.appConfig,Re=>{const rt=$r(Re),ft=Vt(P,rt);return B=ft.registrationPromise,ft.installationEntry});return""===ne.fid?{installationEntry:yield B}:{installationEntry:ne,registrationPromise:B}})).apply(this,arguments)}function $r(P){return di(P||{fid:Ot(),registrationStatus:0})}function Vt(P,B){if(0===B.registrationStatus){if(!navigator.onLine)return{installationEntry:B,registrationPromise:Promise.reject(xe.create("app-offline"))};const ne={fid:B.fid,registrationStatus:1,registrationTime:Date.now()},Re=function an(P,B){return Wt.apply(this,arguments)}(P,ne);return{installationEntry:ne,registrationPromise:Re}}return 1===B.registrationStatus?{installationEntry:B,registrationPromise:Or(P)}:{installationEntry:B}}function Wt(){return(Wt=(0,G.Z)(function*(P,B){try{const ne=yield dt(P,B);return pr(P.appConfig,ne)}catch(ne){throw wt(ne)&&409===ne.customData.serverCode?yield pn(P.appConfig):yield pr(P.appConfig,{fid:B.fid,registrationStatus:0}),ne}})).apply(this,arguments)}function Or(P){return zr.apply(this,arguments)}function zr(){return(zr=(0,G.Z)(function*(P){let B=yield Bn(P.appConfig);for(;1===B.registrationStatus;)yield _t(100),B=yield Bn(P.appConfig);if(0===B.registrationStatus){const{installationEntry:ne,registrationPromise:Re}=yield Tn(P);return Re||ne}return B})).apply(this,arguments)}function Bn(P){return Hr(P,B=>{if(!B)throw xe.create("installation-not-found");return di(B)})}function di(P){return function gr(P){return 1===P.registrationStatus&&P.registrationTime+1e4<Date.now()}(P)?{fid:P.fid,registrationStatus:0}:P}function jn(P,B){return Me.apply(this,arguments)}function Me(){return(Me=(0,G.Z)(function*({appConfig:P,heartbeatServiceProvider:B},ne){const Re=Pe(P,ne),rt=it(P,ne),ft=B.getImmediate({optional:!0});if(ft){const kn=yield ft.getHeartbeatsHeader();kn&&rt.append("x-firebase-client",kn)}const ln={method:"POST",headers:rt,body:JSON.stringify({installation:{sdkVersion:Ae,appId:P.appId}})},Kn=yield Xe(()=>fetch(Re,ln));if(Kn.ok)return Ge(yield Kn.json());throw yield ut("Generate Auth Token",Kn)})).apply(this,arguments)}function Pe(P,{fid:B}){return`${Qe(P)}/${B}/authTokens:generate`}function Ue(P){return Et.apply(this,arguments)}function Et(){return(Et=(0,G.Z)(function*(P,B=!1){let ne;const Re=yield Hr(P.appConfig,ft=>{if(!Ht(ft))throw xe.create("not-registered");const $t=ft.authToken;if(!B&&wn($t))return ft;if(1===$t.requestStatus)return ne=ue(P,B),ft;{if(!navigator.onLine)throw xe.create("app-offline");const ln=Mn(ft);return ne=He(P,ln),ln}});return ne?yield ne:Re.authToken})).apply(this,arguments)}function ue(P,B){return j.apply(this,arguments)}function j(){return(j=(0,G.Z)(function*(P,B){let ne=yield oe(P.appConfig);for(;1===ne.authToken.requestStatus;)yield _t(100),ne=yield oe(P.appConfig);const Re=ne.authToken;return 0===Re.requestStatus?Ue(P,B):Re})).apply(this,arguments)}function oe(P){return Hr(P,B=>{if(!Ht(B))throw xe.create("not-registered");return function st(P){return 1===P.requestStatus&&P.requestTime+1e4<Date.now()}(B.authToken)?Object.assign(Object.assign({},B),{authToken:{requestStatus:0}}):B})}function He(P,B){return gt.apply(this,arguments)}function gt(){return(gt=(0,G.Z)(function*(P,B){try{const ne=yield jn(P,B),Re=Object.assign(Object.assign({},B),{authToken:ne});return yield pr(P.appConfig,Re),ne}catch(ne){if(!wt(ne)||401!==ne.customData.serverCode&&404!==ne.customData.serverCode){const Re=Object.assign(Object.assign({},B),{authToken:{requestStatus:0}});yield pr(P.appConfig,Re)}else yield pn(P.appConfig);throw ne}})).apply(this,arguments)}function Ht(P){return void 0!==P&&2===P.registrationStatus}function wn(P){return 2===P.requestStatus&&!function Gt(P){const B=Date.now();return B<P.creationTime||P.creationTime+P.expiresIn<B+36e5}(P)}function Mn(P){const B={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},P),{authToken:B})}function te(){return(te=(0,G.Z)(function*(P){const B=P,{installationEntry:ne,registrationPromise:Re}=yield Tn(B);return Re?Re.catch(console.error):Ue(B).catch(console.error),ne.fid})).apply(this,arguments)}function re(){return(re=(0,G.Z)(function*(P,B=!1){const ne=P;return yield Ve(ne),(yield Ue(ne,B)).token})).apply(this,arguments)}function Ve(P){return ht.apply(this,arguments)}function ht(){return(ht=(0,G.Z)(function*(P){const{registrationPromise:B}=yield Tn(P);B&&(yield B)})).apply(this,arguments)}function Oi(P){return xe.create("missing-app-config-values",{valueName:P})}const oi="installations",_n=P=>{const B=P.getProvider("app").getImmediate(),ne=function Sr(P){if(!P||!P.options)throw Oi("App Configuration");if(!P.name)throw Oi("App Name");const B=["projectId","apiKey","appId"];for(const ne of B)if(!P.options[ne])throw Oi(ne);return{appName:P.name,projectId:P.options.projectId,apiKey:P.options.apiKey,appId:P.options.appId}}(B);return{app:B,appConfig:ne,heartbeatServiceProvider:(0,Ee._getProvider)(B,"heartbeat"),_delete:()=>Promise.resolve()}},ir=P=>{const B=P.getProvider("app").getImmediate(),ne=(0,Ee._getProvider)(B,oi).getImmediate();return{getId:()=>function Le(P){return te.apply(this,arguments)}(ne),getToken:rt=>function he(P){return re.apply(this,arguments)}(ne,rt)}};(function Qr(){(0,Ee._registerComponent)(new Te.wA(oi,_n,"PUBLIC")),(0,Ee._registerComponent)(new Te.wA("installations-internal",ir,"PRIVATE"))})(),(0,Ee.registerVersion)(_e,"0.5.9"),(0,Ee.registerVersion)(_e,"0.5.9","esm2017");const Ei="@firebase/remote-config",Pr=new de.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class hr{constructor(B,ne,Re,rt){this.client=B,this.storage=ne,this.storageCache=Re,this.logger=rt}isCachedDataFresh(B,ne){if(!ne)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Re=Date.now()-ne,rt=Re<=B;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Re}. Cache max age millis (minimumFetchIntervalMillis setting): ${B}. Is cache hit: ${rt}.`),rt}fetch(B){var ne=this;return(0,G.Z)(function*(){const[Re,rt]=yield Promise.all([ne.storage.getLastSuccessfulFetchTimestampMillis(),ne.storage.getLastSuccessfulFetchResponse()]);if(rt&&ne.isCachedDataFresh(B.cacheMaxAgeMillis,Re))return rt;B.eTag=rt&&rt.eTag;const ft=yield ne.client.fetch(B),$t=[ne.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ft.status&&$t.push(ne.storage.setLastSuccessfulFetchResponse(ft)),yield Promise.all($t),ft})()}}function os(P=navigator){return P.languages&&P.languages[0]||P.language}class Fr{constructor(B,ne,Re,rt,ft,$t){this.firebaseInstallations=B,this.sdkVersion=ne,this.namespace=Re,this.projectId=rt,this.apiKey=ft,this.appId=$t}fetch(B){var ne=this;return(0,G.Z)(function*(){const[Re,rt]=yield Promise.all([ne.firebaseInstallations.getId(),ne.firebaseInstallations.getToken()]),$t=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ne.projectId}/namespaces/${ne.namespace}:fetch?key=${ne.apiKey}`,ln={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":B.eTag||"*"},Kn={sdk_version:ne.sdkVersion,app_instance_id:Re,app_instance_id_token:rt,app_id:ne.appId,language_code:os()},kn={method:"POST",headers:ln,body:JSON.stringify(Kn)},Vr=fetch($t,kn),sr=new Promise((_a,Pa)=>{B.signal.addEventListener(()=>{const Xa=new Error("The operation was aborted.");Xa.name="AbortError",Pa(Xa)})});let Yn;try{yield Promise.race([Vr,sr]),Yn=yield Vr}catch(_a){let Pa="fetch-client-network";throw"AbortError"===_a.name&&(Pa="fetch-timeout"),Pr.create(Pa,{originalErrorMessage:_a.message})}let ds=Yn.status;const vl=Yn.headers.get("ETag")||void 0;let Ja,na;if(200===Yn.status){let _a;try{_a=yield Yn.json()}catch(Pa){throw Pr.create("fetch-client-parse",{originalErrorMessage:Pa.message})}Ja=_a.entries,na=_a.state}if("INSTANCE_STATE_UNSPECIFIED"===na?ds=500:"NO_CHANGE"===na?ds=304:("NO_TEMPLATE"===na||"EMPTY_CONFIG"===na)&&(Ja={}),304!==ds&&200!==ds)throw Pr.create("fetch-status",{httpStatus:ds});return{status:ds,eTag:vl,config:Ja}})()}}class as{constructor(B,ne){this.client=B,this.storage=ne}fetch(B){var ne=this;return(0,G.Z)(function*(){const Re=(yield ne.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ne.attemptFetch(B,Re)})()}attemptFetch(B,{throttleEndTimeMillis:ne,backoffCount:Re}){var rt=this;return(0,G.Z)(function*(){yield function Zo(P,B){return new Promise((ne,Re)=>{const rt=Math.max(B-Date.now(),0),ft=setTimeout(ne,rt);P.addEventListener(()=>{clearTimeout(ft),Re(Pr.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}(B.signal,ne);try{const ft=yield rt.client.fetch(B);return yield rt.storage.deleteThrottleMetadata(),ft}catch(ft){if(!function la(P){if(!(P instanceof de.ZR&&P.customData))return!1;const B=Number(P.customData.httpStatus);return 429===B||500===B||503===B||504===B}(ft))throw ft;const $t={throttleEndTimeMillis:Date.now()+(0,de.$s)(Re),backoffCount:Re+1};return yield rt.storage.setThrottleMetadata($t),rt.attemptFetch(B,$t)}})()}}class Fo{constructor(B,ne,Re,rt,ft){this.app=B,this._client=ne,this._storageCache=Re,this._storage=rt,this._logger=ft,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ji(P,B){const ne=P.target.error||void 0;return Pr.create(B,{originalErrorMessage:ne&&ne.message})}const uo="app_namespace_store";class us{constructor(B,ne,Re,rt=function Yo(){return new Promise((P,B)=>{try{const ne=indexedDB.open("firebase_remote_config",1);ne.onerror=Re=>{B(Ji(Re,"storage-open"))},ne.onsuccess=Re=>{P(Re.target.result)},ne.onupgradeneeded=Re=>{0===Re.oldVersion&&Re.target.result.createObjectStore(uo,{keyPath:"compositeKey"})}}catch(ne){B(Pr.create("storage-open",{originalErrorMessage:ne}))}})}()){this.appId=B,this.appName=ne,this.namespace=Re,this.openDbPromise=rt}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(B){return this.set("last_fetch_status",B)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(B){return this.set("last_successful_fetch_timestamp_millis",B)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(B){return this.set("last_successful_fetch_response",B)}getActiveConfig(){return this.get("active_config")}setActiveConfig(B){return this.set("active_config",B)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(B){return this.set("active_config_etag",B)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(B){return this.set("throttle_metadata",B)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(B){var ne=this;return(0,G.Z)(function*(){const Re=yield ne.openDbPromise;return new Promise((rt,ft)=>{const ln=Re.transaction([uo],"readonly").objectStore(uo),Kn=ne.createCompositeKey(B);try{const kn=ln.get(Kn);kn.onerror=Vr=>{ft(Ji(Vr,"storage-get"))},kn.onsuccess=Vr=>{const sr=Vr.target.result;rt(sr?sr.value:void 0)}}catch(kn){ft(Pr.create("storage-get",{originalErrorMessage:kn&&kn.message}))}})})()}set(B,ne){var Re=this;return(0,G.Z)(function*(){const rt=yield Re.openDbPromise;return new Promise((ft,$t)=>{const Kn=rt.transaction([uo],"readwrite").objectStore(uo),kn=Re.createCompositeKey(B);try{const Vr=Kn.put({compositeKey:kn,value:ne});Vr.onerror=sr=>{$t(Ji(sr,"storage-set"))},Vr.onsuccess=()=>{ft()}}catch(Vr){$t(Pr.create("storage-set",{originalErrorMessage:Vr&&Vr.message}))}})})()}delete(B){var ne=this;return(0,G.Z)(function*(){const Re=yield ne.openDbPromise;return new Promise((rt,ft)=>{const ln=Re.transaction([uo],"readwrite").objectStore(uo),Kn=ne.createCompositeKey(B);try{const kn=ln.delete(Kn);kn.onerror=Vr=>{ft(Ji(Vr,"storage-delete"))},kn.onsuccess=()=>{rt()}}catch(kn){ft(Pr.create("storage-delete",{originalErrorMessage:kn&&kn.message}))}})})()}createCompositeKey(B){return[this.appId,this.appName,this.namespace,B].join()}}class Ni{constructor(B){this.storage=B}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var B=this;return(0,G.Z)(function*(){const ne=B.storage.getLastFetchStatus(),Re=B.storage.getLastSuccessfulFetchTimestampMillis(),rt=B.storage.getActiveConfig(),ft=yield ne;ft&&(B.lastFetchStatus=ft);const $t=yield Re;$t&&(B.lastSuccessfulFetchTimestampMillis=$t);const ln=yield rt;ln&&(B.activeConfig=ln)})()}setLastFetchStatus(B){return this.lastFetchStatus=B,this.storage.setLastFetchStatus(B)}setLastSuccessfulFetchTimestampMillis(B){return this.lastSuccessfulFetchTimestampMillis=B,this.storage.setLastSuccessfulFetchTimestampMillis(B)}setActiveConfig(B){return this.activeConfig=B,this.storage.setActiveConfig(B)}}function lo(){return bs.apply(this,arguments)}function bs(){return(bs=(0,G.Z)(function*(){if(!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(P){return!1}})).apply(this,arguments)}!function Lo(){(0,Ee._registerComponent)(new Te.wA("remote-config",function P(B,{instanceIdentifier:ne}){const Re=B.getProvider("app").getImmediate(),rt=B.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Pr.create("registration-window");if(!(0,de.hl)())throw Pr.create("indexed-db-unavailable");const{projectId:ft,apiKey:$t,appId:ln}=Re.options;if(!ft)throw Pr.create("registration-project-id");if(!$t)throw Pr.create("registration-api-key");if(!ln)throw Pr.create("registration-app-id");const Kn=new us(ln,Re.name,ne=ne||"firebase"),kn=new Ni(Kn),Vr=new be.Yd(Ei);Vr.logLevel=be.in.ERROR;const sr=new Fr(rt,Ee.SDK_VERSION,ne,ft,$t,ln),Yn=new as(sr,Kn),ds=new hr(Yn,Kn,kn,Vr),vl=new Fo(Re,ds,kn,Kn,Vr);return function Q(P){const B=(0,de.m9)(P);B._initializePromise||(B._initializePromise=B._storageCache.loadFromStorage().then(()=>{B._isInitializationComplete=!0}))}(vl),vl},"PUBLIC").setMultipleInstances(!0)),(0,Ee.registerVersion)(Ei,"0.3.8"),(0,Ee.registerVersion)(Ei,"0.3.8","esm2017")}();const Di="/firebase-messaging-sw.js",Ii="/firebase-cloud-messaging-push-scope",Fs="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bi="google.c.a.c_id",Hs="google.c.a.c_l",ps="google.c.a.ts",gs="google.c.a.e";var fr=(()=>{return(P=fr||(fr={})).PUSH_RECEIVED="push-received",P.NOTIFICATION_CLICKED="notification-clicked",fr;var P})();function Ti(P){const B=new Uint8Array(P);return btoa(String.fromCharCode(...B)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vo(P){const ne=(P+"=".repeat((4-P.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Re=atob(ne),rt=new Uint8Array(Re.length);for(let ft=0;ft<Re.length;++ft)rt[ft]=Re.charCodeAt(ft);return rt}const Fi="fcm_token_details_db",Xi="fcm_token_object_Store";function Ca(P){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,G.Z)(function*(P){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ft=>ft.name).includes(Fi))return null;let B=null;return(yield(0,ce.X3)(Fi,5,{upgrade:(Re=(0,G.Z)(function*(rt,ft,$t,ln){var Kn;if(ft<2||!rt.objectStoreNames.contains(Xi))return;const kn=ln.objectStore(Xi),Vr=yield kn.index("fcmSenderId").get(P);if(yield kn.clear(),Vr)if(2===ft){const sr=Vr;if(!sr.auth||!sr.p256dh||!sr.endpoint)return;B={token:sr.fcmToken,createTime:null!==(Kn=sr.createTime)&&void 0!==Kn?Kn:Date.now(),subscriptionOptions:{auth:sr.auth,p256dh:sr.p256dh,endpoint:sr.endpoint,swScope:sr.swScope,vapidKey:"string"==typeof sr.vapidKey?sr.vapidKey:Ti(sr.vapidKey)}}}else if(3===ft){const sr=Vr;B={token:sr.fcmToken,createTime:sr.createTime,subscriptionOptions:{auth:Ti(sr.auth),p256dh:Ti(sr.p256dh),endpoint:sr.endpoint,swScope:sr.swScope,vapidKey:Ti(sr.vapidKey)}}}else if(4===ft){const sr=Vr;B={token:sr.fcmToken,createTime:sr.createTime,subscriptionOptions:{auth:Ti(sr.auth),p256dh:Ti(sr.p256dh),endpoint:sr.endpoint,swScope:sr.swScope,vapidKey:Ti(sr.vapidKey)}}}}),function(ft,$t,ln,Kn){return Re.apply(this,arguments)})})).close(),yield(0,ce.Lj)(Fi),yield(0,ce.Lj)("fcm_vapid_details_db"),yield(0,ce.Lj)("undefined"),Co(B)?B:null;var Re}),Ts.apply(this,arguments)}function Co(P){if(!P||!P.subscriptionOptions)return!1;const{subscriptionOptions:B}=P;return"number"==typeof P.createTime&&P.createTime>0&&"string"==typeof P.token&&P.token.length>0&&"string"==typeof B.auth&&B.auth.length>0&&"string"==typeof B.p256dh&&B.p256dh.length>0&&"string"==typeof B.endpoint&&B.endpoint.length>0&&"string"==typeof B.swScope&&B.swScope.length>0&&"string"==typeof B.vapidKey&&B.vapidKey.length>0}const ys="firebase-messaging-store";let Gs=null;function mr(){return Gs||(Gs=(0,ce.X3)("firebase-messaging-database",1,{upgrade:(P,B)=>{0===B&&P.createObjectStore(ys)}})),Gs}function V(P){return J.apply(this,arguments)}function J(){return(J=(0,G.Z)(function*(P){const B=Mt(P),Re=yield(yield mr()).transaction(ys).objectStore(ys).get(B);if(Re)return Re;{const rt=yield Ca(P.appConfig.senderId);if(rt)return yield U(P,rt),rt}})).apply(this,arguments)}function U(P,B){return se.apply(this,arguments)}function se(){return(se=(0,G.Z)(function*(P,B){const ne=Mt(P),rt=(yield mr()).transaction(ys,"readwrite");return yield rt.objectStore(ys).put(B,ne),yield rt.done,B})).apply(this,arguments)}function Ne(P){return yt.apply(this,arguments)}function yt(){return(yt=(0,G.Z)(function*(P){const B=Mt(P),Re=(yield mr()).transaction(ys,"readwrite");yield Re.objectStore(ys).delete(B),yield Re.done})).apply(this,arguments)}function Mt({appConfig:P}){return P.appId}const In=new de.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function _r(P,B){return Un.apply(this,arguments)}function Un(){return(Un=(0,G.Z)(function*(P,B){const ne=yield Li(P),Re=es(B),rt={method:"POST",headers:ne,body:JSON.stringify(Re)};let ft;try{ft=yield(yield fetch(vs(P.appConfig),rt)).json()}catch($t){throw In.create("token-subscribe-failed",{errorInfo:$t})}if(ft.error)throw In.create("token-subscribe-failed",{errorInfo:ft.error.message});if(!ft.token)throw In.create("token-subscribe-no-token");return ft.token})).apply(this,arguments)}function lr(P,B){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,G.Z)(function*(P,B){const ne=yield Li(P),Re=es(B.subscriptionOptions),rt={method:"PATCH",headers:ne,body:JSON.stringify(Re)};let ft;try{ft=yield(yield fetch(`${vs(P.appConfig)}/${B.token}`,rt)).json()}catch($t){throw In.create("token-update-failed",{errorInfo:$t})}if(ft.error)throw In.create("token-update-failed",{errorInfo:ft.error.message});if(!ft.token)throw In.create("token-update-no-token");return ft.token})).apply(this,arguments)}function wr(P,B){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,G.Z)(function*(P,B){const Re={method:"DELETE",headers:yield Li(P)};try{const ft=yield(yield fetch(`${vs(P.appConfig)}/${B}`,Re)).json();if(ft.error)throw In.create("token-unsubscribe-failed",{errorInfo:ft.error.message})}catch(rt){throw In.create("token-unsubscribe-failed",{errorInfo:rt})}})).apply(this,arguments)}function vs({projectId:P}){return`https://fcmregistrations.googleapis.com/v1/projects/${P}/registrations`}function Li(P){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,G.Z)(function*({appConfig:P,installations:B}){const ne=yield B.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":P.apiKey,"x-goog-firebase-installations-auth":`FIS ${ne}`})})).apply(this,arguments)}function es({p256dh:P,auth:B,endpoint:ne,vapidKey:Re}){const rt={web:{endpoint:ne,auth:B,p256dh:P}};return Re!==Fs&&(rt.web.applicationPubKey=Re),rt}const Ls=6048e5;function bo(P){return co.apply(this,arguments)}function co(){return(co=(0,G.Z)(function*(P){const B=yield Kr(P.swRegistration,P.vapidKey),ne={vapidKey:P.vapidKey,swScope:P.swRegistration.scope,endpoint:B.endpoint,auth:Ti(B.getKey("auth")),p256dh:Ti(B.getKey("p256dh"))},Re=yield V(P.firebaseDependencies);if(Re){if(Es(Re.subscriptionOptions,ne))return Date.now()>=Re.createTime+Ls?k(P,{token:Re.token,createTime:Date.now(),subscriptionOptions:ne}):Re.token;try{yield wr(P.firebaseDependencies,Re.token)}catch(rt){console.warn(rt)}return Se(P.firebaseDependencies,ne)}return Se(P.firebaseDependencies,ne)})).apply(this,arguments)}function $(P){return F.apply(this,arguments)}function F(){return(F=(0,G.Z)(function*(P){const B=yield V(P.firebaseDependencies);B&&(yield wr(P.firebaseDependencies,B.token),yield Ne(P.firebaseDependencies));const ne=yield P.swRegistration.pushManager.getSubscription();return!ne||ne.unsubscribe()})).apply(this,arguments)}function k(P,B){return ie.apply(this,arguments)}function ie(){return(ie=(0,G.Z)(function*(P,B){try{const ne=yield lr(P.firebaseDependencies,B),Re=Object.assign(Object.assign({},B),{token:ne,createTime:Date.now()});return yield U(P.firebaseDependencies,Re),ne}catch(ne){throw yield $(P),ne}})).apply(this,arguments)}function Se(P,B){return kt.apply(this,arguments)}function kt(){return(kt=(0,G.Z)(function*(P,B){const Re={token:yield _r(P,B),createTime:Date.now(),subscriptionOptions:B};return yield U(P,Re),Re.token})).apply(this,arguments)}function Kr(P,B){return yr.apply(this,arguments)}function yr(){return(yr=(0,G.Z)(function*(P,B){return(yield P.pushManager.getSubscription())||P.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vo(B)})})).apply(this,arguments)}function Es(P,B){return B.vapidKey===P.vapidKey&&B.endpoint===P.endpoint&&B.auth===P.auth&&B.p256dh===P.p256dh}function cs(P){const B={from:P.from,collapseKey:P.collapse_key,messageId:P.fcmMessageId};return function Ui(P,B){if(!B.notification)return;P.notification={};const ne=B.notification.title;ne&&(P.notification.title=ne);const Re=B.notification.body;Re&&(P.notification.body=Re);const rt=B.notification.image;rt&&(P.notification.image=rt)}(B,P),function Us(P,B){!B.data||(P.data=B.data)}(B,P),function Bo(P,B){if(!B.fcmOptions)return;P.fcmOptions={};const ne=B.fcmOptions.link;ne&&(P.fcmOptions.link=ne);const Re=B.fcmOptions.analytics_label;Re&&(P.fcmOptions.analyticsLabel=Re)}(B,P),B}function Ur(P){return"object"==typeof P&&!!P&&bi in P}function Mr(P,B){const ne=[];for(let Re=0;Re<P.length;Re++)ne.push(P.charAt(Re)),Re<B.length&&ne.push(B.charAt(Re));return ne.join("")}function As(P){return In.create("missing-app-config-values",{valueName:P})}Mr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Mr("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class tr{constructor(B,ne,Re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const rt=function $n(P){if(!P||!P.options)throw As("App Configuration Object");if(!P.name)throw As("App Name");const B=["projectId","apiKey","appId","messagingSenderId"],{options:ne}=P;for(const Re of B)if(!ne[Re])throw As(Re);return{appName:P.name,projectId:ne.projectId,apiKey:ne.apiKey,appId:ne.appId,senderId:ne.messagingSenderId}}(B);this.firebaseDependencies={app:B,appConfig:rt,installations:ne,analyticsProvider:Re}}_delete(){return Promise.resolve()}}function Ss(P){return To.apply(this,arguments)}function To(){return(To=(0,G.Z)(function*(P){try{P.swRegistration=yield navigator.serviceWorker.register(Di,{scope:Ii}),P.swRegistration.update().catch(()=>{})}catch(B){throw In.create("failed-service-worker-registration",{browserErrorMessage:B.message})}})).apply(this,arguments)}function ho(P,B){return ts.apply(this,arguments)}function ts(){return(ts=(0,G.Z)(function*(P,B){if(!B&&!P.swRegistration&&(yield Ss(P)),B||!P.swRegistration){if(!(B instanceof ServiceWorkerRegistration))throw In.create("invalid-sw-registration");P.swRegistration=B}})).apply(this,arguments)}function ni(P,B){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,G.Z)(function*(P,B){B?P.vapidKey=B:P.vapidKey||(P.vapidKey=Fs)})).apply(this,arguments)}function Qo(){return(Qo=(0,G.Z)(function*(P,B){if(!navigator)throw In.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw In.create("permission-blocked");return yield ni(P,null==B?void 0:B.vapidKey),yield ho(P,null==B?void 0:B.serviceWorkerRegistration),bo(P)})).apply(this,arguments)}function Ha(P,B,ne){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,G.Z)(function*(P,B,ne){const Re=Ga(B);(yield P.firebaseDependencies.analyticsProvider.get()).logEvent(Re,{message_id:ne[bi],message_name:ne[Hs],message_time:ne[ps],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ga(P){switch(P){case fr.NOTIFICATION_CLICKED:return"notification_open";case fr.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Da(){return(Da=(0,G.Z)(function*(P,B){const ne=B.data;if(!ne.isFirebaseMessaging)return;P.onMessageHandler&&ne.messageType===fr.PUSH_RECEIVED&&("function"==typeof P.onMessageHandler?P.onMessageHandler(cs(ne)):P.onMessageHandler.next(cs(ne)));const Re=ne.data;Ur(Re)&&"1"===Re[gs]&&(yield Ha(P,ne.messageType,Re))})).apply(this,arguments)}const jo="@firebase/messaging",Ao=P=>{const B=new tr(P.getProvider("app").getImmediate(),P.getProvider("installations-internal").getImmediate(),P.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ne=>function za(P,B){return Da.apply(this,arguments)}(B,ne)),B},So=P=>{const B=P.getProvider("messaging").getImmediate();return{getToken:Re=>function Wi(P,B){return Qo.apply(this,arguments)}(B,Re)}};function gu(){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,G.Z)(function*(){try{yield(0,de.eu)()}catch(P){return!1}return"undefined"!=typeof window&&(0,de.hl)()&&(0,de.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Gu(){(0,Ee._registerComponent)(new Te.wA("messaging",Ao,"PUBLIC")),(0,Ee._registerComponent)(new Te.wA("messaging-internal",So,"PRIVATE")),(0,Ee.registerVersion)(jo,"0.9.13"),(0,Ee.registerVersion)(jo,"0.9.13","esm2017")}();const $o="analytics",Wo="firebase_id",Aa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hi="https://www.googletagmanager.com/gtag/js",kr=new be.Yd("@firebase/analytics");function Ka(P){return Promise.all(P.map(B=>B.catch(ne=>ne)))}function da(P,B){const ne=document.createElement("script");ne.src=`${Hi}?l=${P}&id=${B}`,ne.async=!0,document.head.appendChild(ne)}function zs(P,B,ne,Re,rt,ft){return li.apply(this,arguments)}function li(){return(li=(0,G.Z)(function*(P,B,ne,Re,rt,ft){const $t=Re[rt];try{if($t)yield B[$t];else{const Kn=(yield Ka(ne)).find(kn=>kn.measurementId===rt);Kn&&(yield B[Kn.appId])}}catch(ln){kr.error(ln)}P("config",rt,ft)})).apply(this,arguments)}function Ro(P,B,ne,Re,rt){return Si.apply(this,arguments)}function Si(){return(Si=(0,G.Z)(function*(P,B,ne,Re,rt){try{let ft=[];if(rt&&rt.send_to){let $t=rt.send_to;Array.isArray($t)||($t=[$t]);const ln=yield Ka(ne);for(const Kn of $t){const kn=ln.find(sr=>sr.measurementId===Kn),Vr=kn&&B[kn.appId];if(!Vr){ft=[];break}ft.push(Vr)}}0===ft.length&&(ft=Object.values(B)),yield Promise.all(ft),P("event",Re,rt||{})}catch(ft){kr.error(ft)}})).apply(this,arguments)}function jt(){const P=window.document.getElementsByTagName("script");for(const B of Object.values(P))if(B.src&&B.src.includes(Hi))return B;return null}const Bi=new de.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Xo=new class Vn{constructor(B={},ne=1e3){this.throttleMetadata=B,this.intervalMillis=ne}getThrottleMetadata(B){return this.throttleMetadata[B]}setThrottleMetadata(B,ne){this.throttleMetadata[B]=ne}deleteThrottleMetadata(B){delete this.throttleMetadata[B]}};function Kt(P){return new Headers({Accept:"application/json","x-goog-api-key":P})}function pt(P){return It.apply(this,arguments)}function It(){return(It=(0,G.Z)(function*(P){var B;const{appId:ne,apiKey:Re}=P,rt={method:"GET",headers:Kt(Re)},ft=Aa.replace("{app-id}",ne),$t=yield fetch(ft,rt);if(200!==$t.status&&304!==$t.status){let ln="";try{const Kn=yield $t.json();(null===(B=Kn.error)||void 0===B?void 0:B.message)&&(ln=Kn.error.message)}catch(Kn){}throw Bi.create("config-fetch-failed",{httpStatus:$t.status,responseMessage:ln})}return $t.json()})).apply(this,arguments)}function _i(P){return On.apply(this,arguments)}function On(){return(On=(0,G.Z)(function*(P,B=Xo,ne){const{appId:Re,apiKey:rt,measurementId:ft}=P.options;if(!Re)throw Bi.create("no-app-id");if(!rt){if(ft)return{measurementId:ft,appId:Re};throw Bi.create("no-api-key")}const $t=B.getThrottleMetadata(Re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ln=new fa;return setTimeout((0,G.Z)(function*(){ln.abort()}),void 0!==ne?ne:6e4),qa({appId:Re,apiKey:rt,measurementId:ft},$t,ln,B)})).apply(this,arguments)}function qa(P,B,ne){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,G.Z)(function*(P,{throttleEndTimeMillis:B,backoffCount:ne},Re,rt=Xo){const{appId:ft,measurementId:$t}=P;try{yield Pc(Re,B)}catch(ln){if($t)return kr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$t} provided in the "measurementId" field in the local Firebase config. [${ln.message}]`),{appId:ft,measurementId:$t};throw ln}try{const ln=yield pt(P);return rt.deleteThrottleMetadata(ft),ln}catch(ln){if(!hi(ln)){if(rt.deleteThrottleMetadata(ft),$t)return kr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${$t} provided in the "measurementId" field in the local Firebase config. [${ln.message}]`),{appId:ft,measurementId:$t};throw ln}const Kn=503===Number(ln.customData.httpStatus)?(0,de.$s)(ne,rt.intervalMillis,30):(0,de.$s)(ne,rt.intervalMillis),kn={throttleEndTimeMillis:Date.now()+Kn,backoffCount:ne+1};return rt.setThrottleMetadata(ft,kn),kr.debug(`Calling attemptFetch again in ${Kn} millis`),qa(P,kn,Re,rt)}})).apply(this,arguments)}function Pc(P,B){return new Promise((ne,Re)=>{const rt=Math.max(B-Date.now(),0),ft=setTimeout(ne,rt);P.addEventListener(()=>{clearTimeout(ft),Re(Bi.create("fetch-throttle",{throttleEndTimeMillis:B}))})})}function hi(P){if(!(P instanceof de.ZR&&P.customData))return!1;const B=Number(P.customData.httpStatus);return 429===B||500===B||503===B||504===B}class fa{constructor(){this.listeners=[]}addEventListener(B){this.listeners.push(B)}abort(){this.listeners.forEach(B=>B())}}function _l(){return ea.apply(this,arguments)}function ea(){return(ea=(0,G.Z)(function*(){if(!(0,de.hl)())return kr.warn(Bi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,de.eu)()}catch(P){return kr.warn(Bi.create("indexeddb-unavailable",{errorInfo:P}).message),!1}return!0})).apply(this,arguments)}function gi(){return(gi=(0,G.Z)(function*(P,B,ne,Re,rt,ft,$t){var ln;const Kn=_i(P);Kn.then(ds=>{ne[ds.measurementId]=ds.appId,P.options.measurementId&&ds.measurementId!==P.options.measurementId&&kr.warn(`The measurement ID in the local Firebase config (${P.options.measurementId}) does not match the measurement ID fetched from the server (${ds.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ds=>kr.error(ds)),B.push(Kn);const kn=_l().then(ds=>{if(ds)return Re.getId()}),[Vr,sr]=yield Promise.all([Kn,kn]);jt()||da(ft,Vr.measurementId),rt("js",new Date);const Yn=null!==(ln=null==$t?void 0:$t.config)&&void 0!==ln?ln:{};return Yn.origin="firebase",Yn.update=!0,null!=sr&&(Yn[Wo]=sr),rt("config",Vr.measurementId,Yn),Vr.measurementId})).apply(this,arguments)}class Sa{constructor(B){this.app=B}_delete(){return delete R[this.app.options.appId],Promise.resolve()}}let R={},C=[];const I={};let q,Ce,L="dataLayer",Oe=!1;function qt(P,B,ne){!function Xt(){const P=[];if((0,de.ru)()&&P.push("This is a browser extension environment."),(0,de.zI)()||P.push("Cookies are not available."),P.length>0){const B=P.map((Re,rt)=>`(${rt+1}) ${Re}`).join(" "),ne=Bi.create("invalid-analytics-context",{errorInfo:B});kr.warn(ne.message)}}();const Re=P.options.appId;if(!Re)throw Bi.create("no-app-id");if(!P.options.apiKey){if(!P.options.measurementId)throw Bi.create("no-api-key");kr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${P.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=R[Re])throw Bi.create("already-exists",{id:Re});if(!Oe){!function Vs(P){let B=[];Array.isArray(window[P])?B=window[P]:window[P]=B}(L);const{wrappedGtag:ft,gtagCore:$t}=function ml(P,B,ne,Re,rt){let ft=function(...$t){window[Re].push(arguments)};return window[rt]&&"function"==typeof window[rt]&&(ft=window[rt]),window[rt]=function ha(P,B,ne,Re){function ft(){return(ft=(0,G.Z)(function*($t,ln,Kn){try{"event"===$t?yield Ro(P,B,ne,ln,Kn):"config"===$t?yield zs(P,B,ne,Re,ln,Kn):P("set",ln)}catch(kn){kr.error(kn)}})).apply(this,arguments)}return function rt($t,ln,Kn){return ft.apply(this,arguments)}}(ft,P,B,ne),{gtagCore:ft,wrappedGtag:window[rt]}}(R,C,I,L,"gtag");Ce=ft,q=$t,Oe=!0}return R[Re]=function fo(P,B,ne,Re,rt,ft,$t){return gi.apply(this,arguments)}(P,C,I,B,q,L,ne),new Sa(P)}function Pn(){return(Pn=(0,G.Z)(function*(P,B,ne,Re,rt){if(rt&&rt.global)P("event",ne,Re);else{const ft=yield B;P("event",ne,Object.assign(Object.assign({},Re),{send_to:ft}))}})).apply(this,arguments)}function pa(){return xo.apply(this,arguments)}function xo(){return(xo=(0,G.Z)(function*(){if((0,de.ru)()||!(0,de.zI)()||!(0,de.hl)())return!1;try{return yield(0,de.eu)()}catch(P){return!1}})).apply(this,arguments)}const zu="@firebase/analytics";!function ga(){(0,Ee._registerComponent)(new Te.wA($o,(B,{options:ne})=>qt(B.getProvider("app").getImmediate(),B.getProvider("installations-internal").getImmediate(),ne),"PUBLIC")),(0,Ee._registerComponent)(new Te.wA("analytics-internal",function P(B){try{const ne=B.getProvider($o).getImmediate();return{logEvent:(Re,rt,ft)=>function Ya(P,B,ne,Re){P=(0,de.m9)(P),function vn(P,B,ne,Re,rt){return Pn.apply(this,arguments)}(Ce,R[P.app.options.appId],B,ne,Re).catch(rt=>kr.error(rt))}(ne,Re,rt,ft)}}catch(ne){throw Bi.create("interop-component-reg-failed",{reason:ne})}},"PRIVATE")),(0,Ee.registerVersion)(zu,"0.7.9"),(0,Ee.registerVersion)(zu,"0.7.9","esm2017")}();var yl=S(233),Ys=S(4986),po=S(8306),si=S(8505),ma=S(5363),Os=S(9468);const Ku=new p.GfV("7.3.0"),go="__angularfire_symbol__analyticsIsSupportedValue",yi="__angularfire_symbol__analyticsIsSupported",Gi="__angularfire_symbol__remoteConfigIsSupportedValue",Qs="__angularfire_symbol__remoteConfigIsSupported",Oo="__angularfire_symbol__messagingIsSupportedValue",xa="__angularfire_symbol__messagingIsSupported";function ns(P,B,ne){if(B){if(1===B.length)return B[0];const ft=B.filter($t=>$t.app===ne);if(1===ft.length)return ft[0]}return ne.container.getProvider(P).getImmediate({optional:!0})}globalThis[yi]||(globalThis[yi]=pa().then(P=>globalThis[go]=P).catch(()=>globalThis[go]=!1)),globalThis[xa]||(globalThis[xa]=gu().then(P=>globalThis[Oo]=P).catch(()=>globalThis[Oo]=!1)),globalThis[Qs]||(globalThis[Qs]=lo().then(P=>globalThis[Gi]=P).catch(()=>globalThis[Gi]=!1));const yu=(P,B)=>{const ne=B?[B]:(0,M.C6)(),Re=[];return ne.forEach(rt=>{rt.container.getProvider(P).instances.forEach($t=>{Re.includes($t)||Re.push($t)})}),Re};function Xn(){}class mo{constructor(B,ne=yl.N){this.zone=B,this.delegate=ne}now(){return this.delegate.now()}schedule(B,ne,Re){const rt=this.zone;return this.delegate.schedule(function($t){rt.runGuarded(()=>{B.apply(this,[$t])})},ne,Re)}}class ta{constructor(B){this.zone=B,this.task=null}call(B,ne){const Re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xn,{},Xn,Xn)),ne.pipe((0,si.b)({next:Re,complete:Re,error:Re})).subscribe(B).add(Re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Oa=(()=>{class P{constructor(ne){this.ngZone=ne,this.outsideAngular=ne.runOutsideAngular(()=>new mo(Zone.current)),this.insideAngular=ne.run(()=>new mo(Zone.current,Ys.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return P.\u0275fac=function(ne){return new(ne||P)(p.LFG(p.R0b))},P.\u0275prov=p.Yz7({token:P,factory:P.\u0275fac,providedIn:"root"}),P})();function xr(){const P=globalThis.\u0275AngularFireScheduler;if(!P)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return P}function Is(P){return xr().ngZone.runOutsideAngular(()=>P())}function Po(P){return xr().ngZone.run(()=>P())}function qu(P){return P.pipe((0,ma.Q)(xr().outsideAngular))}function Zu(P){return xr(),function Wr(P){return function(ne){return(ne=ne.lift(new ta(P.ngZone))).pipe((0,Os.R)(P.outsideAngular),(0,ma.Q)(P.insideAngular))}}(xr())(P)}const Qa=(P,B)=>function(){const Re=arguments;return B&&setTimeout(()=>{"scheduled"===B.state&&B.invoke()},10),Po(()=>P.apply(void 0,Re))},ci=(P,B)=>function(){let ne;const Re=arguments;for(let ft=0;ft<arguments.length;ft++)"function"==typeof Re[ft]&&(B&&(ne||(ne=Po(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Xn,{},Xn,Xn)))),Re[ft]=Qa(Re[ft],ne));const rt=Is(()=>P.apply(this,Re));if(!B){if(rt instanceof po.y){const ft=xr();return rt.pipe((0,Os.R)(ft.outsideAngular),(0,ma.Q)(ft.insideAngular))}return Po(()=>rt)}return rt instanceof po.y?rt.pipe(Zu):rt instanceof Promise?Po(()=>new Promise((ft,$t)=>rt.then(ln=>Po(()=>ft(ln)),ln=>Po(()=>$t(ln))))):"function"==typeof rt&&ne?function(){return setTimeout(()=>{ne&&"scheduled"===ne.state&&ne.invoke()},10),rt.apply(this,arguments)}:Po(()=>rt)}},2587:(ke,ye,S)=>{S.d(ye,{$:()=>vs,A:()=>fe,B:()=>Je,G:()=>ir,H:()=>zn,J:()=>as,L:()=>wn,M:()=>bs,N:()=>ls,P:()=>xa,Q:()=>bi,R:()=>ga,T:()=>Hs,U:()=>Fs,V:()=>fr,W:()=>Ti,X:()=>Ca,Y:()=>hn,Z:()=>_r,_:()=>lr,a:()=>tn,a0:()=>bo,a1:()=>$,a2:()=>k,a3:()=>Se,a4:()=>Kr,a5:()=>Es,a6:()=>Ui,a7:()=>Us,a8:()=>Ur,a9:()=>Mr,aA:()=>El,aB:()=>Pa,aC:()=>rt,aD:()=>Re,aE:()=>Pt,aI:()=>Kt,aL:()=>gs,aa:()=>Ss,ab:()=>ho,ac:()=>ni,af:()=>Ha,ag:()=>Ga,ah:()=>za,ak:()=>ys,al:()=>ba,an:()=>Hi,ao:()=>li,ap:()=>Jn,aq:()=>Xe,ar:()=>Yt,as:()=>Ve,at:()=>wt,au:()=>Uc,av:()=>wl,aw:()=>Qe,ax:()=>je,ay:()=>ze,az:()=>Gt,b:()=>Bi,c:()=>ta,d:()=>Po,e:()=>xr,f:()=>ln,g:()=>ds,h:()=>Vr,i:()=>qt,j:()=>na,k:()=>rs,l:()=>ma,m:()=>Cf,n:()=>Fa,o:()=>ce,r:()=>Ku,s:()=>po,u:()=>Qs});var p=S(5861),M=S(2090),G=S(9681),Ee=S(655),de=S(1877),Te=S(4859);const ce={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fe={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Je=function Ae(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ot=function Ye(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},bt=new M.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),tt=new de.Yd("@firebase/auth");function xe(b,..._){tt.logLevel<=de.in.ERROR&&tt.error(`Auth (${G.SDK_VERSION}): ${b}`,..._)}function wt(b,..._){throw At(b,..._)}function Qe(b,..._){return At(b,..._)}function Ge(b,_,v){const A=Object.assign(Object.assign({},ot()),{[_]:v});return new M.LL("auth","Firebase",A).create(_,{appName:b.name})}function ut(b,_,v){if(!(_ instanceof v))throw v.name!==_.constructor.name&&wt(b,"argument-error"),Ge(b,"argument-error",`Type of ${_.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function At(b,..._){if("string"!=typeof b){const v=_[0],A=[..._.slice(1)];return A[0]&&(A[0].appName=b.name),b._errorFactory.create(v,...A)}return bt.create(b,..._)}function je(b,_,...v){if(!b)throw At(_,...v)}function it(b){const _="INTERNAL ASSERTION FAILED: "+b;throw xe(_),new Error(_)}function Xe(b,_){b||it(_)}const Fe=new Map;function ze(b){Xe(b instanceof Function,"Expected a class definition");let _=Fe.get(b);return _?(Xe(_ instanceof b,"Instance stored in cache mismatched with class"),_):(_=new b,Fe.set(b,_),_)}function Ke(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function _t(){return"http:"===St()||"https:"===St()}function St(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ot{constructor(_,v){this.shortDelay=_,this.longDelay=v,Xe(v>_,"Short delay should be less than long delay!"),this.isMobile=(0,M.uI)()||(0,M.b$)()}get(){return function nn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,M.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function en(b,_){Xe(b.emulator,"Emulator should always be set here");const{url:v}=b.emulator;return _?`${v}${_.startsWith("/")?_.slice(1):_}`:v}class Cn{static initialize(_,v,A){this.fetchImpl=_,v&&(this.headersImpl=v),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const En={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},on=new Ot(3e4,6e4);function sn(b,_){return b.tenantId&&!_.tenantId?Object.assign(Object.assign({},_),{tenantId:b.tenantId}):_}function Jt(b,_,v,A){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,p.Z)(function*(b,_,v,A,Y={}){return ar(b,Y,(0,p.Z)(function*(){let ge={},Ze={};A&&("GET"===_?Ze=A:ge={body:JSON.stringify(A)});const vt=(0,M.xO)(Object.assign({key:b.config.apiKey},Ze)).slice(1),cn=yield b._getAdditionalHeaders();return cn["Content-Type"]="application/json",b.languageCode&&(cn["X-Firebase-Locale"]=b.languageCode),Cn.fetch()(ur(b,b.config.apiHost,v,vt),Object.assign({method:_,headers:cn,referrerPolicy:"no-referrer"},ge))}))})).apply(this,arguments)}function ar(b,_,v){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,p.Z)(function*(b,_,v){b._canInitEmulator=!1;const A=Object.assign(Object.assign({},En),_);try{const Y=new Ar(b),ge=yield Promise.race([v(),Y.promise]);Y.clearNetworkTimeout();const Ze=yield ge.json();if("needConfirmation"in Ze)throw qn(b,"account-exists-with-different-credential",Ze);if(ge.ok&&!("errorMessage"in Ze))return Ze;{const vt=ge.ok?Ze.errorMessage:Ze.error.message,[cn,Fn]=vt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===cn)throw qn(b,"credential-already-in-use",Ze);if("EMAIL_EXISTS"===cn)throw qn(b,"email-already-in-use",Ze);if("USER_DISABLED"===cn)throw qn(b,"user-disabled",Ze);const or=A[cn]||cn.toLowerCase().replace(/[_\s]+/g,"-");if(Fn)throw Ge(b,or,Fn);wt(b,or)}}catch(Y){if(Y instanceof M.ZR)throw Y;wt(b,"network-request-failed")}})).apply(this,arguments)}function Ln(b,_,v,A){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,p.Z)(function*(b,_,v,A,Y={}){const ge=yield Jt(b,_,v,A,Y);return"mfaPendingCredential"in ge&&wt(b,"multi-factor-auth-required",{_serverResponse:ge}),ge})).apply(this,arguments)}function ur(b,_,v,A){const Y=`${_}${v}?${A}`;return b.config.emulator?en(b.config,Y):`${b.config.apiScheme}://${Y}`}class Ar{constructor(_){this.auth=_,this.timer=null,this.promise=new Promise((v,A)=>{this.timer=setTimeout(()=>A(Qe(this.auth,"network-request-failed")),on.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(b,_,v){const A={appName:b.name};v.email&&(A.email=v.email),v.phoneNumber&&(A.phoneNumber=v.phoneNumber);const Y=Qe(b,_,A);return Y.customData._tokenResponse=v,Y}function Ut(){return(Ut=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:delete",_)})).apply(this,arguments)}function pr(b,_){return An.apply(this,arguments)}function An(){return(An=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function pn(b,_){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:lookup",_)})).apply(this,arguments)}function Hr(b){if(b)try{const _=new Date(Number(b));if(!isNaN(_.getTime()))return _.toUTCString()}catch(_){}}function vr(){return(vr=(0,p.Z)(function*(b,_=!1){const v=(0,M.m9)(b),A=yield v.getIdToken(_),Y=Vt(A);je(Y&&Y.exp&&Y.auth_time&&Y.iat,v.auth,"internal-error");const ge="object"==typeof Y.firebase?Y.firebase:void 0,Ze=null==ge?void 0:ge.sign_in_provider;return{claims:Y,token:A,authTime:Hr($r(Y.auth_time)),issuedAtTime:Hr($r(Y.iat)),expirationTime:Hr($r(Y.exp)),signInProvider:Ze||null,signInSecondFactor:(null==ge?void 0:ge.sign_in_second_factor)||null}})).apply(this,arguments)}function $r(b){return 1e3*Number(b)}function Vt(b){const[_,v,A]=b.split(".");if(void 0===_||void 0===v||void 0===A)return xe("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,M.tV)(v);return Y?JSON.parse(Y):(xe("Failed to decode base64 JWT payload"),null)}catch(Y){return xe("Caught error parsing JWT payload as JSON",Y),null}}function Wt(b,_){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(b,_,v=!1){if(v)return _;try{return yield _}catch(A){throw A instanceof M.ZR&&zr(A)&&b.auth.currentUser===b&&(yield b.auth.signOut()),A}})).apply(this,arguments)}function zr({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Bn{constructor(_){this.user=_,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(_){var v;if(_){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const Y=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,Y)}}schedule(_=!1){var v=this;if(!this.isRunning)return;const A=this.getInterval(_);this.timerId=setTimeout((0,p.Z)(function*(){yield v.iteration()}),A)}iteration(){var _=this;return(0,p.Z)(function*(){try{yield _.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v.code&&_.schedule(!0))}_.schedule()})()}}class di{constructor(_,v){this.createdAt=_,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hr(this.lastLoginAt),this.creationTime=Hr(this.createdAt)}_copy(_){this.createdAt=_.createdAt,this.lastLoginAt=_.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gr(b){return jn.apply(this,arguments)}function jn(){return(jn=(0,p.Z)(function*(b){var _;const v=b.auth,A=yield b.getIdToken(),Y=yield Wt(b,pn(v,{idToken:A}));je(null==Y?void 0:Y.users.length,v,"internal-error");const ge=Y.users[0];b._notifyReloadListener(ge);const Ze=(null===(_=ge.providerUserInfo)||void 0===_?void 0:_.length)?Et(ge.providerUserInfo):[],vt=Ue(b.providerData,Ze),or=!!b.isAnonymous&&!(b.email&&ge.passwordHash||(null==vt?void 0:vt.length)),Ci={uid:ge.localId,displayName:ge.displayName||null,photoURL:ge.photoUrl||null,email:ge.email||null,emailVerified:ge.emailVerified||!1,phoneNumber:ge.phoneNumber||null,tenantId:ge.tenantId||null,providerData:vt,metadata:new di(ge.createdAt,ge.lastLoginAt),isAnonymous:or};Object.assign(b,Ci)})).apply(this,arguments)}function Pe(){return(Pe=(0,p.Z)(function*(b){const _=(0,M.m9)(b);yield gr(_),yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)})).apply(this,arguments)}function Ue(b,_){return[...b.filter(A=>!_.some(Y=>Y.providerId===A.providerId)),..._]}function Et(b){return b.map(_=>{var{providerId:v}=_,A=(0,Ee._T)(_,["providerId"]);return{providerId:v,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function j(){return(j=(0,p.Z)(function*(b,_){const v=yield ar(b,{},(0,p.Z)(function*(){const A=(0,M.xO)({grant_type:"refresh_token",refresh_token:_}).slice(1),{tokenApiHost:Y,apiKey:ge}=b.config,Ze=ur(b,Y,"/v1/token",`key=${ge}`),vt=yield b._getAdditionalHeaders();return vt["Content-Type"]="application/x-www-form-urlencoded",Cn.fetch()(Ze,{method:"POST",headers:vt,body:A})}));return{accessToken:v.access_token,expiresIn:v.expires_in,refreshToken:v.refresh_token}})).apply(this,arguments)}class oe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(_){je(_.idToken,"internal-error"),je(void 0!==_.idToken,"internal-error"),je(void 0!==_.refreshToken,"internal-error");const v="expiresIn"in _&&void 0!==_.expiresIn?Number(_.expiresIn):function an(b){const _=Vt(b);return je(_,"internal-error"),je(void 0!==_.exp,"internal-error"),je(void 0!==_.iat,"internal-error"),Number(_.exp)-Number(_.iat)}(_.idToken);this.updateTokensAndExpiration(_.idToken,_.refreshToken,v)}getToken(_,v=!1){var A=this;return(0,p.Z)(function*(){return je(!A.accessToken||A.refreshToken,_,"user-token-expired"),v||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(_,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(_,v){var A=this;return(0,p.Z)(function*(){const{accessToken:Y,refreshToken:ge,expiresIn:Ze}=yield function ue(b,_){return j.apply(this,arguments)}(_,v);A.updateTokensAndExpiration(Y,ge,Number(Ze))})()}updateTokensAndExpiration(_,v,A){this.refreshToken=v||null,this.accessToken=_||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(_,v){const{refreshToken:A,accessToken:Y,expirationTime:ge}=v,Ze=new oe;return A&&(je("string"==typeof A,"internal-error",{appName:_}),Ze.refreshToken=A),Y&&(je("string"==typeof Y,"internal-error",{appName:_}),Ze.accessToken=Y),ge&&(je("number"==typeof ge,"internal-error",{appName:_}),Ze.expirationTime=ge),Ze}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(_){this.accessToken=_.accessToken,this.refreshToken=_.refreshToken,this.expirationTime=_.expirationTime}_clone(){return Object.assign(new oe,this.toJSON())}_performRefresh(){return it("not implemented")}}function He(b,_){je("string"==typeof b||void 0===b,"internal-error",{appName:_})}class gt{constructor(_){var{uid:v,auth:A,stsTokenManager:Y}=_,ge=(0,Ee._T)(_,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=A,this.stsTokenManager=Y,this.accessToken=Y.accessToken,this.displayName=ge.displayName||null,this.email=ge.email||null,this.emailVerified=ge.emailVerified||!1,this.phoneNumber=ge.phoneNumber||null,this.photoURL=ge.photoURL||null,this.isAnonymous=ge.isAnonymous||!1,this.tenantId=ge.tenantId||null,this.providerData=ge.providerData?[...ge.providerData]:[],this.metadata=new di(ge.createdAt||void 0,ge.lastLoginAt||void 0)}getIdToken(_){var v=this;return(0,p.Z)(function*(){const A=yield Wt(v,v.stsTokenManager.getToken(v.auth,_));return je(A,v.auth,"internal-error"),v.accessToken!==A&&(v.accessToken=A,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),A})()}getIdTokenResult(_){return function Tn(b){return vr.apply(this,arguments)}(this,_)}reload(){return function Me(b){return Pe.apply(this,arguments)}(this)}_assign(_){this!==_&&(je(this.uid===_.uid,this.auth,"internal-error"),this.displayName=_.displayName,this.photoURL=_.photoURL,this.email=_.email,this.emailVerified=_.emailVerified,this.phoneNumber=_.phoneNumber,this.isAnonymous=_.isAnonymous,this.tenantId=_.tenantId,this.providerData=_.providerData.map(v=>Object.assign({},v)),this.metadata._copy(_.metadata),this.stsTokenManager._assign(_.stsTokenManager))}_clone(_){return new gt(Object.assign(Object.assign({},this),{auth:_,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(_){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=_,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(_){this.reloadListener?this.reloadListener(_):this.reloadUserInfo=_}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(_,v=!1){var A=this;return(0,p.Z)(function*(){let Y=!1;_.idToken&&_.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(_),Y=!0),v&&(yield gr(A)),yield A.auth._persistUserIfCurrent(A),Y&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var _=this;return(0,p.Z)(function*(){const v=yield _.getIdToken();return yield Wt(_,function jr(b,_){return Ut.apply(this,arguments)}(_.auth,{idToken:v})),_.stsTokenManager.clearRefreshToken(),_.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(_=>Object.assign({},_)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(_,v){var A,Y,ge,Ze,vt,cn,Fn,or;const Ci=null!==(A=v.displayName)&&void 0!==A?A:void 0,$i=null!==(Y=v.email)&&void 0!==Y?Y:void 0,La=null!==(ge=v.phoneNumber)&&void 0!==ge?ge:void 0,su=null!==(Ze=v.photoURL)&&void 0!==Ze?Ze:void 0,Iu=null!==(vt=v.tenantId)&&void 0!==vt?vt:void 0,yh=null!==(cn=v._redirectEventId)&&void 0!==cn?cn:void 0,Cu=null!==(Fn=v.createdAt)&&void 0!==Fn?Fn:void 0,ei=null!==(or=v.lastLoginAt)&&void 0!==or?or:void 0,{uid:Bc,emailVerified:Dl,isAnonymous:ou,providerData:va,stsTokenManager:Ua}=v;je(Bc&&Ua,_,"internal-error");const jc=oe.fromJSON(this.name,Ua);je("string"==typeof Bc,_,"internal-error"),He(Ci,_.name),He($i,_.name),je("boolean"==typeof Dl,_,"internal-error"),je("boolean"==typeof ou,_,"internal-error"),He(La,_.name),He(su,_.name),He(Iu,_.name),He(yh,_.name),He(Cu,_.name),He(ei,_.name);const Du=new gt({uid:Bc,auth:_,email:$i,emailVerified:Dl,displayName:Ci,isAnonymous:ou,photoURL:su,phoneNumber:La,tenantId:Iu,stsTokenManager:jc,createdAt:Cu,lastLoginAt:ei});return va&&Array.isArray(va)&&(Du.providerData=va.map(vh=>Object.assign({},vh))),yh&&(Du._redirectEventId=yh),Du}static _fromIdTokenResponse(_,v,A=!1){return(0,p.Z)(function*(){const Y=new oe;Y.updateFromServerResponse(v);const ge=new gt({uid:v.localId,auth:_,stsTokenManager:Y,isAnonymous:A});return yield gr(ge),ge})()}}const wn=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(v,A){var Y=this;return(0,p.Z)(function*(){Y.storage[v]=A})()}_get(v){var A=this;return(0,p.Z)(function*(){const Y=A.storage[v];return void 0===Y?null:Y})()}_remove(v){var A=this;return(0,p.Z)(function*(){delete A.storage[v]})()}_addListener(v,A){}_removeListener(v,A){}}return b.type="NONE",b})();function Gt(b,_,v){return`firebase:${b}:${_}:${v}`}class Mn{constructor(_,v,A){this.persistence=_,this.auth=v,this.userKey=A;const{config:Y,name:ge}=this.auth;this.fullUserKey=Gt(this.userKey,Y.apiKey,ge),this.fullPersistenceKey=Gt("persistence",Y.apiKey,ge),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(_){return this.persistence._set(this.fullUserKey,_.toJSON())}getCurrentUser(){var _=this;return(0,p.Z)(function*(){const v=yield _.persistence._get(_.fullUserKey);return v?gt._fromJSON(_.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(_){var v=this;return(0,p.Z)(function*(){if(v.persistence===_)return;const A=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=_,A?v.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(_,v,A="authUser"){return(0,p.Z)(function*(){if(!v.length)return new Mn(ze(wn),_,A);const Y=(yield Promise.all(v.map(function(){var Fn=(0,p.Z)(function*(or){if(yield or._isAvailable())return or});return function(or){return Fn.apply(this,arguments)}}()))).filter(Fn=>Fn);let ge=Y[0]||ze(wn);const Ze=Gt(A,_.config.apiKey,_.name);let vt=null;for(const Fn of v)try{const or=yield Fn._get(Ze);if(or){const Ci=gt._fromJSON(_,or);Fn!==ge&&(vt=Ci),ge=Fn;break}}catch(or){}const cn=Y.filter(Fn=>Fn._shouldAllowMigration);return ge._shouldAllowMigration&&cn.length?(ge=cn[0],vt&&(yield ge._set(Ze,vt.toJSON())),yield Promise.all(v.map(function(){var Fn=(0,p.Z)(function*(or){if(or!==ge)try{yield or._remove(Ze)}catch(Ci){}});return function(or){return Fn.apply(this,arguments)}}())),new Mn(ge,_,A)):new Mn(ge,_,A)})()}}function st(b){const _=b.toLowerCase();if(_.includes("opera/")||_.includes("opr/")||_.includes("opios/"))return"Opera";if(re(_))return"IEMobile";if(_.includes("msie")||_.includes("trident/"))return"IE";if(_.includes("edge/"))return"Edge";if(Le(_))return"Firefox";if(_.includes("silk/"))return"Silk";if(ht(_))return"Blackberry";if(Lt(_))return"Webos";if(te(_))return"Safari";if((_.includes("chrome/")||he(_))&&!_.includes("edge/"))return"Chrome";if(Ve(_))return"Android";{const A=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function Le(b=(0,M.z$)()){return/firefox\//i.test(b)}function te(b=(0,M.z$)()){const _=b.toLowerCase();return _.includes("safari/")&&!_.includes("chrome/")&&!_.includes("crios/")&&!_.includes("android")}function he(b=(0,M.z$)()){return/crios\//i.test(b)}function re(b=(0,M.z$)()){return/iemobile/i.test(b)}function Ve(b=(0,M.z$)()){return/android/i.test(b)}function ht(b=(0,M.z$)()){return/blackberry/i.test(b)}function Lt(b=(0,M.z$)()){return/webos/i.test(b)}function Yt(b=(0,M.z$)()){return/iphone|ipad|ipod/i.test(b)}function Jn(b=(0,M.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function rr(b=(0,M.z$)()){return Yt(b)||Ve(b)||Lt(b)||ht(b)||/windows phone/i.test(b)||re(b)}function Sr(b,_=[]){let v;switch(b){case"Browser":v=st((0,M.z$)());break;case"Worker":v=`${st((0,M.z$)())}-${b}`;break;default:v=b}const A=_.length?_.join(","):"FirebaseCore-web";return`${v}/JsCore/${G.SDK_VERSION}/${A}`}class Oi{constructor(_){this.auth=_,this.queue=[]}pushCallback(_,v){const A=ge=>new Promise((Ze,vt)=>{try{Ze(_(ge))}catch(cn){vt(cn)}});A.onAbort=v,this.queue.push(A);const Y=this.queue.length-1;return()=>{this.queue[Y]=()=>Promise.resolve()}}runMiddleware(_){var v=this;return(0,p.Z)(function*(){if(v.auth.currentUser===_)return;const A=[];try{for(const Y of v.queue)yield Y(_),Y.onAbort&&A.push(Y.onAbort)}catch(Y){A.reverse();for(const ge of A)try{ge()}catch(Ze){}throw v.auth._errorFactory.create("login-blocked",{originalMessage:Y.message})}})()}}class oi{constructor(_,v,A){this.app=_,this.heartbeatServiceProvider=v,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _n(this),this.idTokenSubscription=new _n(this),this.beforeStateQueue=new Oi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=bt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=_.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(_,v){var A=this;return v&&(this._popupRedirectResolver=ze(v)),this._initializationPromise=this.queue((0,p.Z)(function*(){var Y,ge;if(!A._deleted&&(A.persistenceManager=yield Mn.create(A,_),!A._deleted)){if(null===(Y=A._popupRedirectResolver)||void 0===Y?void 0:Y._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(Ze){}yield A.initializeCurrentUser(v),A.lastNotifiedUid=(null===(ge=A.currentUser)||void 0===ge?void 0:ge.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var _=this;return(0,p.Z)(function*(){if(_._deleted)return;const v=yield _.assertedPersistence.getCurrentUser();if(_.currentUser||v){if(_.currentUser&&v&&_.currentUser.uid===v.uid)return _._currentUser._assign(v),void(yield _.currentUser.getIdToken());yield _._updateCurrentUser(v,!0)}})()}initializeCurrentUser(_){var v=this;return(0,p.Z)(function*(){var A;const Y=yield v.assertedPersistence.getCurrentUser();let ge=Y,Ze=!1;if(_&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const vt=null===(A=v.redirectUser)||void 0===A?void 0:A._redirectEventId,cn=null==ge?void 0:ge._redirectEventId,Fn=yield v.tryRedirectSignIn(_);(!vt||vt===cn)&&(null==Fn?void 0:Fn.user)&&(ge=Fn.user,Ze=!0)}if(!ge)return v.directlySetCurrentUser(null);if(!ge._redirectEventId){if(Ze)try{yield v.beforeStateQueue.runMiddleware(ge)}catch(vt){ge=Y,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject(vt))}return ge?v.reloadAndSetCurrentUserOrClear(ge):v.directlySetCurrentUser(null)}return je(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===ge._redirectEventId?v.directlySetCurrentUser(ge):v.reloadAndSetCurrentUserOrClear(ge)})()}tryRedirectSignIn(_){var v=this;return(0,p.Z)(function*(){let A=null;try{A=yield v._popupRedirectResolver._completeRedirectFn(v,_,!0)}catch(Y){yield v._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(_){var v=this;return(0,p.Z)(function*(){try{yield gr(_)}catch(A){if("auth/network-request-failed"!==A.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(_)})()}useDeviceLanguage(){this.languageCode=function rn(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var _=this;return(0,p.Z)(function*(){_._deleted=!0})()}updateCurrentUser(_){var v=this;return(0,p.Z)(function*(){const A=_?(0,M.m9)(_):null;return A&&je(A.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(A&&A._clone(v))})()}_updateCurrentUser(_,v=!1){var A=this;return(0,p.Z)(function*(){if(!A._deleted)return _&&je(A.tenantId===_.tenantId,A,"tenant-id-mismatch"),v||(yield A.beforeStateQueue.runMiddleware(_)),A.queue((0,p.Z)(function*(){yield A.directlySetCurrentUser(_),A.notifyAuthListeners()}))})()}signOut(){var _=this;return(0,p.Z)(function*(){return yield _.beforeStateQueue.runMiddleware(null),(_.redirectPersistenceManager||_._popupRedirectResolver)&&(yield _._setRedirectUser(null)),_._updateCurrentUser(null,!0)})()}setPersistence(_){var v=this;return this.queue((0,p.Z)(function*(){yield v.assertedPersistence.setPersistence(ze(_))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(_){this._errorFactory=new M.LL("auth","Firebase",_())}onAuthStateChanged(_,v,A){return this.registerStateListener(this.authStateSubscription,_,v,A)}beforeAuthStateChanged(_,v){return this.beforeStateQueue.pushCallback(_,v)}onIdTokenChanged(_,v,A){return this.registerStateListener(this.idTokenSubscription,_,v,A)}toJSON(){var _;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(_=this._currentUser)||void 0===_?void 0:_.toJSON()}}_setRedirectUser(_,v){var A=this;return(0,p.Z)(function*(){const Y=yield A.getOrInitRedirectPersistenceManager(v);return null===_?Y.removeCurrentUser():Y.setCurrentUser(_)})()}getOrInitRedirectPersistenceManager(_){var v=this;return(0,p.Z)(function*(){if(!v.redirectPersistenceManager){const A=_&&ze(_)||v._popupRedirectResolver;je(A,v,"argument-error"),v.redirectPersistenceManager=yield Mn.create(v,[ze(A._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(_){var v=this;return(0,p.Z)(function*(){var A,Y;return v._isInitialized&&(yield v.queue((0,p.Z)(function*(){}))),(null===(A=v._currentUser)||void 0===A?void 0:A._redirectEventId)===_?v._currentUser:(null===(Y=v.redirectUser)||void 0===Y?void 0:Y._redirectEventId)===_?v.redirectUser:null})()}_persistUserIfCurrent(_){var v=this;return(0,p.Z)(function*(){if(_===v.currentUser)return v.queue((0,p.Z)(function*(){return v.directlySetCurrentUser(_)}))})()}_notifyListenersIfCurrent(_){_===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var _,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(v=null===(_=this.currentUser)||void 0===_?void 0:_.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(_,v,A,Y){if(this._deleted)return()=>{};const ge="function"==typeof v?v:v.next.bind(v),Ze=this._isInitialized?Promise.resolve():this._initializationPromise;return je(Ze,this,"internal-error"),Ze.then(()=>ge(this.currentUser)),"function"==typeof v?_.addObserver(v,A,Y):_.addObserver(v)}directlySetCurrentUser(_){var v=this;return(0,p.Z)(function*(){v.currentUser&&v.currentUser!==_&&(v._currentUser._stopProactiveRefresh(),_&&v.isProactiveRefreshEnabled&&_._startProactiveRefresh()),v.currentUser=_,_?yield v.assertedPersistence.setCurrentUser(_):yield v.assertedPersistence.removeCurrentUser()})()}queue(_){return this.operations=this.operations.then(_,_),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(_){!_||this.frameworks.includes(_)||(this.frameworks.push(_),this.frameworks.sort(),this.clientVersion=Sr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var _=this;return(0,p.Z)(function*(){var v;const A={"X-Client-Version":_.clientVersion};_.app.options.appId&&(A["X-Firebase-gmpid"]=_.app.options.appId);const Y=yield null===(v=_.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();return Y&&(A["X-Firebase-Client"]=Y),A})()}}function Pt(b){return(0,M.m9)(b)}class _n{constructor(_){this.auth=_,this.observer=null,this.addObserver=(0,M.ne)(v=>this.observer=v)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ir(b,_,v){const A=Pt(b);je(A._canInitEmulator,A,"emulator-config-failed"),je(/^https?:\/\//.test(_),A,"invalid-emulator-scheme");const Y=!!(null==v?void 0:v.disableWarnings),ge=Qr(_),{host:Ze,port:vt}=function Ei(b){const _=Qr(b),v=/(\/\/)?([^?#/]+)/.exec(b.substr(_.length));if(!v)return{host:"",port:null};const A=v[2].split("@").pop()||"",Y=/^(\[[^\]]+\])(:|$)/.exec(A);if(Y){const ge=Y[1];return{host:ge,port:dr(A.substr(ge.length+1))}}{const[ge,Ze]=A.split(":");return{host:ge,port:dr(Ze)}}}(_);A.config.emulator={url:`${ge}//${Ze}${null===vt?"":`:${vt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:Ze,port:vt,protocol:ge.replace(":",""),options:Object.freeze({disableWarnings:Y})}),Y||function wi(){function b(){const _=document.createElement("p"),v=_.style;_.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",_.classList.add("firebase-emulator-warning"),document.body.appendChild(_)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function Qr(b){const _=b.indexOf(":");return _<0?"":b.substr(0,_+1)}function dr(b){if(!b)return null;const _=Number(b);return isNaN(_)?null:_}class zn{constructor(_,v){this.providerId=_,this.signInMethod=v}toJSON(){return it("not implemented")}_getIdTokenResponse(_){return it("not implemented")}_linkToIdToken(_,v){return it("not implemented")}_getReauthenticationResolver(_){return it("not implemented")}}function mi(b,_){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:resetPassword",sn(b,_))})).apply(this,arguments)}function xn(b,_){return ti.apply(this,arguments)}function ti(){return(ti=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Qi(b,_){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:update",sn(b,_))})).apply(this,arguments)}function Er(){return(Er=(0,p.Z)(function*(b,_){return Ln(b,"POST","/v1/accounts:signInWithPassword",sn(b,_))})).apply(this,arguments)}function Jr(b,_){return ve.apply(this,arguments)}function ve(){return(ve=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:sendOobCode",sn(b,_))})).apply(this,arguments)}function le(b,_){return Q.apply(this,arguments)}function Q(){return(Q=(0,p.Z)(function*(b,_){return Jr(b,_)})).apply(this,arguments)}function me(b,_){return $e.apply(this,arguments)}function $e(){return($e=(0,p.Z)(function*(b,_){return Jr(b,_)})).apply(this,arguments)}function qe(b,_){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,p.Z)(function*(b,_){return Jr(b,_)})).apply(this,arguments)}function yn(b,_){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,p.Z)(function*(b,_){return Jr(b,_)})).apply(this,arguments)}function Sn(){return(Sn=(0,p.Z)(function*(b,_){return Ln(b,"POST","/v1/accounts:signInWithEmailLink",sn(b,_))})).apply(this,arguments)}function hr(){return(hr=(0,p.Z)(function*(b,_){return Ln(b,"POST","/v1/accounts:signInWithEmailLink",sn(b,_))})).apply(this,arguments)}class os extends zn{constructor(_,v,A,Y=null){super("password",A),this._email=_,this._password=v,this._tenantId=Y}static _fromEmailAndPassword(_,v){return new os(_,v,"password")}static _fromEmailAndCode(_,v,A=null){return new os(_,v,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_;if((null==v?void 0:v.email)&&(null==v?void 0:v.password)){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(_){var v=this;return(0,p.Z)(function*(){switch(v.signInMethod){case"password":return function Rr(b,_){return Er.apply(this,arguments)}(_,{returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function gn(b,_){return Sn.apply(this,arguments)}(_,{email:v._email,oobCode:v._password});default:wt(_,"internal-error")}})()}_linkToIdToken(_,v){var A=this;return(0,p.Z)(function*(){switch(A.signInMethod){case"password":return xn(_,{idToken:v,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function ai(b,_){return hr.apply(this,arguments)}(_,{idToken:v,email:A._email,oobCode:A._password});default:wt(_,"internal-error")}})()}_getReauthenticationResolver(_){return this._getIdTokenResponse(_)}}function Fr(b,_){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,p.Z)(function*(b,_){return Ln(b,"POST","/v1/accounts:signInWithIdp",sn(b,_))})).apply(this,arguments)}class as extends zn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(_){const v=new as(_.providerId,_.signInMethod);return _.idToken||_.accessToken?(_.idToken&&(v.idToken=_.idToken),_.accessToken&&(v.accessToken=_.accessToken),_.nonce&&!_.pendingToken&&(v.nonce=_.nonce),_.pendingToken&&(v.pendingToken=_.pendingToken)):_.oauthToken&&_.oauthTokenSecret?(v.accessToken=_.oauthToken,v.secret=_.oauthTokenSecret):wt("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:A,signInMethod:Y}=v,ge=(0,Ee._T)(v,["providerId","signInMethod"]);if(!A||!Y)return null;const Ze=new as(A,Y);return Ze.idToken=ge.idToken||void 0,Ze.accessToken=ge.accessToken||void 0,Ze.secret=ge.secret,Ze.nonce=ge.nonce,Ze.pendingToken=ge.pendingToken||null,Ze}_getIdTokenResponse(_){return Fr(_,this.buildRequest())}_linkToIdToken(_,v){const A=this.buildRequest();return A.idToken=v,Fr(_,A)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Fr(_,v)}buildRequest(){const _={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)_.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),_.postBody=(0,M.xO)(v)}return _}}function Ws(b,_){return ks.apply(this,arguments)}function ks(){return(ks=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:sendVerificationCode",sn(b,_))})).apply(this,arguments)}function Ji(){return(Ji=(0,p.Z)(function*(b,_){return Ln(b,"POST","/v1/accounts:signInWithPhoneNumber",sn(b,_))})).apply(this,arguments)}function fs(){return(fs=(0,p.Z)(function*(b,_){const v=yield Ln(b,"POST","/v1/accounts:signInWithPhoneNumber",sn(b,_));if(v.temporaryProof)throw qn(b,"account-exists-with-different-credential",v);return v})).apply(this,arguments)}const ca={USER_NOT_FOUND:"user-not-found"};function us(){return(us=(0,p.Z)(function*(b,_){return Ln(b,"POST","/v1/accounts:signInWithPhoneNumber",sn(b,Object.assign(Object.assign({},_),{operation:"REAUTH"})),ca)})).apply(this,arguments)}class Ni extends zn{constructor(_){super("phone","phone"),this.params=_}static _fromVerification(_,v){return new Ni({verificationId:_,verificationCode:v})}static _fromTokenResponse(_,v){return new Ni({phoneNumber:_,temporaryProof:v})}_getIdTokenResponse(_){return function Fo(b,_){return Ji.apply(this,arguments)}(_,this._makeVerificationRequest())}_linkToIdToken(_,v){return function uo(b,_){return fs.apply(this,arguments)}(_,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(_){return function Yo(b,_){return us.apply(this,arguments)}(_,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:_,phoneNumber:v,verificationId:A,verificationCode:Y}=this.params;return _&&v?{temporaryProof:_,phoneNumber:v}:{sessionInfo:A,code:Y}}toJSON(){const _={providerId:this.providerId};return this.params.phoneNumber&&(_.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(_.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(_.verificationCode=this.params.verificationCode),this.params.verificationId&&(_.verificationId=this.params.verificationId),_}static fromJSON(_){"string"==typeof _&&(_=JSON.parse(_));const{verificationId:v,verificationCode:A,phoneNumber:Y,temporaryProof:ge}=_;return A||v||Y||ge?new Ni({verificationId:v,verificationCode:A,phoneNumber:Y,temporaryProof:ge}):null}}class ki{constructor(_){var v,A,Y,ge,Ze,vt;const cn=(0,M.zd)((0,M.pd)(_)),Fn=null!==(v=cn.apiKey)&&void 0!==v?v:null,or=null!==(A=cn.oobCode)&&void 0!==A?A:null,Ci=function Lo(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Y=cn.mode)&&void 0!==Y?Y:null);je(Fn&&or&&Ci,"argument-error"),this.apiKey=Fn,this.operation=Ci,this.code=or,this.continueUrl=null!==(ge=cn.continueUrl)&&void 0!==ge?ge:null,this.languageCode=null!==(Ze=cn.languageCode)&&void 0!==Ze?Ze:null,this.tenantId=null!==(vt=cn.tenantId)&&void 0!==vt?vt:null}static parseLink(_){const v=function Uo(b){const _=(0,M.zd)((0,M.pd)(b)).link,v=_?(0,M.zd)((0,M.pd)(_)).deep_link_id:null,A=(0,M.zd)((0,M.pd)(b)).deep_link_id;return(A?(0,M.zd)((0,M.pd)(A)).link:null)||A||v||_||b}(_);try{return new ki(v)}catch(A){return null}}}let bs=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(v,A){return os._fromEmailAndPassword(v,A)}static credentialWithLink(v,A){const Y=ki.parseLink(A);return je(Y,"argument-error"),os._fromEmailAndCode(v,Y.code,Y.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Di{constructor(_){this.providerId=_,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(_){this.defaultLanguageCode=_}setCustomParameters(_){return this.customParameters=_,this}getCustomParameters(){return this.customParameters}}class Ii extends Di{constructor(){super(...arguments),this.scopes=[]}addScope(_){return this.scopes.includes(_)||this.scopes.push(_),this}getScopes(){return[...this.scopes]}}class Fs extends Ii{static credentialFromJSON(_){const v="string"==typeof _?JSON.parse(_):_;return je("providerId"in v&&"signInMethod"in v,"argument-error"),as._fromParams(v)}credential(_){return this._credential(Object.assign(Object.assign({},_),{nonce:_.rawNonce}))}_credential(_){return je(_.idToken||_.accessToken,"argument-error"),as._fromParams(Object.assign(Object.assign({},_),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(_){return Fs.oauthCredentialFromTaggedObject(_)}static credentialFromError(_){return Fs.oauthCredentialFromTaggedObject(_.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:v,oauthAccessToken:A,oauthTokenSecret:Y,pendingToken:ge,nonce:Ze,providerId:vt}=_;if(!A&&!Y&&!v&&!ge||!vt)return null;try{return new Fs(vt)._credential({idToken:v,accessToken:A,nonce:Ze,pendingToken:ge})}catch(cn){return null}}}let ls=(()=>{class b extends Ii{constructor(){super("facebook.com")}static credential(v){return as._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch(A){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),bi=(()=>{class b extends Ii{constructor(){super("google.com"),this.addScope("profile")}static credential(v,A){return as._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:A})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:A,oauthAccessToken:Y}=v;if(!A&&!Y)return null;try{return b.credential(A,Y)}catch(ge){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Hs=(()=>{class b extends Ii{constructor(){super("github.com")}static credential(v){return as._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return b.credential(v.oauthAccessToken)}catch(A){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class gs extends zn{constructor(_,v){super(_,_),this.pendingToken=v}_getIdTokenResponse(_){return Fr(_,this.buildRequest())}_linkToIdToken(_,v){const A=this.buildRequest();return A.idToken=v,Fr(_,A)}_getReauthenticationResolver(_){const v=this.buildRequest();return v.autoCreate=!1,Fr(_,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(_){const v="string"==typeof _?JSON.parse(_):_,{providerId:A,signInMethod:Y,pendingToken:ge}=v;return A&&Y&&ge&&A===Y?new gs(A,ge):null}static _create(_,v){return new gs(_,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class fr extends Di{constructor(_){je(_.startsWith("saml."),"argument-error"),super(_)}static credentialFromResult(_){return fr.samlCredentialFromTaggedObject(_)}static credentialFromError(_){return fr.samlCredentialFromTaggedObject(_.customData||{})}static credentialFromJSON(_){const v=gs.fromJSON(_);return je(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{pendingToken:v,providerId:A}=_;if(!v||!A)return null;try{return gs._create(A,v)}catch(Y){return null}}}let Ti=(()=>{class b extends Ii{constructor(){super("twitter.com")}static credential(v,A){return as._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:A})}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:A,oauthTokenSecret:Y}=v;if(!A||!Y)return null;try{return b.credential(A,Y)}catch(ge){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Vo(b,_){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,p.Z)(function*(b,_){return Ln(b,"POST","/v1/accounts:signUp",sn(b,_))})).apply(this,arguments)}class ui{constructor(_){this.user=_.user,this.providerId=_.providerId,this._tokenResponse=_._tokenResponse,this.operationType=_.operationType}static _fromIdTokenResponse(_,v,A,Y=!1){return(0,p.Z)(function*(){const ge=yield gt._fromIdTokenResponse(_,A,Y),Ze=Xi(A);return new ui({user:ge,providerId:Ze,_tokenResponse:A,operationType:v})})()}static _forOperation(_,v,A){return(0,p.Z)(function*(){yield _._updateTokensIfNecessary(A,!0);const Y=Xi(A);return new ui({user:_,providerId:Y,_tokenResponse:A,operationType:v})})()}}function Xi(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Ca(b){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,p.Z)(function*(b){var _;const v=Pt(b);if(yield v._initializationPromise,null===(_=v.currentUser)||void 0===_?void 0:_.isAnonymous)return new ui({user:v.currentUser,providerId:null,operationType:"signIn"});const A=yield Vo(v,{returnSecureToken:!0}),Y=yield ui._fromIdTokenResponse(v,"signIn",A,!0);return yield v._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class Co extends M.ZR{constructor(_,v,A,Y){var ge;super(v.code,v.message),this.operationType=A,this.user=Y,Object.setPrototypeOf(this,Co.prototype),this.customData={appName:_.name,tenantId:null!==(ge=_.tenantId)&&void 0!==ge?ge:void 0,_serverResponse:v.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(_,v,A,Y){return new Co(_,v,A,Y)}}function Do(b,_,v,A){return("reauthenticate"===_?v._getReauthenticationResolver(b):v._getIdTokenResponse(b)).catch(ge=>{throw"auth/multi-factor-auth-required"===ge.code?Co._fromErrorAndOperation(b,ge,_,A):ge})}function _s(b){return new Set(b.map(({providerId:_})=>_).filter(_=>!!_))}function ys(b,_){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,p.Z)(function*(b,_){const v=(0,M.m9)(b);yield J(!0,v,_);const{providerUserInfo:A}=yield pr(v.auth,{idToken:yield v.getIdToken(),deleteProvider:[_]}),Y=_s(A||[]);return v.providerData=v.providerData.filter(ge=>Y.has(ge.providerId)),Y.has("phone")||(v.phoneNumber=null),yield v.auth._persistUserIfCurrent(v),v})).apply(this,arguments)}function mr(b,_){return V.apply(this,arguments)}function V(){return(V=(0,p.Z)(function*(b,_,v=!1){const A=yield Wt(b,_._linkToIdToken(b.auth,yield b.getIdToken()),v);return ui._forOperation(b,"link",A)})).apply(this,arguments)}function J(b,_,v){return U.apply(this,arguments)}function U(){return(U=(0,p.Z)(function*(b,_,v){yield gr(_);const Y=!1===b?"provider-already-linked":"no-such-provider";je(_s(_.providerData).has(v)===b,_.auth,Y)})).apply(this,arguments)}function se(b,_){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,p.Z)(function*(b,_,v=!1){const{auth:A}=b,Y="reauthenticate";try{const ge=yield Wt(b,Do(A,Y,_,b),v);je(ge.idToken,A,"internal-error");const Ze=Vt(ge.idToken);je(Ze,A,"internal-error");const{sub:vt}=Ze;return je(b.uid===vt,A,"user-mismatch"),ui._forOperation(b,Y,ge)}catch(ge){throw"auth/user-not-found"===(null==ge?void 0:ge.code)&&wt(A,"user-mismatch"),ge}})).apply(this,arguments)}function yt(b,_){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,p.Z)(function*(b,_,v=!1){const A="signIn",Y=yield Do(b,A,_),ge=yield ui._fromIdTokenResponse(b,A,Y);return v||(yield b._updateCurrentUser(ge.user)),ge})).apply(this,arguments)}function hn(b,_){return In.apply(this,arguments)}function In(){return(In=(0,p.Z)(function*(b,_){return yt(Pt(b),_)})).apply(this,arguments)}function _r(b,_){return Un.apply(this,arguments)}function Un(){return(Un=(0,p.Z)(function*(b,_){const v=(0,M.m9)(b);return yield J(!1,v,_.providerId),mr(v,_)})).apply(this,arguments)}function lr(b,_){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,p.Z)(function*(b,_){return se((0,M.m9)(b),_)})).apply(this,arguments)}function wr(b,_){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,p.Z)(function*(b,_){return Ln(b,"POST","/v1/accounts:signInWithCustomToken",sn(b,_))})).apply(this,arguments)}function vs(b,_){return Li.apply(this,arguments)}function Li(){return(Li=(0,p.Z)(function*(b,_){const v=Pt(b),A=yield wr(v,{token:_,returnSecureToken:!0}),Y=yield ui._fromIdTokenResponse(v,"signIn",A);return yield v._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class Dn{constructor(_,v){this.factorId=_,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(_,v){return"phoneInfo"in v?es._fromServerResponse(_,v):wt(_,"internal-error")}}class es extends Dn{constructor(_){super("phone",_),this.phoneNumber=_.phoneInfo}static _fromServerResponse(_,v){return new es(v)}}function Ls(b,_,v){var A;je((null===(A=v.url)||void 0===A?void 0:A.length)>0,b,"invalid-continue-uri"),je(void 0===v.dynamicLinkDomain||v.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),_.continueUrl=v.url,_.dynamicLinkDomain=v.dynamicLinkDomain,_.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(je(v.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),_.iOSBundleId=v.iOS.bundleId),v.android&&(je(v.android.packageName.length>0,b,"missing-android-pkg-name"),_.androidInstallApp=v.android.installApp,_.androidMinimumVersionCode=v.android.minimumVersion,_.androidPackageName=v.android.packageName)}function bo(b,_,v){return co.apply(this,arguments)}function co(){return(co=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b),Y={requestType:"PASSWORD_RESET",email:_};v&&Ls(A,Y,v),yield me(A,Y)})).apply(this,arguments)}function $(b,_,v){return F.apply(this,arguments)}function F(){return(F=(0,p.Z)(function*(b,_,v){yield mi((0,M.m9)(b),{oobCode:_,newPassword:v})})).apply(this,arguments)}function k(b,_){return ie.apply(this,arguments)}function ie(){return(ie=(0,p.Z)(function*(b,_){yield Qi((0,M.m9)(b),{oobCode:_})})).apply(this,arguments)}function Se(b,_){return kt.apply(this,arguments)}function kt(){return(kt=(0,p.Z)(function*(b,_){const v=(0,M.m9)(b),A=yield mi(v,{oobCode:_}),Y=A.requestType;switch(je(Y,v,"internal-error"),Y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":je(A.newEmail,v,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":je(A.mfaInfo,v,"internal-error");default:je(A.email,v,"internal-error")}let ge=null;return A.mfaInfo&&(ge=Dn._fromServerResponse(Pt(v),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:ge},operation:Y}})).apply(this,arguments)}function Kr(b,_){return yr.apply(this,arguments)}function yr(){return(yr=(0,p.Z)(function*(b,_){const{data:v}=yield Se((0,M.m9)(b),_);return v.email})).apply(this,arguments)}function Es(b,_,v){return cs.apply(this,arguments)}function cs(){return(cs=(0,p.Z)(function*(b,_,v){const A=Pt(b),Y=yield Vo(A,{returnSecureToken:!0,email:_,password:v}),ge=yield ui._fromIdTokenResponse(A,"signIn",Y);return yield A._updateCurrentUser(ge.user),ge})).apply(this,arguments)}function Ui(b,_,v){return hn((0,M.m9)(b),bs.credential(_,v))}function Us(b,_,v){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b),Y={requestType:"EMAIL_SIGNIN",email:_};je(v.handleCodeInApp,A,"argument-error"),v&&Ls(A,Y,v),yield qe(A,Y)})).apply(this,arguments)}function Ur(b,_){const v=ki.parseLink(_);return"EMAIL_SIGNIN"===(null==v?void 0:v.operation)}function Mr(b,_,v){return $n.apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b),Y=bs.credentialWithLink(_,v||Ke());return je(Y._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),hn(A,Y)})).apply(this,arguments)}function As(b,_){return tr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:createAuthUri",sn(b,_))})).apply(this,arguments)}function Ss(b,_){return To.apply(this,arguments)}function To(){return(To=(0,p.Z)(function*(b,_){const A={identifier:_,continueUri:_t()?Ke():"http://localhost"},{signinMethods:Y}=yield As((0,M.m9)(b),A);return Y||[]})).apply(this,arguments)}function ho(b,_){return ts.apply(this,arguments)}function ts(){return(ts=(0,p.Z)(function*(b,_){const v=(0,M.m9)(b),Y={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};_&&Ls(v.auth,Y,_);const{email:ge}=yield le(v.auth,Y);ge!==b.email&&(yield b.reload())})).apply(this,arguments)}function ni(b,_,v){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b),ge={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:_};v&&Ls(A.auth,ge,v);const{email:Ze}=yield yn(A.auth,ge);Ze!==b.email&&(yield b.reload())})).apply(this,arguments)}function Wi(b,_){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,p.Z)(function*(b,_){return Jt(b,"POST","/v1/accounts:update",_)})).apply(this,arguments)}function Ha(b,_){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,p.Z)(function*(b,{displayName:_,photoURL:v}){if(void 0===_&&void 0===v)return;const A=(0,M.m9)(b),ge={idToken:yield A.getIdToken(),displayName:_,photoUrl:v,returnSecureToken:!0},Ze=yield Wt(A,Wi(A.auth,ge));A.displayName=Ze.displayName||null,A.photoURL=Ze.photoUrl||null;const vt=A.providerData.find(({providerId:cn})=>"password"===cn);vt&&(vt.displayName=A.displayName,vt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(Ze)})).apply(this,arguments)}function Ga(b,_){return Da((0,M.m9)(b),_,null)}function za(b,_){return Da((0,M.m9)(b),null,_)}function Da(b,_,v){return jo.apply(this,arguments)}function jo(){return(jo=(0,p.Z)(function*(b,_,v){const{auth:A}=b,ge={idToken:yield b.getIdToken(),returnSecureToken:!0};_&&(ge.email=_),v&&(ge.password=v);const Ze=yield Wt(b,xn(A,ge));yield b._updateTokensIfNecessary(Ze,!0)})).apply(this,arguments)}class Ao{constructor(_,v,A={}){this.isNewUser=_,this.providerId=v,this.profile=A}}class So extends Ao{constructor(_,v,A,Y){super(_,v,A),this.username=Y}}class Gu extends Ao{constructor(_,v){super(_,"facebook.com",v)}}class gu extends So{constructor(_,v){super(_,"github.com",v,"string"==typeof(null==v?void 0:v.login)?null==v?void 0:v.login:null)}}class Ms extends Ao{constructor(_,v){super(_,"google.com",v)}}class gl extends So{constructor(_,v,A){super(_,"twitter.com",v,A)}}function ba(b){const{user:_,_tokenResponse:v}=b;return _.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function Rs(b){var _,v;if(!b)return null;const{providerId:A}=b,Y=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},ge=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!A&&(null==b?void 0:b.idToken)){const Ze=null===(v=null===(_=Vt(b.idToken))||void 0===_?void 0:_.firebase)||void 0===v?void 0:v.sign_in_provider;if(Ze)return new Ao(ge,"anonymous"!==Ze&&"custom"!==Ze?Ze:null)}if(!A)return null;switch(A){case"facebook.com":return new Gu(ge,Y);case"github.com":return new gu(ge,Y);case"google.com":return new Ms(ge,Y);case"twitter.com":return new gl(ge,Y,b.screenName||null);case"custom":case"anonymous":return new Ao(ge,null);default:return new Ao(ge,A,Y)}}(v)}class pi{constructor(_,v){this.type=_,this.credential=v}static _fromIdtoken(_){return new pi("enroll",_)}static _fromMfaPendingCredential(_){return new pi("signin",_)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(_){var v,A;if(null==_?void 0:_.multiFactorSession){if(null===(v=_.multiFactorSession)||void 0===v?void 0:v.pendingCredential)return pi._fromMfaPendingCredential(_.multiFactorSession.pendingCredential);if(null===(A=_.multiFactorSession)||void 0===A?void 0:A.idToken)return pi._fromIdtoken(_.multiFactorSession.idToken)}return null}}class Aa{constructor(_,v,A){this.session=_,this.hints=v,this.signInResolver=A}static _fromError(_,v){const A=Pt(_),Y=v.customData._serverResponse,ge=(Y.mfaInfo||[]).map(vt=>Dn._fromServerResponse(A,vt));je(Y.mfaPendingCredential,A,"internal-error");const Ze=pi._fromMfaPendingCredential(Y.mfaPendingCredential);return new Aa(Ze,ge,function(){var vt=(0,p.Z)(function*(cn){const Fn=yield cn._process(A,Ze);delete Y.mfaInfo,delete Y.mfaPendingCredential;const or=Object.assign(Object.assign({},Y),{idToken:Fn.idToken,refreshToken:Fn.refreshToken});switch(v.operationType){case"signIn":const Ci=yield ui._fromIdTokenResponse(A,v.operationType,or);return yield A._updateCurrentUser(Ci.user),Ci;case"reauthenticate":return je(v.user,A,"internal-error"),ui._forOperation(v.user,v.operationType,or);default:wt(A,"internal-error")}});return function(cn){return vt.apply(this,arguments)}}())}resolveSignIn(_){var v=this;return(0,p.Z)(function*(){return v.signInResolver(_)})()}}function Hi(b,_){var v;const A=(0,M.m9)(b),Y=_;return je(_.customData.operationType,A,"argument-error"),je(null===(v=Y.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,A,"argument-error"),Aa._fromError(A,Y)}function kr(b,_){return Jt(b,"POST","/v2/accounts/mfaEnrollment:start",sn(b,_))}class Vs{constructor(_){this.user=_,this.enrolledFactors=[],_._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(A=>Dn._fromServerResponse(_.auth,A)))})}static _fromUser(_){return new Vs(_)}getSession(){var _=this;return(0,p.Z)(function*(){return pi._fromIdtoken(yield _.user.getIdToken())})()}enroll(_,v){var A=this;return(0,p.Z)(function*(){const Y=_,ge=yield A.getSession(),Ze=yield Wt(A.user,Y._process(A.user.auth,ge,v));return yield A.user._updateTokensIfNecessary(Ze),A.user.reload()})()}unenroll(_){var v=this;return(0,p.Z)(function*(){const A="string"==typeof _?_:_.uid,Y=yield v.user.getIdToken(),ge=yield Wt(v.user,function da(b,_){return Jt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(b,_))}(v.user.auth,{idToken:Y,mfaEnrollmentId:A}));v.enrolledFactors=v.enrolledFactors.filter(({uid:Ze})=>Ze!==A),yield v.user._updateTokensIfNecessary(ge);try{yield v.user.reload()}catch(Ze){if("auth/user-token-expired"!==Ze.code)throw Ze}})()}}const zs=new WeakMap;function li(b){const _=(0,M.m9)(b);return zs.has(_)||zs.set(_,Vs._fromUser(_)),zs.get(_)}const Ro="__sak";class Si{constructor(_,v){this.storageRetriever=_,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(Ro,"1"),this.storage.removeItem(Ro),Promise.resolve(!0)):Promise.resolve(!1)}catch(_){return Promise.resolve(!1)}}_set(_,v){return this.storage.setItem(_,JSON.stringify(v)),Promise.resolve()}_get(_){const v=this.storage.getItem(_);return Promise.resolve(v?JSON.parse(v):null)}_remove(_){return this.storage.removeItem(_),Promise.resolve()}get storage(){return this.storageRetriever()}}const Bi=(()=>{class b extends Si{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,A)=>this.onStorageEvent(v,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ha(){const b=(0,M.z$)();return te(b)||Yt(b)}()&&function pe(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=rr(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const A of Object.keys(this.listeners)){const Y=this.storage.getItem(A),ge=this.localCache[A];Y!==ge&&v(A,ge,Y)}}onStorageEvent(v,A=!1){if(!v.key)return void this.forAllChangedKeys((vt,cn,Fn)=>{this.notifyListeners(vt,Fn)});const Y=v.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const vt=this.storage.getItem(Y);if(v.newValue!==vt)null!==v.newValue?this.storage.setItem(Y,v.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===v.newValue&&!A)return}const ge=()=>{const vt=this.storage.getItem(Y);!A&&this.localCache[Y]===vt||this.notifyListeners(Y,vt)},Ze=this.storage.getItem(Y);!function fn(){return(0,M.w1)()&&10===document.documentMode}()||Ze===v.newValue||v.newValue===v.oldValue?ge():setTimeout(ge,10)}notifyListeners(v,A){this.localCache[v]=A;const Y=this.listeners[v];if(Y)for(const ge of Array.from(Y))ge(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,A,Y)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:A,newValue:Y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(A)}_removeListener(v,A){this.listeners[v]&&(this.listeners[v].delete(A),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,A){var Y=()=>super._set,ge=this;return(0,p.Z)(function*(){yield Y().call(ge,v,A),ge.localCache[v]=JSON.stringify(A)})()}_get(v){var A=()=>super._get,Y=this;return(0,p.Z)(function*(){const ge=yield A().call(Y,v);return Y.localCache[v]=JSON.stringify(ge),ge})()}_remove(v){var A=()=>super._remove,Y=this;return(0,p.Z)(function*(){yield A().call(Y,v),delete Y.localCache[v]})()}}return b.type="LOCAL",b})(),tn=(()=>{class b extends Si{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,A){}_removeListener(v,A){}}return b.type="SESSION",b})();let Xo=(()=>{class b{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const A=this.receivers.find(ge=>ge.isListeningto(v));if(A)return A;const Y=new b(v);return this.receivers.push(Y),Y}isListeningto(v){return this.eventTarget===v}handleEvent(v){var A=this;return(0,p.Z)(function*(){const Y=v,{eventId:ge,eventType:Ze,data:vt}=Y.data,cn=A.handlersMap[Ze];if(!(null==cn?void 0:cn.size))return;Y.ports[0].postMessage({status:"ack",eventId:ge,eventType:Ze});const Fn=Array.from(cn).map(function(){var Ci=(0,p.Z)(function*($i){return $i(Y.origin,vt)});return function($i){return Ci.apply(this,arguments)}}()),or=yield function Vn(b){return Promise.all(b.map(function(){var _=(0,p.Z)(function*(v){try{return{fulfilled:!0,value:yield v}}catch(A){return{fulfilled:!1,reason:A}}});return function(v){return _.apply(this,arguments)}}()))}(Fn);Y.ports[0].postMessage({status:"done",eventId:ge,eventType:Ze,response:or})})()}_subscribe(v,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(A)}_unsubscribe(v,A){this.handlersMap[v]&&A&&this.handlersMap[v].delete(A),(!A||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function Kt(b="",_=10){let v="";for(let A=0;A<_;A++)v+=Math.floor(10*Math.random());return b+v}class pt{constructor(_){this.target=_,this.handlers=new Set}removeMessageHandler(_){_.messageChannel&&(_.messageChannel.port1.removeEventListener("message",_.onMessage),_.messageChannel.port1.close()),this.handlers.delete(_)}_send(_,v,A=50){var Y=this;return(0,p.Z)(function*(){const ge="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ge)throw new Error("connection_unavailable");let Ze,vt;return new Promise((cn,Fn)=>{const or=Kt("",20);ge.port1.start();const Ci=setTimeout(()=>{Fn(new Error("unsupported_event"))},A);vt={messageChannel:ge,onMessage($i){const La=$i;if(La.data.eventId===or)switch(La.data.status){case"ack":clearTimeout(Ci),Ze=setTimeout(()=>{Fn(new Error("timeout"))},3e3);break;case"done":clearTimeout(Ze),cn(La.data.response);break;default:clearTimeout(Ci),clearTimeout(Ze),Fn(new Error("invalid_response"))}}},Y.handlers.add(vt),ge.port1.addEventListener("message",vt.onMessage),Y.target.postMessage({eventType:_,eventId:or,data:v},[ge.port2])}).finally(()=>{vt&&Y.removeMessageHandler(vt)})})()}}function It(){return window}function On(){return void 0!==It().WorkerGlobalScope&&"function"==typeof It().importScripts}function Ks(){return(Ks=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const fa="firebaseLocalStorageDb",ea="firebaseLocalStorage",fo="fbase_key";class gi{constructor(_){this.request=_}toPromise(){return new Promise((_,v)=>{this.request.addEventListener("success",()=>{_(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Sa(b,_){return b.transaction([ea],_?"readwrite":"readonly").objectStore(ea)}function C(){const b=indexedDB.open(fa,1);return new Promise((_,v)=>{b.addEventListener("error",()=>{v(b.error)}),b.addEventListener("upgradeneeded",()=>{const A=b.result;try{A.createObjectStore(ea,{keyPath:fo})}catch(Y){v(Y)}}),b.addEventListener("success",(0,p.Z)(function*(){const A=b.result;A.objectStoreNames.contains(ea)?_(A):(A.close(),yield function R(){const b=indexedDB.deleteDatabase(fa);return new gi(b).toPromise()}(),_(yield C()))}))})}function I(b,_,v){return L.apply(this,arguments)}function L(){return(L=(0,p.Z)(function*(b,_,v){const A=Sa(b,!0).put({[fo]:_,value:v});return new gi(A).toPromise()})).apply(this,arguments)}function q(){return(q=(0,p.Z)(function*(b,_){const v=Sa(b,!1).get(_),A=yield new gi(v).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function Ce(b,_){const v=Sa(b,!0).delete(_);return new gi(v).toPromise()}const qt=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,p.Z)(function*(){return v.db||(v.db=yield C()),v.db})()}_withRetries(v){var A=this;return(0,p.Z)(function*(){let Y=0;for(;;)try{const ge=yield A._openDb();return yield v(ge)}catch(ge){if(Y++>3)throw ge;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,p.Z)(function*(){return On()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,p.Z)(function*(){v.receiver=Xo._getInstance(function hi(){return On()?self:null}()),v.receiver._subscribe("keyChanged",function(){var A=(0,p.Z)(function*(Y,ge){return{keyProcessed:(yield v._poll()).includes(ge.key)}});return function(Y,ge){return A.apply(this,arguments)}}()),v.receiver._subscribe("ping",function(){var A=(0,p.Z)(function*(Y,ge){return["keyChanged"]});return function(Y,ge){return A.apply(this,arguments)}}())})()}initializeSender(){var v=this;return(0,p.Z)(function*(){var A,Y;if(v.activeServiceWorker=yield function qa(){return Ks.apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new pt(v.activeServiceWorker);const ge=yield v.sender._send("ping",{},800);!ge||(null===(A=ge[0])||void 0===A?void 0:A.fulfilled)&&(null===(Y=ge[0])||void 0===Y?void 0:Y.value.includes("keyChanged"))&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var A=this;return(0,p.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function Pc(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:v},A.serviceWorkerReceiverAvailable?800:50)}catch(Y){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const v=yield C();return yield I(v,Ro,"1"),yield Ce(v,Ro),!0}catch(v){}return!1})()}_withPendingWrite(v){var A=this;return(0,p.Z)(function*(){A.pendingWrites++;try{yield v()}finally{A.pendingWrites--}})()}_set(v,A){var Y=this;return(0,p.Z)(function*(){return Y._withPendingWrite((0,p.Z)(function*(){return yield Y._withRetries(ge=>I(ge,v,A)),Y.localCache[v]=A,Y.notifyServiceWorker(v)}))})()}_get(v){var A=this;return(0,p.Z)(function*(){const Y=yield A._withRetries(ge=>function W(b,_){return q.apply(this,arguments)}(ge,v));return A.localCache[v]=Y,Y})()}_remove(v){var A=this;return(0,p.Z)(function*(){return A._withPendingWrite((0,p.Z)(function*(){return yield A._withRetries(Y=>Ce(Y,v)),delete A.localCache[v],A.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,p.Z)(function*(){const A=yield v._withRetries(Ze=>{const vt=Sa(Ze,!1).getAll();return new gi(vt).toPromise()});if(!A)return[];if(0!==v.pendingWrites)return[];const Y=[],ge=new Set;for(const{fbase_key:Ze,value:vt}of A)ge.add(Ze),JSON.stringify(v.localCache[Ze])!==JSON.stringify(vt)&&(v.notifyListeners(Ze,vt),Y.push(Ze));for(const Ze of Object.keys(v.localCache))v.localCache[Ze]&&!ge.has(Ze)&&(v.notifyListeners(Ze,null),Y.push(Ze));return Y})()}notifyListeners(v,A){this.localCache[v]=A;const Y=this.listeners[v];if(Y)for(const ge of Array.from(Y))ge(A)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(A)}_removeListener(v,A){this.listeners[v]&&(this.listeners[v].delete(A),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function vn(b,_){return Jt(b,"POST","/v2/accounts/mfaSignIn:start",sn(b,_))}function ji(){return(ji=(0,p.Z)(function*(b){return(yield Jt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Mo(b){return new Promise((_,v)=>{const A=document.createElement("script");A.setAttribute("src",b),A.onload=_,A.onerror=Y=>{const ge=Qe("internal-error");ge.customData=Y,v(ge)},A.type="text/javascript",A.charset="UTF-8",function ii(){var b,_;return null!==(_=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==_?_:document}().appendChild(A)})}function qs(b){return`__${b}${Math.floor(1e6*Math.random())}`}const xs=1e12;class zl{constructor(_){this.auth=_,this.counter=xs,this._widgets=new Map}render(_,v){const A=this.counter;return this._widgets.set(A,new Ra(_,this.auth.name,v||{})),this.counter++,A}reset(_){var v;const A=_||xs;null===(v=this._widgets.get(A))||void 0===v||v.delete(),this._widgets.delete(A)}getResponse(_){var v;return(null===(v=this._widgets.get(_||xs))||void 0===v?void 0:v.getResponse())||""}execute(_){var v=this;return(0,p.Z)(function*(){var A;return null===(A=v._widgets.get(_||xs))||void 0===A||A.execute(),""})()}}class Ra{constructor(_,v,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Y="string"==typeof _?document.getElementById(_):_;je(Y,"argument-error",{appName:v}),this.container=Y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function pa(b){const _=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<b;A++)_.push(v.charAt(Math.floor(Math.random()*v.length)));return _.join("")}(50);const{callback:_,"expired-callback":v}=this.params;if(_)try{_(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const xo=qs("rcb"),Za=new Ot(3e4,6e4);class Kl{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!It().grecaptcha}load(_,v=""){return je(function Qt(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(v),_,"argument-error"),this.shouldResolveImmediately(v)?Promise.resolve(It().grecaptcha):new Promise((A,Y)=>{const ge=It().setTimeout(()=>{Y(Qe(_,"network-request-failed"))},Za.get());It()[xo]=()=>{It().clearTimeout(ge),delete It()[xo];const vt=It().grecaptcha;if(!vt)return void Y(Qe(_,"internal-error"));const cn=vt.render;vt.render=(Fn,or)=>{const Ci=cn(Fn,or);return this.counter++,Ci},this.hostLanguage=v,A(vt)},Mo(`https://www.google.com/recaptcha/api.js??${(0,M.xO)({onload:xo,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(ge),Y(Qe(_,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(_){return!!It().grecaptcha&&(_===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ya{load(_){return(0,p.Z)(function*(){return new zl(_)})()}clearedOneInstance(){}}const zu="recaptcha",Ma={theme:"light",type:"image"};class ga{constructor(_,v=Object.assign({},Ma),A){this.parameters=v,this.type=zu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pt(A),this.isInvisible="invisible"===this.parameters.size,je("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const Y="string"==typeof _?document.getElementById(_):_;je(Y,this.auth,"argument-error"),this.container=Y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ya:new Kl,this.validateStartingState()}verify(){var _=this;return(0,p.Z)(function*(){_.assertNotDestroyed();const v=yield _.render(),A=_.getAssertedRecaptcha();return A.getResponse(v)||new Promise(ge=>{const Ze=vt=>{!vt||(_.tokenChangeListeners.delete(Ze),ge(vt))};_.tokenChangeListeners.add(Ze),_.isInvisible&&A.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(_){return Promise.reject(_)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(_=>{throw this.renderPromise=null,_})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(_=>{this.container.removeChild(_)})}validateStartingState(){je(!this.parameters.sitekey,this.auth,"argument-error"),je(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),je("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(_){return v=>{if(this.tokenChangeListeners.forEach(A=>A(v)),"function"==typeof _)_(v);else if("string"==typeof _){const A=It()[_];"function"==typeof A&&A(v)}}}assertNotDestroyed(){je(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var _=this;return(0,p.Z)(function*(){if(yield _.init(),!_.widgetId){let v=_.container;if(!_.isInvisible){const A=document.createElement("div");v.appendChild(A),v=A}_.widgetId=_.getAssertedRecaptcha().render(v,_.parameters)}return _.widgetId})()}init(){var _=this;return(0,p.Z)(function*(){je(_t()&&!On(),_.auth,"internal-error"),yield function yl(){let b=null;return new Promise(_=>{"complete"!==document.readyState?(b=()=>_(),window.addEventListener("load",b)):_()}).catch(_=>{throw b&&window.removeEventListener("load",b),_})}(),_.recaptcha=yield _._recaptchaLoader.load(_.auth,_.auth.languageCode||void 0);const v=yield function Ir(b){return ji.apply(this,arguments)}(_.auth);je(v,_.auth,"internal-error"),_.parameters.sitekey=v})()}getAssertedRecaptcha(){return je(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ys{constructor(_,v){this.verificationId=_,this.onConfirmation=v}confirm(_){const v=Ni._fromVerification(this.verificationId,_);return this.onConfirmation(v)}}function po(b,_,v){return si.apply(this,arguments)}function si(){return(si=(0,p.Z)(function*(b,_,v){const A=Pt(b),Y=yield yi(A,_,(0,M.m9)(v));return new Ys(Y,ge=>hn(A,ge))})).apply(this,arguments)}function ma(b,_,v){return Os.apply(this,arguments)}function Os(){return(Os=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b);yield J(!1,A,"phone");const Y=yield yi(A.auth,_,(0,M.m9)(v));return new Ys(Y,ge=>_r(A,ge))})).apply(this,arguments)}function Ku(b,_,v){return go.apply(this,arguments)}function go(){return(go=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b),Y=yield yi(A.auth,_,(0,M.m9)(v));return new Ys(Y,ge=>lr(A,ge))})).apply(this,arguments)}function yi(b,_,v){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,p.Z)(function*(b,_,v){var A;const Y=yield v.verify();try{let ge;if(je("string"==typeof Y,b,"argument-error"),je(v.type===zu,b,"argument-error"),ge="string"==typeof _?{phoneNumber:_}:_,"session"in ge){const Ze=ge.session;if("phoneNumber"in ge)return je("enroll"===Ze.type,b,"internal-error"),(yield kr(b,{idToken:Ze.credential,phoneEnrollmentInfo:{phoneNumber:ge.phoneNumber,recaptchaToken:Y}})).phoneSessionInfo.sessionInfo;{je("signin"===Ze.type,b,"internal-error");const vt=(null===(A=ge.multiFactorHint)||void 0===A?void 0:A.uid)||ge.multiFactorUid;return je(vt,b,"missing-multi-factor-info"),(yield vn(b,{mfaPendingCredential:Ze.credential,mfaEnrollmentId:vt,phoneSignInInfo:{recaptchaToken:Y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Ze}=yield Ws(b,{phoneNumber:ge.phoneNumber,recaptchaToken:Y});return Ze}}finally{v._reset()}})).apply(this,arguments)}function Qs(b,_){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,p.Z)(function*(b,_){yield mr((0,M.m9)(b),_)})).apply(this,arguments)}let xa=(()=>{class b{constructor(v){this.providerId=b.PROVIDER_ID,this.auth=Pt(v)}verifyPhoneNumber(v,A){return yi(this.auth,v,(0,M.m9)(A))}static credential(v,A){return Ni._fromVerification(v,A)}static credentialFromResult(v){return b.credentialFromTaggedObject(v)}static credentialFromError(v){return b.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:A,temporaryProof:Y}=v;return A&&Y?Ni._fromTokenResponse(A,Y):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Js(b,_){return _?ze(_):(je(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Nc extends zn{constructor(_){super("custom","custom"),this.params=_}_getIdTokenResponse(_){return Fr(_,this._buildIdpRequest())}_linkToIdToken(_,v){return Fr(_,this._buildIdpRequest(v))}_getReauthenticationResolver(_){return Fr(_,this._buildIdpRequest())}_buildIdpRequest(_){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return _&&(v.idToken=_),v}}function wd(b){return yt(b.auth,new Nc(b),b.bypassAuthState)}function ql(b){const{auth:_,user:v}=b;return je(v,_,"internal-error"),se(v,new Nc(b),b.bypassAuthState)}function ns(b){return yu.apply(this,arguments)}function yu(){return(yu=(0,p.Z)(function*(b){const{auth:_,user:v}=b;return je(v,_,"internal-error"),mr(v,new Nc(b),b.bypassAuthState)})).apply(this,arguments)}class Xn{constructor(_,v,A,Y,ge=!1){this.auth=_,this.resolver=A,this.user=Y,this.bypassAuthState=ge,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var _=this;return new Promise(function(){var v=(0,p.Z)(function*(A,Y){_.pendingPromise={resolve:A,reject:Y};try{_.eventManager=yield _.resolver._initialize(_.auth),yield _.onExecution(),_.eventManager.registerConsumer(_)}catch(ge){_.reject(ge)}});return function(A,Y){return v.apply(this,arguments)}}())}onAuthEvent(_){var v=this;return(0,p.Z)(function*(){const{urlResponse:A,sessionId:Y,postBody:ge,tenantId:Ze,error:vt,type:cn}=_;if(vt)return void v.reject(vt);const Fn={auth:v.auth,requestUri:A,sessionId:Y,tenantId:Ze||void 0,postBody:ge||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(cn)(Fn))}catch(or){v.reject(or)}})()}onError(_){this.reject(_)}getIdpTask(_){switch(_){case"signInViaPopup":case"signInViaRedirect":return wd;case"linkViaPopup":case"linkViaRedirect":return ns;case"reauthViaPopup":case"reauthViaRedirect":return ql;default:wt(this.auth,"internal-error")}}resolve(_){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(_),this.unregisterAndCleanUp()}reject(_){Xe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(_),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const mo=new Ot(2e3,1e4);function ta(b,_,v){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(b,_,v){const A=Pt(b);ut(b,_,Di);const Y=Js(A,v);return new _o(A,"signInViaPopup",_,Y).executeNotNull()})).apply(this,arguments)}function xr(b,_,v){return Is.apply(this,arguments)}function Is(){return(Is=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b);ut(A.auth,_,Di);const Y=Js(A.auth,v);return new _o(A.auth,"reauthViaPopup",_,Y,A).executeNotNull()})).apply(this,arguments)}function Po(b,_,v){return qu.apply(this,arguments)}function qu(){return(qu=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b);ut(A.auth,_,Di);const Y=Js(A.auth,v);return new _o(A.auth,"linkViaPopup",_,Y,A).executeNotNull()})).apply(this,arguments)}let _o=(()=>{class b extends Xn{constructor(v,A,Y,ge,Ze){super(v,A,ge,Ze),this.provider=Y,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var v=this;return(0,p.Z)(function*(){const A=yield v.execute();return je(A,v.auth,"internal-error"),A})()}onExecution(){var v=this;return(0,p.Z)(function*(){Xe(1===v.filter.length,"Popup operations only handle one event");const A=Kt();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],A),v.authWindow.associatedEvent=A,v.resolver._originValidation(v.auth).catch(Y=>{v.reject(Y)}),v.resolver._isIframeWebStorageSupported(v.auth,Y=>{Y||v.reject(Qe(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(Qe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const v=()=>{var A,Y;this.pollId=(null===(Y=null===(A=this.authWindow)||void 0===A?void 0:A.window)||void 0===Y?void 0:Y.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Qe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(v,mo.get())};v()}}return b.currentPopupAction=null,b})();const Wr=new Map;class Qa extends Xn{constructor(_,v,A=!1){super(_,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,A),this.eventId=null}execute(){var _=()=>super.execute,v=this;return(0,p.Z)(function*(){let A=Wr.get(v.auth._key());if(!A){try{const ge=(yield function ci(b,_){return P.apply(this,arguments)}(v.resolver,v.auth))?yield _().call(v):null;A=()=>Promise.resolve(ge)}catch(Y){A=()=>Promise.reject(Y)}Wr.set(v.auth._key(),A)}return v.bypassAuthState||Wr.set(v.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(_){var v=()=>super.onAuthEvent,A=this;return(0,p.Z)(function*(){if("signInViaRedirect"===_.type)return v().call(A,_);if("unknown"!==_.type){if(_.eventId){const Y=yield A.auth._redirectUserForId(_.eventId);if(Y)return A.user=Y,v().call(A,_);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function P(){return(P=(0,p.Z)(function*(b,_){const v=$t(_),A=ft(b);if(!(yield A._isAvailable()))return!1;const Y="true"===(yield A._get(v));return yield A._remove(v),Y})).apply(this,arguments)}function B(b,_){return ne.apply(this,arguments)}function ne(){return(ne=(0,p.Z)(function*(b,_){return ft(b)._set($t(_),"true")})).apply(this,arguments)}function Re(){Wr.clear()}function rt(b,_){Wr.set(b._key(),_)}function ft(b){return ze(b._redirectPersistence)}function $t(b){return Gt("pendingRedirect",b.config.apiKey,b.name)}function ln(b,_,v){return function Kn(b,_,v){return kn.apply(this,arguments)}(b,_,v)}function kn(){return(kn=(0,p.Z)(function*(b,_,v){const A=Pt(b);ut(b,_,Di);const Y=Js(A,v);return yield B(Y,A),Y._openRedirect(A,_,"signInViaRedirect")})).apply(this,arguments)}function Vr(b,_,v){return function sr(b,_,v){return Yn.apply(this,arguments)}(b,_,v)}function Yn(){return(Yn=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b);ut(A.auth,_,Di);const Y=Js(A.auth,v);yield B(Y,A.auth);const ge=yield Yu(A);return Y._openRedirect(A.auth,_,"reauthViaRedirect",ge)})).apply(this,arguments)}function ds(b,_,v){return function vl(b,_,v){return Ja.apply(this,arguments)}(b,_,v)}function Ja(){return(Ja=(0,p.Z)(function*(b,_,v){const A=(0,M.m9)(b);ut(A.auth,_,Di);const Y=Js(A.auth,v);yield J(!1,A,_.providerId),yield B(Y,A.auth);const ge=yield Yu(A);return Y._openRedirect(A.auth,_,"linkViaRedirect",ge)})).apply(this,arguments)}function na(b,_){return _a.apply(this,arguments)}function _a(){return(_a=(0,p.Z)(function*(b,_){return yield Pt(b)._initializationPromise,Pa(b,_,!1)})).apply(this,arguments)}function Pa(b,_){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,p.Z)(function*(b,_,v=!1){const A=Pt(b),Y=Js(A,_),Ze=yield new Qa(A,Y,v).execute();return Ze&&!v&&(delete Ze.user._redirectEventId,yield A._persistUserIfCurrent(Ze.user),yield A._setRedirectUser(null,_)),Ze})).apply(this,arguments)}function Yu(b){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(b){const _=Kt(`${b.uid}:::`);return b._redirectEventId=_,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),_})).apply(this,arguments)}class El{constructor(_){this.auth=_,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(_){this.consumers.add(_),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,_)&&(this.sendToConsumer(this.queuedRedirectEvent,_),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(_){this.consumers.delete(_)}onEvent(_){if(this.hasEventBeenHandled(_))return!1;let v=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(_,A)&&(v=!0,this.sendToConsumer(_,A),this.saveEventToCache(_))}),this.hasHandledPotentialRedirect||!function ra(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yl(b);default:return!1}}(_)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=_,v=!0)),v}sendToConsumer(_,v){var A;if(_.error&&!Yl(_)){const Y=(null===(A=_.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";v.onError(Qe(this.auth,Y))}else v.onAuthEvent(_)}isEventForConsumer(_,v){const A=null===v.eventId||!!_.eventId&&_.eventId===v.eventId;return v.filter.includes(_.type)&&A}hasEventBeenHandled(_){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zl(_))}saveEventToCache(_){this.cachedEventUids.add(Zl(_)),this.lastProcessedEventTime=Date.now()}}function Zl(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(_=>_).join("-")}function Yl({type:b,error:_}){return"unknown"===b&&"auth/no-auth-event"===(null==_?void 0:_.code)}function wl(b){return eu.apply(this,arguments)}function eu(){return(eu=(0,p.Z)(function*(b,_={}){return Jt(b,"GET","/v1/projects",_)})).apply(this,arguments)}const gh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ql=/^https?/;function tu(){return(tu=(0,p.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:_}=yield wl(b);for(const v of _)try{if(Il(v))return}catch(A){}wt(b,"unauthorized-domain")})).apply(this,arguments)}function Il(b){const _=Ke(),{protocol:v,hostname:A}=new URL(_);if(b.startsWith("chrome-extension://")){const Ze=new URL(b);return""===Ze.hostname&&""===A?"chrome-extension:"===v&&b.replace("chrome-extension://","")===_.replace("chrome-extension://",""):"chrome-extension:"===v&&Ze.hostname===A}if(!Ql.test(v))return!1;if(gh.test(b))return A===b;const Y=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(A)}const ya=new Ot(3e4,6e4);function Jl(){const b=It().___jsl;if(null==b?void 0:b.H)for(const _ of Object.keys(b.H))if(b.H[_].r=b.H[_].r||[],b.H[_].L=b.H[_].L||[],b.H[_].r=[...b.H[_].L],b.CP)for(let v=0;v<b.CP.length;v++)b.CP[v]=null}let Cl=null;function kc(b){return Cl=Cl||function Eu(b){return new Promise((_,v)=>{var A,Y,ge;function Ze(){Jl(),gapi.load("gapi.iframes",{callback:()=>{_(gapi.iframes.getContext())},ontimeout:()=>{Jl(),v(Qe(b,"network-request-failed"))},timeout:ya.get()})}if(null===(Y=null===(A=It().gapi)||void 0===A?void 0:A.iframes)||void 0===Y?void 0:Y.Iframe)_(gapi.iframes.getContext());else{if(!(null===(ge=It().gapi)||void 0===ge?void 0:ge.load)){const vt=qs("iframefcb");return It()[vt]=()=>{gapi.load?Ze():v(Qe(b,"network-request-failed"))},Mo(`https://apis.google.com/js/api.js?onload=${vt}`).catch(cn=>v(cn))}Ze()}}).catch(_=>{throw Cl=null,_})}(b),Cl}const Id=new Ot(5e3,15e3),Dd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ju=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mh(b){const _=b.config;je(_.authDomain,b,"auth-domain-config-required");const v=_.emulator?en(_,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,A={apiKey:_.apiKey,appName:b.name,v:G.SDK_VERSION},Y=Ju.get(b.config.apiHost);Y&&(A.eid=Y);const ge=b._getFrameworks();return ge.length&&(A.fw=ge.join(",")),`${v}?${(0,M.xO)(A).slice(1)}`}function Xl(){return Xl=(0,p.Z)(function*(b){const _=yield kc(b),v=It().gapi;return je(v,b,"internal-error"),_.open({where:document.body,url:mh(b),messageHandlersFilter:v.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Dd,dontclear:!0},A=>new Promise(function(){var Y=(0,p.Z)(function*(ge,Ze){yield A.restyle({setHideOnLeave:!1});const vt=Qe(b,"network-request-failed"),cn=It().setTimeout(()=>{Ze(vt)},Id.get());function Fn(){It().clearTimeout(cn),ge(A)}A.ping(Fn).then(Fn,()=>{Ze(vt)})});return function(ge,Ze){return Y.apply(this,arguments)}}()))}),Xl.apply(this,arguments)}const Fc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ec{constructor(_){this.window=_,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(_){}}}function Uc(b,_,v,A,Y,ge){je(b.config.authDomain,b,"auth-domain-config-required"),je(b.config.apiKey,b,"invalid-api-key");const Ze={apiKey:b.config.apiKey,appName:b.name,authType:v,redirectUrl:A,v:G.SDK_VERSION,eventId:Y};if(_ instanceof Di){_.setDefaultLanguage(b.languageCode),Ze.providerId=_.providerId||"",(0,M.xb)(_.getCustomParameters())||(Ze.customParameters=JSON.stringify(_.getCustomParameters()));for(const[cn,Fn]of Object.entries(ge||{}))Ze[cn]=Fn}if(_ instanceof Ii){const cn=_.getScopes().filter(Fn=>""!==Fn);cn.length>0&&(Ze.scopes=cn.join(","))}b.tenantId&&(Ze.tid=b.tenantId);const vt=Ze;for(const cn of Object.keys(vt))void 0===vt[cn]&&delete vt[cn];return`${function ia({config:b}){return b.emulator?en(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,M.xO)(vt).slice(1)}`}const tl="webStorageSupport",rs=class Sd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tn,this._completeRedirectFn=Pa,this._overrideRedirectResult=rt}_openPopup(_,v,A,Y){var ge=this;return(0,p.Z)(function*(){var Ze;Xe(null===(Ze=ge.eventManagers[_._key()])||void 0===Ze?void 0:Ze.manager,"_initialize() not called before _openPopup()");const vt=Uc(_,v,A,Ke(),Y);return function el(b,_,v,A=500,Y=600){const ge=Math.max((window.screen.availHeight-Y)/2,0).toString(),Ze=Math.max((window.screen.availWidth-A)/2,0).toString();let vt="";const cn=Object.assign(Object.assign({},Fc),{width:A.toString(),height:Y.toString(),top:ge,left:Ze}),Fn=(0,M.z$)().toLowerCase();v&&(vt=he(Fn)?"_blank":v),Le(Fn)&&(_=_||"http://localhost",cn.scrollbars="yes");const or=Object.entries(cn).reduce(($i,[La,su])=>`${$i}${La}=${su},`,"");if(function Gn(b=(0,M.z$)()){var _;return Yt(b)&&!!(null===(_=window.navigator)||void 0===_?void 0:_.standalone)}(Fn)&&"_self"!==vt)return function Td(b,_){const v=document.createElement("a");v.href=b,v.target=_;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(A)}(_||"",vt),new ec(null);const Ci=window.open(_||"",vt,or);je(Ci,b,"popup-blocked");try{Ci.focus()}catch($i){}return new ec(Ci)}(_,vt,Kt())})()}_openRedirect(_,v,A,Y){var ge=this;return(0,p.Z)(function*(){return yield ge._originValidation(_),function _i(b){It().location.href=b}(Uc(_,v,A,Ke(),Y)),new Promise(()=>{})})()}_initialize(_){const v=_._key();if(this.eventManagers[v]){const{manager:Y,promise:ge}=this.eventManagers[v];return Y?Promise.resolve(Y):(Xe(ge,"If manager is not set, promise should be"),ge)}const A=this.initAndGetManager(_);return this.eventManagers[v]={promise:A},A.catch(()=>{delete this.eventManagers[v]}),A}initAndGetManager(_){var v=this;return(0,p.Z)(function*(){const A=yield function _h(b){return Xl.apply(this,arguments)}(_),Y=new El(_);return A.register("authEvent",ge=>(je(null==ge?void 0:ge.authEvent,_,"invalid-auth-event"),{status:Y.onEvent(ge.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[_._key()]={manager:Y},v.iframes[_._key()]=A,Y})()}_isIframeWebStorageSupported(_,v){this.iframes[_._key()].send(tl,{type:tl},Y=>{var ge;const Ze=null===(ge=null==Y?void 0:Y[0])||void 0===ge?void 0:ge[tl];void 0!==Ze&&v(!!Ze),wt(_,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(_){const v=_._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function vu(b){return tu.apply(this,arguments)}(_)),this.originValidationPromises[v]}get _shouldInitProactively(){return rr()||te()||Yt()}};class tc extends class Rd{constructor(_){this.factorId=_}_process(_,v,A){switch(v.type){case"enroll":return this._finalizeEnroll(_,v.credential,A);case"signin":return this._finalizeSignIn(_,v.credential);default:return it("unexpected MultiFactorSessionType")}}}{constructor(_){super("phone"),this.credential=_}static _fromCredential(_){return new tc(_)}_finalizeEnroll(_,v,A){return function Ka(b,_){return Jt(b,"POST","/v2/accounts/mfaEnrollment:finalize",sn(b,_))}(_,{idToken:v,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(_,v){return function Pn(b,_){return Jt(b,"POST","/v2/accounts/mfaSignIn:finalize",sn(b,_))}(_,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Cf=(()=>{class b{constructor(){}static assertion(v){return tc._fromCredential(v)}}return b.FACTOR_ID="phone",b})();var ka="@firebase/auth";class Md{constructor(_){this.auth=_,this.internalListeners=new Map}getUid(){var _;return this.assertAuthConfigured(),(null===(_=this.auth.currentUser)||void 0===_?void 0:_.uid)||null}getToken(_){var v=this;return(0,p.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(_)}:null})()}addAuthTokenListener(_){if(this.assertAuthConfigured(),this.internalListeners.has(_))return;const v=this.auth.onIdTokenChanged(A=>{var Y;_((null===(Y=A)||void 0===Y?void 0:Y.stsTokenManager.accessToken)||null)});this.internalListeners.set(_,v),this.updateProactiveRefresh()}removeAuthTokenListener(_){this.assertAuthConfigured();const v=this.internalListeners.get(_);!v||(this.internalListeners.delete(_),v(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Fa(b=(0,G.getApp)()){const _=(0,G._getProvider)(b,"auth");return _.isInitialized()?_.getImmediate():function et(b,_){const v=(0,G._getProvider)(b,"auth");if(v.isInitialized()){const Y=v.getImmediate(),ge=v.getOptions();if((0,M.vZ)(ge,null!=_?_:{}))return Y;wt(Y,"already-initialized")}return v.initialize({options:_})}(b,{popupRedirectResolver:rs,persistence:[qt,Bi,tn]})}!function wu(b){(0,G._registerComponent)(new Te.wA("auth",(_,{options:v})=>{const A=_.getProvider("app").getImmediate(),Y=_.getProvider("heartbeat"),{apiKey:ge,authDomain:Ze}=A.options;return((vt,cn)=>{je(ge&&!ge.includes(":"),"invalid-api-key",{appName:vt.name}),je(!(null==Ze?void 0:Ze.includes(":")),"argument-error",{appName:vt.name});const Fn={apiKey:ge,authDomain:Ze,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sr(b)},or=new oi(vt,cn,Fn);return function dt(b,_){const v=(null==_?void 0:_.persistence)||[],A=(Array.isArray(v)?v:[v]).map(ze);(null==_?void 0:_.errorMap)&&b._updateErrorMap(_.errorMap),b._initializeWithPersistence(A,null==_?void 0:_.popupRedirectResolver)}(or,v),or})(A,Y)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((_,v,A)=>{_.getProvider("auth-internal").initialize()})),(0,G._registerComponent)(new Te.wA("auth-internal",_=>{const v=Pt(_.getProvider("auth").getImmediate());return new Md(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,G.registerVersion)(ka,"0.20.2",function iu(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,G.registerVersion)(ka,"0.20.2","esm2017")}("Browser")},5525:(ke,ye,S)=>{S.d(ye,{u7:()=>yd,Jj:()=>dl,IX:()=>Ac,my:()=>Zi,xU:()=>Wu,Lz:()=>Bu,WA:()=>It,F8:()=>ju,$q:()=>Rc,W:()=>fl,EK:()=>W,PU:()=>ym,l7:()=>xo,Ky:()=>Qt,Xb:()=>Pn,Cf:()=>Yr,K9:()=>Xo,Me:()=>ji,yq:()=>Bi,Wi:()=>Rp,ET:()=>x_,Ab:()=>Ef,vr:()=>Hp,Fc:()=>sm,hJ:()=>g_,B$:()=>my,at:()=>tf,oe:()=>hh,AK:()=>Im,TF:()=>Op,JU:()=>nm,ST:()=>__,fH:()=>y_,Ix:()=>ah,Wu:()=>A_,Lx:()=>yy,qY:()=>Cs,GL:()=>Mc,QT:()=>fu,kl:()=>jp,Xk:()=>vm,PL:()=>Em,UQ:()=>_f,zN:()=>R_,ad:()=>rf,nP:()=>Cm,b9:()=>b_,vh:()=>Vp,Pb:()=>am,L$:()=>sf,cf:()=>O_,sc:()=>P_,Xo:()=>fm,IO:()=>C_,iE:()=>Vu,Eo:()=>du,i3:()=>wm,Bt:()=>Wp,pl:()=>M_,Ub:()=>ml,qK:()=>I_,TQ:()=>mm,e0:()=>T_,r7:()=>$p,Mx:()=>om,ar:()=>D_});var ce,p=S(5861),M=S(9681),G=S(4859),Ee=S(1877),de=S(2090),Te="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},be={},_e=_e||{},ee=Te||self;function fe(){}function Ae(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Ye(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var ot="closure_uid_"+(1e9*Math.random()>>>0),bt=0;function at(i,e,n){return i.call.apply(i.bind,arguments)}function tt(i,e,n){if(!i)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,a),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function xe(i,e,n){return(xe=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?at:tt).apply(null,arguments)}function wt(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var a=n.slice();return a.push.apply(a,arguments),i.apply(this,a)}}function Qe(i,e){function n(){}n.prototype=e.prototype,i.Z=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.Vb=function(a,d,m){for(var E=Array(arguments.length-2),x=2;x<arguments.length;x++)E[x-2]=arguments[x];return e.prototype[d].apply(a,E)}}function Ge(){this.s=this.s,this.o=this.o}var At={};Ge.prototype.s=!1,Ge.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function Je(i){return Object.prototype.hasOwnProperty.call(i,ot)&&i[ot]||(i[ot]=++bt)}(this);delete At[i]}},Ge.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const je=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1},it=Array.prototype.forEach?function(i,e,n){Array.prototype.forEach.call(i,e,n)}:function(i,e,n){const a=i.length,d="string"==typeof i?i.split(""):i;for(let m=0;m<a;m++)m in d&&e.call(n,d[m],m,i)};function Fe(i){return Array.prototype.concat.apply([],arguments)}function ze(i){const e=i.length;if(0<e){const n=Array(e);for(let a=0;a<e;a++)n[a]=i[a];return n}return[]}function et(i){return/^[\s\xa0]*$/.test(i)}var St,dt=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Ke(i,e){return-1!=i.indexOf(e)}function _t(i,e){return i<e?-1:i>e?1:0}e:{var nn=ee.navigator;if(nn){var rn=nn.userAgent;if(rn){St=rn;break e}}St=""}function Ot(i,e,n){for(const a in i)e.call(n,i[a],a,i)}function en(i){const e={};for(const n in i)e[n]=i[n];return e}var Cn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function En(i,e){let n,a;for(let d=1;d<arguments.length;d++){for(n in a=arguments[d],a)i[n]=a[n];for(let m=0;m<Cn.length;m++)n=Cn[m],Object.prototype.hasOwnProperty.call(a,n)&&(i[n]=a[n])}}function on(i){return on[" "](i),i}on[" "]=fe;var Ar,i,Jt=Ke(St,"Opera"),Wn=Ke(St,"Trident")||Ke(St,"MSIE"),ar=Ke(St,"Edge"),Hn=ar||Wn,Ln=Ke(St,"Gecko")&&!(Ke(St.toLowerCase(),"webkit")&&!Ke(St,"Edge"))&&!(Ke(St,"Trident")||Ke(St,"MSIE"))&&!Ke(St,"Edge"),Cr=Ke(St.toLowerCase(),"webkit")&&!Ke(St,"Edge");function ur(){var i=ee.document;return i?i.documentMode:void 0}e:{var qn="",jr=(i=St,Ln?/rv:([^\);]+)(\)|;)/.exec(i):ar?/Edge\/([\d\.]+)/.exec(i):Wn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Cr?/WebKit\/(\S+)/.exec(i):Jt?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(jr&&(qn=jr?jr[1]:""),Wn){var Ut=ur();if(null!=Ut&&Ut>parseFloat(qn)){Ar=String(Ut);break e}}Ar=qn}var pr={};var Hr=ee.document&&Wn&&(ur()||parseInt(Ar,10))||void 0,Gr=function(){if(!ee.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ee.addEventListener("test",fe,e),ee.removeEventListener("test",fe,e)}catch(n){}return i}();function Tn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function vr(i,e){if(Tn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,a=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Ln){e:{try{on(e.nodeName);var d=!0;break e}catch(m){}d=!1}d||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:$r[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&vr.Z.h.call(this)}}Tn.prototype.h=function(){this.defaultPrevented=!0},Qe(vr,Tn);var $r={2:"touch",3:"pen",4:"mouse"};vr.prototype.h=function(){vr.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Vt="closure_listenable_"+(1e6*Math.random()|0),an=0;function Wt(i,e,n,a,d){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!a,this.ia=d,this.key=++an,this.ca=this.fa=!1}function Or(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function zr(i){this.src=i,this.g={},this.h=0}function Bn(i,e){var n=e.type;if(n in i.g){var m,a=i.g[n],d=je(a,e);(m=0<=d)&&Array.prototype.splice.call(a,d,1),m&&(Or(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function di(i,e,n,a){for(var d=0;d<i.length;++d){var m=i[d];if(!m.ca&&m.listener==e&&m.capture==!!n&&m.ia==a)return d}return-1}zr.prototype.add=function(i,e,n,a,d){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var E=di(i,e,a,d);return-1<E?(e=i[E],n||(e.fa=!1)):((e=new Wt(e,this.src,m,!!a,d)).fa=n,i.push(e)),e};var gr="closure_lm_"+(1e6*Math.random()|0),jn={};function Me(i,e,n,a,d){if(a&&a.once)return Et(i,e,n,a,d);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Me(i,e[m],n,a,d);return null}return n=wn(n),i&&i[Vt]?i.N(e,n,Ye(a)?!!a.capture:!!a,d):Pe(i,e,n,!1,a,d)}function Pe(i,e,n,a,d,m){if(!e)throw Error("Invalid event type");var E=Ye(d)?!!d.capture:!!d,x=gt(i);if(x||(i[gr]=x=new zr(i)),(n=x.add(e,n,a,E,m)).proxy)return n;if(a=function Ue(){var e=He;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=a,a.src=i,a.listener=n,i.addEventListener)Gr||(d=E),void 0===d&&(d=!1),i.addEventListener(e.toString(),a,d);else if(i.attachEvent)i.attachEvent(oe(e.toString()),a);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(a)}return n}function Et(i,e,n,a,d){if(Array.isArray(e)){for(var m=0;m<e.length;m++)Et(i,e[m],n,a,d);return null}return n=wn(n),i&&i[Vt]?i.O(e,n,Ye(a)?!!a.capture:!!a,d):Pe(i,e,n,!0,a,d)}function ue(i,e,n,a,d){if(Array.isArray(e))for(var m=0;m<e.length;m++)ue(i,e[m],n,a,d);else a=Ye(a)?!!a.capture:!!a,n=wn(n),i&&i[Vt]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=di(m=i.g[e],n,a,d))&&(Or(m[n]),Array.prototype.splice.call(m,n,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=gt(i))&&(e=i.g[e.toString()],i=-1,e&&(i=di(e,n,a,d)),(n=-1<i?e[i]:null)&&j(n))}function j(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Vt])Bn(e.i,i);else{var n=i.type,a=i.proxy;e.removeEventListener?e.removeEventListener(n,a,i.capture):e.detachEvent?e.detachEvent(oe(n),a):e.addListener&&e.removeListener&&e.removeListener(a),(n=gt(e))?(Bn(n,i),0==n.h&&(n.src=null,e[gr]=null)):Or(i)}}}function oe(i){return i in jn?jn[i]:jn[i]="on"+i}function He(i,e){if(i.ca)i=!0;else{e=new vr(e,this);var n=i.listener,a=i.ia||i.src;i.fa&&j(i),i=n.call(a,e)}return i}function gt(i){return(i=i[gr])instanceof zr?i:null}var Ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function wn(i){return"function"==typeof i?i:(i[Ht]||(i[Ht]=function(e){return i.handleEvent(e)}),i[Ht])}function Gt(){Ge.call(this),this.i=new zr(this),this.P=this,this.I=null}function Mn(i,e){var n,a=i.I;if(a)for(n=[];a;a=a.I)n.push(a);if(i=i.P,a=e.type||e,"string"==typeof e)e=new Tn(e,i);else if(e instanceof Tn)e.target=e.target||i;else{var d=e;En(e=new Tn(a,i),d)}if(d=!0,n)for(var m=n.length-1;0<=m;m--){var E=e.g=n[m];d=st(E,a,!0,e)&&d}if(d=st(E=e.g=i,a,!0,e)&&d,d=st(E,a,!1,e)&&d,n)for(m=0;m<n.length;m++)d=st(E=e.g=n[m],a,!1,e)&&d}function st(i,e,n,a){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,m=0;m<e.length;++m){var E=e[m];if(E&&!E.ca&&E.capture==n){var x=E.listener,H=E.ia||E.src;E.fa&&Bn(i.i,E),d=!1!==x.call(H,a)&&d}}return d&&!a.defaultPrevented}Qe(Gt,Ge),Gt.prototype[Vt]=!0,Gt.prototype.removeEventListener=function(i,e,n,a){ue(this,i,e,n,a)},Gt.prototype.M=function(){if(Gt.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],a=0;a<n.length;a++)Or(n[a]);delete i.g[e],i.h--}}this.I=null},Gt.prototype.N=function(i,e,n,a){return this.i.add(String(i),e,!1,n,a)},Gt.prototype.O=function(i,e,n,a){return this.i.add(String(i),e,!0,n,a)};var Le=ee.JSON.stringify;function te(){var i=fn;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Yt,re=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Ve,i=>i.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function ht(i){ee.setTimeout(()=>{throw i},0)}function Lt(i,e){Yt||function Jn(){var i=ee.Promise.resolve(void 0);Yt=function(){i.then(rr)}}(),Gn||(Yt(),Gn=!0),fn.add(i,e)}var Gn=!1,fn=new class he{constructor(){this.h=this.g=null}add(e,n){const a=re.get();a.set(e,n),this.h?this.h.next=a:this.g=a,this.h=a}};function rr(){for(var i;i=te();){try{i.h.call(i.g)}catch(n){ht(n)}var e=re;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Gn=!1}function pe(i,e){Gt.call(this),this.h=i||1,this.g=e||ee,this.j=xe(this.kb,this),this.l=Date.now()}function Sr(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Oi(i,e,n){if("function"==typeof i)n&&(i=xe(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=xe(i.handleEvent,i)}return 2147483647<Number(e)?-1:ee.setTimeout(i,e||0)}function oi(i){i.g=Oi(()=>{i.g=null,i.i&&(i.i=!1,oi(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Qe(pe,Gt),(ce=pe.prototype).da=!1,ce.S=null,ce.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Mn(this,"tick"),this.da&&(Sr(this),this.start()))}},ce.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ce.M=function(){pe.Z.M.call(this),Sr(this),delete this.g};class Pt extends Ge{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oi(this)}M(){super.M(),this.g&&(ee.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _n(i){Ge.call(this),this.h=i,this.g={}}Qe(_n,Ge);var ir=[];function Qr(i,e,n,a){Array.isArray(n)||(n&&(ir[0]=n.toString()),n=ir);for(var d=0;d<n.length;d++){var m=Me(e,n[d],a||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function Ei(i){Ot(i.g,function(e,n){this.g.hasOwnProperty(n)&&j(e)},i),i.g={}}function dr(){this.g=!0}function mi(i,e,n,a){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function xn(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var a=n[i];if(!(2>a.length)){var d=a[1];if(Array.isArray(d)&&!(1>d.length)){var m=d[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var E=1;E<d.length;E++)d[E]=""}}}return Le(n)}catch(x){return e}}(i,n)+(a?" "+a:"")})}_n.prototype.M=function(){_n.Z.M.call(this),Ei(this)},_n.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},dr.prototype.Aa=function(){this.g=!1},dr.prototype.info=function(){};var ti={},Qi=null;function Pi(){return Qi=Qi||new Gt}function Rr(i){Tn.call(this,ti.Ma,i)}function Er(i){const e=Pi();Mn(e,new Rr(e,i))}function Jr(i,e){Tn.call(this,ti.STAT_EVENT,i),this.stat=e}function ve(i){const e=Pi();Mn(e,new Jr(e,i))}function le(i,e){Tn.call(this,ti.Na,i),this.size=e}function Q(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ee.setTimeout(function(){i()},e)}ti.Ma="serverreachability",Qe(Rr,Tn),ti.STAT_EVENT="statevent",Qe(Jr,Tn),ti.Na="timingevent",Qe(le,Tn);var me={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},$e={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function qe(){}function yn(){}qe.prototype.h=null;var ai,Nn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function gn(){Tn.call(this,"d")}function Sn(){Tn.call(this,"c")}function hr(){}function os(i,e,n,a){this.l=i,this.j=e,this.m=n,this.X=a||1,this.V=new _n(this),this.P=Zo,this.W=new pe(i=Hn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Fr}function Fr(){this.i=null,this.g="",this.h=!1}Qe(gn,Tn),Qe(Sn,Tn),Qe(hr,qe),hr.prototype.g=function(){return new XMLHttpRequest},hr.prototype.i=function(){return{}},ai=new hr;var Zo=45e3,la={},as={};function Ws(i,e,n){i.K=1,i.v=Ti(bi(e)),i.s=n,i.U=!0,ks(i,null)}function ks(i,e){i.F=Date.now(),fs(i),i.A=bi(i.v);var n=i.A,a=i.X;Array.isArray(a)||(a=[String(a)]),U(n.h,"t",a),i.C=0,n=i.l.H,i.h=new Fr,i.g=ws(i.l,n?e:null,!i.s),0<i.O&&(i.L=new Pt(xe(i.Ia,i,i.g),i.O)),Qr(i.V,i.g,"readystatechange",i.gb),e=i.H?en(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),Er(1),function wi(i,e,n,a,d,m){i.info(function(){if(i.g)if(m)for(var E="",x=m.split("&"),H=0;H<x.length;H++){var Z=x[H].split("=");if(1<Z.length){var Ie=Z[0];Z=Z[1];var Be=Ie.split("_");E=2<=Be.length&&"type"==Be[1]?E+(Ie+"=")+Z+"&":E+(Ie+"=redacted&")}}else E=null;else E=m;return"XMLHTTP REQ ("+a+") [attempt "+d+"]: "+e+"\n"+n+"\n"+E})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Fo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function Ji(i,e,n){let d,a=!0;for(;!i.I&&i.C<n.length;){if(d=uo(i,n),d==as){4==e&&(i.o=4,ve(14),a=!1),mi(i.j,i.m,null,"[Incomplete Response]");break}if(d==la){i.o=4,ve(15),mi(i.j,i.m,n,"[Invalid Chunk]"),a=!1;break}mi(i.j,i.m,d,null),Lo(i,d)}Fo(i)&&d!=as&&d!=la&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,ve(16),a=!1),i.i=i.i&&a,a?0<n.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Rs(e),e.L=!0,ve(11))):(mi(i.j,i.m,n,"[Invalid Chunked Response]"),Ni(i),us(i))}function uo(i,e){var n=i.C,a=e.indexOf("\n",n);return-1==a?as:(n=Number(e.substring(n,a)),isNaN(n)?la:(a+=1)+n>e.length?as:(e=e.substr(a,n),i.C=a+n,e))}function fs(i){i.Y=Date.now()+i.P,ca(i,i.P)}function ca(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Q(xe(i.eb,i),e)}function Yo(i){i.B&&(ee.clearTimeout(i.B),i.B=null)}function us(i){0==i.l.G||i.I||Gu(i.l,i)}function Ni(i){Yo(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Sr(i.W),Ei(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function Lo(i,e){try{var n=i.l;if(0!=n.G&&(n.g==i||Un(n.i,i)))if(n.I=i.N,!i.J&&Un(n.i,i)&&3==n.G){try{var a=n.Ca.g.parse(e)}catch(Z){a=null}if(Array.isArray(a)&&3==a.length){var d=a;if(0==d[0])e:if(n.u)n.ta=d[1],0<n.ta-n.U&&37500>d[2]&&n.N&&0==n.A&&!n.v&&(n.v=Q(xe(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<i.F))break e;So(n),ni(n)}jo(n),ve(18)}if(1>=_r(n.i)&&n.ka){try{n.ka()}catch(Z){}n.ka=void 0}}else Ms(n,11)}else if((i.J||n.g==i)&&So(n),!et(e))for(d=n.Ca.g.parse(e),e=0;e<d.length;e++){let Z=d[e];if(n.U=Z[0],Z=Z[1],2==n.G)if("c"==Z[0]){n.J=Z[1],n.la=Z[2];const Ie=Z[3];null!=Ie&&(n.ma=Ie,n.h.info("VER="+n.ma));const Be=Z[4];null!=Be&&(n.za=Be,n.h.info("SVER="+n.za));const mt=Z[5];null!=mt&&"number"==typeof mt&&0<mt&&(n.K=a=1.5*mt,n.h.info("backChannelRequestTimeoutMs_="+a)),a=n;const Nt=i.g;if(Nt){const Bt=Nt.g?Nt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bt){var m=a.i;!m.g&&(Ke(Bt,"spdy")||Ke(Bt,"quic")||Ke(Bt,"h2"))&&(m.j=m.l,m.g=new Set,m.h&&(lr(m,m.h),m.h=null))}if(a.D){const mn=Nt.g?Nt.g.getResponseHeader("X-HTTP-Session-Id"):null;mn&&(a.sa=mn,fr(a.F,a.D,mn))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-i.F,n.h.info("Handshake RTT: "+n.O+"ms"));var E=i;if((a=n).oa=ba(a,a.H?a.la:null,a.W),E.J){Lr(a.i,E);var x=E,H=a.K;H&&x.setTimeout(H),x.B&&(Yo(x),fs(x)),a.g=E}else Da(a);0<n.l.length&&Qo(n)}else"stop"!=Z[0]&&"close"!=Z[0]||Ms(n,7);else 3==n.G&&("stop"==Z[0]||"close"==Z[0]?"stop"==Z[0]?Ms(n,7):ts(n):"noop"!=Z[0]&&n.j&&n.j.wa(Z),n.A=0)}Er(4)}catch(Z){}}function ki(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ae(i)||"string"==typeof i)it(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var n=i.T();else if(i.R&&"function"==typeof i.R)n=void 0;else if(Ae(i)||"string"==typeof i){n=[];for(var a=i.length,d=0;d<a;d++)n.push(d)}else for(d in n=[],a=0,i)n[a++]=d;a=function Uo(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ae(i)){for(var e=[],n=i.length,a=0;a<n;a++)e.push(i[a]);return e}for(a in e=[],n=0,i)e[n++]=i[a];return e}(i),d=a.length;for(var m=0;m<d;m++)e.call(void 0,a[m],n&&n[m],i)}}function lo(i,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var a=0;a<n;a+=2)this.set(arguments[a],arguments[a+1])}else if(i)if(i instanceof lo)for(n=i.T(),a=0;a<n.length;a++)this.set(n[a],i.get(n[a]));else for(a in i)this.set(a,i[a])}function bs(i){if(i.i!=i.g.length){for(var e=0,n=0;e<i.g.length;){var a=i.g[e];Di(i.h,a)&&(i.g[n++]=a),e++}i.g.length=n}if(i.i!=i.g.length){var d={};for(n=e=0;e<i.g.length;)Di(d,a=i.g[e])||(i.g[n++]=a,d[a]=1),e++;i.g.length=n}}function Di(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(ce=os.prototype).setTimeout=function(i){this.P=i},ce.gb=function(i){i=i.target;const e=this.L;e&&3==$n(i)?e.l():this.Ia(i)},ce.Ia=function(i){try{if(i==this.g)e:{const Ie=$n(this.g);var e=this.g.Da();const Be=this.g.ba();if(!(3>Ie)&&(3!=Ie||Hn||this.g&&(this.h.h||this.g.ga()||As(this.g)))){this.I||4!=Ie||7==e||Er(8==e||0>=Be?3:2),Yo(this);var n=this.g.ba();this.N=n;t:if(Fo(this)){var a=As(this.g);i="";var d=a.length,m=4==$n(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ni(this),us(this);var E="";break t}this.h.i=new ee.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(a[e],{stream:m&&e==d-1});a.splice(0,d),this.h.g+=i,this.C=0,E=this.h.g}else E=this.g.ga();if(this.i=200==n,function zn(i,e,n,a,d,m,E){i.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+d+"]: "+e+"\n"+n+"\n"+m+" "+E})}(this.j,this.u,this.A,this.m,this.X,Ie,n),this.i){if(this.$&&!this.J){t:{if(this.g){var x,H=this.g;if((x=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!et(x)){var Z=x;break t}}Z=null}if(!(n=Z)){this.i=!1,this.o=3,ve(12),Ni(this),us(this);break e}mi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Lo(this,n)}this.U?(Ji(this,Ie,E),Hn&&this.i&&3==Ie&&(Qr(this.V,this.W,"tick",this.fb),this.W.start())):(mi(this.j,this.m,E,null),Lo(this,E)),4==Ie&&Ni(this),this.i&&!this.I&&(4==Ie?Gu(this.l,this):(this.i=!1,fs(this)))}else 400==n&&0<E.indexOf("Unknown SID")?(this.o=3,ve(12)):(this.o=0,ve(13)),Ni(this),us(this)}}}catch(Ie){}},ce.fb=function(){if(this.g){var i=$n(this.g),e=this.g.ga();this.C<e.length&&(Yo(this),Ji(this,i,e),this.i&&4!=i&&fs(this))}},ce.cancel=function(){this.I=!0,Ni(this)},ce.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Pr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Er(3),ve(17)),Ni(this),this.o=2,us(this)):ca(this,this.Y-i)},(ce=lo.prototype).R=function(){bs(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},ce.T=function(){return bs(this),this.g.concat()},ce.get=function(i,e){return Di(this.h,i)?this.h[i]:e},ce.set=function(i,e){Di(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},ce.forEach=function(i,e){for(var n=this.T(),a=0;a<n.length;a++){var d=n[a],m=this.get(d);i.call(e,m,d,this)}};var Ii=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ls(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof ls){this.g=void 0!==e?e:i.g,Hs(this,i.j),this.s=i.s,ps(this,i.i),gs(this,i.m),this.l=i.l,e=i.h;var n=new Gs;n.i=e.i,e.g&&(n.g=new lo(e.g),n.h=e.h),ms(this,n),this.o=i.o}else i&&(n=String(i).match(Ii))?(this.g=!!e,Hs(this,n[1]||"",!0),this.s=ui(n[2]||""),ps(this,n[3]||"",!0),gs(this,n[4]),this.l=ui(n[5]||"",!0),ms(this,n[6]||"",!0),this.o=ui(n[7]||"")):(this.g=!!e,this.h=new Gs(null,this.g))}function bi(i){return new ls(i)}function Hs(i,e,n){i.j=n?ui(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function ps(i,e,n){i.i=n?ui(e,!0):e}function gs(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function ms(i,e,n){e instanceof Gs?(i.h=e,function Ne(i,e){e&&!i.j&&(mr(i),i.i=null,i.g.forEach(function(n,a){var d=a.toLowerCase();a!=d&&(V(this,a),U(this,d,n))},i)),i.j=e}(i.h,i.g)):(n||(e=Xi(e,_s)),i.h=new Gs(e,i.g))}function fr(i,e,n){i.h.set(e,n)}function Ti(i){return fr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ui(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Xi(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,Ca),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ca(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ls.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Xi(e,Ts,!0),":");var n=this.i;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Xi(e,Ts,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&i.push("/"),i.push(Xi(n,"/"==n.charAt(0)?Do:Co,!0))),(n=this.h.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Xi(n,ys)),i.join("")};var Ts=/[#\/\?@]/g,Co=/[#\?:]/g,Do=/[#\?]/g,_s=/[#\?@]/g,ys=/#/g;function Gs(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function mr(i){i.g||(i.g=new lo,i.h=0,i.i&&function Fs(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var a=i[n].indexOf("="),d=null;if(0<=a){var m=i[n].substring(0,a);d=i[n].substring(a+1)}else m=i[n];e(m,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function V(i,e){mr(i),e=se(i,e),Di(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Di((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&bs(i)))}function J(i,e){return mr(i),e=se(i,e),Di(i.g.h,e)}function U(i,e,n){V(i,e),0<n.length&&(i.i=null,i.g.set(se(i,e),ze(n)),i.h+=n.length)}function se(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Mt(i){this.l=i||hn,i=ee.PerformanceNavigationTiming?0<(i=ee.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ee.g&&ee.g.Ea&&ee.g.Ea()&&ee.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ce=Gs.prototype).add=function(i,e){mr(this),this.i=null,i=se(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},ce.forEach=function(i,e){mr(this),this.g.forEach(function(n,a){it(n,function(d){i.call(e,d,a,this)},this)},this)},ce.T=function(){mr(this);for(var i=this.g.R(),e=this.g.T(),n=[],a=0;a<e.length;a++)for(var d=i[a],m=0;m<d.length;m++)n.push(e[a]);return n},ce.R=function(i){mr(this);var e=[];if("string"==typeof i)J(this,i)&&(e=Fe(e,this.g.get(se(this,i))));else{i=this.g.R();for(var n=0;n<i.length;n++)e=Fe(e,i[n])}return e},ce.set=function(i,e){return mr(this),this.i=null,J(this,i=se(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},ce.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},ce.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),n=0;n<e.length;n++){var a=e[n],d=encodeURIComponent(String(a));a=this.R(a);for(var m=0;m<a.length;m++){var E=d;""!==a[m]&&(E+="="+encodeURIComponent(String(a[m]))),i.push(E)}}return this.i=i.join("&")};var hn=10;function In(i){return!!i.h||!!i.g&&i.g.size>=i.j}function _r(i){return i.h?1:i.g?i.g.size:0}function Un(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function lr(i,e){i.g?i.g.add(e):i.h=e}function Lr(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function wr(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.D);return e}return ze(i.i)}function Nr(){}function vs(){this.g=new Nr}function Li(i,e,n){const a=n||"";try{ki(i,function(d,m){let E=d;Ye(d)&&(E=Le(d)),e.push(a+m+"="+encodeURIComponent(E))})}catch(d){throw e.push(a+"type="+encodeURIComponent("_badmap")),d}}function es(i,e,n,a,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(a)}catch(m){}}function Ls(i){this.l=i.$b||null,this.j=i.ib||!1}function bo(i,e){Gt.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=co,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mt.prototype.cancel=function(){if(this.i=wr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},Nr.prototype.stringify=function(i){return ee.JSON.stringify(i,void 0)},Nr.prototype.parse=function(i){return ee.JSON.parse(i,void 0)},Qe(Ls,qe),Ls.prototype.g=function(){return new bo(this.l,this.j)},Ls.prototype.i=function(i){return function(){return i}}({}),Qe(bo,Gt);var co=0;function $(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function F(i){i.readyState=4,i.l=null,i.j=null,i.A=null,k(i)}function k(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(ce=bo.prototype).open=function(i,e){if(this.readyState!=co)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,k(this)},ce.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ee).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},ce.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,F(this)),this.readyState=co},ce.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,k(this)),this.g&&(this.readyState=3,k(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ee.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},ce.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?F(this):k(this),3==this.readyState&&$(this)}},ce.Ua=function(i){this.g&&(this.response=this.responseText=i,F(this))},ce.Ta=function(i){this.g&&(this.response=i,F(this))},ce.ha=function(){this.g&&F(this)},ce.setRequestHeader=function(i,e){this.v.append(i,e)},ce.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},ce.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(bo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var ie=ee.JSON.parse;function Se(i){Gt.call(this),this.headers=new lo,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kt,this.K=this.L=!1}Qe(Se,Gt);var kt="",Kr=/^https?$/i,yr=["POST","PUT"];function cs(i){return"content-type"==i.toLowerCase()}function Ui(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,Us(i),Ur(i)}function Us(i){i.D||(i.D=!0,Mn(i,"complete"),Mn(i,"error"))}function Bo(i){if(i.h&&void 0!==_e&&(!i.C[1]||4!=$n(i)||2!=i.ba()))if(i.v&&4==$n(i))Oi(i.Fa,0,i);else if(Mn(i,"readystatechange"),4==$n(i)){i.h=!1;try{const x=i.ba();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var a;if(a=0===x){var d=String(i.H).match(Ii)[1]||null;if(!d&&ee.self&&ee.self.location){var m=ee.self.location.protocol;d=m.substr(0,m.length-1)}a=!Kr.test(d?d.toLowerCase():"")}n=a}if(n)Mn(i,"complete"),Mn(i,"success");else{i.m=6;try{var E=2<$n(i)?i.g.statusText:""}catch(H){E=""}i.j=E+" ["+i.ba()+"]",Us(i)}}finally{Ur(i)}}}function Ur(i,e){if(i.g){Mr(i);const n=i.g,a=i.C[0]?fe:null;i.g=null,i.C=null,e||Mn(i,"ready");try{n.onreadystatechange=a}catch(d){}}}function Mr(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ee.clearTimeout(i.A),i.A=null)}function $n(i){return i.g?i.g.readyState:0}function As(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case kt:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ss(i,e,n){e:{for(a in n){var a=!1;break e}a=!0}a||(n=function tr(i){let e="";return Ot(i,function(n,a){e+=a,e+=":",e+=n,e+="\r\n"}),e}(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):fr(i,e,n))}function To(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function ho(i){this.za=0,this.l=[],this.h=new dr,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=To("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=To("baseRetryDelayMs",5e3,i),this.$a=To("retryDelaySeedMs",1e4,i),this.Ya=To("forwardChannelMaxRetries",2,i),this.ra=To("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Mt(i&&i.concurrentRequestLimit),this.Ca=new vs,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function ts(i){if(Zn(i),3==i.G){var e=i.V++,n=bi(i.F);fr(n,"SID",i.J),fr(n,"RID",e),fr(n,"TYPE","terminate"),Ga(i,n),(e=new os(i,i.h,e,void 0)).K=2,e.v=Ti(bi(n)),n=!1,ee.navigator&&ee.navigator.sendBeacon&&(n=ee.navigator.sendBeacon(e.v.toString(),"")),!n&&ee.Image&&((new Image).src=e.v,n=!0),n||(e.g=ws(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fs(e)}gl(i)}function ni(i){i.g&&(Rs(i),i.g.cancel(),i.g=null)}function Zn(i){ni(i),i.u&&(ee.clearTimeout(i.u),i.u=null),So(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ee.clearTimeout(i.m),i.m=null)}function Wi(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Qo(i)}function Qo(i){In(i.i)||i.m||(i.m=!0,Lt(i.Ha,i),i.C=0)}function Ai(i,e){var n;n=e?e.m:i.V++;const a=bi(i.F);fr(a,"SID",i.J),fr(a,"RID",n),fr(a,"AID",i.U),Ga(i,a),i.o&&i.s&&Ss(a,i.o,i.s),n=new os(i,i.h,n,i.C+1),null===i.o&&(n.H=i.s),e&&(i.l=e.D.concat(i.l)),e=za(i,n,1e3),n.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),lr(i.i,n),Ws(n,a,e)}function Ga(i,e){i.j&&ki({},function(n,a){fr(e,a,n)})}function za(i,e,n){n=Math.min(i.l.length,n);var a=i.j?xe(i.j.Oa,i.j,i):null;e:{var d=i.l;let m=-1;for(;;){const E=["count="+n];-1==m?0<n?(m=d[0].h,E.push("ofs="+m)):m=0:E.push("ofs="+m);let x=!0;for(let H=0;H<n;H++){let Z=d[H].h;const Ie=d[H].g;if(Z-=m,0>Z)m=Math.max(0,d[H].h-100),x=!1;else try{Li(Ie,E,"req"+Z+"_")}catch(Be){a&&a(Ie)}}if(x){a=E.join("&");break e}}}return i=i.l.splice(0,n),e.D=i,a}function Da(i){i.g||i.u||(i.Y=1,Lt(i.Ga,i),i.A=0)}function jo(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Q(xe(i.Ga,i),gu(i,i.A)),i.A++,0))}function Rs(i){null!=i.B&&(ee.clearTimeout(i.B),i.B=null)}function Ao(i){i.g=new os(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=bi(i.oa);fr(e,"RID","rpc"),fr(e,"SID",i.J),fr(e,"CI",i.N?"0":"1"),fr(e,"AID",i.U),Ga(i,e),fr(e,"TYPE","xmlhttp"),i.o&&i.s&&Ss(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var n=i.g;i=i.la,n.K=1,n.v=Ti(bi(e)),n.s=null,n.U=!0,ks(n,i)}function So(i){null!=i.v&&(ee.clearTimeout(i.v),i.v=null)}function Gu(i,e){var n=null;if(i.g==e){So(i),Rs(i),i.g=null;var a=2}else{if(!Un(i.i,e))return;n=e.D,Lr(i.i,e),a=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==a){n=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;Mn(a=Pi(),new le(a,n,e,d)),Qo(i)}else Da(i);else if(3==(d=e.o)||0==d&&0<i.I||!(1==a&&function Ha(i,e){return!(_r(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Q(xe(i.Ha,i,e),gu(i,i.C)),i.C++,0)))}(i,e)||2==a&&jo(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),d){case 1:Ms(i,5);break;case 4:Ms(i,10);break;case 3:Ms(i,6);break;default:Ms(i,2)}}function gu(i,e){let n=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(n*=2),n*e}function Ms(i,e){if(i.h.info("Error code "+e),2==e){var n=null;i.j&&(n=null);var a=xe(i.jb,i);n||(n=new ls("//www.google.com/images/cleardot.gif"),ee.location&&"http"==ee.location.protocol||Hs(n,"https"),Ti(n)),function Dn(i,e){const n=new dr;if(ee.Image){const a=new Image;a.onload=wt(es,n,a,"TestLoadImage: loaded",!0,e),a.onerror=wt(es,n,a,"TestLoadImage: error",!1,e),a.onabort=wt(es,n,a,"TestLoadImage: abort",!1,e),a.ontimeout=wt(es,n,a,"TestLoadImage: timeout",!1,e),ee.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=i}else e(!1)}(n.toString(),a)}else ve(2);i.G=0,i.j&&i.j.va(e),gl(i),Zn(i)}function gl(i){i.G=0,i.I=-1,i.j&&((0!=wr(i.i).length||0!=i.l.length)&&(i.i.i.length=0,ze(i.l),i.l.length=0),i.j.ua())}function ba(i,e,n){let a=function Vo(i){return i instanceof ls?bi(i):new ls(i,void 0)}(n);if(""!=a.i)e&&ps(a,e+"."+a.i),gs(a,a.m);else{const d=ee.location;a=function Fi(i,e,n,a){var d=new ls(null,void 0);return i&&Hs(d,i),e&&ps(d,e),n&&gs(d,n),a&&(d.l=a),d}(d.protocol,e?e+"."+d.hostname:d.hostname,+d.port,n)}return i.aa&&Ot(i.aa,function(d,m){fr(a,m,d)}),n=i.sa,(e=i.D)&&n&&fr(a,e,n),fr(a,"VER",i.ma),Ga(i,a),a}function ws(i,e,n){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Se(n&&i.Ba&&!i.qa?new Ls({ib:!0}):i.qa)).L=i.H,e}function Jo(){}function qr(){if(Wn&&!(10<=Number(Hr)))throw Error("Environmental error: no available transport.")}function Rn(i,e){Gt.call(this),this.g=new ho(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!et(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!et(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new $o(this)}function mu(i){gn.call(this);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function _u(){Sn.call(this),this.status=1}function $o(i){this.g=i}(ce=Se.prototype).ea=function(i,e,n,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ai.g(),this.C=function Rt(i){return i.h||(i.h=i.i())}(this.u?this.u:ai),this.g.onreadystatechange=xe(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void Ui(this,m)}i=n||"";const d=new lo(this.headers);a&&ki(a,function(m,E){d.set(E,m)}),a=function Xe(i){e:{var e=cs;const n=i.length,a="string"==typeof i?i.split(""):i;for(let d=0;d<n;d++)if(d in a&&e.call(void 0,a[d],d,i)){e=d;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(d.T()),n=ee.FormData&&i instanceof ee.FormData,!(0<=je(yr,e))||a||n||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(m,E){this.g.setRequestHeader(E,m)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Mr(this),0<this.B&&((this.K=function Es(i){return Wn&&function An(){return function sn(i){var e=pr;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=dt(String(Ar)).split("."),n=dt("9").split("."),a=Math.max(e.length,n.length);for(let E=0;0==i&&E<a;E++){var d=e[E]||"",m=n[E]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==d[0].length&&0==m[0].length)break;i=_t(0==d[1].length?0:parseInt(d[1],10),0==m[1].length?0:parseInt(m[1],10))||_t(0==d[2].length,0==m[2].length)||_t(d[2],m[2]),d=d[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xe(this.pa,this)):this.A=Oi(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){Ui(this,m)}},ce.pa=function(){void 0!==_e&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mn(this,"timeout"),this.abort(8))},ce.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,Mn(this,"complete"),Mn(this,"abort"),Ur(this))},ce.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ur(this,!0)),Se.Z.M.call(this)},ce.Fa=function(){this.s||(this.F||this.v||this.l?Bo(this):this.cb())},ce.cb=function(){Bo(this)},ce.ba=function(){try{return 2<$n(this)?this.g.status:-1}catch(i){return-1}},ce.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},ce.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),ie(e)}},ce.Da=function(){return this.m},ce.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ce=ho.prototype).ma=8,ce.G=1,ce.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},ce.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const d=new os(this,this.h,i,void 0);let m=this.s;if(this.P&&(m?(m=en(m),En(m,this.P)):m=this.P),null===this.o&&(d.H=m),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){var a=this.l[n];if(void 0===(a="__data__"in a.g&&"string"==typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=n;break e}if(4096===e||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=za(this,d,e),fr(n=bi(this.F),"RID",i),fr(n,"CVER",22),this.D&&fr(n,"X-HTTP-Session-Id",this.D),Ga(this,n),this.o&&m&&Ss(n,this.o,m),lr(this.i,d),this.Ra&&fr(n,"TYPE","init"),this.ja?(fr(n,"$req",e),fr(n,"SID","null"),d.$=!0,Ws(d,n,null)):Ws(d,n,e),this.G=2}}else 3==this.G&&(i?Ai(this,i):0==this.l.length||In(this.i)||Ai(this))},ce.Ga=function(){if(this.u=null,Ao(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Q(xe(this.bb,this),i)}},ce.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ve(10),ni(this),Ao(this))},ce.ab=function(){null!=this.v&&(this.v=null,ni(this),jo(this),ve(19))},ce.jb=function(i){i?(this.h.info("Successfully pinged google.com"),ve(2)):(this.h.info("Failed to ping google.com"),ve(1))},(ce=Jo.prototype).xa=function(){},ce.wa=function(){},ce.va=function(){},ce.ua=function(){},ce.Oa=function(){},qr.prototype.g=function(i,e){return new Rn(i,e)},Qe(Rn,Gt),Rn.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,n=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Lt(xe(i.hb,i,e))),ve(0),i.W=e,i.aa=n||{},i.N=i.X,i.F=ba(i,null,i.W),Qo(i)},Rn.prototype.close=function(){ts(this.g)},Rn.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Wi(this.g,e)}else this.v?((e={}).__data__=Le(i),Wi(this.g,e)):Wi(this.g,i)},Rn.prototype.M=function(){this.g.j=null,delete this.j,ts(this.g),delete this.g,Rn.Z.M.call(this)},Qe(mu,gn),Qe(_u,Sn),Qe($o,Jo),$o.prototype.xa=function(){Mn(this.g,"a")},$o.prototype.wa=function(i){Mn(this.g,new mu(i))},$o.prototype.va=function(i){Mn(this.g,new _u(i))},$o.prototype.ua=function(){Mn(this.g,"b")},qr.prototype.createWebChannel=qr.prototype.g,Rn.prototype.send=Rn.prototype.u,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,me.NO_ERROR=0,me.TIMEOUT=8,me.HTTP_ERROR=6,$e.COMPLETE="complete",yn.EventType=Nn,Nn.OPEN="a",Nn.CLOSE="b",Nn.ERROR="c",Nn.MESSAGE="d",Gt.prototype.listen=Gt.prototype.N,Se.prototype.listenOnce=Se.prototype.O,Se.prototype.getLastError=Se.prototype.La,Se.prototype.getLastErrorCode=Se.prototype.Da,Se.prototype.getStatus=Se.prototype.ba,Se.prototype.getResponseJson=Se.prototype.Qa,Se.prototype.getResponseText=Se.prototype.ga,Se.prototype.send=Se.prototype.ea;var Wo=be.createWebChannelTransport=function(){return new qr},Ta=be.getStatEventTarget=function(){return Pi()},pi=be.ErrorCode=me,Aa=be.EventType=$e,Hi=be.Event=ti,kr=be.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ka=be.FetchXmlHttpFactory=Ls,da=be.WebChannel=yn,Vs=be.XhrIo=Se;const zs="@firebase/firestore";class li{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}li.UNAUTHENTICATED=new li(null),li.GOOGLE_CREDENTIALS=new li("google-credentials-uid"),li.FIRST_PARTY=new li("first-party-uid"),li.MOCK_USER=new li("mock-user");let Ro="9.8.0";const Si=new Ee.Yd("@firebase/firestore");function ha(){return Si.logLevel}function ml(i){Si.setLogLevel(i)}function jt(i,...e){if(Si.logLevel<=Ee.in.DEBUG){const n=e.map(Zr);Si.debug(`Firestore (${Ro}): ${i}`,...n)}}function Vi(i,...e){if(Si.logLevel<=Ee.in.ERROR){const n=e.map(Zr);Si.error(`Firestore (${Ro}): ${i}`,...n)}}function Bi(i,...e){if(Si.logLevel<=Ee.in.WARN){const n=e.map(Zr);Si.warn(`Firestore (${Ro}): ${i}`,...n)}}function Zr(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(n){return i}}function tn(i="Unexpected state"){const e=`FIRESTORE (${Ro}) INTERNAL ASSERTION FAILED: `+i;throw Vi(e),new Error(e)}function Vn(i,e){i||tn()}function Xo(i,e){i||tn()}function Kt(i,e){return i}const pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class It extends de.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class On{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qa{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(li.UNAUTHENTICATED))}shutdown(){}}class Ks{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Pc{constructor(e){this.t=e,this.currentUser=li.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var a=this;let d=this.i;const m=Z=>this.i!==d?(d=this.i,n(Z)):Promise.resolve();let E=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),E.resolve(),E=new _i,e.enqueueRetryable(()=>m(this.currentUser))};const x=()=>{const Z=E;e.enqueueRetryable((0,p.Z)(function*(){yield Z.promise,yield m(a.currentUser)}))},H=Z=>{jt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Z,this.auth.addAuthTokenListener(this.o),x()};this.t.onInit(Z=>H(Z)),setTimeout(()=>{if(!this.auth){const Z=this.t.getImmediate({optional:!0});Z?H(Z):(jt("FirebaseAuthCredentialsProvider","Auth not yet detected"),E.resolve(),E=new _i)}},0),x()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(a=>this.i!==e?(jt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Vn("string"==typeof a.accessToken),new On(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Vn(null===e||"string"==typeof e),new li(e)}}class hi{constructor(e,n,a){this.type="FirstParty",this.user=li.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const d=e.auth.getAuthHeaderValueForFirstParty([]);d&&this.headers.set("Authorization",d),a&&this.headers.set("X-Goog-Iam-Authorization-Token",a)}}class fa{constructor(e,n,a){this.h=e,this.l=n,this.m=a}getToken(){return Promise.resolve(new hi(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(li.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _l{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ea{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const a=m=>{null!=m.error&&jt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const E=m.token!==this.p;return this.p=m.token,jt("FirebaseAppCheckTokenProvider",`Received ${E?"new":"existing"} token.`),E?n(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>a(m))};const d=m=>{jt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.g.onInit(m=>d(m)),setTimeout(()=>{if(!this.appCheck){const m=this.g.getImmediate({optional:!0});m?d(m):jt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Vn("string"==typeof n.token),this.p=n.token,new _l(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class gi{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.I(a),this.T=a=>n.writeSequenceNumber(a))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Sa(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let a=0;a<i;a++)n[a]=Math.floor(256*Math.random());return n}gi.A=-1;class R{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const d=Sa(40);for(let m=0;m<d.length;++m)a.length<20&&d[m]<n&&(a+=e.charAt(d[m]%e.length))}return a}}function C(i,e){return i<e?-1:i>e?1:0}function I(i,e,n){return i.length===e.length&&i.every((a,d)=>n(a,e[d]))}function L(i){return i+"\0"}class W{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new It(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new It(pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new It(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new It(pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return W.fromMillis(Date.now())}static fromDate(e){return W.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*n));return new W(n,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?C(this.nanoseconds,e.nanoseconds):C(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class q{constructor(e){this.timestamp=e}static fromTimestamp(e){return new q(e)}static min(){return new q(new W(0,0))}static max(){return new q(new W(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Ce(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Oe(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Tt(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Xt{constructor(e,n,a){void 0===n?n=0:n>e.length&&tn(),void 0===a?a=e.length-n:a>e.length-n&&tn(),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return 0===Xt.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xt?e.forEach(a=>{n.push(a)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let d=0;d<a;d++){const m=e.get(d),E=n.get(d);if(m<E)return-1;if(m>E)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qt extends Xt{construct(e,n,a){return new qt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new It(pt.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter(d=>d.length>0))}return new qt(n)}static emptyPath(){return new qt([])}}const vn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pn extends Xt{construct(e,n,a){return new Pn(e,n,a)}static isValidIdentifier(e){return vn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Pn(["__name__"])}static fromServerFormat(e){const n=[];let a="",d=0;const m=()=>{if(0===a.length)throw new It(pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let E=!1;for(;d<e.length;){const x=e[d];if("\\"===x){if(d+1===e.length)throw new It(pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const H=e[d+1];if("\\"!==H&&"."!==H&&"`"!==H)throw new It(pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=H,d+=2}else"`"===x?(E=!E,d++):"."!==x||E?(a+=x,d++):(m(),d++)}if(m(),E)throw new It(pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pn(n)}static emptyPath(){return new Pn([])}}class Ir{constructor(e){this.fields=e,e.sort(Pn.comparator)}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return I(this.fields,e.fields,(n,a)=>n.isEqual(a))}}function ji(){return"undefined"!=typeof atob}class ii{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new ii(n)}static fromUint8Array(e){const n=function(a){let d="";for(let m=0;m<a.length;++m)d+=String.fromCharCode(a[m]);return d}(e);return new ii(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let a=0;a<e.length;a++)n[a]=e.charCodeAt(a);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return C(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ii.EMPTY_BYTE_STRING=new ii("");const Mo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qs(i){if(Vn(!!i),"string"==typeof i){let e=0;const n=Mo.exec(i);if(Vn(!!n),n[1]){let d=n[1];d=(d+"000000000").substr(0,9),e=Number(d)}const a=new Date(i);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:br(i.seconds),nanos:br(i.nanos)}}function br(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function Zs(i){return"string"==typeof i?ii.fromBase64String(i):ii.fromUint8Array(i)}function xs(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function zl(i){const e=i.mapValue.fields.__previous_value__;return xs(e)?zl(e):e}function Ra(i){const e=qs(i.mapValue.fields.__local_write_time__.timestampValue);return new W(e.seconds,e.nanos)}class pa{constructor(e,n,a,d,m,E,x,H){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=d,this.ssl=m,this.forceLongPolling=E,this.autoDetectLongPolling=x,this.useFetchStreams=H}}class xo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new xo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof xo&&e.projectId===this.projectId&&e.database===this.database}}function Za(i){return null==i}function Xr(i){return 0===i&&1/i==-1/0}function Kl(i){return"number"==typeof i&&Number.isInteger(i)&&!Xr(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Qt{constructor(e){this.path=e}static fromPath(e){return new Qt(qt.fromString(e))}static fromName(e){return new Qt(qt.fromString(e).popFirst(5))}static empty(){return new Qt(qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===qt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return qt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qt(new qt(e.slice()))}}const Ya={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zu={nullValue:"NULL_VALUE"};function Ma(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?xs(i)?4:xa(i)?9007199254740991:10:tn()}function ga(i,e){if(i===e)return!0;const n=Ma(i);if(n!==Ma(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Ra(i).isEqual(Ra(e));case 3:return function(a,d){if("string"==typeof a.timestampValue&&"string"==typeof d.timestampValue&&a.timestampValue.length===d.timestampValue.length)return a.timestampValue===d.timestampValue;const m=qs(a.timestampValue),E=qs(d.timestampValue);return m.seconds===E.seconds&&m.nanos===E.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,Zs(i.bytesValue).isEqual(Zs(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,d){return br(a.geoPointValue.latitude)===br(d.geoPointValue.latitude)&&br(a.geoPointValue.longitude)===br(d.geoPointValue.longitude)}(i,e);case 2:return function(a,d){if("integerValue"in a&&"integerValue"in d)return br(a.integerValue)===br(d.integerValue);if("doubleValue"in a&&"doubleValue"in d){const m=br(a.doubleValue),E=br(d.doubleValue);return m===E?Xr(m)===Xr(E):isNaN(m)&&isNaN(E)}return!1}(i,e);case 9:return I(i.arrayValue.values||[],e.arrayValue.values||[],ga);case 10:return function(a,d){const m=a.mapValue.fields||{},E=d.mapValue.fields||{};if(Ce(m)!==Ce(E))return!1;for(const x in m)if(m.hasOwnProperty(x)&&(void 0===E[x]||!ga(m[x],E[x])))return!1;return!0}(i,e);default:return tn()}var d}function yl(i,e){return void 0!==(i.values||[]).find(n=>ga(n,e))}function Ys(i,e){if(i===e)return 0;const n=Ma(i),a=Ma(e);if(n!==a)return C(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return C(i.booleanValue,e.booleanValue);case 2:return function(d,m){const E=br(d.integerValue||d.doubleValue),x=br(m.integerValue||m.doubleValue);return E<x?-1:E>x?1:E===x?0:isNaN(E)?isNaN(x)?0:-1:1}(i,e);case 3:return po(i.timestampValue,e.timestampValue);case 4:return po(Ra(i),Ra(e));case 5:return C(i.stringValue,e.stringValue);case 6:return function(d,m){const E=Zs(d),x=Zs(m);return E.compareTo(x)}(i.bytesValue,e.bytesValue);case 7:return function(d,m){const E=d.split("/"),x=m.split("/");for(let H=0;H<E.length&&H<x.length;H++){const Z=C(E[H],x[H]);if(0!==Z)return Z}return C(E.length,x.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,m){const E=C(br(d.latitude),br(m.latitude));return 0!==E?E:C(br(d.longitude),br(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,m){const E=d.values||[],x=m.values||[];for(let H=0;H<E.length&&H<x.length;++H){const Z=Ys(E[H],x[H]);if(Z)return Z}return C(E.length,x.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,m){if(d===Ya.mapValue&&m===Ya.mapValue)return 0;if(d===Ya.mapValue)return 1;if(m===Ya.mapValue)return-1;const E=d.fields||{},x=Object.keys(E),H=m.fields||{},Z=Object.keys(H);x.sort(),Z.sort();for(let Ie=0;Ie<x.length&&Ie<Z.length;++Ie){const Be=C(x[Ie],Z[Ie]);if(0!==Be)return Be;const mt=Ys(E[x[Ie]],H[Z[Ie]]);if(0!==mt)return mt}return C(x.length,Z.length)}(i.mapValue,e.mapValue);default:throw tn()}}function po(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return C(i,e);const n=qs(i),a=qs(e),d=C(n.seconds,a.seconds);return 0!==d?d:C(n.nanos,a.nanos)}function si(i){return ma(i)}function ma(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(a){const d=qs(a);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?Zs(i.bytesValue).toBase64():"referenceValue"in i?Qt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(a){let d="[",m=!0;for(const E of a.values||[])m?m=!1:d+=",",d+=ma(E);return d+"]"}(i.arrayValue):"mapValue"in i?function(a){const d=Object.keys(a.fields||{}).sort();let m="{",E=!0;for(const x of d)E?E=!1:m+=",",m+=`${x}:${ma(a.fields[x])}`;return m+"}"}(i.mapValue):tn();var e}function Os(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ku(i){return!!i&&"integerValue"in i}function go(i){return!!i&&"arrayValue"in i}function yi(i){return!!i&&"nullValue"in i}function Gi(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Qs(i){return!!i&&"mapValue"in i}function Oo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Oe(i.mapValue.fields,(n,a)=>e.mapValue.fields[n]=Oo(a)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Oo(i.arrayValue.values[n]);return e}return Object.assign({},i)}function xa(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Js(i){return"nullValue"in i?zu:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Os(xo.empty(),Qt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:tn()}function Nc(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Os(xo.empty(),Qt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Ya:tn()}function wd(i,e){const n=Ys(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function ql(i,e){const n=Ys(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class ns{constructor(e){this.value=e}static empty(){return new ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Qs(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Oo(n)}setAll(e){let n=Pn.emptyPath(),a={},d=[];e.forEach((E,x)=>{if(!n.isImmediateParentOf(x)){const H=this.getFieldsMap(n);this.applyChanges(H,a,d),a={},d=[],n=x.popLast()}E?a[x.lastSegment()]=Oo(E):d.push(x.lastSegment())});const m=this.getFieldsMap(n);this.applyChanges(m,a,d)}delete(e){const n=this.field(e.popLast());Qs(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ga(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let d=n.mapValue.fields[e.get(a)];Qs(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=d),n=d}return n.mapValue.fields}applyChanges(e,n,a){Oe(n,(d,m)=>e[d]=m);for(const d of a)delete e[d]}clone(){return new ns(Oo(this.value))}}function yu(i){const e=[];return Oe(i.fields,(n,a)=>{const d=new Pn([n]);if(Qs(a)){const m=yu(a.mapValue).fields;if(0===m.length)e.push(d);else for(const E of m)e.push(d.child(E))}else e.push(d)}),new Ir(e)}class Xn{constructor(e,n,a,d,m,E){this.key=e,this.documentType=n,this.version=a,this.readTime=d,this.data=m,this.documentState=E}static newInvalidDocument(e){return new Xn(e,0,q.min(),q.min(),ns.empty(),0)}static newFoundDocument(e,n,a){return new Xn(e,1,n,q.min(),a,0)}static newNoDocument(e,n){return new Xn(e,2,n,q.min(),ns.empty(),0)}static newUnknownDocument(e,n){return new Xn(e,3,n,q.min(),ns.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class mo{constructor(e,n,a,d){this.indexId=e,this.collectionGroup=n,this.fields=a,this.indexState=d}}function ta(i){return i.fields.find(e=>2===e.kind)}function Oa(i){return i.fields.filter(e=>2!==e.kind)}mo.UNKNOWN_ID=-1;class xr{constructor(e,n){this.fieldPath=e,this.kind=n}}class Is{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Is(0,_o.min())}}function Po(i,e){const n=i.toTimestamp().seconds,a=i.toTimestamp().nanoseconds+1,d=q.fromTimestamp(1e9===a?new W(n+1,0):new W(n,a));return new _o(d,Qt.empty(),e)}function qu(i){return new _o(i.readTime,i.key,-1)}class _o{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new _o(q.min(),Qt.empty(),-1)}static max(){return new _o(q.max(),Qt.empty(),-1)}}function Zu(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=Qt.comparator(i.documentKey,e.documentKey),0!==n?n:C(i.largestBatchId,e.largestBatchId))}class Wr{constructor(e,n){this.comparator=e,this.root=n||ci.EMPTY}insert(e,n){return new Wr(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new Wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(0===a)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const d=this.comparator(e,a.key);if(0===d)return n+a.left.size;d<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,a)=>(e(n,a),!1))}toString(){const e=[];return this.inorderTraversal((n,a)=>(e.push(`${n}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qa(this.root,e,this.comparator,!0)}}class Qa{constructor(e,n,a,d){this.isReverse=d,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=n?a(e.key,n):1,n&&d&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,n,a,d,m){this.key=e,this.value=n,this.color=null!=a?a:ci.RED,this.left=null!=d?d:ci.EMPTY,this.right=null!=m?m:ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,d,m){return new ci(null!=e?e:this.key,null!=n?n:this.value,null!=a?a:this.color,null!=d?d:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let d=this;const m=a(e,d.key);return d=m<0?d.copy(null,null,null,d.left.insert(e,n,a),null):0===m?d.copy(null,n,null,null,null):d.copy(null,null,null,null,d.right.insert(e,n,a)),d.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,d=this;if(n(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,n),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===n(e,d.key)){if(d.right.isEmpty())return ci.EMPTY;a=d.right.min(),d=d.copy(a.key,a.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,n))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tn();const e=this.left.check();if(e!==this.right.check())throw tn();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw tn()}get value(){throw tn()}get color(){throw tn()}get left(){throw tn()}get right(){throw tn()}copy(i,e,n,a,d){return this}insert(i,e,n){return new ci(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class P{constructor(e){this.comparator=e,this.data=new Wr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,a)=>(e(n),!1))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const d=a.getNext();if(this.comparator(d.key,e[1])>=0)return;n(d.key)}}forEachWhile(e,n){let a;for(a=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new B(this.data.getIterator())}getIteratorFrom(e){return new B(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(a=>{n=n.add(a)}),n}isEqual(e){if(!(e instanceof P)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const d=n.getNext().key,m=a.getNext().key;if(0!==this.comparator(d,m))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new P(this.comparator);return n.data=e,n}}class B{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ne(i){return i.hasNext()?i.getNext():void 0}class Re{constructor(e,n=null,a=[],d=[],m=null,E=null,x=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=d,this.limit=m,this.startAt=E,this.endAt=x,this.P=null}}function rt(i,e=null,n=[],a=[],d=null,m=null,E=null){return new Re(i,e,n,a,d,m,E)}function ft(i){const e=Kt(i);if(null===e.P){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(a=>{return(d=a).field.canonicalString()+d.op.toString()+si(d.value);var d}).join(","),n+="|ob:",n+=e.orderBy.map(a=>{return(d=a).field.canonicalString()+d.dir;var d}).join(","),Za(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(a=>si(a)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(a=>si(a)).join(",")),e.P=n}return e.P}function ln(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!El(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((n=i.filters[d]).op!==(a=e.filters[d]).op||!n.field.isEqual(a.field)||!ga(n.value,a.value))return!1;var n,a;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Yl(i.startAt,e.startAt)&&Yl(i.endAt,e.endAt)}function Kn(i){return Qt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function kn(i,e){return i.filters.filter(n=>n instanceof Yn&&n.field.isEqual(e))}function Vr(i,e,n){let a=zu,d=!0;for(const m of kn(i,e)){let E=zu,x=!0;switch(m.op){case"<":case"<=":E=Js(m.value);break;case"==":case"in":case">=":E=m.value;break;case">":E=m.value,x=!1;break;case"!=":case"not-in":E=zu}wd({value:a,inclusive:d},{value:E,inclusive:x})<0&&(a=E,d=x)}if(null!==n)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=n.position[m];wd({value:a,inclusive:d},{value:E,inclusive:n.inclusive})<0&&(a=E,d=n.inclusive);break}return{value:a,inclusive:d}}function sr(i,e,n){let a=Ya,d=!0;for(const m of kn(i,e)){let E=Ya,x=!0;switch(m.op){case">=":case">":E=Nc(m.value),x=!1;break;case"==":case"in":case"<=":E=m.value;break;case"<":E=m.value,x=!1;break;case"!=":case"not-in":E=Ya}ql({value:a,inclusive:d},{value:E,inclusive:x})>0&&(a=E,d=x)}if(null!==n)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const E=n.position[m];ql({value:a,inclusive:d},{value:E,inclusive:n.inclusive})>0&&(a=E,d=n.inclusive);break}return{value:a,inclusive:d}}class Yn extends class{}{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?"in"===n||"not-in"===n?this.V(e,n,a):new ds(e,n,a):"array-contains"===n?new _a(e,a):"in"===n?new Pa(e,a):"not-in"===n?new Xa(e,a):"array-contains-any"===n?new Yu(e,a):new Yn(e,n,a)}static V(e,n,a){return"in"===n?new vl(e,a):new Ja(e,a)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.v(Ys(n,this.value)):null!==n&&Ma(this.value)===Ma(n)&&this.v(Ys(n,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tn()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ds extends Yn{constructor(e,n,a){super(e,n,a),this.key=Qt.fromName(a.referenceValue)}matches(e){const n=Qt.comparator(e.key,this.key);return this.v(n)}}class vl extends Yn{constructor(e,n){super(e,"in",n),this.keys=na(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ja extends Yn{constructor(e,n){super(e,"not-in",n),this.keys=na(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function na(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(a=>Qt.fromName(a.referenceValue))}class _a extends Yn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return go(n)&&yl(n.arrayValue,this.value)}}class Pa extends Yn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&yl(this.value.arrayValue,n)}}class Xa extends Yn{constructor(e,n){super(e,"not-in",n)}matches(e){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!yl(this.value.arrayValue,n)}}class Yu extends Yn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!go(n)||!n.arrayValue.values)&&n.arrayValue.values.some(a=>yl(this.value.arrayValue,a))}}class yo{constructor(e,n){this.position=e,this.inclusive=n}}class Na{constructor(e,n="asc"){this.field=e,this.dir=n}}function El(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Zl(i,e,n){let a=0;for(let d=0;d<i.position.length;d++){const m=e[d],E=i.position[d];if(a=m.field.isKeyField()?Qt.comparator(Qt.fromName(E.referenceValue),n.key):Ys(E,n.data.field(m.field)),"desc"===m.dir&&(a*=-1),0!==a)break}return a}function Yl(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!ga(i.position[n],e.position[n]))return!1;return!0}class ra{constructor(e,n=null,a=[],d=[],m=null,E="F",x=null,H=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=d,this.limit=m,this.limitType=E,this.startAt=x,this.endAt=H,this.D=null,this.C=null}}function wl(i,e,n,a,d,m,E,x){return new ra(i,e,n,a,d,m,E,x)}function eu(i){return new ra(i)}function Ql(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function vu(i){for(const e of i.filters)if(e.S())return e.field;return null}function tu(i){return null!==i.collectionGroup}function Il(i){const e=Kt(i);if(null===e.D){e.D=[];const n=vu(e),a=Ql(e);if(null!==n&&null===a)n.isKeyField()||e.D.push(new Na(n)),e.D.push(new Na(Pn.keyField(),"asc"));else{let d=!1;for(const m of e.explicitOrderBy)e.D.push(m),m.field.isKeyField()&&(d=!0);if(!d){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new Na(Pn.keyField(),m))}}}return e.D}function ya(i){const e=Kt(i);if(!e.C)if("F"===e.limitType)e.C=rt(e.path,e.collectionGroup,Il(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const m of Il(e))n.push(new Na(m.field,"desc"===m.dir?"asc":"desc"));const a=e.endAt?new yo(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new yo(e.startAt.position,e.startAt.inclusive):null;e.C=rt(e.path,e.collectionGroup,n,e.filters,e.limit,a,d)}return e.C}function Jl(i,e,n){return new ra(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function Eu(i,e){return ln(ya(i),ya(e))&&i.limitType===e.limitType}function Cl(i){return`${ft(ya(i))}|lt:${i.limitType}`}function kc(i){return`Query(target=${function $t(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(n=>{return`${(a=n).field.canonicalString()} ${a.op} ${si(a.value)}`;var a}).join(", ")}]`),Za(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(n=>{return`${(a=n).field.canonicalString()} (${a.dir})`;var a}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(n=>si(n)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(n=>si(n)).join(",")),`Target(${e})`}(ya(i))}; limitType=${i.limitType})`}function Id(i,e){return e.isFoundDocument()&&function(n,a){const d=a.key.path;return null!==n.collectionGroup?a.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(d):Qt.isDocumentKey(n.path)?n.path.isEqual(d):n.path.isImmediateParentOf(d)}(i,e)&&function(n,a){for(const d of n.explicitOrderBy)if(!d.field.isKeyField()&&null===a.data.field(d.field))return!1;return!0}(i,e)&&function(n,a){for(const d of n.filters)if(!d.matches(a))return!1;return!0}(i,e)&&(a=e,!((n=i).startAt&&!function(d,m,E){const x=Zl(d,m,E);return d.inclusive?x<=0:x<0}(n.startAt,Il(n),a)||n.endAt&&!function(d,m,E){const x=Zl(d,m,E);return d.inclusive?x>=0:x>0}(n.endAt,Il(n),a)));var n,a}function Cd(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Qu(i){return(e,n)=>{let a=!1;for(const d of Il(i)){const m=Dd(d,e,n);if(0!==m)return m;a=a||d.field.isKeyField()}return 0}}function Dd(i,e,n){const a=i.field.isKeyField()?Qt.comparator(e.key,n.key):function(d,m,E){const x=m.data.field(d),H=E.data.field(d);return null!==x&&null!==H?Ys(x,H):tn()}(i.field,e,n);switch(i.dir){case"asc":return a;case"desc":return-1*a;default:return tn()}}function Ju(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xr(e)?"-0":e}}function mh(i){return{integerValue:""+i}}function _h(i,e){return Kl(e)?mh(e):Ju(i,e)}class Xl{constructor(){this._=void 0}}function Fc(i,e,n){return i instanceof Xu?function(a,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return d&&(m.fields.__previous_value__=d),{mapValue:m}}(n,e):i instanceof nu?ec(i,e):i instanceof el?Td(i,e):function(a,d){const m=Lc(a,d),E=Ad(m)+Ad(a.k);return Ku(m)&&Ku(a.k)?mh(E):Ju(a.M,E)}(i,e)}function bd(i,e,n){return i instanceof nu?ec(i,e):i instanceof el?Td(i,e):n}function Lc(i,e){return i instanceof ru?Ku(n=e)||(a=n)&&"doubleValue"in a?e:{integerValue:0}:null;var a,n}class Xu extends Xl{}class nu extends Xl{constructor(e){super(),this.elements=e}}function ec(i,e){const n=Uc(e);for(const a of i.elements)n.some(d=>ga(d,a))||n.push(a);return{arrayValue:{values:n}}}class el extends Xl{constructor(e){super(),this.elements=e}}function Td(i,e){let n=Uc(e);for(const a of i.elements)n=n.filter(d=>!ga(d,a));return{arrayValue:{values:n}}}class ru extends Xl{constructor(e,n){super(),this.M=e,this.k=n}}function Ad(i){return br(i.integerValue||i.doubleValue)}function Uc(i){return go(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class ia{constructor(e,n){this.field=e,this.transform=n}}class Sd{constructor(e,n){this.version=e,this.transformResults=n}}class rs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new rs}static exists(e){return new rs(void 0,e)}static updateTime(e){return new rs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rd(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class tc{}function Cf(i,e,n){i instanceof wu?function(a,d,m){const E=a.value.clone(),x=_(a.fieldTransforms,d,m.transformResults);E.setAll(x),d.convertToFoundDocument(m.version,E).setHasCommittedMutations()}(i,e,n):i instanceof Fa?function(a,d,m){if(!Rd(a.precondition,d))return void d.convertToUnknownDocument(m.version);const E=_(a.fieldTransforms,d,m.transformResults),x=d.data;x.setAll(b(a)),x.setAll(E),d.convertToFoundDocument(m.version,x).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function ka(i,e,n){var d;i instanceof wu?function(a,d,m){if(!Rd(a.precondition,d))return;const E=a.value.clone(),x=v(a.fieldTransforms,m,d);E.setAll(x),d.convertToFoundDocument(iu(d),E).setHasLocalMutations()}(i,e,n):i instanceof Fa?function(a,d,m){if(!Rd(a.precondition,d))return;const E=v(a.fieldTransforms,m,d),x=d.data;x.setAll(b(a)),x.setAll(E),d.convertToFoundDocument(iu(d),x).setHasLocalMutations()}(i,e,n):Rd(i.precondition,d=e)&&d.convertToNoDocument(q.min())}function Vc(i,e){let n=null;for(const a of i.fieldTransforms){const d=e.data.field(a.field),m=Lc(a.transform,d||null);null!=m&&(null==n&&(n=ns.empty()),n.set(a.field,m))}return n||null}function Md(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===a||n&&a&&I(n,a,(d,m)=>function tl(i,e){return i.field.isEqual(e.field)&&(a=e.transform,(n=i.transform)instanceof nu&&a instanceof nu||n instanceof el&&a instanceof el?I(n.elements,a.elements,ga):n instanceof ru&&a instanceof ru?ga(n.k,a.k):n instanceof Xu&&a instanceof Xu);var n,a}(d,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var n,a}function iu(i){return i.isFoundDocument()?i.version:q.min()}class wu extends tc{constructor(e,n,a,d=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=d,this.type=0}}class Fa extends tc{constructor(e,n,a,d,m=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=d,this.fieldTransforms=m,this.type=1}}function b(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const a=i.data.field(n);e.set(n,a)}}),e}function _(i,e,n){const a=new Map;Vn(i.length===n.length);for(let d=0;d<n.length;d++){const m=i[d],E=m.transform,x=e.data.field(m.field);a.set(m.field,bd(E,x,n[d]))}return a}function v(i,e,n){const a=new Map;for(const d of i){const m=d.transform,E=n.data.field(d.field);a.set(d.field,Fc(m,E,e))}return a}class A extends tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class Y extends tc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}}class ge{constructor(e){this.count=e}}var Ze,vt;function cn(i){switch(i){default:return tn();case pt.CANCELLED:case pt.UNKNOWN:case pt.DEADLINE_EXCEEDED:case pt.RESOURCE_EXHAUSTED:case pt.INTERNAL:case pt.UNAVAILABLE:case pt.UNAUTHENTICATED:return!1;case pt.INVALID_ARGUMENT:case pt.NOT_FOUND:case pt.ALREADY_EXISTS:case pt.PERMISSION_DENIED:case pt.FAILED_PRECONDITION:case pt.ABORTED:case pt.OUT_OF_RANGE:case pt.UNIMPLEMENTED:case pt.DATA_LOSS:return!0}}function Fn(i){if(void 0===i)return Vi("GRPC error has no .code"),pt.UNKNOWN;switch(i){case Ze.OK:return pt.OK;case Ze.CANCELLED:return pt.CANCELLED;case Ze.UNKNOWN:return pt.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return pt.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return pt.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return pt.INTERNAL;case Ze.UNAVAILABLE:return pt.UNAVAILABLE;case Ze.UNAUTHENTICATED:return pt.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return pt.INVALID_ARGUMENT;case Ze.NOT_FOUND:return pt.NOT_FOUND;case Ze.ALREADY_EXISTS:return pt.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return pt.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return pt.FAILED_PRECONDITION;case Ze.ABORTED:return pt.ABORTED;case Ze.OUT_OF_RANGE:return pt.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return pt.UNIMPLEMENTED;case Ze.DATA_LOSS:return pt.DATA_LOSS;default:return tn()}}(vt=Ze||(Ze={}))[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";class or{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(void 0!==a)for(const[d,m]of a)if(this.equalsFn(d,e))return m}has(e){return void 0!==this.get(e)}set(e,n){const a=this.mapKeyFn(e),d=this.inner[a];if(void 0===d)return this.inner[a]=[[e,n]],void this.innerSize++;for(let m=0;m<d.length;m++)if(this.equalsFn(d[m][0],e))return void(d[m]=[e,n]);d.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(void 0===a)return!1;for(let d=0;d<a.length;d++)if(this.equalsFn(a[d][0],e))return 1===a.length?delete this.inner[n]:a.splice(d,1),this.innerSize--,!0;return!1}forEach(e){Oe(this.inner,(n,a)=>{for(const[d,m]of a)e(d,m)})}isEmpty(){return Tt(this.inner)}size(){return this.innerSize}}const Ci=new Wr(Qt.comparator);function $i(){return Ci}const La=new Wr(Qt.comparator);function su(...i){let e=La;for(const n of i)e=e.insert(n.key,n);return e}function Iu(){return new or(i=>i.toString(),(i,e)=>i.isEqual(e))}const yh=new Wr(Qt.comparator),Cu=new P(Qt.comparator);function ei(...i){let e=Cu;for(const n of i)e=e.add(n);return e}const Bc=new P(C);function Dl(){return Bc}class ou{constructor(e,n,a,d,m){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=d,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,n){const a=new Map;return a.set(e,va.createSynthesizedTargetChangeForCurrentChange(e,n)),new ou(q.min(),a,Dl(),$i(),ei())}}class va{constructor(e,n,a,d,m){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=d,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,n){return new va(ii.EMPTY_BYTE_STRING,n,ei(),ei(),ei())}}class Ua{constructor(e,n,a,d){this.O=e,this.removedTargetIds=n,this.key=a,this.F=d}}class jc{constructor(e,n){this.targetId=e,this.$=n}}class Du{constructor(e,n,a=ii.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=d}}class vh{constructor(){this.B=0,this.L=Yp(),this.U=ii.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=ei(),n=ei(),a=ei();return this.L.forEach((d,m)=>{switch(m){case 0:e=e.add(d);break;case 2:n=n.add(d);break;case 1:a=a.add(d);break;default:tn()}}),new va(this.U,this.q,e,n,a)}J(){this.K=!1,this.L=Yp()}Y(e,n){this.K=!0,this.L=this.L.insert(e,n)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class zi{constructor(e){this.nt=e,this.st=new Map,this.it=$i(),this.rt=Zp(),this.ot=new P(C)}ut(e){for(const n of e.O)e.F&&e.F.isFoundDocument()?this.at(n,e.F):this.ct(n,e.key,e.F);for(const n of e.removedTargetIds)this.ct(n,e.key,e.F)}ht(e){this.forEachTarget(e,n=>{const a=this.lt(n);switch(e.state){case 0:this.ft(n)&&a.W(e.resumeToken);break;case 1:a.tt(),a.G||a.J(),a.W(e.resumeToken);break;case 2:a.tt(),a.G||this.removeTarget(n);break;case 3:this.ft(n)&&(a.et(),a.W(e.resumeToken));break;case 4:this.ft(n)&&(this.dt(n),a.W(e.resumeToken));break;default:tn()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.st.forEach((a,d)=>{this.ft(d)&&n(d)})}_t(e){const n=e.targetId,a=e.$.count,d=this.wt(n);if(d){const m=d.target;if(Kn(m))if(0===a){const E=new Qt(m.path);this.ct(n,E,Xn.newNoDocument(E,q.min()))}else Vn(1===a);else this.gt(n)!==a&&(this.dt(n),this.ot=this.ot.add(n))}}yt(e){const n=new Map;this.st.forEach((m,E)=>{const x=this.wt(E);if(x){if(m.current&&Kn(x.target)){const H=new Qt(x.target.path);null!==this.it.get(H)||this.It(E,H)||this.ct(E,H,Xn.newNoDocument(H,e))}m.j&&(n.set(E,m.H()),m.J())}});let a=ei();this.rt.forEach((m,E)=>{let x=!0;E.forEachWhile(H=>{const Z=this.wt(H);return!Z||2===Z.purpose||(x=!1,!1)}),x&&(a=a.add(m))}),this.it.forEach((m,E)=>E.setReadTime(e));const d=new ou(e,n,this.ot,this.it,a);return this.it=$i(),this.rt=Zp(),this.ot=new P(C),d}at(e,n){if(!this.ft(e))return;const a=this.It(e,n.key)?2:0;this.lt(e).Y(n.key,a),this.it=this.it.insert(n.key,n),this.rt=this.rt.insert(n.key,this.Tt(n.key).add(e))}ct(e,n,a){if(!this.ft(e))return;const d=this.lt(e);this.It(e,n)?d.Y(n,1):d.X(n),this.rt=this.rt.insert(n,this.Tt(n).delete(e)),a&&(this.it=this.it.insert(n,a))}removeTarget(e){this.st.delete(e)}gt(e){const n=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let n=this.st.get(e);return n||(n=new vh,this.st.set(e,n)),n}Tt(e){let n=this.rt.get(e);return n||(n=new P(C),this.rt=this.rt.insert(e,n)),n}ft(e){const n=null!==this.wt(e);return n||jt("WatchChangeAggregator","Detected inactive target",e),n}wt(e){const n=this.st.get(e);return n&&n.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new vh),this.nt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}It(e,n){return this.nt.getRemoteKeysForTarget(e).has(n)}}function Zp(){return new Wr(Qt.comparator)}function Yp(){return new Wr(Qt.comparator)}const Df={asc:"ASCENDING",desc:"DESCENDING"},Eh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class bf{constructor(e,n){this.databaseId=e,this.N=n}}function xd(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tf(i,e){return i.N?e.toBase64():e.toUint8Array()}function xm(i,e){return xd(i,e.toTimestamp())}function Xs(i){return Vn(!!i),q.fromTimestamp(function(e){const n=qs(e);return new W(n.seconds,n.nanos)}(i))}function Af(i,e){return(n=i,new qt(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Sf(i){const e=qt.fromString(i);return Vn(Wc(e)),e}function au(i,e){return Af(i.databaseId,e.path)}function Ri(i,e){const n=Sf(e);if(n.get(1)!==i.databaseId.projectId)throw new It(pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new It(pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Qt(eo(n))}function bl(i,e){return Af(i.databaseId,e)}function nl(i){const e=Sf(i);return 4===e.length?qt.emptyPath():eo(e)}function Tl(i){return new qt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function eo(i){return Vn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function $c(i,e,n){return{name:au(i,e),fields:n.value.mapValue.fields}}function nc(i,e,n){const a=Ri(i,e.name),d=Xs(e.updateTime),m=new ns({mapValue:{fields:e.fields}}),E=Xn.newFoundDocument(a,d,m);return n&&E.setHasCommittedMutations(),n?E.setHasCommittedMutations():E}function bu(i,e){let n;if(e instanceof wu)n={update:$c(i,e.key,e.value)};else if(e instanceof A)n={delete:au(i,e.key)};else if(e instanceof Fa)n={update:$c(i,e.key,e.data),updateMask:Mf(e.fieldMask)};else{if(!(e instanceof Y))return tn();n={verify:au(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(a=>function(d,m){const E=m.transform;if(E instanceof Xu)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof nu)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof el)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof ru)return{fieldPath:m.field.canonicalString(),increment:E.k};throw tn()}(0,a))),e.precondition.isNone||(n.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:xm(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:tn()),n;var d}function Od(i,e){const n=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?rs.updateTime(Xs(d.updateTime)):void 0!==d.exists?rs.exists(d.exists):rs.none():rs.none(),a=e.updateTransforms?e.updateTransforms.map(d=>function(m,E){let x=null;"setToServerValue"in E?(Vn("REQUEST_TIME"===E.setToServerValue),x=new Xu):"appendMissingElements"in E?x=new nu(E.appendMissingElements.values||[]):"removeAllFromArray"in E?x=new el(E.removeAllFromArray.values||[]):"increment"in E?x=new ru(m,E.increment):tn();const H=Pn.fromServerFormat(E.fieldPath);return new ia(H,x)}(i,d)):[];var d;if(e.update){const d=Ri(i,e.update.name),m=new ns({mapValue:{fields:e.update.fields}});if(e.updateMask){const E=new Ir((e.updateMask.fieldPaths||[]).map(Z=>Pn.fromServerFormat(Z)));return new Fa(d,m,E,n,a)}return new wu(d,m,n,a)}if(e.delete){const d=Ri(i,e.delete);return new A(d,n)}if(e.verify){const d=Ri(i,e.verify);return new Y(d,n)}return tn()}function Xp(i,e){return{documents:[bl(i,e.path)]}}function Rf(i,e){const n={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(n.parent=bl(i,a),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=bl(i,a.popLast()),n.structuredQuery.from=[{collectionId:a.lastSegment()}]);const d=function(H){if(0===H.length)return;const Z=H.map(Ie=>function(Be){if("=="===Be.op){if(Gi(Be.value))return{unaryFilter:{field:vo(Be.field),op:"IS_NAN"}};if(yi(Be.value))return{unaryFilter:{field:vo(Be.field),op:"IS_NULL"}}}else if("!="===Be.op){if(Gi(Be.value))return{unaryFilter:{field:vo(Be.field),op:"IS_NOT_NAN"}};if(yi(Be.value))return{unaryFilter:{field:vo(Be.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vo(Be.field),op:Nd(Be.op),value:Be.value}}}(Ie));return 1===Z.length?Z[0]:{compositeFilter:{op:"AND",filters:Z}}}(e.filters);d&&(n.structuredQuery.where=d);const m=function(H){if(0!==H.length)return H.map(Z=>{return{field:vo((Ie=Z).field),direction:Pm(Ie.dir)};var Ie})}(e.orderBy);m&&(n.structuredQuery.orderBy=m);const E=(Z=e.limit,i.N||Za(Z)?Z:{value:Z});var Z,x,H;return null!==E&&(n.structuredQuery.limit=E),e.startAt&&(n.structuredQuery.startAt={before:(x=e.startAt).inclusive,values:x.position}),e.endAt&&(n.structuredQuery.endAt={before:!(H=e.endAt).inclusive,values:H.position}),n}function wh(i){let e=nl(i.parent);const n=i.structuredQuery,a=n.from?n.from.length:0;let d=null;if(a>0){Vn(1===a);const Ie=n.from[0];Ie.allDescendants?d=Ie.collectionId:e=e.child(Ie.collectionId)}let m=[];n.where&&(m=Pd(n.where));let E=[];n.orderBy&&(E=n.orderBy.map(Ie=>{return new Na(Tu((Be=Ie).field),function(mt){switch(mt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Be.direction));var Be}));let x=null;n.limit&&(x=function(Ie){let Be;return Be="object"==typeof Ie?Ie.value:Ie,Za(Be)?null:Be}(n.limit));let H=null;var Ie;n.startAt&&(H=new yo((Ie=n.startAt).values||[],!!Ie.before));let Z=null;return n.endAt&&(Z=function(Ie){return new yo(Ie.values||[],!Ie.before)}(n.endAt)),wl(e,d,E,m,x,"F",H,Z)}function Pd(i){return i?void 0!==i.unaryFilter?[kd(i)]:void 0!==i.fieldFilter?[Nm(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>Pd(e)).reduce((e,n)=>e.concat(n)):tn():[]}function Pm(i){return Df[i]}function Nd(i){return Eh[i]}function vo(i){return{fieldPath:i.canonicalString()}}function Tu(i){return Pn.fromServerFormat(i.fieldPath)}function Nm(i){return Yn.create(Tu(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tn()}}(i.fieldFilter.op),i.fieldFilter.value)}function kd(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Tu(i.unaryFilter.field);return Yn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=Tu(i.unaryFilter.field);return Yn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Tu(i.unaryFilter.field);return Yn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Tu(i.unaryFilter.field);return Yn.create(d,"!=",{nullValue:"NULL_VALUE"});default:return tn()}}function Mf(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Wc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Bs(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Ea(e)),e=km(i.get(n),e);return Ea(e)}function km(i,e){let n=e;const a=i.length;for(let d=0;d<a;d++){const m=i.charAt(d);switch(m){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=m}}return n}function Ea(i){return i+"\x01\x01"}function Va(i){const e=i.length;if(Vn(e>=2),2===e)return Vn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),qt.emptyPath();const n=e-2,a=[];let d="";for(let m=0;m<e;){const E=i.indexOf("\x01",m);switch((E<0||E>n)&&tn(),i.charAt(E+1)){case"\x01":const x=i.substring(m,E);let H;0===d.length?H=x:(d+=x,H=d,d=""),a.push(H);break;case"\x10":d+=i.substring(m,E),d+="\0";break;case"\x11":d+=i.substring(m,E+1);break;default:tn()}m=E+2}return new qt(a)}const eg=["userId","batchId"];function rc(i,e){return[i,Bs(e)]}function Ch(i,e,n){return[i,Bs(e),n]}const Ba={},tg=["prefixPath","collectionGroup","readTime","documentId"],Fm=["prefixPath","collectionGroup","documentId"],ng=["collectionGroup","readTime","prefixPath","documentId"],Lm=["canonicalId","targetId"],Hc=["targetId","path"],Au=["path","targetId"],Um=["collectionId","parent"],Dh=["indexId","uid"],xf=["uid","sequenceNumber"],Vm=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Su=["indexId","uid","orderedDocumentKey"],Fd=["userId","collectionPath","documentId"],Gc=["userId","collectionPath","largestBatchId"],Bm=["userId","collectionGroup","largestBatchId"],Ld=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ud=[...Ld,"documentOverlays"],Of=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rg=[...Of,"indexConfiguration","indexState","indexEntries"],Vd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ct((a,d)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(a,d)},this.catchCallback=m=>{this.wrapFailure(n,m).next(a,d)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ct?n:Ct.resolve(n)}catch(n){return Ct.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ct.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ct.reject(n)}static resolve(e){return new Ct((n,a)=>{n(e)})}static reject(e){return new Ct((n,a)=>{a(e)})}static waitFor(e){return new Ct((n,a)=>{let d=0,m=0,E=!1;e.forEach(x=>{++d,x.next(()=>{++m,E&&m===d&&n()},H=>a(H))}),E=!0,m===d&&n()})}static or(e){let n=Ct.resolve(!1);for(const a of e)n=n.next(d=>d?Ct.resolve(d):a());return n}static forEach(e,n){const a=[];return e.forEach((d,m)=>{a.push(n.call(this,d,m))}),this.waitFor(a)}}class Pf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.At=new _i,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{n.error?this.At.reject(new zc(e,n.error)):this.At.resolve()},this.transaction.onerror=a=>{const d=Kc(a.target.error);this.At.reject(new zc(e,d))}}static open(e,n,a,d){try{return new Pf(n,e.transaction(d,a))}catch(m){throw new zc(n,m)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(jt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Ru(n)}}class to{constructor(e,n,a){this.name=e,this.version=n,this.Pt=a,12.2===to.Vt((0,de.z$)())&&Vi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return jt("SimpleDb","Removing database:",e),ic(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,de.hl)())return!1;if(to.St())return!0;const e=(0,de.z$)(),n=to.Vt(e),a=0<n&&n<10,d=to.Dt(e),m=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||m)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,n){return e.store(n)}static Vt(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static Dt(e){const n=e.match(/Android ([\d.]+)/i),a=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(a)}Nt(e){var n=this;return(0,p.Z)(function*(){return n.db||(jt("SimpleDb","Opening database:",n.name),n.db=yield new Promise((a,d)=>{const m=indexedDB.open(n.name,n.version);m.onsuccess=E=>{a(E.target.result)},m.onblocked=()=>{d(new zc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=E=>{const x=E.target.error;d("VersionError"===x.name?new It(pt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===x.name?new It(pt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+x):new zc(e,x))},m.onupgradeneeded=E=>{jt("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',E.oldVersion),n.Pt.kt(E.target.result,m.transaction,E.oldVersion,n.version).next(()=>{jt("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.Mt&&(n.db.onversionchange=a=>n.Mt(a)),n.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,a,d){var m=this;return(0,p.Z)(function*(){const E="readonly"===n;let x=0;for(;;){++x;try{m.db=yield m.Nt(e);const H=Pf.open(m.db,e,E?"readonly":"readwrite",a),Z=d(H).next(Ie=>(H.bt(),Ie)).catch(Ie=>(H.abort(Ie),Ct.reject(Ie))).toPromise();return Z.catch(()=>{}),yield H.Rt,Z}catch(H){const Z="FirebaseError"!==H.name&&x<3;if(jt("SimpleDb","Transaction failed with error:",H.message,"Retrying:",Z),m.close(),!Z)return Promise.reject(H)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Th{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return ic(this.Ft.delete())}}class zc extends It{constructor(e,n){super(pt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ja(i){return"IndexedDbTransactionError"===i.name}class Ru{constructor(e){this.store=e}put(e,n){let a;return void 0!==n?(jt("SimpleDb","PUT",this.store.name,e,n),a=this.store.put(n,e)):(jt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),ic(a)}add(e){return jt("SimpleDb","ADD",this.store.name,e,e),ic(this.store.add(e))}get(e){return ic(this.store.get(e)).next(n=>(void 0===n&&(n=null),jt("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return jt("SimpleDb","DELETE",this.store.name,e),ic(this.store.delete(e))}count(){return jt("SimpleDb","COUNT",this.store.name),ic(this.store.count())}qt(e,n){const a=this.options(e,n);if(a.index||"function"!=typeof this.store.getAll){const d=this.cursor(a),m=[];return this.Kt(d,(E,x)=>{m.push(x)}).next(()=>m)}{const d=this.store.getAll(a.range);return new Ct((m,E)=>{d.onerror=x=>{E(x.target.error)},d.onsuccess=x=>{m(x.target.result)}})}}Gt(e,n){const a=this.store.getAll(e,null===n?void 0:n);return new Ct((d,m)=>{a.onerror=E=>{m(E.target.error)},a.onsuccess=E=>{d(E.target.result)}})}Qt(e,n){jt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,n);a.jt=!1;const d=this.cursor(a);return this.Kt(d,(m,E,x)=>x.delete())}Wt(e,n){let a;n?a=e:(a={},n=e);const d=this.cursor(a);return this.Kt(d,n)}zt(e){const n=this.cursor({});return new Ct((a,d)=>{n.onerror=m=>{const E=Kc(m.target.error);d(E)},n.onsuccess=m=>{const E=m.target.result;E?e(E.primaryKey,E.value).next(x=>{x?E.continue():a()}):a()}})}Kt(e,n){const a=[];return new Ct((d,m)=>{e.onerror=E=>{m(E.target.error)},e.onsuccess=E=>{const x=E.target.result;if(!x)return void d();const H=new Th(x),Z=n(x.primaryKey,x.value,H);if(Z instanceof Ct){const Ie=Z.catch(Be=>(H.done(),Ct.reject(Be)));a.push(Ie)}H.isDone?d():null===H.Lt?x.continue():x.continue(H.Lt)}}).next(()=>Ct.waitFor(a))}options(e,n){let a;return void 0!==e&&("string"==typeof e?a=e:n=e),{index:a,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const a=this.store.index(e.index);return e.jt?a.openKeyCursor(e.range,n):a.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ic(i){return new Ct((e,n)=>{i.onsuccess=a=>{e(a.target.result)},i.onerror=a=>{const d=Kc(a.target.error);n(d)}})}let Ah=!1;function Kc(i){const e=to.Vt((0,de.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const a=new It("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ah||(Ah=!0,setTimeout(()=>{throw a},0)),a}}return i}class ig extends bh{constructor(e,n){super(),this.Ht=e,this.currentSequenceNumber=n}}function is(i,e){const n=Kt(i);return to.xt(n.Ht,e)}class Nf{constructor(e,n,a,d){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=d}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let d=0;d<this.mutations.length;d++){const m=this.mutations[d];m.key.isEqual(e.key)&&Cf(m,e,a[d])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&ka(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&ka(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const a=e.get(n.key),d=a;this.applyToLocalView(d),a.isValidDocument()||d.convertToNoDocument(q.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ei())}isEqual(e){return this.batchId===e.batchId&&I(this.mutations,e.mutations,(n,a)=>Md(n,a))&&I(this.baseMutations,e.baseMutations,(n,a)=>Md(n,a))}}class Bd{constructor(e,n,a,d){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=d}static from(e,n,a){Vn(e.mutations.length===a.length);let d=yh;const m=e.mutations;for(let E=0;E<m.length;E++)d=d.insert(m[E].key,a[E].version);return new Bd(e,n,a,d)}}class qc{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Mu{constructor(e,n,a,d,m=q.min(),E=q.min(),x=ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=d,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=E,this.resumeToken=x}withSequenceNumber(e){return new Mu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Mu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sc{constructor(e){this.Jt=e}}function Sh(i,e){const n=e.key,a={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:jd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:au(d=i.Jt,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:xd(d,m.version.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:n.path.toArray(),readTime:Al(e.version)};else{if(!e.isUnknownDocument())return tn();a.unknownDocument={path:n.path.toArray(),version:Al(e.version)}}var d,m;return a}function jd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Al(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ho(i){const e=new W(i.seconds,i.nanoseconds);return q.fromTimestamp(e)}function oc(i,e){const n=(e.baseMutations||[]).map(m=>Od(i.Jt,m));for(let m=0;m<e.mutations.length-1;++m){const E=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(E.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const a=e.mutations.map(m=>Od(i.Jt,m)),d=W.fromMillis(e.localWriteTimeMs);return new Nf(e.batchId,d,n,a)}function ac(i){const e=Ho(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Ho(i.lastLimboFreeSnapshotVersion):q.min();let a;var d;return void 0!==i.query.documents?(Vn(1===(d=i.query).documents.length),a=ya(eu(nl(d.documents[0])))):a=ya(wh(i.query)),new Mu(a,i.targetId,0,i.lastListenSequenceNumber,e,n,ii.fromBase64String(i.resumeToken))}function Ff(i,e){const n=Al(e.snapshotVersion),a=Al(e.lastLimboFreeSnapshotVersion);let d;d=Kn(e.target)?Xp(i.Jt,e.target):Rf(i.Jt,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ft(e.target),readTime:n,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:d}}function uc(i){const e=wh({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?Jl(e,e.limit,"L"):e}function Rh(i,e){return new qc(e.largestBatchId,Od(i.Jt,e.overlayMutation))}function No(i,e){const n=e.path.lastSegment();return[i,Bs(e.path.popLast()),n]}class $d{getBundleMetadata(e,n){return xu(e).get(n).next(a=>{if(a)return{id:(d=a).bundleId,createTime:Ho(d.createTime),version:d.version};var d})}saveBundleMetadata(e,n){return xu(e).put({bundleId:(a=n).id,createTime:Al(Xs(a.createTime)),version:a.version});var a}getNamedQuery(e,n){return lc(e).get(n).next(a=>{if(a)return{name:(d=a).name,query:uc(d.bundledQuery),readTime:Ho(d.readTime)};var d})}saveNamedQuery(e,n){return lc(e).put({name:(a=n).name,readTime:Al(Xs(a.readTime)),bundledQuery:a.bundledQuery});var a}}function xu(i){return is(i,"bundles")}function lc(i){return is(i,"namedQueries")}class Go{constructor(e,n){this.M=e,this.userId=n}static Yt(e,n){return new Go(e,n.uid||"")}getOverlay(e,n){return sa(e).get(No(this.userId,n)).next(a=>a?Rh(this.M,a):null)}saveOverlays(e,n,a){const d=[];return a.forEach((m,E)=>{const x=new qc(n,E);d.push(this.Xt(e,x))}),Ct.waitFor(d)}removeOverlaysForBatchId(e,n,a){const d=new Set;n.forEach(E=>d.add(Bs(E.getCollectionPath())));const m=[];return d.forEach(E=>{const x=IDBKeyRange.bound([this.userId,E,a],[this.userId,E,a+1],!1,!0);m.push(sa(e).Qt("collectionPathOverlayIndex",x))}),Ct.waitFor(m)}getOverlaysForCollection(e,n,a){const d=Iu(),m=Bs(n),E=IDBKeyRange.bound([this.userId,m,a],[this.userId,m,Number.POSITIVE_INFINITY],!0);return sa(e).qt("collectionPathOverlayIndex",E).next(x=>{for(const H of x){const Z=Rh(this.M,H);d.set(Z.getKey(),Z)}return d})}getOverlaysForCollectionGroup(e,n,a,d){const m=Iu();let E;const x=IDBKeyRange.bound([this.userId,n,a],[this.userId,n,Number.POSITIVE_INFINITY],!0);return sa(e).Wt({index:"collectionGroupOverlayIndex",range:x},(H,Z,Ie)=>{const Be=Rh(this.M,Z);m.size()<d||Be.largestBatchId===E?(m.set(Be.getKey(),Be),E=Be.largestBatchId):Ie.done()}).next(()=>m)}Xt(e,n){return sa(e).put(function(a,d,m){const[E,x,H]=No(d,m.mutation.key);return{userId:d,collectionPath:x,documentId:H,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:bu(a.Jt,m.mutation)}}(this.M,this.userId,n))}}function sa(i){return is(i,"documentOverlays")}class uu{constructor(){}Zt(e,n){this.te(e,n),n.ee()}te(e,n){if("nullValue"in e)this.ne(n,5);else if("booleanValue"in e)this.ne(n,10),n.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(n,15),n.se(br(e.integerValue));else if("doubleValue"in e){const a=br(e.doubleValue);isNaN(a)?this.ne(n,13):(this.ne(n,15),Xr(a)?n.se(0):n.se(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ne(n,20),"string"==typeof a?n.ie(a):(n.ie(`${a.seconds||""}`),n.se(a.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,n),this.oe(n);else if("bytesValue"in e)this.ne(n,30),n.ue(Zs(e.bytesValue)),this.oe(n);else if("referenceValue"in e)this.ae(e.referenceValue,n);else if("geoPointValue"in e){const a=e.geoPointValue;this.ne(n,45),n.se(a.latitude||0),n.se(a.longitude||0)}else"mapValue"in e?xa(e)?this.ne(n,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,n),this.oe(n)):"arrayValue"in e?(this.he(e.arrayValue,n),this.oe(n)):tn()}re(e,n){this.ne(n,25),this.le(e,n)}le(e,n){n.ie(e)}ce(e,n){const a=e.fields||{};this.ne(n,55);for(const d of Object.keys(a))this.re(d,n),this.te(a[d],n)}he(e,n){const a=e.values||[];this.ne(n,50);for(const d of a)this.te(d,n)}ae(e,n){this.ne(n,37),Qt.fromName(e).path.forEach(a=>{this.ne(n,60),this.le(a,n)})}ne(e,n){e.se(n)}oe(e){e.se(2)}}function Lf(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Ou(i){const e=64-function(n){let a=0;for(let d=0;d<8;++d){const m=Lf(255&n[d]);if(a+=m,8!==m)break}return a}(i);return Math.ceil(e/8)}uu.fe=new uu;class jm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const n=e[Symbol.iterator]();let a=n.next();for(;!a.done;)this._e(a.value),a=n.next();this.we()}me(e){const n=e[Symbol.iterator]();let a=n.next();for(;!a.done;)this.ge(a.value),a=n.next();this.ye()}pe(e){for(const n of e){const a=n.charCodeAt(0);if(a<128)this._e(a);else if(a<2048)this._e(960|a>>>6),this._e(128|63&a);else if(n<"\ud800"||"\udbff"<n)this._e(480|a>>>12),this._e(128|63&a>>>6),this._e(128|63&a);else{const d=n.codePointAt(0);this._e(240|d>>>18),this._e(128|63&d>>>12),this._e(128|63&d>>>6),this._e(128|63&d)}}this.we()}Ie(e){for(const n of e){const a=n.charCodeAt(0);if(a<128)this.ge(a);else if(a<2048)this.ge(960|a>>>6),this.ge(128|63&a);else if(n<"\ud800"||"\udbff"<n)this.ge(480|a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a);else{const d=n.codePointAt(0);this.ge(240|d>>>18),this.ge(128|63&d>>>12),this.ge(128|63&d>>>6),this.ge(128|63&d)}}this.ye()}Te(e){const n=this.Ee(e),a=Ou(n);this.Ae(1+a),this.buffer[this.position++]=255&a;for(let d=n.length-a;d<n.length;++d)this.buffer[this.position++]=255&n[d]}Re(e){const n=this.Ee(e),a=Ou(n);this.Ae(1+a),this.buffer[this.position++]=~(255&a);for(let d=n.length-a;d<n.length;++d)this.buffer[this.position++]=~(255&n[d])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const n=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(e),a=0!=(128&n[0]);n[0]^=a?255:128;for(let d=1;d<n.length;++d)n[d]^=a?255:0;return n}_e(e){const n=255&e;0===n?(this.Pe(0),this.Pe(255)):255===n?(this.Pe(255),this.Pe(0)):this.Pe(n)}ge(e){const n=255&e;0===n?(this.ve(0),this.ve(255)):255===n?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const n=e+this.position;if(n<=this.buffer.length)return;let a=2*this.buffer.length;a<n&&(a=n);const d=new Uint8Array(a);d.set(this.buffer),this.buffer=d}}class Uf{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class Wd{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class cc{constructor(){this.De=new jm,this.Ce=new Uf(this.De),this.xe=new Wd(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Sl{constructor(e,n,a,d){this.indexId=e,this.documentKey=n,this.arrayValue=a,this.directionalValue=d}ke(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(n);return a.set(this.directionalValue,0),n!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Sl(this.indexId,this.documentKey,this.arrayValue,a)}}function dc(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=sg(i.arrayValue,e.arrayValue),0!==n?n:(n=sg(i.directionalValue,e.directionalValue),0!==n?n:Qt.comparator(i.documentKey,e.documentKey)))}function sg(i,e){for(let n=0;n<i.length&&n<e.length;++n){const a=i[n]-e[n];if(0!==a)return a}return i.length-e.length}class og{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const n of e.filters){const a=n;a.S()?this.Fe=a:this.Oe.push(a)}}$e(e){const n=ta(e);if(void 0!==n&&!this.Be(n))return!1;const a=Oa(e);let d=0,m=0;for(;d<a.length&&this.Be(a[d]);++d);if(d===a.length)return!0;if(void 0!==this.Fe){const E=a[d];if(!this.Le(this.Fe,E)||!this.Ue(this.Me[m++],E))return!1;++d}for(;d<a.length;++d){const E=a[d];if(m>=this.Me.length||!this.Ue(this.Me[m++],E))return!1}return!0}Be(e){for(const n of this.Oe)if(this.Le(n,e))return!0;return!1}Le(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}class Zc{constructor(){this.qe=new hc}addToCollectionParentIndex(e,n){return this.qe.add(n),Ct.resolve()}getCollectionParents(e,n){return Ct.resolve(this.qe.getEntries(n))}addFieldIndex(e,n){return Ct.resolve()}deleteFieldIndex(e,n){return Ct.resolve()}getDocumentsMatchingTarget(e,n){return Ct.resolve(null)}getIndexType(e,n){return Ct.resolve(0)}getFieldIndexes(e,n){return Ct.resolve([])}getNextCollectionGroupToUpdate(e){return Ct.resolve(null)}getMinOffset(e,n){return Ct.resolve(_o.min())}updateCollectionGroup(e,n,a){return Ct.resolve()}updateIndexEntries(e,n){return Ct.resolve()}}class hc{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),d=this.index[n]||new P(qt.comparator),m=!d.has(a);return this.index[n]=d.add(a),m}has(e){const n=e.lastSegment(),a=e.popLast(),d=this.index[n];return d&&d.has(a)}getEntries(e){return(this.index[e]||new P(qt.comparator)).toArray()}}const fc=new Uint8Array(0);class Mh{constructor(e,n){this.user=e,this.databaseId=n,this.Ke=new hc,this.Ge=new or(a=>ft(a),(a,d)=>ln(a,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ke.has(n)){const a=n.lastSegment(),d=n.popLast();e.addOnCommittedListener(()=>{this.Ke.add(n)});const m={collectionId:a,parent:Bs(d)};return Vf(e).put(m)}return Ct.resolve()}getCollectionParents(e,n){const a=[],d=IDBKeyRange.bound([n,""],[L(n),""],!1,!0);return Vf(e).qt(d).next(m=>{for(const E of m){if(E.collectionId!==n)break;a.push(Va(E.parent))}return a})}addFieldIndex(e,n){const a=Hd(e),d={indexId:(m=n).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(E=>[E.fieldPath.canonicalString(),E.kind])};var m;return delete d.indexId,a.add(d).next()}deleteFieldIndex(e,n){const a=Hd(e),d=Gd(e),m=pc(e);return a.delete(n.indexId).next(()=>d.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const a=pc(e);let d=!0;const m=new Map;return Ct.forEach(this.Qe(n),E=>this.je(e,E).next(x=>{d&&(d=!!x),m.set(E,x)})).next(()=>{if(d){let E=ei();const x=[];return Ct.forEach(m,(H,Z)=>{var Ie;jt("IndexedDbIndexManager",`Using index ${Ie=H,`id=${Ie.indexId}|cg=${Ie.collectionGroup}|f=${Ie.fields.map(Yi=>`${Yi.fieldPath}:${Yi.kind}`).join(",")}`} to execute ${ft(n)}`);const Be=function(Yi,Io){const Ns=ta(Io);if(void 0===Ns)return null;for(const Mi of kn(Yi,Ns.fieldPath))switch(Mi.op){case"array-contains-any":return Mi.value.arrayValue.values||[];case"array-contains":return[Mi.value]}return null}(Z,H),mt=function(Yi,Io){const Ns=new Map;for(const Mi of Oa(Io))for(const qo of kn(Yi,Mi.fieldPath))switch(qo.op){case"==":case"in":Ns.set(Mi.fieldPath.canonicalString(),qo.value);break;case"not-in":case"!=":return Ns.set(Mi.fieldPath.canonicalString(),qo.value),Array.from(Ns.values())}return null}(Z,H),Nt=function(Yi,Io){const Ns=[];let Mi=!0;for(const qo of Oa(Io)){const xc=0===qo.kind?Vr(Yi,qo.fieldPath,Yi.startAt):sr(Yi,qo.fieldPath,Yi.startAt);Ns.push(xc.value),Mi&&(Mi=xc.inclusive)}return new yo(Ns,Mi)}(Z,H),Bt=function(Yi,Io){const Ns=[];let Mi=!0;for(const qo of Oa(Io)){const xc=0===qo.kind?sr(Yi,qo.fieldPath,Yi.endAt):Vr(Yi,qo.fieldPath,Yi.endAt);Ns.push(xc.value),Mi&&(Mi=xc.inclusive)}return new yo(Ns,Mi)}(Z,H),mn=this.We(H,Z,Nt),cr=this.We(H,Z,Bt),ss=this.ze(H,Z,mt),Ds=this.He(H.indexId,Be,mn,Nt.inclusive,cr,Bt.inclusive,ss);return Ct.forEach(Ds,Yi=>a.Gt(Yi,n.limit).next(Io=>{Io.forEach(Ns=>{const Mi=Qt.fromSegments(Ns.documentKey);E.has(Mi)||(E=E.add(Mi),x.push(Mi))})}))}).next(()=>x)}return Ct.resolve(null)})}Qe(e){let n=this.Ge.get(e);return n||(n=[e],this.Ge.set(e,n),n)}He(e,n,a,d,m,E,x){const H=(null!=n?n.length:1)*Math.max(a.length,m.length),Z=H/(null!=n?n.length:1),Ie=[];for(let Be=0;Be<H;++Be){const mt=n?this.Je(n[Be/Z]):fc,Nt=this.Ye(e,mt,a[Be%Z],d),Bt=this.Xe(e,mt,m[Be%Z],E),mn=x.map(cr=>this.Ye(e,mt,cr,!0));Ie.push(...this.createRange(Nt,Bt,mn))}return Ie}Ye(e,n,a,d){const m=new Sl(e,Qt.empty(),n,a);return d?m:m.ke()}Xe(e,n,a,d){const m=new Sl(e,Qt.empty(),n,a);return d?m.ke():m}je(e,n){const a=new og(n),d=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,d).next(m=>{let E=null;for(const x of m)a.$e(x)&&(!E||x.fields.length>E.fields.length)&&(E=x);return E})}getIndexType(e,n){let a=2;return Ct.forEach(this.Qe(n),d=>this.je(e,d).next(m=>{m?0!==a&&m.fields.length<function(E){let x=new P(Pn.comparator),H=!1;for(const Z of E.filters){const Ie=Z;Ie.field.isKeyField()||("array-contains"===Ie.op||"array-contains-any"===Ie.op?H=!0:x=x.add(Ie.field))}for(const Z of E.orderBy)Z.field.isKeyField()||(x=x.add(Z.field));return x.size+(H?1:0)}(d)&&(a=1):a=0})).next(()=>a)}Ze(e,n){const a=new cc;for(const d of Oa(e)){const m=n.data.field(d.fieldPath);if(null==m)return null;const E=a.Ne(d.kind);uu.fe.Zt(m,E)}return a.Se()}Je(e){const n=new cc;return uu.fe.Zt(e,n.Ne(0)),n.Se()}tn(e,n){const a=new cc;return uu.fe.Zt(Os(this.databaseId,n),a.Ne(function(d){const m=Oa(d);return 0===m.length?0:m[m.length-1].kind}(e))),a.Se()}ze(e,n,a){if(null===a)return[];let d=[];d.push(new cc);let m=0;for(const E of Oa(e)){const x=a[m++];for(const H of d)if(this.en(n,E.fieldPath)&&go(x))d=this.nn(d,E,x);else{const Z=H.Ne(E.kind);uu.fe.Zt(x,Z)}}return this.sn(d)}We(e,n,a){return this.ze(e,n,a.position)}sn(e){const n=[];for(let a=0;a<e.length;++a)n[a]=e[a].Se();return n}nn(e,n,a){const d=[...e],m=[];for(const E of a.arrayValue.values||[])for(const x of d){const H=new cc;H.seed(x.Se()),uu.fe.Zt(E,H.Ne(n.kind)),m.push(H)}return m}en(e,n){return!!e.filters.find(a=>a instanceof Yn&&a.field.isEqual(n)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,n){const a=Hd(e),d=Gd(e);return(n?a.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)):a.qt()).next(m=>{const E=[];return Ct.forEach(m,x=>d.get([x.indexId,this.uid]).next(H=>{E.push(function(Z,Ie){const Be=Ie?new Is(Ie.sequenceNumber,new _o(Ho(Ie.readTime),new Qt(Va(Ie.documentKey)),Ie.largestBatchId)):Is.empty(),mt=Z.fields.map(([Nt,Bt])=>new xr(Pn.fromServerFormat(Nt),Bt));return new mo(Z.indexId,Z.collectionGroup,mt,Be)}(x,H))})).next(()=>E)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((a,d)=>{const m=a.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==m?m:C(a.collectionGroup,d.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,a){const d=Hd(e),m=Gd(e);return this.rn(e).next(E=>d.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(x=>Ct.forEach(x,H=>{return m.put({indexId:H.indexId,uid:this.user.uid||"",sequenceNumber:E,readTime:Al((mt=a).readTime),documentKey:Bs(mt.documentKey.path),largestBatchId:mt.largestBatchId});var mt})))}updateIndexEntries(e,n){const a=new Map;return Ct.forEach(n,(d,m)=>{const E=a.get(d.collectionGroup);return(E?Ct.resolve(E):this.getFieldIndexes(e,d.collectionGroup)).next(x=>(a.set(d.collectionGroup,x),Ct.forEach(x,H=>this.on(e,d,H).next(Z=>{const Ie=this.un(m,H);return Z.isEqual(Ie)?Ct.resolve():this.an(e,m,H,Z,Ie)}))))})}cn(e,n,a,d){return pc(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.tn(a,n.key),documentKey:n.key.path.toArray()})}hn(e,n,a,d){return pc(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.tn(a,n.key),n.key.path.toArray()])}on(e,n,a){const d=pc(e);let m=new P(dc);return d.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.tn(a,n)])},(E,x)=>{m=m.add(new Sl(a.indexId,n,x.arrayValue,x.directionalValue))}).next(()=>m)}un(e,n){let a=new P(dc);const d=this.Ze(n,e);if(null==d)return a;const m=ta(n);if(null!=m){const E=e.data.field(m.fieldPath);if(go(E))for(const x of E.arrayValue.values||[])a=a.add(new Sl(n.indexId,e.key,this.Je(x),d))}else a=a.add(new Sl(n.indexId,e.key,fc,d));return a}an(e,n,a,d,m){jt("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const E=[];return function(x,H,Z,Ie,Be){const mt=x.getIterator(),Nt=H.getIterator();let Bt=ne(mt),mn=ne(Nt);for(;Bt||mn;){let cr=!1,ss=!1;if(Bt&&mn){const Ds=Z(Bt,mn);Ds<0?ss=!0:Ds>0&&(cr=!0)}else null!=Bt?ss=!0:cr=!0;cr?(Ie(mn),mn=ne(Nt)):ss?(Be(Bt),Bt=ne(mt)):(Bt=ne(mt),mn=ne(Nt))}}(d,m,dc,x=>{E.push(this.cn(e,n,a,x))},x=>{E.push(this.hn(e,n,a,x))}),Ct.waitFor(E)}rn(e){let n=1;return Gd(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,d,m)=>{m.done(),n=d.sequenceNumber+1}).next(()=>n)}createRange(e,n,a){a=a.sort((E,x)=>dc(E,x)).filter((E,x,H)=>!x||0!==dc(E,H[x-1]));const d=[];d.push(e);for(const E of a){const x=dc(E,e),H=dc(E,n);if(0===x)d[0]=e.ke();else if(x>0&&H<0)d.push(E),d.push(E.ke());else if(H>0)break}d.push(n);const m=[];for(let E=0;E<d.length;E+=2)m.push(IDBKeyRange.bound([d[E].indexId,this.uid,d[E].arrayValue,d[E].directionalValue,fc,[]],[d[E+1].indexId,this.uid,d[E+1].arrayValue,d[E+1].directionalValue,fc,[]]));return m}getMinOffset(e,n){let a;return Ct.forEach(this.Qe(n),d=>this.je(e,d).next(m=>{m?(!a||Zu(m.indexState.offset,a)<0)&&(a=m.indexState.offset):a=_o.min()})).next(()=>a)}}function Vf(i){return is(i,"collectionParents")}function pc(i){return is(i,"indexEntries")}function Hd(i){return is(i,"indexConfiguration")}function Gd(i){return is(i,"indexState")}const wa={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ki{constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new Ki(e,Ki.DEFAULT_COLLECTION_PERCENTILE,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xh(i,e,n){const a=i.store("mutations"),d=i.store("documentMutations"),m=[],E=IDBKeyRange.only(n.batchId);let x=0;const H=a.Wt({range:E},(Ie,Be,mt)=>(x++,mt.delete()));m.push(H.next(()=>{Vn(1===x)}));const Z=[];for(const Ie of n.mutations){const Be=Ch(e,Ie.key.path,n.batchId);m.push(d.delete(Be)),Z.push(Ie.key)}return Ct.waitFor(m).next(()=>Z)}function Oh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw tn();e=i.noDocument}return JSON.stringify(e).length}Ki.DEFAULT_COLLECTION_PERCENTILE=10,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ki.DEFAULT=new Ki(41943040,Ki.DEFAULT_COLLECTION_PERCENTILE,Ki.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ki.DISABLED=new Ki(-1,0,0);class Bf{constructor(e,n,a,d){this.userId=e,this.M=n,this.indexManager=a,this.referenceDelegate=d,this.ln={}}static Yt(e,n,a,d){Vn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new Bf(m,n,a,d)}checkEmpty(e){let n=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rl(e).Wt({index:"userMutationsIndex",range:a},(d,m,E)=>{n=!1,E.done()}).next(()=>n)}addMutationBatch(e,n,a,d){const m=gc(e),E=rl(e);return E.add({}).next(x=>{Vn("number"==typeof x);const H=new Nf(x,n,a,d),Z=function(mt,Nt,Bt){const mn=Bt.baseMutations.map(ss=>bu(mt.Jt,ss)),cr=Bt.mutations.map(ss=>bu(mt.Jt,ss));return{userId:Nt,batchId:Bt.batchId,localWriteTimeMs:Bt.localWriteTime.toMillis(),baseMutations:mn,mutations:cr}}(this.M,this.userId,H),Ie=[];let Be=new P((mt,Nt)=>C(mt.canonicalString(),Nt.canonicalString()));for(const mt of d){const Nt=Ch(this.userId,mt.key.path,x);Be=Be.add(mt.key.path.popLast()),Ie.push(E.put(Z)),Ie.push(m.put(Nt,Ba))}return Be.forEach(mt=>{Ie.push(this.indexManager.addToCollectionParentIndex(e,mt))}),e.addOnCommittedListener(()=>{this.ln[x]=H.keys()}),Ct.waitFor(Ie).next(()=>H)})}lookupMutationBatch(e,n){return rl(e).get(n).next(a=>a?(Vn(a.userId===this.userId),oc(this.M,a)):null)}fn(e,n){return this.ln[n]?Ct.resolve(this.ln[n]):this.lookupMutationBatch(e,n).next(a=>{if(a){const d=a.keys();return this.ln[n]=d,d}return null})}getNextMutationBatchAfterBatchId(e,n){const a=n+1,d=IDBKeyRange.lowerBound([this.userId,a]);let m=null;return rl(e).Wt({index:"userMutationsIndex",range:d},(E,x,H)=>{x.userId===this.userId&&(Vn(x.batchId>=a),m=oc(this.M,x)),H.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return rl(e).Wt({index:"userMutationsIndex",range:n,reverse:!0},(d,m,E)=>{a=m.batchId,E.done()}).next(()=>a)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rl(e).qt("userMutationsIndex",n).next(a=>a.map(d=>oc(this.M,d)))}getAllMutationBatchesAffectingDocumentKey(e,n){const a=rc(this.userId,n.path),d=IDBKeyRange.lowerBound(a),m=[];return gc(e).Wt({range:d},(E,x,H)=>{const[Z,Ie,Be]=E,mt=Va(Ie);if(Z===this.userId&&n.path.isEqual(mt))return rl(e).get(Be).next(Nt=>{if(!Nt)throw tn();Vn(Nt.userId===this.userId),m.push(oc(this.M,Nt))});H.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new P(C);const d=[];return n.forEach(m=>{const E=rc(this.userId,m.path),x=IDBKeyRange.lowerBound(E),H=gc(e).Wt({range:x},(Z,Ie,Be)=>{const[mt,Nt,Bt]=Z,mn=Va(Nt);mt===this.userId&&m.path.isEqual(mn)?a=a.add(Bt):Be.done()});d.push(H)}),Ct.waitFor(d).next(()=>this.dn(e,a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,d=a.length+1,m=rc(this.userId,a),E=IDBKeyRange.lowerBound(m);let x=new P(C);return gc(e).Wt({range:E},(H,Z,Ie)=>{const[Be,mt,Nt]=H,Bt=Va(mt);Be===this.userId&&a.isPrefixOf(Bt)?Bt.length===d&&(x=x.add(Nt)):Ie.done()}).next(()=>this.dn(e,x))}dn(e,n){const a=[],d=[];return n.forEach(m=>{d.push(rl(e).get(m).next(E=>{if(null===E)throw tn();Vn(E.userId===this.userId),a.push(oc(this.M,E))}))}),Ct.waitFor(d).next(()=>a)}removeMutationBatch(e,n){return xh(e.Ht,this.userId,n).next(a=>(e.addOnCommittedListener(()=>{this._n(n.batchId)}),Ct.forEach(a,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Ct.resolve();const a=IDBKeyRange.lowerBound([this.userId]),d=[];return gc(e).Wt({range:a},(m,E,x)=>{if(m[0]===this.userId){const H=Va(m[1]);d.push(H)}else x.done()}).next(()=>{Vn(0===d.length)})})}containsKey(e,n){return ag(e,this.userId,n)}wn(e){return ug(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ag(i,e,n){const a=rc(e,n.path),d=a[1],m=IDBKeyRange.lowerBound(a);let E=!1;return gc(i).Wt({range:m,jt:!0},(x,H,Z)=>{const[Ie,Be,mt]=x;Ie===e&&Be===d&&(E=!0),Z.done()}).next(()=>E)}function rl(i){return is(i,"mutations")}function gc(i){return is(i,"documentMutations")}function ug(i){return is(i,"mutationQueues")}class mc{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new mc(0)}static yn(){return new mc(-1)}}class $m{constructor(e,n){this.referenceDelegate=e,this.M=n}allocateTargetId(e){return this.pn(e).next(n=>{const a=new mc(n.highestTargetId);return n.highestTargetId=a.next(),this.In(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(n=>q.fromTimestamp(new W(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,a){return this.pn(e).next(d=>(d.highestListenSequenceNumber=n,a&&(d.lastRemoteSnapshotVersion=a.toTimestamp()),n>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=n),this.In(e,d)))}addTargetData(e,n){return this.Tn(e,n).next(()=>this.pn(e).next(a=>(a.targetCount+=1,this.En(n,a),this.In(e,a))))}updateTargetData(e,n){return this.Tn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>nr(e).delete(n.targetId)).next(()=>this.pn(e)).next(a=>(Vn(a.targetCount>0),a.targetCount-=1,this.In(e,a)))}removeTargets(e,n,a){let d=0;const m=[];return nr(e).Wt((E,x)=>{const H=ac(x);H.sequenceNumber<=n&&null===a.get(H.targetId)&&(d++,m.push(this.removeTargetData(e,H)))}).next(()=>Ct.waitFor(m)).next(()=>d)}forEachTarget(e,n){return nr(e).Wt((a,d)=>{const m=ac(d);n(m)})}pn(e){return jf(e).get("targetGlobalKey").next(n=>(Vn(null!==n),n))}In(e,n){return jf(e).put("targetGlobalKey",n)}Tn(e,n){return nr(e).put(Ff(this.M,n))}En(e,n){let a=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,a=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.pn(e).next(n=>n.targetCount)}getTargetData(e,n){const a=ft(n),d=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let m=null;return nr(e).Wt({range:d,index:"queryTargetsIndex"},(E,x,H)=>{const Z=ac(x);ln(n,Z.target)&&(m=Z,H.done())}).next(()=>m)}addMatchingKeys(e,n,a){const d=[],m=il(e);return n.forEach(E=>{const x=Bs(E.path);d.push(m.put({targetId:a,path:x})),d.push(this.referenceDelegate.addReference(e,a,E))}),Ct.waitFor(d)}removeMatchingKeys(e,n,a){const d=il(e);return Ct.forEach(n,m=>{const E=Bs(m.path);return Ct.waitFor([d.delete([a,E]),this.referenceDelegate.removeReference(e,a,m)])})}removeMatchingKeysForTargetId(e,n){const a=il(e),d=IDBKeyRange.bound([n],[n+1],!1,!0);return a.delete(d)}getMatchingKeysForTargetId(e,n){const a=IDBKeyRange.bound([n],[n+1],!1,!0),d=il(e);let m=ei();return d.Wt({range:a,jt:!0},(E,x,H)=>{const Z=Va(E[1]),Ie=new Qt(Z);m=m.add(Ie)}).next(()=>m)}containsKey(e,n){const a=Bs(n.path),d=IDBKeyRange.bound([a],[L(a)],!1,!0);let m=0;return il(e).Wt({index:"documentTargetsIndex",jt:!0,range:d},([E,x],H,Z)=>{0!==E&&(m++,Z.done())}).next(()=>m>0)}Et(e,n){return nr(e).get(n).next(a=>a?ac(a):null)}}function nr(i){return is(i,"targets")}function jf(i){return is(i,"targetGlobal")}function il(i){return is(i,"targetDocuments")}function Rl(i){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,p.Z)(function*(i){if(i.code!==pt.FAILED_PRECONDITION||i.message!==Vd)throw i;jt("LocalStore","Unexpectedly lost primary lease")}),Yc.apply(this,arguments)}function $a([i,e],[n,a]){const d=C(i,n);return 0===d?C(e,a):d}class lg{constructor(e){this.An=e,this.buffer=new P($a),this.Rn=0}bn(){return++this.Rn}Pn(e){const n=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();$a(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Wm{constructor(e,n){this.garbageCollector=e,this.asyncQueue=n,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var n=this;const a=this.Vn?3e5:6e4;jt("LruGarbageCollector",`Garbage collection scheduled in ${a}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",a,(0,p.Z)(function*(){n.vn=null,n.Vn=!0;try{yield e.collectGarbage(n.garbageCollector)}catch(d){ja(d)?jt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",d):yield Rl(d)}yield n.Sn(e)}))}}class $f{constructor(e,n){this.Dn=e,this.params=n}calculateTargetCount(e,n){return this.Dn.Cn(e).next(a=>Math.floor(n/100*a))}nthSequenceNumber(e,n){if(0===n)return Ct.resolve(gi.A);const a=new lg(n);return this.Dn.forEachTarget(e,d=>a.Pn(d.sequenceNumber)).next(()=>this.Dn.xn(e,d=>a.Pn(d))).next(()=>a.maxValue)}removeTargets(e,n,a){return this.Dn.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Dn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(jt("LruGarbageCollector","Garbage collection skipped; disabled"),Ct.resolve(wa)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(jt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wa):this.Nn(e,n))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,n){let a,d,m,E,x,H,Z;const Ie=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Be=>(Be>this.params.maximumSequenceNumbersToCollect?(jt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Be}`),d=this.params.maximumSequenceNumbersToCollect):d=Be,E=Date.now(),this.nthSequenceNumber(e,d))).next(Be=>(a=Be,x=Date.now(),this.removeTargets(e,a,n))).next(Be=>(m=Be,H=Date.now(),this.removeOrphanedDocuments(e,a))).next(Be=>(Z=Date.now(),ha()<=Ee.in.DEBUG&&jt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${E-Ie}ms\n\tDetermined least recently used ${d} in `+(x-E)+`ms\n\tRemoved ${m} targets in `+(H-x)+`ms\n\tRemoved ${Be} documents in `+(Z-H)+`ms\nTotal Duration: ${Z-Ie}ms`),Ct.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:m,documentsRemoved:Be})))}}class sl{constructor(e,n){this.db=e,this.garbageCollector=new $f(this,n)}Cn(e){const n=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>n.next(d=>a+d))}kn(e){let n=0;return this.xn(e,a=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}xn(e,n){return this.Mn(e,(a,d)=>n(d))}addReference(e,n,a){return Qc(e,a)}removeReference(e,n,a){return Qc(e,a)}removeTargets(e,n,a){return this.db.getTargetCache().removeTargets(e,n,a)}markPotentiallyOrphaned(e,n){return Qc(e,n)}On(e,n){return function(a,d){let m=!1;return ug(a).zt(E=>ag(a,E,d).next(x=>(x&&(m=!0),Ct.resolve(!x)))).next(()=>m)}(e,n)}removeOrphanedDocuments(e,n){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let m=0;return this.Mn(e,(E,x)=>{if(x<=n){const H=this.On(e,E).next(Z=>{if(!Z)return m++,a.getEntry(e,E).next(()=>(a.removeEntry(E,q.min()),il(e).delete([0,Bs(E.path)])))});d.push(H)}}).next(()=>Ct.waitFor(d)).next(()=>a.apply(e)).next(()=>m)}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,n){return Qc(e,n)}Mn(e,n){const a=il(e);let d,m=gi.A;return a.Wt({index:"documentTargetsIndex"},([E,x],{path:H,sequenceNumber:Z})=>{0===E?(m!==gi.A&&n(new Qt(Va(d)),m),m=Z,d=H):m=gi.A}).next(()=>{m!==gi.A&&n(new Qt(Va(d)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qc(i,e){return il(i).put((a=i.currentSequenceNumber,{targetId:0,path:Bs(e.path),sequenceNumber:a}));var a}class Wf{constructor(){this.changes=new or(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return void 0!==a?Ct.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Hf{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,a){return Ml(e).put(a)}removeEntry(e,n,a){return Ml(e).delete(function(d,m){const E=d.path.toArray();return[E.slice(0,E.length-2),E[E.length-2],jd(m),E[E.length-1]]}(n,a))}updateMetadata(e,n){return this.getMetadata(e).next(a=>(a.byteSize+=n,this.Fn(e,a)))}getEntry(e,n){let a=Xn.newInvalidDocument(n);return Ml(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ol(n))},(d,m)=>{a=this.$n(n,m)}).next(()=>a)}Bn(e,n){let a={size:0,document:Xn.newInvalidDocument(n)};return Ml(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ol(n))},(d,m)=>{a={document:this.$n(n,m),size:Oh(m)}}).next(()=>a)}getEntries(e,n){let a=$i();return this.Ln(e,n,(d,m)=>{const E=this.$n(d,m);a=a.insert(d,E)}).next(()=>a)}Un(e,n){let a=$i(),d=new Wr(Qt.comparator);return this.Ln(e,n,(m,E)=>{const x=this.$n(m,E);a=a.insert(m,x),d=d.insert(m,Oh(E))}).next(()=>({documents:a,qn:d}))}Ln(e,n,a){if(n.isEmpty())return Ct.resolve();let d=new P(Kd);n.forEach(H=>d=d.add(H));const m=IDBKeyRange.bound(ol(d.first()),ol(d.last())),E=d.getIterator();let x=E.getNext();return Ml(e).Wt({index:"documentKeyIndex",range:m},(H,Z,Ie)=>{const Be=Qt.fromSegments([...Z.prefixPath,Z.collectionGroup,Z.documentId]);for(;x&&Kd(x,Be)<0;)a(x,null),x=E.getNext();x&&x.isEqual(Be)&&(a(x,Z),x=E.hasNext()?E.getNext():null),x?Ie.Ut(ol(x)):Ie.done()}).next(()=>{for(;x;)a(x,null),x=E.hasNext()?E.getNext():null})}getAllFromCollection(e,n,a){const d=[n.popLast().toArray(),n.lastSegment(),jd(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],m=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ml(e).qt(IDBKeyRange.bound(d,m,!0)).next(E=>{let x=$i();for(const H of E){const Z=this.$n(Qt.fromSegments(H.prefixPath.concat(H.collectionGroup,H.documentId)),H);x=x.insert(Z.key,Z)}return x})}getAllFromCollectionGroup(e,n,a,d){let m=$i();const E=zd(n,a),x=zd(n,_o.max());return Ml(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(E,x,!0)},(H,Z,Ie)=>{const Be=this.$n(Qt.fromSegments(Z.prefixPath.concat(Z.collectionGroup,Z.documentId)),Z);m=m.insert(Be.key,Be),m.size===d&&Ie.done()}).next(()=>m)}newChangeBuffer(e){return new Pu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Gf(e).get("remoteDocumentGlobalKey").next(n=>(Vn(!!n),n))}Fn(e,n){return Gf(e).put("remoteDocumentGlobalKey",n)}$n(e,n){if(n){const a=function kf(i,e){let n;if(e.document)n=nc(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=Qt.fromSegments(e.noDocument.path),d=Ho(e.noDocument.readTime);n=Xn.newNoDocument(a,d),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return tn();{const a=Qt.fromSegments(e.unknownDocument.path),d=Ho(e.unknownDocument.version);n=Xn.newUnknownDocument(a,d)}}return e.readTime&&n.setReadTime(function(a){const d=new W(a[0],a[1]);return q.fromTimestamp(d)}(e.readTime)),n}(this.M,n);if(!a.isNoDocument()||!a.version.isEqual(q.min()))return a}return Xn.newInvalidDocument(e)}}class Pu extends Wf{constructor(e,n){super(),this.Kn=e,this.trackRemovals=n,this.Gn=new or(a=>a.toString(),(a,d)=>a.isEqual(d))}applyChanges(e){const n=[];let a=0,d=new P((m,E)=>C(m.canonicalString(),E.canonicalString()));return this.changes.forEach((m,E)=>{const x=this.Gn.get(m);if(n.push(this.Kn.removeEntry(e,m,x.readTime)),E.isValidDocument()){const H=Sh(this.Kn.M,E);d=d.add(m.path.popLast()),a+=Oh(H)-x.size,n.push(this.Kn.addEntry(e,m,H))}else if(a-=x.size,this.trackRemovals){const H=Sh(this.Kn.M,E.convertToNoDocument(q.min()));n.push(this.Kn.addEntry(e,m,H))}}),d.forEach(m=>{n.push(this.Kn.indexManager.addToCollectionParentIndex(e,m))}),n.push(this.Kn.updateMetadata(e,a)),Ct.waitFor(n)}getFromCache(e,n){return this.Kn.Bn(e,n).next(a=>(this.Gn.set(n,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,n){return this.Kn.Un(e,n).next(({documents:a,qn:d})=>(d.forEach((m,E)=>{this.Gn.set(m,{size:E,readTime:a.get(m).readTime})}),a))}}function Gf(i){return is(i,"remoteDocumentGlobal")}function Ml(i){return is(i,"remoteDocumentsV14")}function ol(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function zd(i,e){const n=e.documentKey.path.toArray();return[i,jd(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Kd(i,e){const n=i.path.toArray(),a=e.path.toArray();let d=0;for(let m=0;m<n.length-2&&m<a.length-2;++m)if(d=C(n[m],a[m]),d)return d;return d=C(n.length,a.length),d||(d=C(n[n.length-2],a[a.length-2]),d||C(n[n.length-1],a[a.length-1]))}class zf{constructor(e){this.M=e}kt(e,n,a,d){const m=new Pf("createOrUpgrade",n);var x;a<1&&d>=1&&(e.createObjectStore("owner"),(x=e).createObjectStore("mutationQueues",{keyPath:"userId"}),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eg,{unique:!0}),x.createObjectStore("documentMutations"),Ph(e),function(x){x.createObjectStore("remoteDocuments")}(e));let E=Ct.resolve();return a<3&&d>=3&&(0!==a&&(function(x){x.deleteObjectStore("targetDocuments"),x.deleteObjectStore("targets"),x.deleteObjectStore("targetGlobal")}(e),Ph(e)),E=E.next(()=>function(x){const H=x.store("targetGlobal"),Z={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:q.min().toTimestamp(),targetCount:0};return H.put("targetGlobalKey",Z)}(m))),a<4&&d>=4&&(0!==a&&(E=E.next(()=>function(x,H){return H.store("mutations").qt().next(Z=>{x.deleteObjectStore("mutations"),x.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eg,{unique:!0});const Ie=H.store("mutations"),Be=Z.map(mt=>Ie.put(mt));return Ct.waitFor(Be)})}(e,m))),E=E.next(()=>{!function(x){x.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&d>=5&&(E=E.next(()=>this.Qn(m))),a<6&&d>=6&&(E=E.next(()=>(function(x){x.createObjectStore("remoteDocumentGlobal")}(e),this.jn(m)))),a<7&&d>=7&&(E=E.next(()=>this.Wn(m))),a<8&&d>=8&&(E=E.next(()=>this.zn(e,m))),a<9&&d>=9&&(E=E.next(()=>{!function(x){x.objectStoreNames.contains("remoteDocumentChanges")&&x.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&d>=10&&(E=E.next(()=>this.Hn(m))),a<11&&d>=11&&(E=E.next(()=>{(function(x){x.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(x){x.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&d>=12&&(E=E.next(()=>{!function(x){const H=x.createObjectStore("documentOverlays",{keyPath:Fd});H.createIndex("collectionPathOverlayIndex",Gc,{unique:!1}),H.createIndex("collectionGroupOverlayIndex",Bm,{unique:!1})}(e)})),a<13&&d>=13&&(E=E.next(()=>function(x){const H=x.createObjectStore("remoteDocumentsV14",{keyPath:tg});H.createIndex("documentKeyIndex",Fm),H.createIndex("collectionGroupIndex",ng)}(e)).next(()=>this.Jn(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&d>=14&&(E=E.next(()=>{!function(x){x.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),x.createObjectStore("indexState",{keyPath:Dh}).createIndex("sequenceNumberIndex",xf,{unique:!1}),x.createObjectStore("indexEntries",{keyPath:Vm}).createIndex("documentKeyIndex",Su,{unique:!1})}(e)})),E}jn(e){let n=0;return e.store("remoteDocuments").Wt((a,d)=>{n+=Oh(d)}).next(()=>{const a={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Qn(e){const n=e.store("mutationQueues"),a=e.store("mutations");return n.qt().next(d=>Ct.forEach(d,m=>{const E=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return a.qt("userMutationsIndex",E).next(x=>Ct.forEach(x,H=>{Vn(H.userId===m.userId);const Z=oc(this.M,H);return xh(e,m.userId,Z).next(()=>{})}))}))}Wn(e){const n=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const m=[];return a.Wt((E,x)=>{const H=new qt(E),Z=[0,Bs(H)];m.push(n.get(Z).next(Ie=>Ie?Ct.resolve():n.put({targetId:0,path:Bs(H),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Ct.waitFor(m))})}zn(e,n){e.createObjectStore("collectionParents",{keyPath:Um});const a=n.store("collectionParents"),d=new hc,m=E=>{if(d.add(E)){const x=E.lastSegment(),H=E.popLast();return a.put({collectionId:x,parent:Bs(H)})}};return n.store("remoteDocuments").Wt({jt:!0},(E,x)=>{const H=new qt(E);return m(H.popLast())}).next(()=>n.store("documentMutations").Wt({jt:!0},([E,x,H],Z)=>{const Ie=Va(x);return m(Ie.popLast())}))}Hn(e){const n=e.store("targets");return n.Wt((a,d)=>{const m=ac(d),E=Ff(this.M,m);return n.put(E)})}Jn(e,n){const a=n.store("remoteDocuments"),d=[];return a.Wt((m,E)=>{const x=n.store("remoteDocumentsV14"),H=(Z=E,Z.document?new Qt(qt.fromString(Z.document.name).popFirst(5)):Z.noDocument?Qt.fromSegments(Z.noDocument.path):Z.unknownDocument?Qt.fromSegments(Z.unknownDocument.path):tn()).path.toArray();var Z;const Ie={prefixPath:H.slice(0,H.length-2),collectionGroup:H[H.length-2],documentId:H[H.length-1],readTime:E.readTime||[0,0],unknownDocument:E.unknownDocument,noDocument:E.noDocument,document:E.document,hasCommittedMutations:!!E.hasCommittedMutations};d.push(x.put(Ie))}).next(()=>Ct.waitFor(d))}}function Ph(i){i.createObjectStore("targetDocuments",{keyPath:Hc}).createIndex("documentTargetsIndex",Au,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Lm,{unique:!0}),i.createObjectStore("targetGlobal")}const cg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Kf{constructor(e,n,a,d,m,E,x,H,Z,Ie,Be=13){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=a,this.Yn=m,this.window=E,this.document=x,this.Xn=Z,this.Zn=Ie,this.ts=Be,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=mt=>Promise.resolve(),!Kf.vt())throw new It(pt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sl(this,d),this.hs=n+"main",this.M=new sc(H),this.ls=new to(this.hs,this.ts,new zf(this.M)),this.fs=new $m(this.referenceDelegate,this.M),this.ds=new Hf(this.M),this._s=new $d,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===Ie&&Vi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new It(pt.FAILED_PRECONDITION,cg);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new gi(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var n=this;return this.cs=function(){var a=(0,p.Z)(function*(d){if(n.started)return e(d)});return function(d){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var n=(0,p.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,p.Z)(function*(){n.started&&(yield n.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Nh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(n=>{n||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(n=>this.isPrimary&&!n?this.Rs(e).next(()=>!1):!!n&&this.bs(e).next(()=>!0))).catch(e=>{if(ja(e))return jt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return jt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return Jc(e).get("owner").next(n=>Ct.resolve(this.Ps(n)))}Vs(e){return Nh(e).delete(this.clientId)}vs(){var e=this;return(0,p.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const d=is(a,"clientMetadata");return d.qt().next(m=>{const E=e.Ds(m,18e5),x=m.filter(H=>-1===E.indexOf(H));return Ct.forEach(x,H=>d.delete(H.clientId)).next(()=>x)})}).catch(()=>[]);if(e.ws)for(const a of n)e.ws.removeItem(e.Cs(a.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?Ct.resolve(!0):Jc(e).get("owner").next(n=>{if(null!==n&&this.Ss(n.leaseTimestampMs,5e3)&&!this.xs(n.ownerId)){if(this.Ps(n)&&this.networkEnabled)return!0;if(!this.Ps(n)){if(!n.allowTabSynchronization)throw new It(pt.FAILED_PRECONDITION,cg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Nh(e).qt().next(a=>void 0===this.Ds(a,5e3).find(d=>{if(this.clientId!==d.clientId){const E=!this.inForeground&&d.inForeground,x=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||E&&x)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&jt("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,p.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const a=new ig(n,gi.A);return e.Rs(a).next(()=>e.Vs(a))}),e.ls.close(),e.Os()})()}Ds(e,n){return e.filter(a=>this.Ss(a.updateTimeMs,n)&&!this.xs(a.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>Nh(e).qt().next(n=>this.Ds(n,18e5).map(a=>a.clientId)))}get started(){return this.ns}getMutationQueue(e,n){return Bf.Yt(e,this.M,n,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new Mh(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return Go.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,n,a){jt("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===n?"readonly":"readwrite",m=14===(E=this.ts)?rg:13===E?Of:12===E?Ud:11===E?Ld:void tn();var E;let x;return this.ls.runTransaction(e,d,m,H=>(x=new ig(H,this.es?this.es.next():gi.A),"readwrite-primary"===n?this.Es(x).next(Z=>!!Z||this.As(x)).next(Z=>{if(!Z)throw Vi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new It(pt.FAILED_PRECONDITION,Vd);return a(x)}).next(Z=>this.bs(x).next(()=>Z)):this.$s(x).next(()=>a(x)))).then(H=>(x.raiseOnCommittedEvent(),H))}$s(e){return Jc(e).get("owner").next(n=>{if(null!==n&&this.Ss(n.leaseTimestampMs,5e3)&&!this.xs(n.ownerId)&&!this.Ps(n)&&!(this.Zn||this.allowTabSynchronization&&n.allowTabSynchronization))throw new It(pt.FAILED_PRECONDITION,cg)})}bs(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jc(e).put("owner",n)}static vt(){return to.vt()}Rs(e){const n=Jc(e);return n.get("owner").next(a=>this.Ps(a)?(jt("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Ct.resolve())}Ss(e,n){const a=Date.now();return!(e<a-n||e>a&&(Vi(`Detected an update time that is in the future: ${e} > ${a}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,de.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var n;try{const a=null!==(null===(n=this.ws)||void 0===n?void 0:n.getItem(this.Cs(e)));return jt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Vi("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Vi("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jc(i){return is(i,"owner")}function Nh(i){return is(i,"clientMetadata")}function qf(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class dg{constructor(e,n,a){this.ds=e,this.Bs=n,this.indexManager=a}Ls(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,n).next(a=>this.Us(e,n,a))}Us(e,n,a){return this.ds.getEntry(e,n).next(d=>{for(const m of a)m.applyToLocalView(d);return d})}qs(e,n){e.forEach((a,d)=>{for(const m of n)m.applyToLocalView(d)})}Ks(e,n){return this.ds.getEntries(e,n).next(a=>this.Gs(e,a).next(()=>a))}Gs(e,n){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>this.qs(n,a))}Qs(e,n,a){return Qt.isDocumentKey((d=n).path)&&null===d.collectionGroup&&0===d.filters.length?this.js(e,n.path):tu(n)?this.Ws(e,n,a):this.zs(e,n,a);var d}js(e,n){return this.Ls(e,new Qt(n)).next(a=>{let d=su();return a.isFoundDocument()&&(d=d.insert(a.key,a)),d})}Ws(e,n,a){const d=n.collectionGroup;let m=su();return this.indexManager.getCollectionParents(e,d).next(E=>Ct.forEach(E,x=>{const H=(Z=n,Ie=x.child(d),new ra(Ie,null,Z.explicitOrderBy.slice(),Z.filters.slice(),Z.limit,Z.limitType,Z.startAt,Z.endAt));var Z,Ie;return this.zs(e,H,a).next(Z=>{Z.forEach((Ie,Be)=>{m=m.insert(Ie,Be)})})}).next(()=>m))}zs(e,n,a){let d;return this.ds.getAllFromCollection(e,n.path,a).next(m=>(d=m,this.Bs.getAllMutationBatchesAffectingQuery(e,n))).next(m=>{for(const E of m)for(const x of E.mutations){const H=x.key;let Z=d.get(H);null==Z&&(Z=Xn.newInvalidDocument(H),d=d.insert(H,Z)),ka(x,Z,E.localWriteTime),Z.isFoundDocument()||(d=d.remove(H))}}).next(()=>(d.forEach((m,E)=>{Id(n,E)||(d=d.remove(m))}),d))}}class hg{constructor(e,n,a,d){this.targetId=e,this.fromCache=n,this.Hs=a,this.Js=d}static Ys(e,n){let a=ei(),d=ei();for(const m of n.docChanges)switch(m.type){case 0:a=a.add(m.doc.key);break;case 1:d=d.add(m.doc.key)}return new hg(e,n.fromCache,a,d)}}class fg{constructor(){this.Xs=!1}initialize(e,n){this.Zs=e,this.indexManager=n,this.Xs=!0}Qs(e,n,a,d){return this.ti(e,n).next(m=>m||this.ei(e,n,d,a)).next(m=>m||this.ni(e,n))}ti(e,n){return Ct.resolve(null)}ei(e,n,a,d){return function gh(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}(n)||d.isEqual(q.min())?this.ni(e,n):this.Zs.Ks(e,a).next(m=>{const E=this.si(n,m);return this.ii(n,E,a,d)?this.ni(e,n):(ha()<=Ee.in.DEBUG&&jt("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),kc(n)),this.ri(e,E,n,Po(d,-1)))})}si(e,n){let a=new P(Qu(e));return n.forEach((d,m)=>{Id(e,m)&&(a=a.add(m))}),a}ii(e,n,a,d){if(null===e.limit)return!1;if(a.size!==n.size)return!0;const m="F"===e.limitType?n.last():n.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(d)>0)}ni(e,n){return ha()<=Ee.in.DEBUG&&jt("QueryEngine","Using full collection scan to execute query:",kc(n)),this.Zs.Qs(e,n,_o.min())}ri(e,n,a,d){return this.Zs.Qs(e,a,d).next(m=>(n.forEach(E=>{m=m.insert(E.key,E)}),m))}}class Z_{constructor(e,n,a,d){this.persistence=e,this.oi=n,this.M=d,this.ui=new Wr(C),this.ai=new or(m=>ft(m),ln),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(a)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new dg(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ui))}}function Zf(i,e,n,a){return new Z_(i,e,n,a)}function Yf(i,e){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,p.Z)(function*(i,e){const n=Kt(i);return yield n.persistence.runTransaction("Handle user change","readonly",a=>{let d;return n.Bs.getAllMutationBatches(a).next(m=>(d=m,n.li(e),n.Bs.getAllMutationBatches(a))).next(m=>{const E=[],x=[];let H=ei();for(const Z of d){E.push(Z.batchId);for(const Ie of Z.mutations)H=H.add(Ie.key)}for(const Z of m){x.push(Z.batchId);for(const Ie of Z.mutations)H=H.add(Ie.key)}return n.fi.Ks(a,H).next(Z=>({di:Z,removedBatchIds:E,addedBatchIds:x}))})})}),Qf.apply(this,arguments)}function Jf(i,e){const n=Kt(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const d=e.batch.keys(),m=n.hi.newChangeBuffer({trackRemovals:!0});return function(E,x,H,Z){const Ie=H.batch,Be=Ie.keys();let mt=Ct.resolve();return Be.forEach(Nt=>{mt=mt.next(()=>Z.getEntry(x,Nt)).next(Bt=>{const mn=H.docVersions.get(Nt);Vn(null!==mn),Bt.version.compareTo(mn)<0&&(Ie.applyToRemoteDocument(Bt,H),Bt.isValidDocument()&&(Bt.setReadTime(H.commitVersion),Z.addEntry(Bt)))})}),mt.next(()=>E.Bs.removeMutationBatch(x,Ie))}(n,a,e,m).next(()=>m.apply(a)).next(()=>n.Bs.performConsistencyCheck(a)).next(()=>n.fi.Ks(a,d))})}function Hm(i){const e=Kt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.fs.getLastRemoteSnapshotVersion(n))}function Y_(i,e){const n=Kt(i),a=e.snapshotVersion;let d=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const E=n.hi.newChangeBuffer({trackRemovals:!0});d=n.ui;const x=[];e.targetChanges.forEach((Z,Ie)=>{const Be=d.get(Ie);if(!Be)return;x.push(n.fs.removeMatchingKeys(m,Z.removedDocuments,Ie).next(()=>n.fs.addMatchingKeys(m,Z.addedDocuments,Ie)));let mt=Be.withSequenceNumber(m.currentSequenceNumber);var Nt,Bt,mn;e.targetMismatches.has(Ie)?mt=mt.withResumeToken(ii.EMPTY_BYTE_STRING,q.min()).withLastLimboFreeSnapshotVersion(q.min()):Z.resumeToken.approximateByteSize()>0&&(mt=mt.withResumeToken(Z.resumeToken,a)),d=d.insert(Ie,mt),Bt=mt,mn=Z,(0===(Nt=Be).resumeToken.approximateByteSize()||Bt.snapshotVersion.toMicroseconds()-Nt.snapshotVersion.toMicroseconds()>=3e8||mn.addedDocuments.size+mn.modifiedDocuments.size+mn.removedDocuments.size>0)&&x.push(n.fs.updateTargetData(m,mt))});let H=$i();if(e.documentUpdates.forEach(Z=>{e.resolvedLimboDocuments.has(Z)&&x.push(n.persistence.referenceDelegate.updateLimboDocument(m,Z))}),x.push(Gm(m,E,e.documentUpdates).next(Z=>{H=Z})),!a.isEqual(q.min())){const Z=n.fs.getLastRemoteSnapshotVersion(m).next(Ie=>n.fs.setTargetsMetadata(m,m.currentSequenceNumber,a));x.push(Z)}return Ct.waitFor(x).next(()=>E.apply(m)).next(()=>n.fi.Gs(m,H)).next(()=>H)}).then(m=>(n.ui=d,m))}function Gm(i,e,n){let a=ei();return n.forEach(d=>a=a.add(d)),e.getEntries(i,a).next(d=>{let m=$i();return n.forEach((E,x)=>{const H=d.get(E);x.isNoDocument()&&x.version.isEqual(q.min())?(e.removeEntry(E,x.readTime),m=m.insert(E,x)):!H.isValidDocument()||x.version.compareTo(H.version)>0||0===x.version.compareTo(H.version)&&H.hasPendingWrites?(e.addEntry(x),m=m.insert(E,x)):jt("LocalStore","Ignoring outdated watch update for ",E,". Current version:",H.version," Watch version:",x.version)}),m})}function Fy(i,e){const n=Kt(i);return n.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),n.Bs.getNextMutationBatchAfterBatchId(a,e)))}function kh(i,e){const n=Kt(i);return n.persistence.runTransaction("Allocate target","readwrite",a=>{let d;return n.fs.getTargetData(a,e).next(m=>m?(d=m,Ct.resolve(d)):n.fs.allocateTargetId(a).next(E=>(d=new Mu(e,E,0,a.currentSequenceNumber),n.fs.addTargetData(a,d).next(()=>d))))}).then(a=>{const d=n.ui.get(a.targetId);return(null===d||a.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(n.ui=n.ui.insert(a.targetId,a),n.ai.set(e,a.targetId)),a})}function _c(i,e,n){return Xf.apply(this,arguments)}function Xf(){return Xf=(0,p.Z)(function*(i,e,n){const a=Kt(i),d=a.ui.get(e),m=n?"readwrite":"readwrite-primary";try{n||(yield a.persistence.runTransaction("Release target",m,E=>a.persistence.referenceDelegate.removeTarget(E,d)))}catch(E){if(!ja(E))throw E;jt("LocalStore",`Failed to update sequence numbers for target ${e}: ${E}`)}a.ui=a.ui.remove(e),a.ai.delete(d.target)}),Xf.apply(this,arguments)}function ep(i,e,n){const a=Kt(i);let d=q.min(),m=ei();return a.persistence.runTransaction("Execute query","readonly",E=>function(x,H,Z){const Ie=Kt(x),Be=Ie.ai.get(Z);return void 0!==Be?Ct.resolve(Ie.ui.get(Be)):Ie.fs.getTargetData(H,Z)}(a,E,ya(e)).next(x=>{if(x)return d=x.lastLimboFreeSnapshotVersion,a.fs.getMatchingKeysForTargetId(E,x.targetId).next(H=>{m=H})}).next(()=>a.oi.Qs(E,e,n?d:q.min(),n?m:ei())).next(x=>(al(a,Cd(e),x),{documents:x,_i:m})))}function Q_(i,e){const n=Kt(i),a=Kt(n.fs),d=n.ui.get(e);return d?Promise.resolve(d.target):n.persistence.runTransaction("Get target data","readonly",m=>a.Et(m,e).next(E=>E?E.target:null))}function tp(i,e){const n=Kt(i),a=n.ci.get(e)||q.min();return n.persistence.runTransaction("Get new document changes","readonly",d=>n.hi.getAllFromCollectionGroup(d,e,Po(a,-1),Number.MAX_SAFE_INTEGER)).then(d=>(al(n,e,d),d))}function al(i,e,n){let a=q.min();n.forEach((d,m)=>{m.readTime.compareTo(a)>0&&(a=m.readTime)}),i.ci.set(e,a)}function rp(){return rp=(0,p.Z)(function*(i,e,n,a){const d=Kt(i);let m=ei(),E=$i();for(const Z of n){const Ie=e.wi(Z.metadata.name);Z.document&&(m=m.add(Ie));const Be=e.mi(Z);Be.setReadTime(e.gi(Z.metadata.readTime)),E=E.insert(Ie,Be)}const x=d.hi.newChangeBuffer({trackRemovals:!0}),H=yield kh(d,(Z=a,ya(eu(qt.fromString(`__bundle__/docs/${Z}`)))));var Z;return d.persistence.runTransaction("Apply bundle documents","readwrite",Z=>Gm(Z,x,E).next(Ie=>(x.apply(Z),Ie)).next(Ie=>d.fs.removeMatchingKeysForTargetId(Z,H.targetId).next(()=>d.fs.addMatchingKeys(Z,m,H.targetId)).next(()=>d.fi.Gs(Z,Ie)).next(()=>Ie)))}),rp.apply(this,arguments)}function pg(i,e){return qd.apply(this,arguments)}function qd(){return qd=(0,p.Z)(function*(i,e,n=ei()){const a=yield kh(i,ya(uc(e.bundledQuery))),d=Kt(i);return d.persistence.runTransaction("Save named query","readwrite",m=>{const E=Xs(e.readTime);if(a.snapshotVersion.compareTo(E)>=0)return d._s.saveNamedQuery(m,e);const x=a.withResumeToken(ii.EMPTY_BYTE_STRING,E);return d.ui=d.ui.insert(x.targetId,x),d.fs.updateTargetData(m,x).next(()=>d.fs.removeMatchingKeysForTargetId(m,a.targetId)).next(()=>d.fs.addMatchingKeys(m,n,a.targetId)).next(()=>d._s.saveNamedQuery(m,e))})}),qd.apply(this,arguments)}class gg{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,n){return Ct.resolve(this.yi.get(n))}saveBundleMetadata(e,n){var a;return this.yi.set(n.id,{id:(a=n).id,version:a.version,createTime:Xs(a.createTime)}),Ct.resolve()}getNamedQuery(e,n){return Ct.resolve(this.pi.get(n))}saveNamedQuery(e,n){return this.pi.set(n.name,{name:(a=n).name,query:uc(a.bundledQuery),readTime:Xs(a.readTime)}),Ct.resolve();var a}}class mg{constructor(){this.overlays=new Wr(Qt.comparator),this.Ii=new Map}getOverlay(e,n){return Ct.resolve(this.overlays.get(n))}saveOverlays(e,n,a){return a.forEach((d,m)=>{this.Xt(e,n,m)}),Ct.resolve()}removeOverlaysForBatchId(e,n,a){const d=this.Ii.get(a);return void 0!==d&&(d.forEach(m=>this.overlays=this.overlays.remove(m)),this.Ii.delete(a)),Ct.resolve()}getOverlaysForCollection(e,n,a){const d=Iu(),m=n.length+1,E=new Qt(n.child("")),x=this.overlays.getIteratorFrom(E);for(;x.hasNext();){const H=x.getNext().value,Z=H.getKey();if(!n.isPrefixOf(Z.path))break;Z.path.length===m&&H.largestBatchId>a&&d.set(H.getKey(),H)}return Ct.resolve(d)}getOverlaysForCollectionGroup(e,n,a,d){let m=new Wr((Z,Ie)=>Z-Ie);const E=this.overlays.getIterator();for(;E.hasNext();){const Z=E.getNext().value;if(Z.getKey().getCollectionGroup()===n&&Z.largestBatchId>a){let Ie=m.get(Z.largestBatchId);null===Ie&&(Ie=Iu(),m=m.insert(Z.largestBatchId,Ie)),Ie.set(Z.getKey(),Z)}}const x=Iu(),H=m.getIterator();for(;H.hasNext()&&(H.getNext().value.forEach((Z,Ie)=>x.set(Z,Ie)),!(x.size()>=d)););return Ct.resolve(x)}Xt(e,n,a){if(null===a)return;const d=this.overlays.get(a.key);if(null!==d){const E=this.Ii.get(d.largestBatchId).delete(a.key);this.Ii.set(d.largestBatchId,E)}this.overlays=this.overlays.insert(a.key,new qc(n,a));let m=this.Ii.get(n);void 0===m&&(m=ei(),this.Ii.set(n,m)),this.Ii.set(n,m.add(a.key))}}class _g{constructor(){this.Ti=new P(qi.Ei),this.Ai=new P(qi.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,n){const a=new qi(e,n);this.Ti=this.Ti.add(a),this.Ai=this.Ai.add(a)}bi(e,n){e.forEach(a=>this.addReference(a,n))}removeReference(e,n){this.Pi(new qi(e,n))}Vi(e,n){e.forEach(a=>this.removeReference(a,n))}vi(e){const n=new Qt(new qt([])),a=new qi(n,e),d=new qi(n,e+1),m=[];return this.Ai.forEachInRange([a,d],E=>{this.Pi(E),m.push(E.key)}),m}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const n=new Qt(new qt([])),a=new qi(n,e),d=new qi(n,e+1);let m=ei();return this.Ai.forEachInRange([a,d],E=>{m=m.add(E.key)}),m}containsKey(e){const n=new qi(e,0),a=this.Ti.firstAfterOrEqual(n);return null!==a&&e.isEqual(a.key)}}class qi{constructor(e,n){this.key=e,this.Ci=n}static Ei(e,n){return Qt.comparator(e.key,n.key)||C(e.Ci,n.Ci)}static Ri(e,n){return C(e.Ci,n.Ci)||Qt.comparator(e.key,n.key)}}class zm{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new P(qi.Ei)}checkEmpty(e){return Ct.resolve(0===this.Bs.length)}addMutationBatch(e,n,a,d){const m=this.xi;this.xi++;const E=new Nf(m,n,a,d);this.Bs.push(E);for(const x of d)this.Ni=this.Ni.add(new qi(x.key,m)),this.indexManager.addToCollectionParentIndex(e,x.key.path.popLast());return Ct.resolve(E)}lookupMutationBatch(e,n){return Ct.resolve(this.ki(n))}getNextMutationBatchAfterBatchId(e,n){const d=this.Mi(n+1),m=d<0?0:d;return Ct.resolve(this.Bs.length>m?this.Bs[m]:null)}getHighestUnacknowledgedBatchId(){return Ct.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return Ct.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new qi(n,0),d=new qi(n,Number.POSITIVE_INFINITY),m=[];return this.Ni.forEachInRange([a,d],E=>{const x=this.ki(E.Ci);m.push(x)}),Ct.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new P(C);return n.forEach(d=>{const m=new qi(d,0),E=new qi(d,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([m,E],x=>{a=a.add(x.Ci)})}),Ct.resolve(this.Oi(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,d=a.length+1;let m=a;Qt.isDocumentKey(m)||(m=m.child(""));const E=new qi(new Qt(m),0);let x=new P(C);return this.Ni.forEachWhile(H=>{const Z=H.key.path;return!!a.isPrefixOf(Z)&&(Z.length===d&&(x=x.add(H.Ci)),!0)},E),Ct.resolve(this.Oi(x))}Oi(e){const n=[];return e.forEach(a=>{const d=this.ki(a);null!==d&&n.push(d)}),n}removeMutationBatch(e,n){Vn(0===this.Fi(n.batchId,"removed")),this.Bs.shift();let a=this.Ni;return Ct.forEach(n.mutations,d=>{const m=new qi(d.key,n.batchId);return a=a.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.Ni=a})}_n(e){}containsKey(e,n){const a=new qi(n,0),d=this.Ni.firstAfterOrEqual(a);return Ct.resolve(n.isEqual(d&&d.key))}performConsistencyCheck(e){return Ct.resolve()}Fi(e,n){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const n=this.Mi(e);return n<0||n>=this.Bs.length?null:this.Bs[n]}}class J_{constructor(e){this.$i=e,this.docs=new Wr(Qt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,d=this.docs.get(a),m=d?d.size:0,E=this.$i(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:E}),this.size+=E-m,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return Ct.resolve(a?a.document.mutableCopy():Xn.newInvalidDocument(n))}getEntries(e,n){let a=$i();return n.forEach(d=>{const m=this.docs.get(d);a=a.insert(d,m?m.document.mutableCopy():Xn.newInvalidDocument(d))}),Ct.resolve(a)}getAllFromCollection(e,n,a){let d=$i();const m=new Qt(n.child("")),E=this.docs.getIteratorFrom(m);for(;E.hasNext();){const{key:x,value:{document:H}}=E.getNext();if(!n.isPrefixOf(x.path))break;x.path.length>n.length+1||Zu(qu(H),a)<=0||(d=d.insert(H.key,H.mutableCopy()))}return Ct.resolve(d)}getAllFromCollectionGroup(e,n,a,d){tn()}Bi(e,n){return Ct.forEach(this.docs,a=>n(a))}newChangeBuffer(e){return new yg(this)}getSize(e){return Ct.resolve(this.size)}}class yg extends Wf{constructor(e){super(),this.Kn=e}applyChanges(e){const n=[];return this.changes.forEach((a,d)=>{d.isValidDocument()?n.push(this.Kn.addEntry(e,d)):this.Kn.removeEntry(a)}),Ct.waitFor(n)}getFromCache(e,n){return this.Kn.getEntry(e,n)}getAllFromCache(e,n){return this.Kn.getEntries(e,n)}}class X_{constructor(e){this.persistence=e,this.Li=new or(n=>ft(n),ln),this.lastRemoteSnapshotVersion=q.min(),this.highestTargetId=0,this.Ui=0,this.qi=new _g,this.targetCount=0,this.Ki=mc.gn()}forEachTarget(e,n){return this.Li.forEach((a,d)=>n(d)),Ct.resolve()}getLastRemoteSnapshotVersion(e){return Ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ct.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),Ct.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.Ui&&(this.Ui=n),Ct.resolve()}Tn(e){this.Li.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ki=new mc(n),this.highestTargetId=n),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,n){return this.Tn(n),this.targetCount+=1,Ct.resolve()}updateTargetData(e,n){return this.Tn(n),Ct.resolve()}removeTargetData(e,n){return this.Li.delete(n.target),this.qi.vi(n.targetId),this.targetCount-=1,Ct.resolve()}removeTargets(e,n,a){let d=0;const m=[];return this.Li.forEach((E,x)=>{x.sequenceNumber<=n&&null===a.get(x.targetId)&&(this.Li.delete(E),m.push(this.removeMatchingKeysForTargetId(e,x.targetId)),d++)}),Ct.waitFor(m).next(()=>d)}getTargetCount(e){return Ct.resolve(this.targetCount)}getTargetData(e,n){const a=this.Li.get(n)||null;return Ct.resolve(a)}addMatchingKeys(e,n,a){return this.qi.bi(n,a),Ct.resolve()}removeMatchingKeys(e,n,a){this.qi.Vi(n,a);const d=this.persistence.referenceDelegate,m=[];return d&&n.forEach(E=>{m.push(d.markPotentiallyOrphaned(e,E))}),Ct.waitFor(m)}removeMatchingKeysForTargetId(e,n){return this.qi.vi(n),Ct.resolve()}getMatchingKeysForTargetId(e,n){const a=this.qi.Di(n);return Ct.resolve(a)}containsKey(e,n){return Ct.resolve(this.qi.containsKey(n))}}class Km{constructor(e,n){this.Gi={},this.overlays={},this.es=new gi(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new X_(this),this.indexManager=new Zc,this.ds=new J_(a=>this.referenceDelegate.Qi(a)),this.M=new sc(n),this._s=new gg(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new mg,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this.Gi[e.toKey()];return a||(a=new zm(n,this.referenceDelegate),this.Gi[e.toKey()]=a),a}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,n,a){jt("MemoryPersistence","Starting transaction:",e);const d=new ey(this.es.next());return this.referenceDelegate.ji(),a(d).next(m=>this.referenceDelegate.Wi(d).next(()=>m)).toPromise().then(m=>(d.raiseOnCommittedEvent(),m))}zi(e,n){return Ct.or(Object.values(this.Gi).map(a=>()=>a.containsKey(e,n)))}}class ey extends bh{constructor(e){super(),this.currentSequenceNumber=e}}class vg{constructor(e){this.persistence=e,this.Hi=new _g,this.Ji=null}static Yi(e){return new vg(e)}get Xi(){if(this.Ji)return this.Ji;throw tn()}addReference(e,n,a){return this.Hi.addReference(a,n),this.Xi.delete(a.toString()),Ct.resolve()}removeReference(e,n,a){return this.Hi.removeReference(a,n),this.Xi.add(a.toString()),Ct.resolve()}markPotentiallyOrphaned(e,n){return this.Xi.add(n.toString()),Ct.resolve()}removeTarget(e,n){this.Hi.vi(n.targetId).forEach(d=>this.Xi.add(d.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next(d=>{d.forEach(m=>this.Xi.add(m.toString()))}).next(()=>a.removeTargetData(e,n))}ji(){this.Ji=new Set}Wi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ct.forEach(this.Xi,a=>{const d=Qt.fromPath(a);return this.Zi(e,d).next(m=>{m||n.removeEntry(d,q.min())})}).next(()=>(this.Ji=null,n.apply(e)))}updateLimboDocument(e,n){return this.Zi(e,n).next(a=>{a?this.Xi.delete(n.toString()):this.Xi.add(n.toString())})}Qi(e){return 0}Zi(e,n){return Ct.or([()=>Ct.resolve(this.Hi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.zi(e,n)])}}function Zd(i,e){return`firestore_clients_${i}_${e}`}function Xc(i,e,n){let a=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function Fh(i,e){return`firestore_targets_${i}_${e}`}class xl{constructor(e,n,a,d){this.user=e,this.batchId=n,this.state=a,this.error=d}static tr(e,n,a){const d=JSON.parse(a);let m,E="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return E&&d.error&&(E="string"==typeof d.error.message&&"string"==typeof d.error.code,E&&(m=new It(d.error.code,d.error.message))),E?new xl(e,n,d.state,m):(Vi("SharedClientState",`Failed to parse mutation state for ID '${n}': ${a}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ol{constructor(e,n,a){this.targetId=e,this.state=n,this.error=a}static tr(e,n){const a=JSON.parse(n);let d,m="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return m&&a.error&&(m="string"==typeof a.error.message&&"string"==typeof a.error.code,m&&(d=new It(a.error.code,a.error.message))),m?new Ol(e,a.state,d):(Vi("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ul{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static tr(e,n){const a=JSON.parse(n);let d="object"==typeof a&&a.activeTargetIds instanceof Array,m=Dl();for(let E=0;d&&E<a.activeTargetIds.length;++E)d=Kl(a.activeTargetIds[E]),m=m.add(a.activeTargetIds[E]);return d?new ul(e,m):(Vi("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class Eg{constructor(e,n){this.clientId=e,this.onlineState=n}static tr(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new Eg(n.clientId,n.onlineState):(Vi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ip{constructor(){this.activeTargetIds=Dl()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sp{constructor(e,n,a,d,m){this.window=e,this.Yn=n,this.persistenceKey=a,this.ir=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Wr(C),this.started=!1,this.cr=[];const E=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.hr=Zd(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new ip),this.dr=new RegExp(`^firestore_clients_${E}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${E}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${E}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(x){return`firestore_bundle_loaded_v2_${x}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,p.Z)(function*(){const n=yield e.syncEngine.Fs();for(const d of n){if(d===e.ir)continue;const m=e.getItem(Zd(e.persistenceKey,d));if(m){const E=ul.tr(d,m);E&&(e.ar=e.ar.insert(E.clientId,E))}}e.yr();const a=e.storage.getItem(e.mr);if(a){const d=e.pr(a);d&&e.Ir(d)}for(const d of e.cr)e.ur(d);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let n=!1;return this.ar.forEach((a,d)=>{d.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,n,a){this.Er(e,n,a),this.Ar(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Fh(this.persistenceKey,e));if(a){const d=Ol.tr(e,a);d&&(n=d.state)}}return this.Rr.nr(e),this.yr(),n}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Fh(this.persistenceKey,e))}updateQueryState(e,n,a){this.br(e,n,a)}handleUserChange(e,n,a){n.forEach(d=>{this.Ar(d)}),this.currentUser=e,a.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return jt("SharedClientState","READ",e,n),n}setItem(e,n){jt("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){jt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var n=this;const a=e;if(a.storageArea===this.storage){if(jt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.hr)return void Vi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,p.Z)(function*(){if(n.started){if(null!==a.key)if(n.dr.test(a.key)){if(null==a.newValue){const d=n.vr(a.key);return n.Sr(d,null)}{const d=n.Dr(a.key,a.newValue);if(d)return n.Sr(d.clientId,d)}}else if(n._r.test(a.key)){if(null!==a.newValue){const d=n.Cr(a.key,a.newValue);if(d)return n.Nr(d)}}else if(n.wr.test(a.key)){if(null!==a.newValue){const d=n.kr(a.key,a.newValue);if(d)return n.Mr(d)}}else if(a.key===n.mr){if(null!==a.newValue){const d=n.pr(a.newValue);if(d)return n.Ir(d)}}else if(a.key===n.lr){const d=function(m){let E=gi.A;if(null!=m)try{const x=JSON.parse(m);Vn("number"==typeof x),E=x}catch(x){Vi("SharedClientState","Failed to read sequence number from WebStorage",x)}return E}(a.newValue);d!==gi.A&&n.sequenceNumberHandler(d)}else if(a.key===n.gr){const d=n.Or(a.newValue);yield Promise.all(d.map(m=>n.syncEngine.Fr(m)))}}else n.cr.push(a)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,n,a){const d=new xl(this.currentUser,e,n,a),m=Xc(this.persistenceKey,this.currentUser,e);this.setItem(m,d.er())}Ar(e){const n=Xc(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,n,a){const d=Fh(this.persistenceKey,e),m=new Ol(e,n,a);this.setItem(d,m.er())}Vr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.gr,n)}vr(e){const n=this.dr.exec(e);return n?n[1]:null}Dr(e,n){const a=this.vr(e);return ul.tr(a,n)}Cr(e,n){const a=this._r.exec(e),d=Number(a[1]);return xl.tr(new li(void 0!==a[2]?a[2]:null),d,n)}kr(e,n){const a=this.wr.exec(e),d=Number(a[1]);return Ol.tr(d,n)}pr(e){return Eg.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var n=this;return(0,p.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.$r(e.batchId,e.state,e.error);jt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,n){const a=n?this.ar.insert(e,n):this.ar.remove(e),d=this.Tr(this.ar),m=this.Tr(a),E=[],x=[];return m.forEach(H=>{d.has(H)||E.push(H)}),d.forEach(H=>{m.has(H)||x.push(H)}),this.syncEngine.Lr(E,x).then(()=>{this.ar=a})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let n=Dl();return e.forEach((a,d)=>{n=n.unionWith(d.activeTargetIds)}),n}}class op{constructor(){this.Ur=new ip,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,n,a){this.qr[e]=n}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new ip,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class wg{Kr(e){}shutdown(){}}class Ig{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){jt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){jt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const ap={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class ty{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class qm extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,n,a,d,m){const E=this.ho(e,n);jt("RestConnection","Sending: ",E,a);const x={};return this.lo(x,d,m),this.fo(e,E,x,a).then(H=>(jt("RestConnection","Received: ",H),H),H=>{throw Bi("RestConnection",`${e} failed with error: `,H,"url: ",E,"request:",a),H})}_o(e,n,a,d,m){return this.co(e,n,a,d,m)}lo(e,n,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ro,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((d,m)=>e[m]=d),a&&a.headers.forEach((d,m)=>e[m]=d)}ho(e,n){return`${this.uo}/v1/${n}:${ap[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,a,d){return new Promise((m,E)=>{const x=new Vs;x.listenOnce(Aa.COMPLETE,()=>{try{switch(x.getLastErrorCode()){case pi.NO_ERROR:const Z=x.getResponseJson();jt("Connection","XHR received:",JSON.stringify(Z)),m(Z);break;case pi.TIMEOUT:jt("Connection",'RPC "'+e+'" timed out'),E(new It(pt.DEADLINE_EXCEEDED,"Request time out"));break;case pi.HTTP_ERROR:const Ie=x.getStatus();if(jt("Connection",'RPC "'+e+'" failed with status:',Ie,"response text:",x.getResponseText()),Ie>0){const Be=x.getResponseJson().error;if(Be&&Be.status&&Be.message){const mt=function(Nt){const Bt=Nt.toLowerCase().replace(/_/g,"-");return Object.values(pt).indexOf(Bt)>=0?Bt:pt.UNKNOWN}(Be.status);E(new It(mt,Be.message))}else E(new It(pt.UNKNOWN,"Server responded with status "+x.getStatus()))}else E(new It(pt.UNAVAILABLE,"Connection failed."));break;default:tn()}}finally{jt("Connection",'RPC "'+e+'" completed.')}});const H=JSON.stringify(d);x.send(n,"POST",H,a,15)})}wo(e,n,a){const d=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=Wo(),E=Ta(),x={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(x.xmlHttpFactory=new Ka({})),this.lo(x.initMessageHeaders,n,a),(0,de.uI)()||(0,de.b$)()||(0,de.d)()||(0,de.w1)()||(0,de.Mn)()||(0,de.ru)()||(x.httpHeadersOverwriteParam="$httpHeaders");const H=d.join("");jt("Connection","Creating WebChannel: "+H,x);const Z=m.createWebChannel(H,x);let Ie=!1,Be=!1;const mt=new ty({Jr:Bt=>{Be?jt("Connection","Not sending because WebChannel is closed:",Bt):(Ie||(jt("Connection","Opening WebChannel transport."),Z.open(),Ie=!0),jt("Connection","WebChannel sending:",Bt),Z.send(Bt))},Yr:()=>Z.close()}),Nt=(Bt,mn,cr)=>{Bt.listen(mn,ss=>{try{cr(ss)}catch(Ds){setTimeout(()=>{throw Ds},0)}})};return Nt(Z,da.EventType.OPEN,()=>{Be||jt("Connection","WebChannel transport opened.")}),Nt(Z,da.EventType.CLOSE,()=>{Be||(Be=!0,jt("Connection","WebChannel transport closed"),mt.ro())}),Nt(Z,da.EventType.ERROR,Bt=>{Be||(Be=!0,Bi("Connection","WebChannel transport errored:",Bt),mt.ro(new It(pt.UNAVAILABLE,"The operation could not be completed")))}),Nt(Z,da.EventType.MESSAGE,Bt=>{var mn;if(!Be){const cr=Bt.data[0];Vn(!!cr);const ss=cr,Ds=ss.error||(null===(mn=ss[0])||void 0===mn?void 0:mn.error);if(Ds){jt("Connection","WebChannel received error:",Ds);const Yi=Ds.status;let Io=function(Mi){const qo=Ze[Mi];if(void 0!==qo)return Fn(qo)}(Yi),Ns=Ds.message;void 0===Io&&(Io=pt.INTERNAL,Ns="Unknown error status: "+Yi+" with message "+Ds.message),Be=!0,mt.ro(new It(Io,Ns)),Z.close()}else jt("Connection","WebChannel received:",cr),mt.oo(cr)}}),Nt(E,Hi.STAT_EVENT,Bt=>{Bt.stat===kr.PROXY?jt("Connection","Detected buffering proxy"):Bt.stat===kr.NOPROXY&&jt("Connection","Detected no buffering proxy")}),setTimeout(()=>{mt.io()},0),mt}}function ny(){return"undefined"!=typeof window?window:null}function Lh(){return"undefined"!=typeof document?document:null}function Yd(i){return new bf(i,!0)}class Cg{constructor(e,n,a=1e3,d=1.5,m=6e4){this.Yn=e,this.timerId=n,this.mo=a,this.yo=d,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),a=Math.max(0,Date.now()-this.Eo),d=Math.max(0,n-a);d>0&&jt("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,d,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Dg{constructor(e,n,a,d,m,E,x,H){this.Yn=e,this.Vo=a,this.vo=d,this.So=m,this.authCredentialsProvider=E,this.appCheckCredentialsProvider=x,this.listener=H,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Cg(e,n)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,p.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,p.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,n){var a=this;return(0,p.Z)(function*(){a.Uo(),a.qo(),a.No.cancel(),a.Do++,4!==e?a.No.reset():n&&n.code===pt.RESOURCE_EXHAUSTED?(Vi(n.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),a.No.Ao()):n&&n.code===pt.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Ko(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.eo(n)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,d])=>{this.Do===n&&this.Qo(a,d)},a=>{e(()=>{const d=new It(pt.UNKNOWN,"Fetching auth token failed: "+a.message);return this.jo(d)})})}Qo(e,n){const a=this.Go(this.Do);this.stream=this.Wo(e,n),this.stream.Xr(()=>{a(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(d=>{a(()=>this.jo(d))}),this.stream.onMessage(d=>{a(()=>this.onMessage(d))})}Oo(){var e=this;this.state=5,this.No.Ro((0,p.Z)(function*(){e.state=0,e.start()}))}jo(e){return jt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return n=>{this.Yn.enqueueAndForget(()=>this.Do===e?n():(jt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ry extends Dg{constructor(e,n,a,d,m,E){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,d,E),this.M=m}Wo(e,n){return this.So.wo("Listen",e,n)}onMessage(e){this.No.reset();const n=function Om(i,e){let n;if("targetChange"in e){const a="NO_CHANGE"===(H=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===H?1:"REMOVE"===H?2:"CURRENT"===H?3:"RESET"===H?4:tn(),d=e.targetChange.targetIds||[],m=function(H,Z){return H.N?(Vn(void 0===Z||"string"==typeof Z),ii.fromBase64String(Z||"")):(Vn(void 0===Z||Z instanceof Uint8Array),ii.fromUint8Array(Z||new Uint8Array))}(i,e.targetChange.resumeToken),E=e.targetChange.cause,x=E&&function(H){const Z=void 0===H.code?pt.UNKNOWN:Fn(H.code);return new It(Z,H.message||"")}(E);n=new Du(a,d,m,x||null)}else if("documentChange"in e){const a=e.documentChange,d=Ri(i,a.document.name),m=Xs(a.document.updateTime),E=new ns({mapValue:{fields:a.document.fields}}),x=Xn.newFoundDocument(d,m,E);n=new Ua(a.targetIds||[],a.removedTargetIds||[],x.key,x)}else if("documentDelete"in e){const a=e.documentDelete,d=Ri(i,a.document),m=a.readTime?Xs(a.readTime):q.min(),E=Xn.newNoDocument(d,m);n=new Ua([],a.removedTargetIds||[],E.key,E)}else if("documentRemove"in e){const a=e.documentRemove,d=Ri(i,a.document);n=new Ua([],a.removedTargetIds||[],d,null)}else{if(!("filter"in e))return tn();{const a=e.filter,m=new ge(a.count||0);n=new jc(a.targetId,m)}}var H;return n}(this.M,e),a=function(d){if(!("targetChange"in d))return q.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?q.min():m.readTime?Xs(m.readTime):q.min()}(e);return this.listener.zo(n,a)}Ho(e){const n={};n.database=Tl(this.M),n.addTarget=function(d,m){let E;const x=m.target;return E=Kn(x)?{documents:Xp(d,x)}:{query:Rf(d,x)},E.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?E.resumeToken=Tf(d,m.resumeToken):m.snapshotVersion.compareTo(q.min())>0&&(E.readTime=xd(d,m.snapshotVersion.toTimestamp())),E}(this.M,e);const a=function Ih(i,e){const n=function(a,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tn()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);a&&(n.labels=a),this.Lo(n)}Jo(e){const n={};n.database=Tl(this.M),n.removeTarget=e,this.Lo(n)}}class iy extends Dg{constructor(e,n,a,d,m,E){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,d,E),this.M=m,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,n){return this.So.wo("Write",e,n)}onMessage(e){if(Vn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const n=function Jp(i,e){return i&&i.length>0?(Vn(void 0!==e),i.map(n=>function(a,d){let m=Xs(a.updateTime?a.updateTime:d);return m.isEqual(q.min())&&(m=Xs(d)),new Sd(m,a.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),a=Xs(e.commitTime);return this.listener.tu(a,n)}return Vn(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=Tl(this.M),this.Lo(e)}Zo(e){const n={streamToken:this.lastStreamToken,writes:e.map(a=>bu(this.M,a))};this.Lo(n)}}class Wa extends class{}{constructor(e,n,a,d){super(),this.authCredentials=e,this.appCheckCredentials=n,this.So=a,this.M=d,this.su=!1}iu(){if(this.su)throw new It(pt.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,n,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.So.co(e,n,a,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new It(pt.UNKNOWN,d.toString())})}_o(e,n,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.So._o(e,n,a,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new It(pt.UNKNOWN,d.toString())})}terminate(){this.su=!0}}class sy{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Vi(n),this.uu=!1):jt("OnlineStateTracker",n)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class oy{constructor(e,n,a,d,m){var E=this;this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=m,this.gu.Kr(x=>{a.enqueueAndForget((0,p.Z)(function*(){var H;ll(E)&&(jt("RemoteStore","Restarting streams for network reachability change."),yield(H=(0,p.Z)(function*(Z){const Ie=Kt(Z);Ie.wu.add(4),yield ed(Ie),Ie.yu.set("Unknown"),Ie.wu.delete(4),yield up(Ie)}),function(Z){return H.apply(this,arguments)})(E))}))}),this.yu=new sy(a,d)}}function up(i){return Zm.apply(this,arguments)}function Zm(){return Zm=(0,p.Z)(function*(i){if(ll(i))for(const e of i.mu)yield e(!0)}),Zm.apply(this,arguments)}function ed(i){return Ym.apply(this,arguments)}function Ym(){return Ym=(0,p.Z)(function*(i){for(const e of i.mu)yield e(!1)}),Ym.apply(this,arguments)}function lp(i,e){const n=Kt(i);n._u.has(e.targetId)||(n._u.set(e.targetId,e),Tg(n)?bg(n):jh(n).Mo()&&cp(n,e))}function td(i,e){const n=Kt(i),a=jh(n);n._u.delete(e),a.Mo()&&Qm(n,e),0===n._u.size&&(a.Mo()?a.$o():ll(n)&&n.yu.set("Unknown"))}function cp(i,e){i.pu.Z(e.targetId),jh(i).Ho(e)}function Qm(i,e){i.pu.Z(e),jh(i).Jo(e)}function bg(i){i.pu=new zi({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i._u.get(e)||null}),jh(i).start(),i.yu.au()}function Tg(i){return ll(i)&&!jh(i).ko()&&i._u.size>0}function ll(i){return 0===Kt(i).wu.size}function Uh(i){i.pu=void 0}function dp(i){return hp.apply(this,arguments)}function hp(){return hp=(0,p.Z)(function*(i){i._u.forEach((e,n)=>{cp(i,e)})}),hp.apply(this,arguments)}function ay(i,e){return nd.apply(this,arguments)}function nd(){return nd=(0,p.Z)(function*(i,e){Uh(i),Tg(i)?(i.yu.lu(e),bg(i)):i.yu.set("Unknown")}),nd.apply(this,arguments)}function Ag(i,e,n){return fp.apply(this,arguments)}function fp(){return fp=(0,p.Z)(function*(i,e,n){if(i.yu.set("Online"),e instanceof Du&&2===e.state&&e.cause)try{yield(a=(0,p.Z)(function*(d,m){const E=m.cause;for(const x of m.targetIds)d._u.has(x)&&(yield d.remoteSyncer.rejectListen(x,E),d._u.delete(x),d.pu.removeTarget(x))}),function(d,m){return a.apply(this,arguments)})(i,e)}catch(a){jt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Ia(i,a)}else if(e instanceof Ua?i.pu.ut(e):e instanceof jc?i.pu._t(e):i.pu.ht(e),!n.isEqual(q.min()))try{const a=yield Hm(i.localStore);n.compareTo(a)>=0&&(yield function(d,m){const E=d.pu.yt(m);return E.targetChanges.forEach((x,H)=>{if(x.resumeToken.approximateByteSize()>0){const Z=d._u.get(H);Z&&d._u.set(H,Z.withResumeToken(x.resumeToken,m))}}),E.targetMismatches.forEach(x=>{const H=d._u.get(x);if(!H)return;d._u.set(x,H.withResumeToken(ii.EMPTY_BYTE_STRING,H.snapshotVersion)),Qm(d,x);const Z=new Mu(H.target,x,1,H.sequenceNumber);cp(d,Z)}),d.remoteSyncer.applyRemoteEvent(E)}(i,n))}catch(a){jt("RemoteStore","Failed to raise snapshot:",a),yield Ia(i,a)}var a}),fp.apply(this,arguments)}function Ia(i,e,n){return Qd.apply(this,arguments)}function Qd(){return Qd=(0,p.Z)(function*(i,e,n){if(!ja(e))throw e;i.wu.add(1),yield ed(i),i.yu.set("Offline"),n||(n=()=>Hm(i.localStore)),i.asyncQueue.enqueueRetryable((0,p.Z)(function*(){jt("RemoteStore","Retrying IndexedDB access"),yield n(),i.wu.delete(1),yield up(i)}))}),Qd.apply(this,arguments)}function Sg(i,e){return e().catch(n=>Ia(i,n,e))}function rd(i){return Jm.apply(this,arguments)}function Jm(){return Jm=(0,p.Z)(function*(i){const e=Kt(i),n=yc(e);let a=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;Xm(e);)try{const d=yield Fy(e.localStore,a);if(null===d){0===e.du.length&&n.$o();break}a=d.batchId,uy(e,d)}catch(d){yield Ia(e,d)}e_(e)&&t_(e)}),Jm.apply(this,arguments)}function Xm(i){return ll(i)&&i.du.length<10}function uy(i,e){i.du.push(e);const n=yc(i);n.Mo()&&n.Xo&&n.Zo(e.mutations)}function e_(i){return ll(i)&&!yc(i).ko()&&i.du.length>0}function t_(i){yc(i).start()}function Rg(i){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,p.Z)(function*(i){yc(i).nu()}),Mg.apply(this,arguments)}function ly(i){return Jd.apply(this,arguments)}function Jd(){return Jd=(0,p.Z)(function*(i){const e=yc(i);for(const n of i.du)e.Zo(n.mutations)}),Jd.apply(this,arguments)}function xg(i,e,n){return Og.apply(this,arguments)}function Og(){return Og=(0,p.Z)(function*(i,e,n){const a=i.du.shift(),d=Bd.from(a,e,n);yield Sg(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield rd(i)}),Og.apply(this,arguments)}function Pg(i,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,p.Z)(function*(i,e){var n;e&&yc(i).Xo&&(yield(n=(0,p.Z)(function*(a,d){if(cn(m=d.code)&&m!==pt.ABORTED){const E=a.du.shift();yc(a).Fo(),yield Sg(a,()=>a.remoteSyncer.rejectFailedWrite(E.batchId,d)),yield rd(a)}var m}),function(a,d){return n.apply(this,arguments)})(i,e)),e_(i)&&t_(i)}),Vh.apply(this,arguments)}function Ng(i,e){return n_.apply(this,arguments)}function n_(){return n_=(0,p.Z)(function*(i,e){const n=Kt(i);n.asyncQueue.verifyOperationInProgress(),jt("RemoteStore","RemoteStore received new credentials");const a=ll(n);n.wu.add(3),yield ed(n),a&&n.yu.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.wu.delete(3),yield up(n)}),n_.apply(this,arguments)}function r_(i,e){return Bh.apply(this,arguments)}function Bh(){return Bh=(0,p.Z)(function*(i,e){const n=Kt(i);e?(n.wu.delete(2),yield up(n)):e||(n.wu.add(2),yield ed(n),n.yu.set("Unknown"))}),Bh.apply(this,arguments)}function jh(i){return i.Iu||(i.Iu=function(e,n,a){const d=Kt(e);return d.iu(),new ry(n,d.So,d.authCredentials,d.appCheckCredentials,d.M,a)}(i.datastore,i.asyncQueue,{Xr:dp.bind(null,i),eo:ay.bind(null,i),zo:Ag.bind(null,i)}),i.mu.push(function(){var e=(0,p.Z)(function*(n){n?(i.Iu.Fo(),Tg(i)?bg(i):i.yu.set("Unknown")):(yield i.Iu.stop(),Uh(i))});return function(n){return e.apply(this,arguments)}}())),i.Iu}function yc(i){return i.Tu||(i.Tu=function(e,n,a){const d=Kt(e);return d.iu(),new iy(n,d.So,d.authCredentials,d.appCheckCredentials,d.M,a)}(i.datastore,i.asyncQueue,{Xr:Rg.bind(null,i),eo:Pg.bind(null,i),eu:ly.bind(null,i),tu:xg.bind(null,i)}),i.mu.push(function(){var e=(0,p.Z)(function*(n){n?(i.Tu.Fo(),yield rd(i)):(yield i.Tu.stop(),i.du.length>0&&(jt("RemoteStore",`Stopping write stream with ${i.du.length} pending writes`),i.du=[]))});return function(n){return e.apply(this,arguments)}}())),i.Tu}class pp{constructor(e,n,a,d,m){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=d,this.removalCallback=m,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(E=>{})}static createAndSchedule(e,n,a,d,m){const E=Date.now()+a,x=new pp(e,n,E,d,m);return x.start(a),x}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new It(pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function id(i,e){if(Vi("AsyncQueue",`${e}: ${i}`),ja(i))return new It(pt.UNAVAILABLE,`${e}: ${i}`);throw i}class sd{constructor(e){this.comparator=e?(n,a)=>e(n,a)||Qt.comparator(n.key,a.key):(n,a)=>Qt.comparator(n.key,a.key),this.keyedMap=su(),this.sortedSet=new Wr(this.comparator)}static emptySet(e){return new sd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,a)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof sd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const d=n.getNext().key,m=a.getNext().key;if(!d.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const a=new sd;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}class kg{constructor(){this.Eu=new Wr(Qt.comparator)}track(e){const n=e.doc.key,a=this.Eu.get(n);a?0!==e.type&&3===a.type?this.Eu=this.Eu.insert(n,e):3===e.type&&1!==a.type?this.Eu=this.Eu.insert(n,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Eu=this.Eu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Eu=this.Eu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Eu=this.Eu.remove(n):1===e.type&&2===a.type?this.Eu=this.Eu.insert(n,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Eu=this.Eu.insert(n,{type:2,doc:e.doc}):tn():this.Eu=this.Eu.insert(n,e)}Au(){const e=[];return this.Eu.inorderTraversal((n,a)=>{e.push(a)}),e}}class od{constructor(e,n,a,d,m,E,x,H){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=d,this.mutatedKeys=m,this.fromCache=E,this.syncStateChanged=x,this.excludesMetadataChanges=H}static fromInitialDocuments(e,n,a,d){const m=[];return n.forEach(E=>{m.push({type:0,doc:E})}),new od(e,n,sd.emptySet(n),m,a,d,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let d=0;d<n.length;d++)if(n[d].type!==a[d].type||!n[d].doc.isEqual(a[d].doc))return!1;return!0}}class Pl{constructor(){this.Ru=void 0,this.listeners=[]}}class gp{constructor(){this.queries=new or(e=>Cl(e),Eu),this.onlineState="Unknown",this.bu=new Set}}function Fg(i,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,p.Z)(function*(i,e){const n=Kt(i),a=e.query;let d=!1,m=n.queries.get(a);if(m||(d=!0,m=new Pl),d)try{m.Ru=yield n.onListen(a)}catch(E){const x=id(E,`Initialization of query '${kc(e.query)}' failed`);return void e.onError(x)}n.queries.set(a,m),m.listeners.push(e),e.Pu(n.onlineState),m.Ru&&e.Vu(m.Ru)&&vc(n)}),Lg.apply(this,arguments)}function i_(i,e){return $h.apply(this,arguments)}function $h(){return $h=(0,p.Z)(function*(i,e){const n=Kt(i),a=e.query;let d=!1;const m=n.queries.get(a);if(m){const E=m.listeners.indexOf(e);E>=0&&(m.listeners.splice(E,1),d=0===m.listeners.length)}if(d)return n.queries.delete(a),n.onUnlisten(a)}),$h.apply(this,arguments)}function s_(i,e){const n=Kt(i);let a=!1;for(const d of e){const E=n.queries.get(d.query);if(E){for(const x of E.listeners)x.Vu(d)&&(a=!0);E.Ru=d}}a&&vc(n)}function Ug(i,e,n){const a=Kt(i),d=a.queries.get(e);if(d)for(const m of d.listeners)m.onError(n);a.queries.delete(e)}function vc(i){i.bu.forEach(e=>{e.next()})}class Vg{constructor(e,n,a){this.query=e,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=a||{}}Vu(e){if(!this.options.includeMetadataChanges){const a=[];for(const d of e.docChanges)3!==d.type&&a.push(d);e=new od(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),n=!0):this.xu(e,this.onlineState)&&(this.Nu(e),n=!0),this.Du=e,n}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),n=!0),n}xu(e,n){return!e.fromCache||!(this.options.ku&&"Offline"!==n||e.docs.isEmpty()&&"Offline"!==n)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=od.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class Bg{constructor(e,n){this.payload=e,this.byteLength=n}Mu(){return"metadata"in this.payload}}class jg{constructor(e){this.M=e}wi(e){return Ri(this.M,e)}mi(e){return e.metadata.exists?nc(this.M,e.document,!1):Xn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return Xs(e)}}class o_{constructor(e,n,a){this.Ou=e,this.localStore=n,this.M=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$g(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const a=qt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,a=new jg(this.M);for(const d of e)if(d.metadata.queries){const m=a.wi(d.metadata.name);for(const E of d.metadata.queries){const x=(n.get(E)||ei()).add(m);n.set(E,x)}}return n}complete(){var e=this;return(0,p.Z)(function*(){const n=yield function np(i,e,n,a){return rp.apply(this,arguments)}(e.localStore,new jg(e.M),e.documents,e.Ou.id),a=e.$u(e.documents);for(const d of e.queries)yield pg(e.localStore,d,a.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:n}})()}}function $g(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class a_{constructor(e){this.key=e}}class mp{constructor(e){this.key=e}}class u_{constructor(e,n){this.query=e,this.Uu=n,this.qu=null,this.current=!1,this.Ku=ei(),this.mutatedKeys=ei(),this.Gu=Qu(e),this.Qu=new sd(this.Gu)}get ju(){return this.Uu}Wu(e,n){const a=n?n.zu:new kg,d=n?n.Qu:this.Qu;let m=n?n.mutatedKeys:this.mutatedKeys,E=d,x=!1;const H="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,Z="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((Ie,Be)=>{const mt=d.get(Ie),Nt=Id(this.query,Be)?Be:null,Bt=!!mt&&this.mutatedKeys.has(mt.key),mn=!!Nt&&(Nt.hasLocalMutations||this.mutatedKeys.has(Nt.key)&&Nt.hasCommittedMutations);let cr=!1;mt&&Nt?mt.data.isEqual(Nt.data)?Bt!==mn&&(a.track({type:3,doc:Nt}),cr=!0):this.Hu(mt,Nt)||(a.track({type:2,doc:Nt}),cr=!0,(H&&this.Gu(Nt,H)>0||Z&&this.Gu(Nt,Z)<0)&&(x=!0)):!mt&&Nt?(a.track({type:0,doc:Nt}),cr=!0):mt&&!Nt&&(a.track({type:1,doc:mt}),cr=!0,(H||Z)&&(x=!0)),cr&&(Nt?(E=E.add(Nt),m=mn?m.add(Ie):m.delete(Ie)):(E=E.delete(Ie),m=m.delete(Ie)))}),null!==this.query.limit)for(;E.size>this.query.limit;){const Ie="F"===this.query.limitType?E.last():E.first();E=E.delete(Ie.key),m=m.delete(Ie.key),a.track({type:1,doc:Ie})}return{Qu:E,zu:a,ii:x,mutatedKeys:m}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a){const d=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Au();m.sort((Z,Ie)=>function(Be,mt){const Nt=Bt=>{switch(Bt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tn()}};return Nt(Be)-Nt(mt)}(Z.type,Ie.type)||this.Gu(Z.doc,Ie.doc)),this.Ju(a);const E=n?this.Yu():[],x=0===this.Ku.size&&this.current?1:0,H=x!==this.qu;return this.qu=x,0!==m.length||H?{snapshot:new od(this.query,e.Qu,d,m,e.mutatedKeys,0===x,H,!1),Xu:E}:{Xu:E}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new kg,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.Uu=this.Uu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Uu=this.Uu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=ei(),this.Qu.forEach(a=>{this.Zu(a.key)&&(this.Ku=this.Ku.add(a.key))});const n=[];return e.forEach(a=>{this.Ku.has(a)||n.push(new mp(a))}),this.Ku.forEach(a=>{e.has(a)||n.push(new a_(a))}),n}ta(e){this.Uu=e._i,this.Ku=ei();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ea(){return od.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class cy{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class l_{constructor(e){this.key=e,this.na=!1}}class Xd{constructor(e,n,a,d,m,E){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=d,this.currentUser=m,this.maxConcurrentLimboResolutions=E,this.sa={},this.ia=new or(x=>Cl(x),Eu),this.ra=new Map,this.oa=new Set,this.ua=new Wr(Qt.comparator),this.aa=new Map,this.ca=new _g,this.ha={},this.la=new Map,this.fa=mc.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function c_(i,e){return Wg.apply(this,arguments)}function Wg(){return Wg=(0,p.Z)(function*(i,e){const n=no(i);let a,d;const m=n.ia.get(e);if(m)a=m.targetId,n.sharedClientState.addLocalQueryTarget(a),d=m.view.ea();else{const E=yield kh(n.localStore,ya(e));n.isPrimaryClient&&lp(n.remoteStore,E);const x=n.sharedClientState.addLocalQueryTarget(E.targetId);a=E.targetId,d=yield Hg(n,e,a,"current"===x)}return d}),Wg.apply(this,arguments)}function Hg(i,e,n,a){return Ec.apply(this,arguments)}function Ec(){return Ec=(0,p.Z)(function*(i,e,n,a){i._a=(Ie,Be,mt)=>{return(Nt=(0,p.Z)(function*(Bt,mn,cr,ss){let Ds=mn.view.Wu(cr);Ds.ii&&(Ds=yield ep(Bt.localStore,mn.query,!1).then(({documents:Ns})=>mn.view.Wu(Ns,Ds)));const Yi=ss&&ss.targetChanges.get(mn.targetId),Io=mn.view.applyChanges(Ds,Bt.isPrimaryClient,Yi);return vp(Bt,mn.targetId,Io.Xu),Io.snapshot}),function(Bt,mn,cr,ss){return Nt.apply(this,arguments)})(i,Ie,Be,mt);var Nt};const d=yield ep(i.localStore,e,!0),m=new u_(e,d._i),E=m.Wu(d.documents),x=va.createSynthesizedTargetChangeForCurrentChange(n,a&&"Offline"!==i.onlineState),H=m.applyChanges(E,i.isPrimaryClient,x);vp(i,n,H.Xu);const Z=new cy(e,n,m);return i.ia.set(e,Z),i.ra.has(n)?i.ra.get(n).push(e):i.ra.set(n,[e]),H.snapshot}),Ec.apply(this,arguments)}function dy(i,e){return Gg.apply(this,arguments)}function Gg(){return Gg=(0,p.Z)(function*(i,e){const n=Kt(i),a=n.ia.get(e),d=n.ra.get(a.targetId);if(d.length>1)return n.ra.set(a.targetId,d.filter(m=>!Eu(m,e))),void n.ia.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(a.targetId),n.sharedClientState.isActiveQueryTarget(a.targetId)||(yield _c(n.localStore,a.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(a.targetId),td(n.remoteStore,a.targetId),wc(n,a.targetId)}).catch(Rl))):(wc(n,a.targetId),yield _c(n.localStore,a.targetId,!0))}),Gg.apply(this,arguments)}function zg(){return zg=(0,p.Z)(function*(i,e,n){const a=cd(i);try{const d=yield function(m,E){const x=Kt(m),H=W.now(),Z=E.reduce((Be,mt)=>Be.add(mt.key),ei());let Ie;return x.persistence.runTransaction("Locally write mutations","readwrite",Be=>x.fi.Ks(Be,Z).next(mt=>{Ie=mt;const Nt=[];for(const Bt of E){const mn=Vc(Bt,Ie.get(Bt.key));null!=mn&&Nt.push(new Fa(Bt.key,mn,yu(mn.value.mapValue),rs.exists(!0)))}return x.Bs.addMutationBatch(Be,H,Nt,E)})).then(Be=>(Be.applyToLocalDocumentSet(Ie),{batchId:Be.batchId,changes:Ie}))}(a.localStore,e);a.sharedClientState.addPendingMutation(d.batchId),function(m,E,x){let H=m.ha[m.currentUser.toKey()];H||(H=new Wr(C)),H=H.insert(E,x),m.ha[m.currentUser.toKey()]=H}(a,d.batchId,n),yield fi(a,d.changes),yield rd(a.remoteStore)}catch(d){const m=id(d,"Failed to persist write");n.reject(m)}}),zg.apply(this,arguments)}function Nu(i,e){return Wh.apply(this,arguments)}function Wh(){return Wh=(0,p.Z)(function*(i,e){const n=Kt(i);try{const a=yield Y_(n.localStore,e);e.targetChanges.forEach((d,m)=>{const E=n.aa.get(m);E&&(Vn(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?E.na=!0:d.modifiedDocuments.size>0?Vn(E.na):d.removedDocuments.size>0&&(Vn(E.na),E.na=!1))}),yield fi(n,a,e)}catch(a){yield Rl(a)}}),Wh.apply(this,arguments)}function Kg(i,e,n){const a=Kt(i);if(a.isPrimaryClient&&0===n||!a.isPrimaryClient&&1===n){const d=[];a.ia.forEach((m,E)=>{const x=E.view.Pu(e);x.snapshot&&d.push(x.snapshot)}),function(m,E){const x=Kt(m);x.onlineState=E;let H=!1;x.queries.forEach((Z,Ie)=>{for(const Be of Ie.listeners)Be.Pu(E)&&(H=!0)}),H&&vc(x)}(a.eventManager,e),d.length&&a.sa.zo(d),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function d_(i,e,n){return _p.apply(this,arguments)}function _p(){return _p=(0,p.Z)(function*(i,e,n){const a=Kt(i);a.sharedClientState.updateQueryState(e,"rejected",n);const d=a.aa.get(e),m=d&&d.key;if(m){let E=new Wr(Qt.comparator);E=E.insert(m,Xn.newNoDocument(m,q.min()));const x=ei().add(m),H=new ou(q.min(),new Map,new P(C),E,x);yield Nu(a,H),a.ua=a.ua.remove(m),a.aa.delete(e),th(a)}else yield _c(a.localStore,e,!1).then(()=>wc(a,e,n)).catch(Rl)}),_p.apply(this,arguments)}function ku(i,e){return lu.apply(this,arguments)}function lu(){return lu=(0,p.Z)(function*(i,e){const n=Kt(i),a=e.batch.batchId;try{const d=yield Jf(n.localStore,e);ad(n,a,null),Nl(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),yield fi(n,d)}catch(d){yield Rl(d)}}),lu.apply(this,arguments)}function qg(i,e,n){return eh.apply(this,arguments)}function eh(){return eh=(0,p.Z)(function*(i,e,n){const a=Kt(i);try{const d=yield function(m,E){const x=Kt(m);return x.persistence.runTransaction("Reject batch","readwrite-primary",H=>{let Z;return x.Bs.lookupMutationBatch(H,E).next(Ie=>(Vn(null!==Ie),Z=Ie.keys(),x.Bs.removeMutationBatch(H,Ie))).next(()=>x.Bs.performConsistencyCheck(H)).next(()=>x.fi.Ks(H,Z))})}(a.localStore,e);ad(a,e,n),Nl(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),yield fi(a,d)}catch(d){yield Rl(d)}}),eh.apply(this,arguments)}function Gh(){return Gh=(0,p.Z)(function*(i,e){const n=Kt(i);ll(n.remoteStore)||jt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(m){const E=Kt(m);return E.persistence.runTransaction("Get highest unacknowledged batch id","readonly",x=>E.Bs.getHighestUnacknowledgedBatchId(x))}(n.localStore);if(-1===a)return void e.resolve();const d=n.la.get(a)||[];d.push(e),n.la.set(a,d)}catch(a){const d=id(a,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),Gh.apply(this,arguments)}function Nl(i,e){(i.la.get(e)||[]).forEach(n=>{n.resolve()}),i.la.delete(e)}function ad(i,e,n){const a=Kt(i);let d=a.ha[a.currentUser.toKey()];if(d){const m=d.get(e);m&&(n?m.reject(n):m.resolve(),d=d.remove(e)),a.ha[a.currentUser.toKey()]=d}}function wc(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const a of i.ra.get(e))i.ia.delete(a),n&&i.sa.wa(a,n);i.ra.delete(e),i.isPrimaryClient&&i.ca.vi(e).forEach(a=>{i.ca.containsKey(a)||yp(i,a)})}function yp(i,e){i.oa.delete(e.path.canonicalString());const n=i.ua.get(e);null!==n&&(td(i.remoteStore,n),i.ua=i.ua.remove(e),i.aa.delete(n),th(i))}function vp(i,e,n){for(const a of n)a instanceof a_?(i.ca.addReference(a.key,e),fy(i,a)):a instanceof mp?(jt("SyncEngine","Document no longer in limbo: "+a.key),i.ca.removeReference(a.key,e),i.ca.containsKey(a.key)||yp(i,a.key)):tn()}function fy(i,e){const n=e.key,a=n.path.canonicalString();i.ua.get(n)||i.oa.has(a)||(jt("SyncEngine","New document in limbo: "+n),i.oa.add(a),th(i))}function th(i){for(;i.oa.size>0&&i.ua.size<i.maxConcurrentLimboResolutions;){const e=i.oa.values().next().value;i.oa.delete(e);const n=new Qt(qt.fromString(e)),a=i.fa.next();i.aa.set(a,new l_(n)),i.ua=i.ua.insert(n,a),lp(i.remoteStore,new Mu(ya(eu(n.path)),a,2,gi.A))}}function fi(i,e,n){return ud.apply(this,arguments)}function ud(){return ud=(0,p.Z)(function*(i,e,n){const a=Kt(i),d=[],m=[],E=[];var x;a.ia.isEmpty()||(a.ia.forEach((x,H)=>{E.push(a._a(H,e,n).then(Z=>{if(Z){a.isPrimaryClient&&a.sharedClientState.updateQueryState(H.targetId,Z.fromCache?"not-current":"current"),d.push(Z);const Ie=hg.Ys(H.targetId,Z);m.push(Ie)}}))}),yield Promise.all(E),a.sa.zo(d),yield(x=(0,p.Z)(function*(H,Z){const Ie=Kt(H);try{yield Ie.persistence.runTransaction("notifyLocalViewChanges","readwrite",Be=>Ct.forEach(Z,mt=>Ct.forEach(mt.Hs,Nt=>Ie.persistence.referenceDelegate.addReference(Be,mt.targetId,Nt)).next(()=>Ct.forEach(mt.Js,Nt=>Ie.persistence.referenceDelegate.removeReference(Be,mt.targetId,Nt)))))}catch(Be){if(!ja(Be))throw Be;jt("LocalStore","Failed to update sequence numbers: "+Be)}for(const Be of Z){const mt=Be.targetId;if(!Be.fromCache){const Nt=Ie.ui.get(mt),mn=Nt.withLastLimboFreeSnapshotVersion(Nt.snapshotVersion);Ie.ui=Ie.ui.insert(mt,mn)}}}),function(H,Z){return x.apply(this,arguments)})(a.localStore,m))}),ud.apply(this,arguments)}function zh(i,e){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,p.Z)(function*(i,e){const n=Kt(i);if(!n.currentUser.isEqual(e)){jt("SyncEngine","User change. New user:",e.toKey());const a=yield Yf(n.localStore,e);n.currentUser=e,(d=n).la.forEach(E=>{E.forEach(x=>{x.reject(new It(pt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.la.clear(),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield fi(n,a.di)}var d}),Zg.apply(this,arguments)}function cu(i,e){const n=Kt(i),a=n.aa.get(e);if(a&&a.na)return ei().add(a.key);{let d=ei();const m=n.ra.get(e);if(!m)return d;for(const E of m){const x=n.ia.get(E);d=d.unionWith(x.view.ju)}return d}}function py(i,e){return Yg.apply(this,arguments)}function Yg(){return Yg=(0,p.Z)(function*(i,e){const n=Kt(i),a=yield ep(n.localStore,e.query,!0),d=e.view.ta(a);return n.isPrimaryClient&&vp(n,e.targetId,d.Xu),d}),Yg.apply(this,arguments)}function Qg(i,e){return Kh.apply(this,arguments)}function Kh(){return Kh=(0,p.Z)(function*(i,e){const n=Kt(i);return tp(n.localStore,e).then(a=>fi(n,a))}),Kh.apply(this,arguments)}function Ep(i,e,n,a){return wp.apply(this,arguments)}function wp(){return wp=(0,p.Z)(function*(i,e,n,a){const d=Kt(i),m=yield function(E,x){const H=Kt(E),Z=Kt(H.Bs);return H.persistence.runTransaction("Lookup mutation documents","readonly",Ie=>Z.fn(Ie,x).next(Be=>Be?H.fi.Ks(Ie,Be):Ct.resolve(null)))}(d.localStore,e);var x;null!==m?("pending"===n?yield rd(d.remoteStore):"acknowledged"===n||"rejected"===n?(ad(d,e,a||null),Nl(d,e),x=e,Kt(Kt(d.localStore).Bs)._n(x)):tn(),yield fi(d,m)):jt("SyncEngine","Cannot apply mutation batch with id: "+e)}),wp.apply(this,arguments)}function qh(){return qh=(0,p.Z)(function*(i,e){const n=Kt(i);if(no(n),cd(n),!0===e&&!0!==n.da){const a=n.sharedClientState.getAllActiveQueryTargets(),d=yield nh(n,a.toArray());n.da=!0,yield r_(n.remoteStore,!0);for(const m of d)lp(n.remoteStore,m)}else if(!1===e&&!1!==n.da){const a=[];let d=Promise.resolve();n.ra.forEach((m,E)=>{n.sharedClientState.isLocalQueryTarget(E)?a.push(E):d=d.then(()=>(wc(n,E),_c(n.localStore,E,!0))),td(n.remoteStore,E)}),yield d,yield nh(n,a),function(m){const E=Kt(m);E.aa.forEach((x,H)=>{td(E.remoteStore,H)}),E.ca.Si(),E.aa=new Map,E.ua=new Wr(Qt.comparator)}(n),n.da=!1,yield r_(n.remoteStore,!1)}}),qh.apply(this,arguments)}function nh(i,e,n){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,p.Z)(function*(i,e,n){const a=Kt(i),d=[],m=[];for(const E of e){let x;const H=a.ra.get(E);if(H&&0!==H.length){x=yield kh(a.localStore,ya(H[0]));for(const Z of H){const Ie=a.ia.get(Z),Be=yield py(a,Ie);Be.snapshot&&m.push(Be.snapshot)}}else{const Z=yield Q_(a.localStore,E);x=yield kh(a.localStore,Z),yield Hg(a,Zh(Z),E,!1)}d.push(x)}return a.sa.zo(m),d}),Ip.apply(this,arguments)}function Zh(i){return wl(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function ld(i){const e=Kt(i);return Kt(Kt(e.localStore).persistence).Fs()}function Jg(i,e,n,a){return Yh.apply(this,arguments)}function Yh(){return Yh=(0,p.Z)(function*(i,e,n,a){const d=Kt(i);if(d.da)return void jt("SyncEngine","Ignoring unexpected query state notification.");const m=d.ra.get(e);if(m&&m.length>0)switch(n){case"current":case"not-current":{const E=yield tp(d.localStore,Cd(m[0])),x=ou.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);yield fi(d,E,x);break}case"rejected":yield _c(d.localStore,e,!0),wc(d,e,a);break;default:tn()}}),Yh.apply(this,arguments)}function rh(i,e,n){return Ic.apply(this,arguments)}function Ic(){return Ic=(0,p.Z)(function*(i,e,n){const a=no(i);if(a.da){for(const d of e){if(a.ra.has(d)){jt("SyncEngine","Adding an already active target "+d);continue}const m=yield Q_(a.localStore,d),E=yield kh(a.localStore,m);yield Hg(a,Zh(m),E.targetId,!1),lp(a.remoteStore,E)}for(const d of n)a.ra.has(d)&&(yield _c(a.localStore,d,!1).then(()=>{td(a.remoteStore,d),wc(a,d)}).catch(Rl))}}),Ic.apply(this,arguments)}function no(i){const e=Kt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nu.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cu.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=d_.bind(null,e),e.sa.zo=s_.bind(null,e.eventManager),e.sa.wa=Ug.bind(null,e.eventManager),e}function cd(i){const e=Kt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ku.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qg.bind(null,e),e}class Xg{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,p.Z)(function*(){n.M=Yd(e.databaseInfo.databaseId),n.sharedClientState=n.ga(e),n.persistence=n.ya(e),yield n.persistence.start(),n.gcScheduler=n.pa(e),n.localStore=n.Ia(e)})()}pa(e){return null}Ia(e){return Zf(this.persistence,new fg,e.initialUser,this.M)}ya(e){return new Km(vg.Yi,this.M)}ga(e){return new op}terminate(){var e=this;return(0,p.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hd extends Xg{constructor(e,n,a){super(),this.Ta=e,this.cacheSizeBytes=n,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,a=this;return(0,p.Z)(function*(){yield n().call(a,e),yield a.Ta.initialize(a,e),yield cd(a.Ta.syncEngine),yield rd(a.Ta.remoteStore),yield a.persistence.Ts(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(a.localStore),Promise.resolve()))})()}Ia(e){return Zf(this.persistence,new fg,e.initialUser,this.M)}pa(e){return new Wm(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const n=qf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?Ki.withCacheSize(this.cacheSizeBytes):Ki.DEFAULT;return new Kf(this.synchronizeTabs,n,e.clientId,a,e.asyncQueue,ny(),Lh(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new op}}class h_ extends hd{constructor(e,n){super(e,n,!1),this.Ta=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,a=this;return(0,p.Z)(function*(){yield n().call(a,e);const d=a.Ta.syncEngine;a.sharedClientState instanceof sp&&(a.sharedClientState.syncEngine={$r:Ep.bind(null,d),Br:Jg.bind(null,d),Lr:rh.bind(null,d),Fs:ld.bind(null,d),Fr:Qg.bind(null,d)},yield a.sharedClientState.start()),yield a.persistence.Ts(function(){var m=(0,p.Z)(function*(E){yield function gy(i,e){return qh.apply(this,arguments)}(a.Ta.syncEngine,E),a.gcScheduler&&(E&&!a.gcScheduler.started?a.gcScheduler.start(a.localStore):E||a.gcScheduler.stop())});return function(E){return m.apply(this,arguments)}}())})()}ga(e){const n=ny();if(!sp.vt(n))throw new It(pt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=qf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sp(n,e.asyncQueue,a,e.clientId,e.initialUser)}}class Cp{initialize(e,n){var a=this;return(0,p.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(n),a.remoteStore=a.createRemoteStore(n),a.eventManager=a.createEventManager(n),a.syncEngine=a.createSyncEngine(n,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=d=>Kg(a.syncEngine,d,1),a.remoteStore.remoteSyncer.handleCredentialChange=zh.bind(null,a.syncEngine),yield r_(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new gp}createDatastore(e){const n=Yd(e.databaseInfo.databaseId),a=new qm(e.databaseInfo);return new Wa(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return n=this.localStore,a=this.datastore,d=e.asyncQueue,m=x=>Kg(this.syncEngine,x,0),E=Ig.vt()?new Ig:new wg,new oy(n,a,d,m,E);var n,a,d,m,E}createSyncEngine(e,n){return function(a,d,m,E,x,H,Z){const Ie=new Xd(a,d,m,E,x,H);return Z&&(Ie.da=!0),Ie}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,p.Z)(function*(n){const a=Kt(n);jt("RemoteStore","RemoteStore shutting down."),a.wu.add(5),yield ed(a),a.gu.shutdown(),a.yu.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function Cc(i,e=10240){let n=0;return{read:()=>(0,p.Z)(function*(){if(n<i.byteLength){const a={value:i.slice(n,n+e),done:!1};return n+=e,a}return{done:!0}})(),cancel:()=>(0,p.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class oa{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class Dc{constructor(e,n){this.Ra=e,this.M=n,this.metadata=new _i,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(a=>{a&&a.Mu()?this.metadata.resolve(a.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==a?void 0:a.payload)}`))},a=>this.metadata.reject(a))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,p.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,p.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,p.Z)(function*(){const n=yield e.Va();if(null===n)return null;const a=e.ba.decode(n),d=Number(a);isNaN(d)&&e.va(`length string (${a}) is not valid number`);const m=yield e.Sa(d);return new Bg(JSON.parse(m),n.length+d)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,p.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const n=e.Da();n<0&&e.va("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),a})()}Sa(e){var n=this;return(0,p.Z)(function*(){for(;n.buffer.length<e;)(yield n.Ca())&&n.va("Reached the end of bundle when more is expected.");const a=n.ba.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),a})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,p.Z)(function*(){const n=yield e.Ra.read();if(!n.done){const a=new Uint8Array(e.buffer.length+n.value.length);a.set(e.buffer),a.set(n.value,e.buffer.length),e.buffer=a}return n.done})()}}class ro{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,p.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new It(pt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(d=(0,p.Z)(function*(m,E){const x=Kt(m),H=Tl(x.M)+"/documents",Z={documents:E.map(Nt=>au(x.M,Nt))},Ie=yield x._o("BatchGetDocuments",H,Z),Be=new Map;Ie.forEach(Nt=>{const Bt=function Qp(i,e){return"found"in e?function(n,a){Vn(!!a.found);const d=Ri(n,a.found.name),m=Xs(a.found.updateTime),E=new ns({mapValue:{fields:a.found.fields}});return Xn.newFoundDocument(d,m,E)}(i,e):"missing"in e?function(n,a){Vn(!!a.missing),Vn(!!a.readTime);const d=Ri(n,a.missing),m=Xs(a.readTime);return Xn.newNoDocument(d,m)}(i,e):tn()}(x.M,Nt);Be.set(Bt.key.toString(),Bt)});const mt=[];return E.forEach(Nt=>{const Bt=Be.get(Nt.toString());Vn(!!Bt),mt.push(Bt)}),mt}),function(m,E){return d.apply(this,arguments)})(n.datastore,e);var d;return a.forEach(d=>n.recordVersion(d)),a})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new A(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,p.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var a;e.mutations.forEach(a=>{n.delete(a.key.toString())}),n.forEach((a,d)=>{const m=Qt.fromPath(d);e.mutations.push(new Y(m,e.precondition(m)))}),yield(a=(0,p.Z)(function*(d,m){const E=Kt(d),x=Tl(E.M)+"/documents",H={writes:m.map(Z=>bu(E.M,Z))};yield E.co("Commit",x,H)}),function(d,m){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw tn();n=q.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!n.isEqual(a))throw new It(pt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?rs.updateTime(n):rs.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(q.min()))throw new It(pt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rs.updateTime(n)}return rs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class zo{constructor(e,n,a,d,m){this.asyncQueue=e,this.datastore=n,this.options=a,this.updateFunction=d,this.deferred=m,this.xa=a.maxAttempts,this.No=new Cg(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,p.Z)(function*(){const n=new ro(e.datastore),a=e.ka(n);a&&a.then(d=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(d)}).catch(m=>{e.Ma(m)}))}).catch(d=>{e.Ma(d)})}))}ka(e){try{const n=this.updateFunction(e);return!Za(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||!cn(n)}return!1}}class ih{constructor(e,n,a,d){var m=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this.databaseInfo=d,this.user=li.UNAUTHENTICATED,this.clientId=R.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var E=(0,p.Z)(function*(x){jt("FirestoreClient","Received user=",x.uid),yield m.authCredentialListener(x),m.user=x});return function(x){return E.apply(this,arguments)}}()),this.appCheckCredentials.start(a,E=>(jt("FirestoreClient","Received new app check token=",E),this.appCheckCredentialListener(E,this.user)))}getConfiguration(){var e=this;return(0,p.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new It(pt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(a){const d=id(a,"Failed to shutdown persistence");n.reject(d)}})),n.promise}}function Ps(i,e){return sh.apply(this,arguments)}function sh(){return sh=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),jt("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let a=n.initialUser;i.setCredentialChangeListener(function(){var d=(0,p.Z)(function*(m){a.isEqual(m)||(yield Yf(e.localStore,m),a=m)});return function(m){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),sh.apply(this,arguments)}function Fu(i,e){return kl.apply(this,arguments)}function kl(){return kl=(0,p.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield Fl(i);jt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield i.getConfiguration();yield e.initialize(n,a),i.setCredentialChangeListener(d=>Ng(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,m)=>Ng(e.remoteStore,m)),i.onlineComponents=e}),kl.apply(this,arguments)}function Fl(i){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,p.Z)(function*(i){return i.offlineComponents||(jt("FirestoreClient","Using default OfflineComponentProvider"),yield Ps(i,new Xg)),i.offlineComponents}),Ll.apply(this,arguments)}function cl(i){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,p.Z)(function*(i){return i.onlineComponents||(jt("FirestoreClient","Using default OnlineComponentProvider"),yield Fu(i,new Cp)),i.onlineComponents}),Ul.apply(this,arguments)}function bc(i){return Fl(i).then(e=>e.persistence)}function Vl(i){return Fl(i).then(e=>e.localStore)}function Tc(i){return cl(i).then(e=>e.remoteStore)}function Qh(i){return cl(i).then(e=>e.syncEngine)}function js(i){return fd.apply(this,arguments)}function fd(){return fd=(0,p.Z)(function*(i){const e=yield cl(i),n=e.eventManager;return n.onListen=c_.bind(null,e.syncEngine),n.onUnlisten=dy.bind(null,e.syncEngine),n}),fd.apply(this,arguments)}function Xh(i,e,n={}){const a=new _i;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(d,m,E,x,H){const Z=new oa({next:Be=>{m.enqueueAndForget(()=>i_(d,Ie));const mt=Be.docs.has(E);!mt&&Be.fromCache?H.reject(new It(pt.UNAVAILABLE,"Failed to get document because the client is offline.")):mt&&Be.fromCache&&x&&"server"===x.source?H.reject(new It(pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):H.resolve(Be)},error:Be=>H.reject(Be)}),Ie=new Vg(eu(E.path),Z,{includeMetadataChanges:!0,ku:!0});return Fg(d,Ie)}(yield js(i),i.asyncQueue,e,n,a)})),a.promise}function Tp(i,e,n={}){const a=new _i;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function(d,m,E,x,H){const Z=new oa({next:Be=>{m.enqueueAndForget(()=>i_(d,Ie)),Be.fromCache&&"server"===x.source?H.reject(new It(pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):H.resolve(Be)},error:Be=>H.reject(Be)}),Ie=new Vg(E,Z,{includeMetadataChanges:!0,ku:!0});return Fg(d,Ie)}(yield js(i),i.asyncQueue,e,n,a)})),a.promise}const Ap=new Map;function Sp(i,e,n){if(!n)throw new It(pt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function Rp(i,e,n,a){if(!0===e&&!0===a)throw new It(pt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function Mp(i){if(!Qt.isDocumentKey(i))throw new It(pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ko(i){if(Qt.isDocumentKey(i))throw new It(pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Bl(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":tn()}function Yr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new It(pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bl(i);throw new It(pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function pd(i,e){if(e<=0)throw new It(pt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class p_{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new It(pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new It(pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Rp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oh{constructor(e,n,a){this._authCredentials=n,this._appCheckCredentials=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new p_({}),this._settingsFrozen=!1,e instanceof xo?this._databaseId=e:(this._app=e,this._databaseId=function(d){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new It(pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xo(d.options.projectId)}(e))}get app(){if(!this._app)throw new It(pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new It(pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new p_(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new qa;switch(n.type){case"gapi":const a=n.client;return Vn(!("object"!=typeof a||null===a||!a.auth||!a.auth.getAuthHeaderValueForFirstParty)),new fa(a,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new It(pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=Ap.get(e);n&&(jt("ComponentProvider","Removing Datastore"),Ap.delete(e),n.terminate())}(this),Promise.resolve()}}function tf(i,e,n,a={}){var d;const m=(i=Yr(i,oh))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&Bi("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${n}`,ssl:!1})),a.mockUserToken){let E,x;if("string"==typeof a.mockUserToken)E=a.mockUserToken,x=li.MOCK_USER;else{E=(0,de.Sg)(a.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const H=a.mockUserToken.sub||a.mockUserToken.user_id;if(!H)throw new It(pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");x=new li(H)}i._authCredentials=new Ks(new On(E,x))}}class Zi{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zi(this.firestore,e,this._key)}}class io{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new io(this.firestore,e,this._query)}}class Uu extends io{constructor(e,n,a){super(e,n,eu(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zi(this.firestore,null,new Qt(e))}withConverter(e){return new Uu(this.firestore,e,this._path)}}function g_(i,e,...n){if(i=(0,de.m9)(i),Sp("collection","path",e),i instanceof oh){const a=qt.fromString(e,...n);return ko(a),new Uu(i,null,a)}{if(!(i instanceof Zi||i instanceof Uu))throw new It(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(qt.fromString(e,...n));return ko(a),new Uu(i.firestore,null,a)}}function my(i,e){if(i=Yr(i,oh),Sp("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new It(pt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new io(i,null,(n=e,new ra(qt.emptyPath(),n)));var n}function nm(i,e,...n){if(i=(0,de.m9)(i),1===arguments.length&&(e=R.R()),Sp("doc","path",e),i instanceof oh){const a=qt.fromString(e,...n);return Mp(a),new Zi(i,null,new Qt(a))}{if(!(i instanceof Zi||i instanceof Uu))throw new It(pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=i._path.child(qt.fromString(e,...n));return Mp(a),new Zi(i.firestore,i instanceof Uu?i.converter:null,new Qt(a))}}function du(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),(i instanceof Zi||i instanceof Uu)&&(e instanceof Zi||e instanceof Uu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Vu(i,e){return i=(0,de.m9)(i),e=(0,de.m9)(e),i instanceof io&&e instanceof io&&i.firestore===e.firestore&&Eu(i._query,e._query)&&i.converter===e.converter}class nf{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Cg(this,"async_queue_retry"),this.Qa=()=>{const n=Lh();n&&jt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.No.Po()};const e=Lh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const n=Lh();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const n=new _i;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,p.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(n){if(!ja(n))throw n;jt("AsyncQueue","Operation failed with retryable error: "+n)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const n=this.Fa.then(()=>(this.qa=!0,e().catch(a=>{throw this.Ua=a,this.qa=!1,Vi("INTERNAL UNHANDLED ERROR: ",function(m){let E=m.message||"";return m.stack&&(E=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),E}(a)),a}).then(a=>(this.qa=!1,a))));return this.Fa=n,n}enqueueAfterDelay(e,n,a){this.ja(),this.Ga.indexOf(e)>-1&&(n=0);const d=pp.createAndSchedule(this,e,n,a,m=>this.Ha(m));return this.La.push(d),d}ja(){this.Ua&&tn()}verifyOperationInProgress(){}Ja(){var e=this;return(0,p.Z)(function*(){let n;do{n=e.Fa,yield n}while(n!==e.Fa)})()}Ya(e){for(const n of this.La)if(n.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((n,a)=>n.targetTimeMs-a.targetTimeMs);for(const n of this.La)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const n=this.La.indexOf(e);this.La.splice(n,1)}}function jl(i){return function(e,n){if("object"!=typeof e||null===e)return!1;const a=e;for(const d of["next","error","complete"])if(d in a&&"function"==typeof a[d])return!0;return!1}(i)}class m_{constructor(){this._progressObserver={},this._taskCompletionResolver=new _i,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,a){this._progressObserver={next:e,error:n,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Ac=-1;class vi extends oh{constructor(e,n,a){super(e,n,a),this.type="firestore",this._queue=new nf,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||xp(this),this._firestoreClient.terminate()}}function rf(i=(0,M.getApp)()){return(0,M._getProvider)(i,"firestore").getImmediate()}function Cs(i){return i._firestoreClient||xp(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function xp(i){var e;const n=i._freezeSettings(),a=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new pa(i._databaseId,m,i._persistenceKey,(x=n).host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,x.useFetchStreams));var m,x;i._firestoreClient=new ih(i._authCredentials,i._appCheckCredentials,i._queue,a)}function __(i,e){E_(i=Yr(i,vi));const n=Cs(i),a=i._freezeSettings(),d=new Cp;return im(n,d,new hd(d,a.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function y_(i){E_(i=Yr(i,vi));const e=Cs(i),n=i._freezeSettings(),a=new Cp;return im(e,a,new h_(a,n.cacheSizeBytes))}function im(i,e,n){const a=new _i;return i.asyncQueue.enqueue((0,p.Z)(function*(){try{yield Ps(i,n),yield Fu(i,e),a.resolve()}catch(d){if(!("FirebaseError"===(m=d).name?m.code===pt.FAILED_PRECONDITION||m.code===pt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw d;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+d),a.reject(d)}var m})).then(()=>a.promise)}function sm(i){if(i._initialized&&!i._terminated)throw new It(pt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _i;return i._queue.enqueueAndForgetEvenWhileRestricted((0,p.Z)(function*(){try{yield(n=(0,p.Z)(function*(a){if(!to.vt())return Promise.resolve();const d=a+"main";yield to.delete(d)}),function(a){return n.apply(this,arguments)})(qf(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function om(i){return function(e){const n=new _i;return e.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function Hh(i,e){return Gh.apply(this,arguments)}(yield Qh(e),n)})),n.promise}(Cs(i=Yr(i,vi)))}function ah(i){return function Jh(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield bc(i),n=yield Tc(i);return e.setNetworkEnabled(!0),function(a){const d=Kt(a);return d.wu.delete(0),up(d)}(n)}))}(Cs(i=Yr(i,vi)))}function Op(i){return function Dp(i){return i.asyncQueue.enqueue((0,p.Z)(function*(){const e=yield bc(i),n=yield Tc(i);return e.setNetworkEnabled(!1),(a=(0,p.Z)(function*(d){const m=Kt(d);m.wu.add(0),yield ed(m),m.yu.set("Offline")}),function(d){return a.apply(this,arguments)})(n);var a}))}(Cs(i=Yr(i,vi)))}function am(i,e){const n=Cs(i=Yr(i,vi)),a=new m_;return function Lu(i,e,n,a){const d=function(m,E){let x;return x="string"==typeof m?(new TextEncoder).encode(m):m,H=function(H,Z){if(H instanceof Uint8Array)return Cc(H,Z);if(H instanceof ArrayBuffer)return Cc(new Uint8Array(H),Z);if(H instanceof ReadableStream)return H.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(x),new Dc(H,E);var H}(n,Yd(e));i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){!function dd(i,e,n){const a=Kt(i);var d;(d=(0,p.Z)(function*(m,E,x){try{const H=yield E.getMetadata();if(yield function(mt,Nt){const Bt=Kt(mt),mn=Xs(Nt.createTime);return Bt.persistence.runTransaction("hasNewerBundle","readonly",cr=>Bt._s.getBundleMetadata(cr,Nt.id)).then(cr=>!!cr&&cr.createTime.compareTo(mn)>=0)}(m.localStore,H))return yield E.close(),x._completeWith({taskState:"Success",documentsLoaded:(mt=H).totalDocuments,bytesLoaded:mt.totalBytes,totalDocuments:mt.totalDocuments,totalBytes:mt.totalBytes}),Promise.resolve(new Set);x._updateProgress($g(H));const Z=new o_(H,m.localStore,E.M);let Ie=yield E.ma();for(;Ie;){const mt=yield Z.Fu(Ie);mt&&x._updateProgress(mt),Ie=yield E.ma()}const Be=yield Z.complete();return yield fi(m,Be.Lu,void 0),yield function(mt,Nt){const Bt=Kt(mt);return Bt.persistence.runTransaction("Save bundle","readwrite",mn=>Bt._s.saveBundleMetadata(mn,Nt))}(m.localStore,H),x._completeWith(Be.progress),Promise.resolve(Be.Bu)}catch(H){return Bi("SyncEngine",`Loading bundle failed with ${H}`),x._failWith(H),Promise.resolve(new Set)}var mt}),function(m,E,x){return d.apply(this,arguments)})(a,e,n).then(d=>{a.sharedClientState.notifyBundleLoaded(d)})}(yield Qh(i),d,a)}))}(n,i._databaseId,e,a),a}function sf(i,e){return function ef(i,e){return i.asyncQueue.enqueue((0,p.Z)(function*(){return function(n,a){const d=Kt(n);return d.persistence.runTransaction("Get named query","readonly",m=>d._s.getNamedQuery(m,a))}(yield Vl(i),e)}))}(Cs(i=Yr(i,vi)),e).then(n=>n?new io(i,null,n.query):null)}function E_(i){if(i._initialized||i._terminated)throw new It(pt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Bu{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new It(pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dl(ii.fromBase64String(e))}catch(n){throw new It(pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dl(ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class hu{constructor(e){this._methodName=e}}class ju{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new It(pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new It(pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return C(this._lat,e._lat)||C(this._long,e._long)}}const af=/^__.*__$/;class Pp{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return null!==this.fieldMask?new Fa(e,this.data,this.fieldMask,n,this.fieldTransforms):new wu(e,this.data,n,this.fieldTransforms)}}class um{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return new Fa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ko(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tn()}}class Sc{constructor(e,n,a,d,m,E){this.settings=e,this.databaseId=n,this.M=a,this.ignoreUndefinedProperties=d,void 0===m&&this.tc(),this.fieldTransforms=m||[],this.fieldMask=E||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new Sc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var n;const a=null===(n=this.path)||void 0===n?void 0:n.child(e),d=this.nc({path:a,ic:!1});return d.rc(e),d}oc(e){var n;const a=null===(n=this.path)||void 0===n?void 0:n.child(e),d=this.nc({path:a,ic:!1});return d.tc(),d}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return pf(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(Ko(this.ec)&&af.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class Np{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.M=a||Yd(e)}lc(e,n,a,d=!1){return new Sc({ec:e,methodName:n,hc:a,path:Pn.emptyPath(),ic:!1,cc:d},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function gd(i){const e=i._freezeSettings(),n=Yd(i._databaseId);return new Np(i._databaseId,!!e.ignoreUndefinedProperties,n)}function uf(i,e,n,a,d,m={}){const E=i.lc(m.merge||m.mergeFields?2:0,e,n,d);lh("Data must be an object, but it was:",E,a);const x=ff(a,E);let H,Z;if(m.merge)H=new Ir(E.fieldMask),Z=E.fieldTransforms;else if(m.mergeFields){const Ie=[];for(const Be of m.mergeFields){const mt=Fp(e,Be,n);if(!E.contains(mt))throw new It(pt.INVALID_ARGUMENT,`Field '${mt}' is specified in your field mask but missing from your input data.`);Lp(Ie,mt)||Ie.push(mt)}H=new Ir(Ie),Z=E.fieldTransforms.filter(Be=>H.covers(Be.field))}else H=null,Z=E.fieldTransforms;return new Pp(new ns(x),H,Z)}class $l extends hu{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $l}}function $u(i,e,n){return new Sc({ec:3,hc:e.settings.hc,methodName:i._methodName,ic:n},e.databaseId,e.M,e.ignoreUndefinedProperties)}class lf extends hu{_toFieldTransform(e){return new ia(e.path,new Xu)}isEqual(e){return e instanceof lf}}class lm extends hu{constructor(e,n){super(e),this.fc=n}_toFieldTransform(e){const n=$u(this,e,!0),a=this.fc.map(m=>hl(m,n)),d=new nu(a);return new ia(e.path,d)}isEqual(e){return this===e}}class cf extends hu{constructor(e,n){super(e),this.fc=n}_toFieldTransform(e){const n=$u(this,e,!0),a=this.fc.map(m=>hl(m,n)),d=new el(a);return new ia(e.path,d)}isEqual(e){return this===e}}class cm extends hu{constructor(e,n){super(e),this.dc=n}_toFieldTransform(e){const n=new ru(e.M,_h(e.M,this.dc));return new ia(e.path,n)}isEqual(e){return this===e}}function df(i,e,n,a){const d=i.lc(1,e,n);lh("Data must be an object, but it was:",d,a);const m=[],E=ns.empty();Oe(a,(H,Z)=>{const Ie=ch(e,H,n);Z=(0,de.m9)(Z);const Be=d.oc(Ie);if(Z instanceof $l)m.push(Ie);else{const mt=hl(Z,Be);null!=mt&&(m.push(Ie),E.set(Ie,mt))}});const x=new Ir(m);return new um(E,x,d.fieldTransforms)}function uh(i,e,n,a,d,m){const E=i.lc(1,e,n),x=[Fp(e,a,n)],H=[d];if(m.length%2!=0)throw new It(pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let mt=0;mt<m.length;mt+=2)x.push(Fp(e,m[mt])),H.push(m[mt+1]);const Z=[],Ie=ns.empty();for(let mt=x.length-1;mt>=0;--mt)if(!Lp(Z,x[mt])){const Nt=x[mt];let Bt=H[mt];Bt=(0,de.m9)(Bt);const mn=E.oc(Nt);if(Bt instanceof $l)Z.push(Nt);else{const cr=hl(Bt,mn);null!=cr&&(Z.push(Nt),Ie.set(Nt,cr))}}const Be=new Ir(Z);return new um(Ie,Be,E.fieldTransforms)}function hf(i,e,n,a=!1){return hl(n,i.lc(a?4:3,e))}function hl(i,e){if(kp(i=(0,de.m9)(i)))return lh("Unsupported field value:",e,i),ff(i,e);if(i instanceof hu)return function(n,a){if(!Ko(a.ec))throw a.ac(`${n._methodName}() can only be used with update() and set()`);if(!a.path)throw a.ac(`${n._methodName}() is not currently supported inside arrays`);const d=n._toFieldTransform(a);d&&a.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(n,a){const d=[];let m=0;for(const E of n){let x=hl(E,a.uc(m));null==x&&(x={nullValue:"NULL_VALUE"}),d.push(x),m++}return{arrayValue:{values:d}}}(i,e)}return function(n,a){if(null===(n=(0,de.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return _h(a.M,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const d=W.fromDate(n);return{timestampValue:xd(a.M,d)}}if(n instanceof W){const d=new W(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:xd(a.M,d)}}if(n instanceof ju)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof dl)return{bytesValue:Tf(a.M,n._byteString)};if(n instanceof Zi){const d=a.databaseId,m=n.firestore._databaseId;if(!m.isEqual(d))throw a.ac(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Af(n.firestore._databaseId||a.databaseId,n._key.path)}}throw a.ac(`Unsupported field value: ${Bl(n)}`)}(i,e)}function ff(i,e){const n={};return Tt(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oe(i,(a,d)=>{const m=hl(d,e.sc(a));null!=m&&(n[a]=m)}),{mapValue:{fields:n}}}function kp(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof W||i instanceof ju||i instanceof dl||i instanceof Zi||i instanceof hu)}function lh(i,e,n){if(!kp(n)||"object"!=typeof(a=n)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=Bl(n);throw e.ac("an object"===a?i+" a custom object":i+" "+a)}var a}function Fp(i,e,n){if((e=(0,de.m9)(e))instanceof Bu)return e._internalPath;if("string"==typeof e)return ch(i,e);throw pf("Field path arguments must be of type string or ",i,!1,void 0,n)}const w_=new RegExp("[~\\*/\\[\\]]");function ch(i,e,n){if(e.search(w_)>=0)throw pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Bu(...e.split("."))._internalPath}catch(a){throw pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function pf(i,e,n,a,d){const m=a&&!a.isEmpty(),E=void 0!==d;let x=`Function ${e}() called with invalid data`;n&&(x+=" (via `toFirestore()`)"),x+=". ";let H="";return(m||E)&&(H+=" (found",m&&(H+=` in field ${a}`),E&&(H+=` in document ${d}`),H+=")"),new It(pt.INVALID_ARGUMENT,x+i+H)}function Lp(i,e){return i.some(n=>n.isEqual(e))}class Wl{constructor(e,n,a,d,m){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=d,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Zi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new dm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(md("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class dm extends Wl{data(){return super.data()}}function md(i,e){return"string"==typeof e?ch(i,e):e instanceof Bu?e._internalPath:e._delegate._internalPath}class Hl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wu extends Wl{constructor(e,n,a,d,m,E){super(e,n,a,d,E),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Rc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(md("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}}class Rc extends Wu{data(e={}){return super.data(e)}}class fl{constructor(e,n,a,d){this._firestore=e,this._userDataWriter=n,this._snapshot=d,this.metadata=new Hl(d.hasPendingWrites,d.fromCache),this.query=a}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(a=>{e.call(n,new Rc(this._firestore,this._userDataWriter,a.key,a,new Hl(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new It(pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(a,d){if(a._snapshot.oldDocs.isEmpty()){let m=0;return a._snapshot.docChanges.map(E=>({type:"added",doc:new Rc(a._firestore,a._userDataWriter,E.doc.key,E.doc,new Hl(a._snapshot.mutatedKeys.has(E.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:m++}))}{let m=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(E=>d||3!==E.type).map(E=>{const x=new Rc(a._firestore,a._userDataWriter,E.doc.key,E.doc,new Hl(a._snapshot.mutatedKeys.has(E.doc.key),a._snapshot.fromCache),a.query.converter);let H=-1,Z=-1;return 0!==E.type&&(H=m.indexOf(E.doc.key),m=m.delete(E.doc.key)),1!==E.type&&(m=m.add(E.doc),Z=m.indexOf(E.doc.key)),{type:Up(E.type),doc:x,oldIndex:H,newIndex:Z}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Up(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tn()}}function I_(i,e){return i instanceof Wu&&e instanceof Wu?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof fl&&e instanceof fl&&i._firestore===e._firestore&&Vu(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function _y(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new It(pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gf{}function C_(i,...e){for(const n of e)i=n._apply(i);return i}class hm extends gf{constructor(e,n,a){super(),this._c=e,this.wc=n,this.mc=a,this.type="where"}_apply(e){const n=gd(e.firestore),a=function(d,m,E,x,H,Z,Ie){let Be;if(H.isKeyField()){if("array-contains"===Z||"array-contains-any"===Z)throw new It(pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Z}' queries on documentId().`);if("in"===Z||"not-in"===Z){mf(Ie,Z);const Nt=[];for(const Bt of Ie)Nt.push(dh(x,d,Bt));Be={arrayValue:{values:Nt}}}else Be=dh(x,d,Ie)}else"in"!==Z&&"not-in"!==Z&&"array-contains-any"!==Z||mf(Ie,Z),Be=hf(E,"where",Ie,"in"===Z||"not-in"===Z);const mt=Yn.create(H,Z,Be);return function(Nt,Bt){if(Bt.S()){const cr=vu(Nt);if(null!==cr&&!cr.isEqual(Bt.field))throw new It(pt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${cr.toString()}' and '${Bt.field.toString()}'`);const ss=Ql(Nt);null!==ss&&_m(0,Bt.field,ss)}const mn=function(cr,ss){for(const Ds of cr.filters)if(ss.indexOf(Ds.op)>=0)return Ds.op;return null}(Nt,function(cr){switch(cr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Bt.op));if(null!==mn)throw new It(pt.INVALID_ARGUMENT,mn===Bt.op?`Invalid query. You cannot use more than one '${Bt.op.toString()}' filter.`:`Invalid query. You cannot use '${Bt.op.toString()}' filters with '${mn.toString()}' filters.`)}(d,mt),mt}(e._query,0,n,e.firestore._databaseId,this._c,this.wc,this.mc);return new io(e.firestore,e.converter,function(d,m){const E=d.filters.concat([m]);return new ra(d.path,d.collectionGroup,d.explicitOrderBy.slice(),E,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,a))}}function D_(i,e,n){const a=e,d=md("where",i);return new hm(d,a,n)}class $s extends gf{constructor(e,n){super(),this._c=e,this.gc=n,this.type="orderBy"}_apply(e){const n=function(a,d,m){if(null!==a.startAt)throw new It(pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new It(pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const E=new Na(d,m);return function(x,H){if(null===Ql(x)){const Z=vu(x);null!==Z&&_m(0,Z,H.field)}}(a,E),E}(e._query,this._c,this.gc);return new io(e.firestore,e.converter,function(a,d){const m=a.explicitOrderBy.concat([d]);return new ra(a.path,a.collectionGroup,m,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,n))}}function fm(i,e="asc"){const n=e,a=md("orderBy",i);return new $s(a,n)}class pm extends gf{constructor(e,n,a){super(),this.type=e,this.yc=n,this.Ic=a}_apply(e){return new io(e.firestore,e.converter,Jl(e._query,this.yc,this.Ic))}}function b_(i){return pd("limit",i),new pm("limit",i,"F")}function Vp(i){return pd("limitToLast",i),new pm("limitToLast",i,"L")}class gm extends gf{constructor(e,n,a){super(),this.type=e,this.Tc=n,this.Ec=a}_apply(e){const n=Bp(e,this.type,this.Tc,this.Ec);return new io(e.firestore,e.converter,(d=n,new ra((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,d,a.endAt)));var a,d}}function T_(...i){return new gm("startAt",i,!0)}function mm(...i){return new gm("startAfter",i,!1)}class _d extends gf{constructor(e,n,a){super(),this.type=e,this.Tc=n,this.Ec=a}_apply(e){const n=Bp(e,this.type,this.Tc,this.Ec);return new io(e.firestore,e.converter,(d=n,new ra((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,d)));var a,d}}function yy(...i){return new _d("endBefore",i,!1)}function A_(...i){return new _d("endAt",i,!0)}function Bp(i,e,n,a){if(n[0]=(0,de.m9)(n[0]),n[0]instanceof Wl)return function(d,m,E,x,H){if(!x)throw new It(pt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${E}().`);const Z=[];for(const Ie of Il(d))if(Ie.field.isKeyField())Z.push(Os(m,x.key));else{const Be=x.data.field(Ie.field);if(xs(Be))throw new It(pt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ie.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Be){const mt=Ie.field.canonicalString();throw new It(pt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${mt}' (used as the orderBy) does not exist.`)}Z.push(Be)}return new yo(Z,H)}(i._query,i.firestore._databaseId,e,n[0]._document,a);{const d=gd(i.firestore);return function(m,E,x,H,Z,Ie){const Be=m.explicitOrderBy;if(Z.length>Be.length)throw new It(pt.INVALID_ARGUMENT,`Too many arguments provided to ${H}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const mt=[];for(let Nt=0;Nt<Z.length;Nt++){const Bt=Z[Nt];if(Be[Nt].field.isKeyField()){if("string"!=typeof Bt)throw new It(pt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${H}(), but got a ${typeof Bt}`);if(!tu(m)&&-1!==Bt.indexOf("/"))throw new It(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${H}() must be a plain document ID, but '${Bt}' contains a slash.`);const mn=m.path.child(qt.fromString(Bt));if(!Qt.isDocumentKey(mn))throw new It(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${H}() must result in a valid document path, but '${mn}' is not because it contains an odd number of segments.`);const cr=new Qt(mn);mt.push(Os(E,cr))}else{const mn=hf(x,H,Bt);mt.push(mn)}}return new yo(mt,Ie)}(i._query,i.firestore._databaseId,d,e,n,a)}}function dh(i,e,n){if("string"==typeof(n=(0,de.m9)(n))){if(""===n)throw new It(pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tu(e)&&-1!==n.indexOf("/"))throw new It(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(qt.fromString(n));if(!Qt.isDocumentKey(a))throw new It(pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Os(i,new Qt(a))}if(n instanceof Zi)return Os(i,n._key);throw new It(pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bl(n)}.`)}function mf(i,e){if(!Array.isArray(i)||0===i.length)throw new It(pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new It(pt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function _m(i,e,n){if(!n.isEqual(e))throw new It(pt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}const Hu={maxAttempts:5};class yd{convertValue(e,n="none"){switch(Ma(e)){case 0:return null;case 1:return e.booleanValue;case 2:return br(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw tn()}}convertObject(e,n){const a={};return Oe(e.fields,(d,m)=>{a[d]=this.convertValue(m,n)}),a}convertGeoPoint(e){return new ju(br(e.latitude),br(e.longitude))}convertArray(e,n){return(e.values||[]).map(a=>this.convertValue(a,n))}convertServerTimestamp(e,n){switch(n){case"previous":const a=zl(e);return null==a?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){const n=qs(e);return new W(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=qt.fromString(e);Vn(Wc(a));const d=new xo(a.get(1),a.get(3)),m=new Qt(a.popFirst(5));return d.isEqual(n)||Vi(`Document ${m} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),m}}function ua(i,e,n){let a;return a=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,a}class S_ extends yd{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zi(this.firestore,null,n)}}class ym{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=gd(e)}set(e,n,a){this._verifyNotCommitted();const d=Eo(e,this._firestore),m=ua(d.converter,n,a),E=uf(this._dataReader,"WriteBatch.set",d._key,m,null!==d.converter,a);return this._mutations.push(E.toMutation(d._key,rs.none())),this}update(e,n,a,...d){this._verifyNotCommitted();const m=Eo(e,this._firestore);let E;return E="string"==typeof(n=(0,de.m9)(n))||n instanceof Bu?uh(this._dataReader,"WriteBatch.update",m._key,n,a,d):df(this._dataReader,"WriteBatch.update",m._key,n),this._mutations.push(E.toMutation(m._key,rs.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Eo(e,this._firestore);return this._mutations=this._mutations.concat(new A(n._key,rs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new It(pt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Eo(i,e){if((i=(0,de.m9)(i)).firestore!==e)throw new It(pt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function fu(i){i=Yr(i,Zi);const e=Yr(i.firestore,vi);return Xh(Cs(e),i._key).then(n=>yf(e,i,n))}class wo extends yd{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Zi(this.firestore,null,n)}}function jp(i){i=Yr(i,Zi);const e=Yr(i.firestore,vi),n=Cs(e),a=new wo(e);return function em(i,e){const n=new _i;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(a=(0,p.Z)(function*(d,m,E){try{const x=yield function(H,Z){const Ie=Kt(H);return Ie.persistence.runTransaction("read document","readonly",Be=>Ie.fi.Ls(Be,Z))}(d,m);x.isFoundDocument()?E.resolve(x):x.isNoDocument()?E.resolve(null):E.reject(new It(pt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(x){const H=id(x,`Failed to get document '${m} from cache`);E.reject(H)}}),function(d,m,E){return a.apply(this,arguments)})(yield Vl(i),e,n);var a})),n.promise}(n,i._key).then(d=>new Wu(e,a,i._key,d,new Hl(null!==d&&d.hasLocalMutations,!0),i.converter))}function vm(i){i=Yr(i,Zi);const e=Yr(i.firestore,vi);return Xh(Cs(e),i._key,{source:"server"}).then(n=>yf(e,i,n))}function Em(i){i=Yr(i,io);const e=Yr(i.firestore,vi),n=Cs(e),a=new wo(e);return _y(i._query),Tp(n,i._query).then(d=>new fl(e,a,i,d))}function _f(i){i=Yr(i,io);const e=Yr(i.firestore,vi),n=Cs(e),a=new wo(e);return function bp(i,e){const n=new _i;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return(a=(0,p.Z)(function*(d,m,E){try{const x=yield ep(d,m,!0),H=new u_(m,x._i),Z=H.Wu(x.documents),Ie=H.applyChanges(Z,!1);E.resolve(Ie.snapshot)}catch(x){const H=id(x,`Failed to execute query '${m} against cache`);E.reject(H)}}),function(d,m,E){return a.apply(this,arguments)})(yield Vl(i),e,n);var a})),n.promise}(n,i._query).then(d=>new fl(e,a,i,d))}function R_(i){i=Yr(i,io);const e=Yr(i.firestore,vi),n=Cs(e),a=new wo(e);return Tp(n,i._query,{source:"server"}).then(d=>new fl(e,a,i,d))}function M_(i,e,n){i=Yr(i,Zi);const a=Yr(i.firestore,vi),d=ua(i.converter,e,n);return Mc(a,[uf(gd(a),"setDoc",i._key,d,null!==i.converter,n).toMutation(i._key,rs.none())])}function $p(i,e,n,...a){i=Yr(i,Zi);const d=Yr(i.firestore,vi),m=gd(d);let E;return E="string"==typeof(e=(0,de.m9)(e))||e instanceof Bu?uh(m,"updateDoc",i._key,e,n,a):df(m,"updateDoc",i._key,e),Mc(d,[E.toMutation(i._key,rs.exists(!0))])}function hh(i){return Mc(Yr(i.firestore,vi),[new A(i._key,rs.none())])}function x_(i,e){const n=Yr(i.firestore,vi),a=nm(i),d=ua(i.converter,e);return Mc(n,[uf(gd(i.firestore),"addDoc",a._key,d,null!==i.converter,{}).toMutation(a._key,rs.exists(!1))]).then(()=>a)}function O_(i,...e){var n,a,d;i=(0,de.m9)(i);let m={includeMetadataChanges:!1},E=0;"object"!=typeof e[E]||jl(e[E])||(m=e[E],E++);const x={includeMetadataChanges:m.includeMetadataChanges};if(jl(e[E])){const Be=e[E];e[E]=null===(n=Be.next)||void 0===n?void 0:n.bind(Be),e[E+1]=null===(a=Be.error)||void 0===a?void 0:a.bind(Be),e[E+2]=null===(d=Be.complete)||void 0===d?void 0:d.bind(Be)}let H,Z,Ie;if(i instanceof Zi)Z=Yr(i.firestore,vi),Ie=eu(i._key.path),H={next:Be=>{e[E]&&e[E](yf(Z,i,Be))},error:e[E+1],complete:e[E+2]};else{const Be=Yr(i,io);Z=Yr(Be.firestore,vi),Ie=Be._query;const mt=new wo(Z);H={next:Nt=>{e[E]&&e[E](new fl(Z,mt,Be,Nt))},error:e[E+1],complete:e[E+2]},_y(i._query)}return function(Be,mt,Nt,Bt){const mn=new oa(Bt),cr=new Vg(mt,mn,Nt);return Be.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return Fg(yield js(Be),cr)})),()=>{mn.Aa(),Be.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return i_(yield js(Be),cr)}))}}(Cs(Z),Ie,x,H)}function P_(i,e){return function f_(i,e){const n=new oa(e);return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return a=yield js(i),d=n,Kt(a).bu.add(d),void d.next();var a,d})),()=>{n.Aa(),i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return a=yield js(i),d=n,void Kt(a).bu.delete(d);var a,d}))}}(Cs(i=Yr(i,vi)),jl(e)?e:{next:e})}function Mc(i,e){return function(n,a){const d=new _i;return n.asyncQueue.enqueueAndForget((0,p.Z)(function*(){return function hy(i,e,n){return zg.apply(this,arguments)}(yield Qh(n),a,d)})),d.promise}(Cs(i),e)}function yf(i,e,n){const a=n.docs.get(e._key),d=new wo(i);return new Wu(i,d,e._key,a,new Hl(n.hasPendingWrites,n.fromCache),e.converter)}class vf extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=gd(e)}get(e){const n=Eo(e,this._firestore),a=new S_(this._firestore);return this._transaction.lookup([n._key]).then(d=>{if(!d||1!==d.length)return tn();const m=d[0];if(m.isFoundDocument())return new Wl(this._firestore,a,m.key,m,n.converter);if(m.isNoDocument())return new Wl(this._firestore,a,n._key,null,n.converter);throw tn()})}set(e,n,a){const d=Eo(e,this._firestore),m=ua(d.converter,n,a),E=uf(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,a);return this._transaction.set(d._key,E),this}update(e,n,a,...d){const m=Eo(e,this._firestore);let E;return E="string"==typeof(n=(0,de.m9)(n))||n instanceof Bu?uh(this._dataReader,"Transaction.update",m._key,n,a,d):df(this._dataReader,"Transaction.update",m._key,n),this._transaction.update(m._key,E),this}delete(e){const n=Eo(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Eo(e,this._firestore),a=new wo(this._firestore);return super.get(e).then(d=>new Wu(this._firestore,a,n._key,d._document,new Hl(!1,!1),n.converter))}}function wm(i,e,n){i=Yr(i,vi);const a=Object.assign(Object.assign({},Hu),n);return function(d){if(d.maxAttempts<1)throw new It(pt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function tm(i,e,n){const a=new _i;return i.asyncQueue.enqueueAndForget((0,p.Z)(function*(){const d=yield(m=i,cl(m).then(E=>E.datastore));var m;new zo(i.asyncQueue,d,n,e,a).run()})),a.promise}(Cs(i),d=>e(new vf(i,d)),a)}function Im(){return new $l("deleteField")}function Wp(){return new lf("serverTimestamp")}function Hp(...i){return new lm("arrayUnion",i)}function Ef(...i){return new cf("arrayRemove",i)}function Cm(i){return new cm("increment",i)}!function(i,e=!0){Ro=M.SDK_VERSION,(0,M._registerComponent)(new G.wA("firestore",(n,{options:a})=>{const d=n.getProvider("app").getImmediate(),m=new vi(d,new Pc(n.getProvider("auth-internal")),new ea(n.getProvider("app-check-internal")));return a=Object.assign({useFetchStreams:e},a),m._setSettings(a),m},"PUBLIC")),(0,M.registerVersion)(zs,"3.4.9",i),(0,M.registerVersion)(zs,"3.4.9","esm2017")}()},2090:(ke,ye,S)=>{S.d(ye,{$s:()=>Bn,BH:()=>Ye,DV:()=>Jt,Dv:()=>Dr,G6:()=>je,GJ:()=>on,L:()=>ce,LL:()=>Ke,Mn:()=>ut,Pz:()=>rn,Sg:()=>Je,UG:()=>at,UI:()=>ar,US:()=>Te,Wj:()=>Tn,Yr:()=>At,ZB:()=>fe,ZR:()=>dt,b$:()=>wt,cI:()=>nn,d:()=>Qe,dS:()=>$r,eu:()=>Xe,g5:()=>G,gK:()=>Hr,gQ:()=>qn,h$:()=>be,hl:()=>it,hu:()=>M,jU:()=>tt,lb:()=>vr,m9:()=>jn,ne:()=>jr,p$:()=>ee,pd:()=>Ar,r3:()=>sn,ru:()=>xe,tV:()=>_e,uI:()=>bt,ug:()=>Vt,vZ:()=>Hn,w1:()=>Ge,w9:()=>En,xO:()=>Cr,xb:()=>Wn,z$:()=>ot,zI:()=>Fe,zd:()=>ur});const M=function(Me,Pe){if(!Me)throw G(Pe)},G=function(Me){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Me)},Ee=function(Me){const Pe=[];let Ue=0;for(let Et=0;Et<Me.length;Et++){let ue=Me.charCodeAt(Et);ue<128?Pe[Ue++]=ue:ue<2048?(Pe[Ue++]=ue>>6|192,Pe[Ue++]=63&ue|128):55296==(64512&ue)&&Et+1<Me.length&&56320==(64512&Me.charCodeAt(Et+1))?(ue=65536+((1023&ue)<<10)+(1023&Me.charCodeAt(++Et)),Pe[Ue++]=ue>>18|240,Pe[Ue++]=ue>>12&63|128,Pe[Ue++]=ue>>6&63|128,Pe[Ue++]=63&ue|128):(Pe[Ue++]=ue>>12|224,Pe[Ue++]=ue>>6&63|128,Pe[Ue++]=63&ue|128)}return Pe},Te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Me,Pe){if(!Array.isArray(Me))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ue=Pe?this.byteToCharMapWebSafe_:this.byteToCharMap_,Et=[];for(let ue=0;ue<Me.length;ue+=3){const j=Me[ue],oe=ue+1<Me.length,He=oe?Me[ue+1]:0,gt=ue+2<Me.length,Ht=gt?Me[ue+2]:0;let Mn=(15&He)<<2|Ht>>6,st=63&Ht;gt||(st=64,oe||(Mn=64)),Et.push(Ue[j>>2],Ue[(3&j)<<4|He>>4],Ue[Mn],Ue[st])}return Et.join("")},encodeString(Me,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?btoa(Me):this.encodeByteArray(Ee(Me),Pe)},decodeString(Me,Pe){return this.HAS_NATIVE_SUPPORT&&!Pe?atob(Me):function(Me){const Pe=[];let Ue=0,Et=0;for(;Ue<Me.length;){const ue=Me[Ue++];if(ue<128)Pe[Et++]=String.fromCharCode(ue);else if(ue>191&&ue<224){const j=Me[Ue++];Pe[Et++]=String.fromCharCode((31&ue)<<6|63&j)}else if(ue>239&&ue<365){const gt=((7&ue)<<18|(63&Me[Ue++])<<12|(63&Me[Ue++])<<6|63&Me[Ue++])-65536;Pe[Et++]=String.fromCharCode(55296+(gt>>10)),Pe[Et++]=String.fromCharCode(56320+(1023&gt))}else{const j=Me[Ue++],oe=Me[Ue++];Pe[Et++]=String.fromCharCode((15&ue)<<12|(63&j)<<6|63&oe)}}return Pe.join("")}(this.decodeStringToByteArray(Me,Pe))},decodeStringToByteArray(Me,Pe){this.init_();const Ue=Pe?this.charToByteMapWebSafe_:this.charToByteMap_,Et=[];for(let ue=0;ue<Me.length;){const j=Ue[Me.charAt(ue++)],He=ue<Me.length?Ue[Me.charAt(ue)]:0;++ue;const Ht=ue<Me.length?Ue[Me.charAt(ue)]:64;++ue;const Gt=ue<Me.length?Ue[Me.charAt(ue)]:64;if(++ue,null==j||null==He||null==Ht||null==Gt)throw Error();Et.push(j<<2|He>>4),64!==Ht&&(Et.push(He<<4&240|Ht>>2),64!==Gt&&Et.push(Ht<<6&192|Gt))}return Et},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Me=0;Me<this.ENCODED_VALS.length;Me++)this.byteToCharMap_[Me]=this.ENCODED_VALS.charAt(Me),this.charToByteMap_[this.byteToCharMap_[Me]]=Me,this.byteToCharMapWebSafe_[Me]=this.ENCODED_VALS_WEBSAFE.charAt(Me),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Me]]=Me,Me>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Me)]=Me,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Me)]=Me)}}},be=function(Me){const Pe=Ee(Me);return Te.encodeByteArray(Pe,!0)},ce=function(Me){return be(Me).replace(/\./g,"")},_e=function(Me){try{return Te.decodeString(Me,!0)}catch(Pe){console.error("base64Decode failed: ",Pe)}return null};function ee(Me){return fe(void 0,Me)}function fe(Me,Pe){if(!(Pe instanceof Object))return Pe;switch(Pe.constructor){case Date:return new Date(Pe.getTime());case Object:void 0===Me&&(Me={});break;case Array:Me=[];break;default:return Pe}for(const Ue in Pe)!Pe.hasOwnProperty(Ue)||!Ae(Ue)||(Me[Ue]=fe(Me[Ue],Pe[Ue]));return Me}function Ae(Me){return"__proto__"!==Me}class Ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Pe,Ue)=>{this.resolve=Pe,this.reject=Ue})}wrapCallback(Pe){return(Ue,Et)=>{Ue?this.reject(Ue):this.resolve(Et),"function"==typeof Pe&&(this.promise.catch(()=>{}),1===Pe.length?Pe(Ue):Pe(Ue,Et))}}}function Je(Me,Pe){if(Me.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Et=Pe||"demo-project",ue=Me.iat||0,j=Me.sub||Me.user_id;if(!j)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const oe=Object.assign({iss:`https://securetoken.google.com/${Et}`,aud:Et,iat:ue,exp:ue+3600,auth_time:ue,sub:j,user_id:j,firebase:{sign_in_provider:"custom",identities:{}}},Me);return[ce(JSON.stringify({alg:"none",type:"JWT"})),ce(JSON.stringify(oe)),""].join(".")}function ot(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function bt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ot())}function at(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Me){return!1}}function tt(){return"object"==typeof self&&self.self===self}function xe(){const Me="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Me&&void 0!==Me.id}function wt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){return ot().indexOf("Electron/")>=0}function Ge(){const Me=ot();return Me.indexOf("MSIE ")>=0||Me.indexOf("Trident/")>=0}function ut(){return ot().indexOf("MSAppHost/")>=0}function At(){return!1}function je(){return!at()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function it(){return"object"==typeof indexedDB}function Xe(){return new Promise((Me,Pe)=>{try{let Ue=!0;const Et="validate-browser-context-for-indexeddb-analytics-module",ue=self.indexedDB.open(Et);ue.onsuccess=()=>{ue.result.close(),Ue||self.indexedDB.deleteDatabase(Et),Me(!0)},ue.onupgradeneeded=()=>{Ue=!1},ue.onerror=()=>{var j;Pe((null===(j=ue.error)||void 0===j?void 0:j.message)||"")}}catch(Ue){Pe(Ue)}})}function Fe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class dt extends Error{constructor(Pe,Ue,Et){super(Ue),this.code=Pe,this.customData=Et,this.name="FirebaseError",Object.setPrototypeOf(this,dt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ke.prototype.create)}}class Ke{constructor(Pe,Ue,Et){this.service=Pe,this.serviceName=Ue,this.errors=Et}create(Pe,...Ue){const Et=Ue[0]||{},ue=`${this.service}/${Pe}`,j=this.errors[Pe],oe=j?function _t(Me,Pe){return Me.replace(St,(Ue,Et)=>{const ue=Pe[Et];return null!=ue?String(ue):`<${Et}?>`})}(j,Et):"Error";return new dt(ue,`${this.serviceName}: ${oe} (${ue}).`,Et)}}const St=/\{\$([^}]+)}/g;function nn(Me){return JSON.parse(Me)}function rn(Me){return JSON.stringify(Me)}const Ot=function(Me){let Pe={},Ue={},Et={},ue="";try{const j=Me.split(".");Pe=nn(_e(j[0])||""),Ue=nn(_e(j[1])||""),ue=j[2],Et=Ue.d||{},delete Ue.d}catch(j){}return{header:Pe,claims:Ue,data:Et,signature:ue}},En=function(Me){const Ue=Ot(Me).claims;return!!Ue&&"object"==typeof Ue&&Ue.hasOwnProperty("iat")},on=function(Me){const Pe=Ot(Me).claims;return"object"==typeof Pe&&!0===Pe.admin};function sn(Me,Pe){return Object.prototype.hasOwnProperty.call(Me,Pe)}function Jt(Me,Pe){if(Object.prototype.hasOwnProperty.call(Me,Pe))return Me[Pe]}function Wn(Me){for(const Pe in Me)if(Object.prototype.hasOwnProperty.call(Me,Pe))return!1;return!0}function ar(Me,Pe,Ue){const Et={};for(const ue in Me)Object.prototype.hasOwnProperty.call(Me,ue)&&(Et[ue]=Pe.call(Ue,Me[ue],ue,Me));return Et}function Hn(Me,Pe){if(Me===Pe)return!0;const Ue=Object.keys(Me),Et=Object.keys(Pe);for(const ue of Ue){if(!Et.includes(ue))return!1;const j=Me[ue],oe=Pe[ue];if(Ln(j)&&Ln(oe)){if(!Hn(j,oe))return!1}else if(j!==oe)return!1}for(const ue of Et)if(!Ue.includes(ue))return!1;return!0}function Ln(Me){return null!==Me&&"object"==typeof Me}function Cr(Me){const Pe=[];for(const[Ue,Et]of Object.entries(Me))Array.isArray(Et)?Et.forEach(ue=>{Pe.push(encodeURIComponent(Ue)+"="+encodeURIComponent(ue))}):Pe.push(encodeURIComponent(Ue)+"="+encodeURIComponent(Et));return Pe.length?"&"+Pe.join("&"):""}function ur(Me){const Pe={};return Me.replace(/^\?/,"").split("&").forEach(Et=>{if(Et){const[ue,j]=Et.split("=");Pe[decodeURIComponent(ue)]=decodeURIComponent(j)}}),Pe}function Ar(Me){const Pe=Me.indexOf("?");if(!Pe)return"";const Ue=Me.indexOf("#",Pe);return Me.substring(Pe,Ue>0?Ue:void 0)}class qn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Pe=1;Pe<this.blockSize;++Pe)this.pad_[Pe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Pe,Ue){Ue||(Ue=0);const Et=this.W_;if("string"==typeof Pe)for(let Gt=0;Gt<16;Gt++)Et[Gt]=Pe.charCodeAt(Ue)<<24|Pe.charCodeAt(Ue+1)<<16|Pe.charCodeAt(Ue+2)<<8|Pe.charCodeAt(Ue+3),Ue+=4;else for(let Gt=0;Gt<16;Gt++)Et[Gt]=Pe[Ue]<<24|Pe[Ue+1]<<16|Pe[Ue+2]<<8|Pe[Ue+3],Ue+=4;for(let Gt=16;Gt<80;Gt++){const Mn=Et[Gt-3]^Et[Gt-8]^Et[Gt-14]^Et[Gt-16];Et[Gt]=4294967295&(Mn<<1|Mn>>>31)}let Ht,wn,ue=this.chain_[0],j=this.chain_[1],oe=this.chain_[2],He=this.chain_[3],gt=this.chain_[4];for(let Gt=0;Gt<80;Gt++){Gt<40?Gt<20?(Ht=He^j&(oe^He),wn=1518500249):(Ht=j^oe^He,wn=1859775393):Gt<60?(Ht=j&oe|He&(j|oe),wn=2400959708):(Ht=j^oe^He,wn=3395469782);const Mn=(ue<<5|ue>>>27)+Ht+gt+wn+Et[Gt]&4294967295;gt=He,He=oe,oe=4294967295&(j<<30|j>>>2),j=ue,ue=Mn}this.chain_[0]=this.chain_[0]+ue&4294967295,this.chain_[1]=this.chain_[1]+j&4294967295,this.chain_[2]=this.chain_[2]+oe&4294967295,this.chain_[3]=this.chain_[3]+He&4294967295,this.chain_[4]=this.chain_[4]+gt&4294967295}update(Pe,Ue){if(null==Pe)return;void 0===Ue&&(Ue=Pe.length);const Et=Ue-this.blockSize;let ue=0;const j=this.buf_;let oe=this.inbuf_;for(;ue<Ue;){if(0===oe)for(;ue<=Et;)this.compress_(Pe,ue),ue+=this.blockSize;if("string"==typeof Pe){for(;ue<Ue;)if(j[oe]=Pe.charCodeAt(ue),++oe,++ue,oe===this.blockSize){this.compress_(j),oe=0;break}}else for(;ue<Ue;)if(j[oe]=Pe[ue],++oe,++ue,oe===this.blockSize){this.compress_(j),oe=0;break}}this.inbuf_=oe,this.total_+=Ue}digest(){const Pe=[];let Ue=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ue=this.blockSize-1;ue>=56;ue--)this.buf_[ue]=255&Ue,Ue/=256;this.compress_(this.buf_);let Et=0;for(let ue=0;ue<5;ue++)for(let j=24;j>=0;j-=8)Pe[Et]=this.chain_[ue]>>j&255,++Et;return Pe}}function jr(Me,Pe){const Ue=new Ut(Me,Pe);return Ue.subscribe.bind(Ue)}class Ut{constructor(Pe,Ue){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ue,this.task.then(()=>{Pe(this)}).catch(Et=>{this.error(Et)})}next(Pe){this.forEachObserver(Ue=>{Ue.next(Pe)})}error(Pe){this.forEachObserver(Ue=>{Ue.error(Pe)}),this.close(Pe)}complete(){this.forEachObserver(Pe=>{Pe.complete()}),this.close()}subscribe(Pe,Ue,Et){let ue;if(void 0===Pe&&void 0===Ue&&void 0===Et)throw new Error("Missing Observer.");ue=function An(Me,Pe){if("object"!=typeof Me||null===Me)return!1;for(const Ue of Pe)if(Ue in Me&&"function"==typeof Me[Ue])return!0;return!1}(Pe,["next","error","complete"])?Pe:{next:Pe,error:Ue,complete:Et},void 0===ue.next&&(ue.next=pn),void 0===ue.error&&(ue.error=pn),void 0===ue.complete&&(ue.complete=pn);const j=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ue.error(this.finalError):ue.complete()}catch(oe){}}),this.observers.push(ue),j}unsubscribeOne(Pe){void 0===this.observers||void 0===this.observers[Pe]||(delete this.observers[Pe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Pe){if(!this.finalized)for(let Ue=0;Ue<this.observers.length;Ue++)this.sendOne(Ue,Pe)}sendOne(Pe,Ue){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Pe])try{Ue(this.observers[Pe])}catch(Et){"undefined"!=typeof console&&console.error&&console.error(Et)}})}close(Pe){this.finalized||(this.finalized=!0,void 0!==Pe&&(this.finalError=Pe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pn(){}const Dr=function(Me,Pe,Ue,Et){let ue;if(Et<Pe?ue="at least "+Pe:Et>Ue&&(ue=0===Ue?"none":"no more than "+Ue),ue)throw new Error(Me+" failed: Was called with "+Et+(1===Et?" argument.":" arguments.")+" Expects "+ue+".")};function Hr(Me,Pe){return`${Me} failed: ${Pe} argument `}function Tn(Me,Pe,Ue,Et){if((!Et||Ue)&&"function"!=typeof Ue)throw new Error(Hr(Me,Pe)+"must be a valid function.")}function vr(Me,Pe,Ue,Et){if((!Et||Ue)&&("object"!=typeof Ue||null===Ue))throw new Error(Hr(Me,Pe)+"must be a valid context object.")}const $r=function(Me){const Pe=[];let Ue=0;for(let Et=0;Et<Me.length;Et++){let ue=Me.charCodeAt(Et);if(ue>=55296&&ue<=56319){const j=ue-55296;Et++,M(Et<Me.length,"Surrogate pair missing trail surrogate."),ue=65536+(j<<10)+(Me.charCodeAt(Et)-56320)}ue<128?Pe[Ue++]=ue:ue<2048?(Pe[Ue++]=ue>>6|192,Pe[Ue++]=63&ue|128):ue<65536?(Pe[Ue++]=ue>>12|224,Pe[Ue++]=ue>>6&63|128,Pe[Ue++]=63&ue|128):(Pe[Ue++]=ue>>18|240,Pe[Ue++]=ue>>12&63|128,Pe[Ue++]=ue>>6&63|128,Pe[Ue++]=63&ue|128)}return Pe},Vt=function(Me){let Pe=0;for(let Ue=0;Ue<Me.length;Ue++){const Et=Me.charCodeAt(Ue);Et<128?Pe++:Et<2048?Pe+=2:Et>=55296&&Et<=56319?(Pe+=4,Ue++):Pe+=3}return Pe};function Bn(Me,Pe=1e3,Ue=2){const Et=Pe*Math.pow(Ue,Me),ue=Math.round(.5*Et*(Math.random()-.5)*2);return Math.min(144e5,Et+ue)}function jn(Me){return Me&&Me._delegate?Me._delegate:Me}},7556:(ke,ye,S)=>{S.d(ye,{e:()=>Te});var p=S(8937),M=S(5e3),G=S(4232),Ee=S(6185),de=S(1041);let Te=(()=>{class be{constructor(_e,ee,fe,Ae){this.router=_e,this.AngularFireStore=ee,this.AngularFireAuth=fe,this.ngZone=Ae,this.AngularFireAuth.authState.subscribe(Ye=>{Ye?(this.userData=Ye,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(_e,ee){return this.AngularFireAuth.signInWithEmailAndPassword(_e,ee).then(fe=>{this.ngZone.run(()=>{this.router.navigate([""])}),this.SetUserData(fe.user)}).catch(fe=>{window.alert(fe.message)})}SignUp(_e,ee){return this.AngularFireAuth.createUserWithEmailAndPassword(_e,ee).then(fe=>{this.SendVerificationMail(),this.SetUserData(fe.user)}).catch(fe=>{window.alert(fe.message)})}SendVerificationMail(){return this.AngularFireAuth.currentUser.then(_e=>_e.sendEmailVerification()).then(()=>{this.router.navigate(["auth/verify-email"])})}ForgotPassword(_e){return this.AngularFireAuth.sendPasswordResetEmail(_e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(ee=>{window.alert(ee)})}get isLoggedIn(){const _e=JSON.parse(localStorage.getItem("user"));return null!==_e&&!1!==_e.email}GoogleAuth(){return this.AuthLogin(new p.hJ).then(_e=>{_e&&this.router.navigate([""])})}AuthLogin(_e){return this.AngularFireAuth.signInWithPopup(_e).then(ee=>{this.ngZone.run(()=>{this.router.navigate([""])}),this.SetUserData(ee.user)}).catch(ee=>{window.alert(ee)})}SetUserData(_e){return this.AngularFireStore.doc(`users/${_e.uid}`).set({uid:_e.uid,email:_e.email,displayName:_e.displayName,photoURL:_e.photoURL,emailVerified:_e.emailVerified},{merge:!0})}SignOut(){return this.AngularFireAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["auth"])})}}return be.\u0275fac=function(_e){return new(_e||be)(M.LFG(G.F0),M.LFG(Ee.ST),M.LFG(de.zQ),M.LFG(M.R0b))},be.\u0275prov=M.Yz7({token:be,factory:be.\u0275fac,providedIn:"root"}),be})()},8302:(ke,ye,S)=>{S.d(ye,{W:()=>de});var p=S(5e3),M=S(4232),G=S(6185),Ee=S(1041);let de=(()=>{class Te{constructor(ce,_e,ee,fe){this.router=ce,this.AngularFireStore=_e,this.AngularFireAuth=ee,this.ngZone=fe,this.AngularFireAuth.authState.subscribe(Ae=>{Ae?(this.userData=Ae,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}initEgresoIngresoListener(){console.log(this.userData.uid)}crearIngresoEgreso(ce){return this.AngularFireStore.doc(`ingresos-egresos/${this.userData.uid}`).collection("items").add(Object.assign({},ce))}}return Te.\u0275fac=function(ce){return new(ce||Te)(p.LFG(M.F0),p.LFG(G.ST),p.LFG(Ee.zQ),p.LFG(p.R0b))},Te.\u0275prov=p.Yz7({token:Te,factory:Te.\u0275fac,providedIn:"root"}),Te})()},4818:(ke,ye,S)=>{var p=S(2313),M=S(5e3),G=S(4232);const Ee=[];let de=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({imports:[[G.Bz.forRoot(Ee,{useHash:!0})],G.Bz]}),l})(),Te=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275cmp=M.Xpm({type:l,selectors:[["app-root"]],decls:1,vars:0,template:function(u,f){1&u&&M._UZ(0,"router-outlet")},directives:[G.lC],encapsulation:2}),l})();var be=S(9808);const ce=[{path:"auth",children:[{path:"",loadChildren:()=>S.e(293).then(S.bind(S,3293)).then(l=>l.SignInModule)},{path:"register",loadChildren:()=>S.e(952).then(S.bind(S,9952)).then(l=>l.SignUpModule)},{path:"forgot-password",loadChildren:()=>S.e(523).then(S.bind(S,523)).then(l=>l.ForgotPasswordModule)},{path:"verify-email",loadChildren:()=>S.e(357).then(S.bind(S,6357)).then(l=>l.VerifyEmailModule)}]}];let _e=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({imports:[[G.Bz.forChild(ce)],G.Bz]}),l})();var ee=S(2382);let fe=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({imports:[[be.ez,ee.u5,G.Bz,_e]]}),l})();var Ae=S(7556);let Ye=(()=>{class l{constructor(u,f){this.authService=u,this.router=f}canActivate(u,f){return!0===this.authService.isLoggedIn||(this.router.navigate(["/auth"]),!1)}canActivateChild(u,f){return!0===this.authService.isLoggedIn||(this.router.navigate(["/auth"]),!1)}}return l.\u0275fac=function(u){return new(u||l)(M.LFG(Ae.e),M.LFG(G.F0))},l.\u0275prov=M.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var Je=S(8302);function ot(l,o){if(1&l&&(M.TgZ(0,"div",30)(1,"a",31),M._UZ(2,"img",32),M.qZA(),M.TgZ(3,"h5",33),M._uU(4),M.qZA()()),2&l){const u=o.ngIf;M.xp6(4),M.hij("",u.email," ")}}let bt=(()=>{class l{constructor(u){this.authService=u}ngOnInit(){}}return l.\u0275fac=function(u){return new(u||l)(M.Y36(Ae.e))},l.\u0275cmp=M.Xpm({type:l,selectors:[["app-sidebar"]],decls:52,vars:1,consts:[[1,"ml-[-100%]","fixed","z-10","top-0","pb-3","px-6","w-full","flex","flex-col","justify-between","h-screen","border-r","bg-white","transition","duration-300","md:w-4/12","lg:ml-0","lg:w-[25%]","xl:w-[20%]","2xl:w-[15%]"],[1,"-mx-6","px-6","py-4"],["href","#","title","home"],["src","https://tailus.io/sources/blocks/stats-cards/preview/images/logo.svg","alt","tailus logo",1,"w-32"],["class","mt-8 text-center",4,"ngIf"],[1,"space-y-2","tracking-wide","mt-8"],["href","#","aria-label","dashboard",1,"relative","px-4","py-3","flex","items-center","space-x-4","rounded-xl","text-white","bg-gradient-to-r","from-sky-600","to-cyan-400"],["viewBox","0 0 24 24","fill","none",1,"-ml-1","h-6","w-6"],["d","M6 8a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V8ZM6 15a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2v-1Z",1,"fill-current","text-cyan-400","dark:fill-slate-600"],["d","M13 8a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2V8Z",1,"fill-current","text-cyan-200","group-hover:text-cyan-300"],["d","M13 15a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-1Z",1,"fill-current","group-hover:text-sky-300"],[1,"-mr-1","font-medium"],["href","#",1,"px-4","py-3","flex","items-center","space-x-4","rounded-md","text-gray-600","group"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M2 6a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1H8a3 3 0 00-3 3v1.5a1.5 1.5 0 01-3 0V6z","clip-rule","evenodd",1,"fill-current","text-gray-300","group-hover:text-cyan-300"],["d","M6 12a2 2 0 012-2h8a2 2 0 012 2v2a2 2 0 01-2 2H2h2a2 2 0 002-2v-2z",1,"fill-current","text-gray-600","group-hover:text-cyan-600"],["routerLink","ingreso-egreso"],[1,"group-hover:text-gray-700"],["fill-rule","evenodd","d","M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z","clip-rule","evenodd",1,"fill-current","text-gray-600","group-hover:text-cyan-600"],["d","M15 7h1a2 2 0 012 2v5.5a1.5 1.5 0 01-3 0V7z",1,"fill-current","text-gray-300","group-hover:text-cyan-300"],["routerLink","estadistica"],["d","M2 10a8 8 0 018-8v8h8a8 8 0 11-16 0z",1,"fill-current","text-gray-600","group-hover:text-cyan-600"],["d","M12 2.252A8.014 8.014 0 0117.748 8H12V2.252z",1,"fill-current","text-gray-300","group-hover:text-cyan-300"],["d","M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z",1,"fill-current","text-gray-300","group-hover:text-cyan-300"],["fill-rule","evenodd","d","M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z","clip-rule","evenodd",1,"fill-current","text-gray-600","group-hover:text-cyan-600"],[1,"px-6","-mx-6","pt-4","flex","justify-between","items-center","border-t"],[1,"px-4","py-3","flex","items-center","space-x-4","rounded-md","text-gray-600","group"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"],[1,"list-none",3,"click"],[1,"mt-8","text-center"],["routerLink",""],["src","https://tailus.io/sources/blocks/stats-cards/preview/images/second_user.webp","alt","",1,"w-10","h-10","m-auto","rounded-full","object-cover","lg:w-28","lg:h-28"],[1,"hidden","mt-4","text-xl","font-semibold","text-gray-600","lg:block"]],template:function(u,f){1&u&&(M.TgZ(0,"aside",0)(1,"div")(2,"div",1)(3,"a",2),M._UZ(4,"img",3),M.qZA()(),M.YNc(5,ot,5,1,"div",4),M.TgZ(6,"ul",5)(7,"li")(8,"a",6),M.O4$(),M.TgZ(9,"svg",7),M._UZ(10,"path",8)(11,"path",9)(12,"path",10),M.qZA(),M.kcU(),M.TgZ(13,"span",11),M._uU(14,"Dashboard"),M.qZA()()(),M.TgZ(15,"li")(16,"a",12),M.O4$(),M.TgZ(17,"svg",13),M._UZ(18,"path",14)(19,"path",15),M.qZA(),M.kcU(),M.TgZ(20,"a",16)(21,"span",17),M._uU(22,"Ingreso / Egreso "),M.qZA()()()(),M.TgZ(23,"li")(24,"a",12),M.O4$(),M.TgZ(25,"svg",13),M._UZ(26,"path",18)(27,"path",19),M.qZA(),M.kcU(),M.TgZ(28,"a",20)(29,"span",17),M._uU(30,"Estadistica"),M.qZA()()()(),M.TgZ(31,"li")(32,"a",12),M.O4$(),M.TgZ(33,"svg",13),M._UZ(34,"path",21)(35,"path",22),M.qZA(),M.kcU(),M.TgZ(36,"span",17),M._uU(37,"Other data"),M.qZA()()(),M.TgZ(38,"li")(39,"a",12),M.O4$(),M.TgZ(40,"svg",13),M._UZ(41,"path",23)(42,"path",24),M.qZA(),M.kcU(),M.TgZ(43,"span",17),M._uU(44,"Finance"),M.qZA()()()()(),M.TgZ(45,"div",25)(46,"button",26),M.O4$(),M.TgZ(47,"svg",27),M._UZ(48,"path",28),M.qZA(),M.kcU(),M.TgZ(49,"span",17)(50,"a",29),M.NdJ("click",function(){return f.authService.SignOut()}),M._uU(51," Logout "),M.qZA()()()()()),2&u&&(M.xp6(5),M.Q6J("ngIf",f.authService.userData))},directives:[be.O5,G.yS],encapsulation:2}),l})(),at=(()=>{class l{constructor(){}ngOnInit(){}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275cmp=M.Xpm({type:l,selectors:[["app-navbar"]],decls:23,vars:0,consts:[[1,"sticky","z-10","top-0","h-16","border-b","bg-white","lg:py-2.5"],[1,"px-6","flex","items-center","justify-between","space-x-4","2xl:container"],["hidden","",1,"text-2xl","text-gray-600","font-medium","lg:block"],[1,"w-12","h-16","-mr-2","border-r","lg:hidden"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","my-auto"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 6h16M4 12h16M4 18h16"],[1,"flex","space-x-4"],["hidden","",1,"md:block"],[1,"relative","flex","items-center","text-gray-400","focus-within:text-cyan-400"],[1,"absolute","left-4","h-6","flex","items-center","pr-3","border-r","border-gray-300"],["xmlns","http://ww50w3.org/2000/svg","viewBox","0 0 35.997 36.004",1,"w-4","fill-current"],["id","Icon_awesome-search","data-name","search","d","M35.508,31.127l-7.01-7.01a1.686,1.686,0,0,0-1.2-.492H26.156a14.618,14.618,0,1,0-2.531,2.531V27.3a1.686,1.686,0,0,0,.492,1.2l7.01,7.01a1.681,1.681,0,0,0,2.384,0l1.99-1.99a1.7,1.7,0,0,0,.007-2.391Zm-20.883-7.5a9,9,0,1,1,9-9A8.995,8.995,0,0,1,14.625,23.625Z"],["type","search","name","leadingIcon","id","leadingIcon","placeholder","Search here",1,"w-full","pl-14","pr-4","py-2.5","rounded-xl","text-sm","text-gray-600","outline-none","border","border-gray-300","focus:border-cyan-300","transition"],["aria-label","search",1,"w-10","h-10","rounded-xl","border","bg-gray-100","focus:bg-gray-100","active:bg-gray-200","md:hidden"],["xmlns","http://ww50w3.org/2000/svg","viewBox","0 0 35.997 36.004",1,"w-4","mx-auto","fill-current","text-gray-600"],["aria-label","chat",1,"w-10","h-10","rounded-xl","border","bg-gray-100","focus:bg-gray-100","active:bg-gray-200"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5","m-auto","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"],["aria-label","notification",1,"w-10","h-10","rounded-xl","border","bg-gray-100","focus:bg-gray-100","active:bg-gray-200"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","m-auto","text-gray-600"],["d","M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"]],template:function(u,f){1&u&&(M.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),M._uU(3,"Dashboard"),M.qZA(),M.TgZ(4,"button",3),M.O4$(),M.TgZ(5,"svg",4),M._UZ(6,"path",5),M.qZA()(),M.kcU(),M.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"span",9),M.O4$(),M.TgZ(11,"svg",10),M._UZ(12,"path",11),M.qZA()(),M.kcU(),M._UZ(13,"input",12),M.qZA()(),M.TgZ(14,"button",13),M.O4$(),M.TgZ(15,"svg",14),M._UZ(16,"path",11),M.qZA()(),M.kcU(),M.TgZ(17,"button",15),M.O4$(),M.TgZ(18,"svg",16),M._UZ(19,"path",17),M.qZA()(),M.kcU(),M.TgZ(20,"button",18),M.O4$(),M.TgZ(21,"svg",19),M._UZ(22,"path",20),M.qZA()()()()())},encapsulation:2}),l})();const xe=[{path:"",component:(()=>{class l{constructor(u){this.ingresoEgresoService=u}ngOnInit(){this.ingresoEgresoService.initEgresoIngresoListener()}}return l.\u0275fac=function(u){return new(u||l)(M.Y36(Je.W))},l.\u0275cmp=M.Xpm({type:l,selectors:[["app-dashboard"]],decls:5,vars:0,consts:[[1,"ml-auto","mb-6","lg:w-[75%]","xl:w-[80%]","2xl:w-[85%]"],[1,"px-6","pt-6","2xl:container"]],template:function(u,f){1&u&&(M._UZ(0,"app-sidebar"),M.TgZ(1,"div",0),M._UZ(2,"app-navbar"),M.TgZ(3,"div",1),M._UZ(4,"router-outlet"),M.qZA()())},directives:[bt,at,G.lC],encapsulation:2}),l})(),canActivate:[Ye],children:[{path:"",loadChildren:()=>S.e(983).then(S.bind(S,4983)).then(l=>l.DetalleModule)},{path:"estadistica",loadChildren:()=>S.e(12).then(S.bind(S,2012)).then(l=>l.EstadisticaModule)},{path:"ingreso-egreso",loadChildren:()=>S.e(504).then(S.bind(S,4504)).then(l=>l.IngresoEgresoModule)},{path:"**",redirectTo:"detalle"}]}];let wt=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({imports:[[G.Bz.forChild(xe)],G.Bz]}),l})();const Qe=[];let Ge=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({imports:[[G.Bz.forChild(Qe)],G.Bz]}),l})(),ut=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({imports:[[be.ez,Ge]]}),l})(),At=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({imports:[[be.ez,ut,wt]]}),l})();var je=S(3692);const it_firebase={projectId:"ingresoegresoapp-9b1c1",appId:"1:849019260828:web:c60f589b0331afbc670259",storageBucket:"ingresoegresoapp-9b1c1.appspot.com",locationId:"us-central",apiKey:"AIzaSyC_gY_pE_9C6v0TfTeaIlKBzqSMZwgftOE",authDomain:"ingresoegresoapp-9b1c1.firebaseapp.com",messagingSenderId:"849019260828"};var Xe=S(6351),Fe=S(5867),ze=S(7128),et=S(8937);class Ke{constructor(o){return o}}class _t{constructor(){return(0,Xe.vb)("auth")}}const nn=new M.OlP("angularfire2.auth-instances");function Ot(l){return(o,u)=>{const f=o.runOutsideAngular(()=>l(u));return new Ke(f)}}const en={provide:_t,deps:[[new M.FiY,nn]]},Cn={provide:Ke,useFactory:function rn(l,o){const u=(0,Xe.JM)("auth",l,o);return u&&new Ke(u)},deps:[[new M.FiY,nn],je.Ot]};let En=(()=>{class l{constructor(){(0,Fe.KN)("angularfire",Xe.q4.full,"auth")}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({providers:[Cn,en]}),l})();function on(l,...o){return{ngModule:En,providers:[{provide:nn,useFactory:Ot(l),multi:!0,deps:[M.R0b,M.zs3,Xe.HU,je.z6,[new M.FiY,ze.nm],...o]}]}}const Ut=(0,Xe.u3)(et.v0,!0);var Gn=S(5861),fn=S(9681),rr=S(4859),pe=S(2090),Sr=S(1877);const Oi="@firebase/database";let Pt="";function _n(l){Pt=l}class ir{constructor(o){this.domStorage_=o,this.prefix_="firebase:"}set(o,u){null==u?this.domStorage_.removeItem(this.prefixedName_(o)):this.domStorage_.setItem(this.prefixedName_(o),(0,pe.Pz)(u))}get(o){const u=this.domStorage_.getItem(this.prefixedName_(o));return null==u?null:(0,pe.cI)(u)}remove(o){this.domStorage_.removeItem(this.prefixedName_(o))}prefixedName_(o){return this.prefix_+o}toString(){return this.domStorage_.toString()}}class Qr{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(o,u){null==u?delete this.cache_[o]:this.cache_[o]=u}get(o){return(0,pe.r3)(this.cache_,o)?this.cache_[o]:null}remove(o){delete this.cache_[o]}}const Ei=function(l){try{if("undefined"!=typeof window&&void 0!==window[l]){const o=window[l];return o.setItem("firebase:sentinel","cache"),o.removeItem("firebase:sentinel"),new ir(o)}}catch(o){}return new Qr},dr=Ei("localStorage"),wi=Ei("sessionStorage"),zn=new Sr.Yd("@firebase/database"),mi=function(){let l=1;return function(){return l++}}(),Pr=function(l){const o=(0,pe.dS)(l),u=new pe.gQ;u.update(o);const f=u.digest();return pe.US.encodeByteArray(f)},xn=function(...l){let o="";for(let u=0;u<l.length;u++){const f=l[u];Array.isArray(f)||f&&"object"==typeof f&&"number"==typeof f.length?o+=xn.apply(null,f):o+="object"==typeof f?(0,pe.Pz)(f):f,o+=" "}return o};let ti=null,Qi=!0;const Pi=function(l,o){(0,pe.hu)(!o||!0===l||!1===l,"Can't turn on custom loggers persistently."),!0===l?(zn.logLevel=Sr.in.VERBOSE,ti=zn.log.bind(zn),o&&wi.set("logging_enabled",!0)):"function"==typeof l?ti=l:(ti=null,wi.remove("logging_enabled"))},Rr=function(...l){if(!0===Qi&&(Qi=!1,null===ti&&!0===wi.get("logging_enabled")&&Pi(!0)),ti){const o=xn.apply(null,l);ti(o)}},Er=function(l){return function(...o){Rr(l,...o)}},Jr=function(...l){const o="FIREBASE INTERNAL ERROR: "+xn(...l);zn.error(o)},ve=function(...l){const o=`FIREBASE FATAL ERROR: ${xn(...l)}`;throw zn.error(o),new Error(o)},le=function(...l){const o="FIREBASE WARNING: "+xn(...l);zn.warn(o)},me=function(l){return"number"==typeof l&&(l!=l||l===Number.POSITIVE_INFINITY||l===Number.NEGATIVE_INFINITY)},qe="[MIN_NAME]",Rt="[MAX_NAME]",yn=function(l,o){if(l===o)return 0;if(l===qe||o===Rt)return-1;if(o===qe||l===Rt)return 1;{const u=Fo(l),f=Fo(o);return null!==u?null!==f?u-f==0?l.length-o.length:u-f:-1:null!==f?1:l<o?-1:1}},Nn=function(l,o){return l===o?0:l<o?-1:1},gn=function(l,o){if(o&&l in o)return o[l];throw new Error("Missing required key ("+l+") in object: "+(0,pe.Pz)(o))},Sn=function(l){if("object"!=typeof l||null===l)return(0,pe.Pz)(l);const o=[];for(const f in l)o.push(f);o.sort();let u="{";for(let f=0;f<o.length;f++)0!==f&&(u+=","),u+=(0,pe.Pz)(o[f]),u+=":",u+=Sn(l[o[f]]);return u+="}",u},ai=function(l,o){const u=l.length;if(u<=o)return[l];const f=[];for(let y=0;y<u;y+=o)f.push(l.substring(y,y+o>u?u:y+o));return f};function hr(l,o){for(const u in l)l.hasOwnProperty(u)&&o(u,l[u])}const os=function(l){(0,pe.hu)(!me(l),"Invalid JSON number");const f=1023;let y,D,N,K,ae;0===l?(D=0,N=0,y=1/l==-1/0?1:0):(y=l<0,(l=Math.abs(l))>=Math.pow(2,1-f)?(K=Math.min(Math.floor(Math.log(l)/Math.LN2),f),D=K+f,N=Math.round(l*Math.pow(2,52-K)-Math.pow(2,52))):(D=0,N=Math.round(l/Math.pow(2,-1074))));const De=[];for(ae=52;ae;ae-=1)De.push(N%2?1:0),N=Math.floor(N/2);for(ae=11;ae;ae-=1)De.push(D%2?1:0),D=Math.floor(D/2);De.push(y?1:0),De.reverse();const nt=De.join("");let lt="";for(ae=0;ae<64;ae+=8){let Dt=parseInt(nt.substr(ae,8),2).toString(16);1===Dt.length&&(Dt="0"+Dt),lt+=Dt}return lt.toLowerCase()},as=new RegExp("^-?(0*)\\d{1,10}$"),Ws=-2147483648,ks=2147483647,Fo=function(l){if(as.test(l)){const o=Number(l);if(o>=Ws&&o<=ks)return o}return null},Ji=function(l){try{l()}catch(o){setTimeout(()=>{throw le("Exception was thrown by user callback.",o.stack||""),o},Math.floor(0))}},fs=function(l,o){const u=setTimeout(l,o);return"object"==typeof u&&u.unref&&u.unref(),u};class ca{constructor(o,u){this.appName_=o,this.appCheckProvider=u,this.appCheck=null==u?void 0:u.getImmediate({optional:!0}),this.appCheck||null==u||u.get().then(f=>this.appCheck=f)}getToken(o){return this.appCheck?this.appCheck.getToken(o):new Promise((u,f)=>{setTimeout(()=>{this.appCheck?this.getToken(o).then(u,f):u(null)},0)})}addTokenChangeListener(o){var u;null===(u=this.appCheckProvider)||void 0===u||u.get().then(f=>f.addTokenListener(o))}notifyForInvalidToken(){le(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Yo{constructor(o,u,f){this.appName_=o,this.firebaseOptions_=u,this.authProvider_=f,this.auth_=null,this.auth_=f.getImmediate({optional:!0}),this.auth_||f.onInit(y=>this.auth_=y)}getToken(o){return this.auth_?this.auth_.getToken(o).catch(u=>u&&"auth/token-not-initialized"===u.code?(Rr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(u)):new Promise((u,f)=>{setTimeout(()=>{this.auth_?this.getToken(o).then(u,f):u(null)},0)})}addTokenChangeListener(o){this.auth_?this.auth_.addAuthTokenListener(o):this.authProvider_.get().then(u=>u.addAuthTokenListener(o))}removeTokenChangeListener(o){this.authProvider_.get().then(u=>u.removeAuthTokenListener(o))}notifyForInvalidToken(){let o='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';o+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',le(o)}}let us=(()=>{class l{constructor(u){this.accessToken=u}getToken(u){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(u){u(this.accessToken)}removeTokenChangeListener(u){}notifyForInvalidToken(){}}return l.OWNER="owner",l})();const bs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ls="websocket",bi="long_polling";class Hs{constructor(o,u,f,y,D=!1,N="",K=!1){this.secure=u,this.namespace=f,this.webSocketOnly=y,this.nodeAdmin=D,this.persistenceKey=N,this.includeNamespaceInQueryParams=K,this._host=o.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=dr.get("host:"+o)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(o){o!==this.internalHost&&(this.internalHost=o,this.isCacheableHost()&&dr.set("host:"+this._host,this.internalHost))}toString(){let o=this.toURLString();return this.persistenceKey&&(o+="<"+this.persistenceKey+">"),o}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function gs(l,o,u){let f;if((0,pe.hu)("string"==typeof o,"typeof type must == string"),(0,pe.hu)("object"==typeof u,"typeof params must == object"),o===ls)f=(l.secure?"wss://":"ws://")+l.internalHost+"/.ws?";else{if(o!==bi)throw new Error("Unknown connection type: "+o);f=(l.secure?"https://":"http://")+l.internalHost+"/.lp?"}(function ps(l){return l.host!==l.internalHost||l.isCustomHost()||l.includeNamespaceInQueryParams})(l)&&(u.ns=l.namespace);const y=[];return hr(u,(D,N)=>{y.push(D+"="+N)}),f+y.join("&")}class ms{constructor(){this.counters_={}}incrementCounter(o,u=1){(0,pe.r3)(this.counters_,o)||(this.counters_[o]=0),this.counters_[o]+=u}get(){return(0,pe.p$)(this.counters_)}}const fr={},Ti={};function Vo(l){const o=l.toString();return fr[o]||(fr[o]=new ms),fr[o]}class ui{constructor(o){this.onMessage_=o,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(o,u){this.closeAfterResponse=o,this.onClose=u,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(o,u){for(this.pendingResponses[o]=u;this.pendingResponses[this.currentResponseNum];){const f=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let y=0;y<f.length;++y)f[y]&&Ji(()=>{this.onMessage_(f[y])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class In{constructor(o,u,f,y,D,N,K){this.connId=o,this.repoInfo=u,this.applicationId=f,this.appCheckToken=y,this.authToken=D,this.transportSessionId=N,this.lastSessionId=K,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Er(o),this.stats_=Vo(u),this.urlFn=ae=>(this.appCheckToken&&(ae.ac=this.appCheckToken),gs(u,bi,ae))}open(o,u){this.curSegmentNum=0,this.onDisconnect_=u,this.myPacketOrderer=new ui(o),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(l){if((0,pe.Yr)()||"complete"===document.readyState)l();else{let o=!1;const u=function(){document.body?o||(o=!0,l()):setTimeout(u,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&u()}),window.attachEvent("onload",u))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new _r((...D)=>{const[N,K,ae,De,nt]=D;if(this.incrementIncomingBytes_(D),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===N)this.id=K,this.password=ae;else{if("close"!==N)throw new Error("Unrecognized command received: "+N);K?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(K,()=>{this.onClosed_()})):this.onClosed_()}},(...D)=>{const[N,K]=D;this.incrementIncomingBytes_(D),this.myPacketOrderer.handleResponse(N,K)},()=>{this.onClosed_()},this.urlFn);const f={start:"t"};f.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(f.cb=this.scriptTagHolder.uniqueCallbackIdentifier),f.v="5",this.transportSessionId&&(f.s=this.transportSessionId),this.lastSessionId&&(f.ls=this.lastSessionId),this.applicationId&&(f.p=this.applicationId),this.appCheckToken&&(f.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&bs.test(location.hostname)&&(f.r="f");const y=this.urlFn(f);this.log_("Connecting via long-poll to "+y),this.scriptTagHolder.addTag(y,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){In.forceAllow_=!0}static forceDisallow(){In.forceDisallow_=!0}static isAvailable(){return!((0,pe.Yr)()||!In.forceAllow_&&(In.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(o){const u=(0,pe.Pz)(o);this.bytesSent+=u.length,this.stats_.incrementCounter("bytes_sent",u.length);const f=(0,pe.h$)(u),y=ai(f,1840);for(let D=0;D<y.length;D++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,y.length,y[D]),this.curSegmentNum++}addDisconnectPingFrame(o,u){if((0,pe.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const f={dframe:"t"};f.id=o,f.pw=u,this.myDisconnFrame.src=this.urlFn(f),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(o){const u=(0,pe.Pz)(o).length;this.bytesReceived+=u,this.stats_.incrementCounter("bytes_received",u)}}class _r{constructor(o,u,f,y){if(this.onDisconnect=f,this.urlFn=y,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,pe.Yr)())this.commandCB=o,this.onMessageCB=u;else{this.uniqueCallbackIdentifier=mi(),window["pLPCommand"+this.uniqueCallbackIdentifier]=o,window["pRTLPCB"+this.uniqueCallbackIdentifier]=u,this.myIFrame=_r.createIFrame_();let D="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(D='<script>document.domain="'+document.domain+'";<\/script>');const N="<html><body>"+D+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(N),this.myIFrame.doc.close()}catch(K){Rr("frame writing exception"),K.stack&&Rr(K.stack),Rr(K)}}}static createIFrame_(){const o=document.createElement("iframe");if(o.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(o);try{o.contentWindow.document||Rr("No IE domain setting required")}catch(u){const f=document.domain;o.src="javascript:void((function(){document.open();document.domain='"+f+"';document.close();})())"}return o.contentDocument?o.doc=o.contentDocument:o.contentWindow?o.doc=o.contentWindow.document:o.document&&(o.doc=o.document),o}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const o=this.onDisconnect;o&&(this.onDisconnect=null,o())}startLongPoll(o,u){for(this.myID=o,this.myPW=u,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const o={};o.id=this.myID,o.pw=this.myPW,o.ser=this.currentSerial;let u=this.urlFn(o),f="",y=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+f.length<=1870;){const N=this.pendingSegs.shift();f=f+"&seg"+y+"="+N.seg+"&ts"+y+"="+N.ts+"&d"+y+"="+N.d,y++}return u+=f,this.addLongPollTag_(u,this.currentSerial),!0}return!1}enqueueSegment(o,u,f){this.pendingSegs.push({seg:o,ts:u,d:f}),this.alive&&this.newRequest_()}addLongPollTag_(o,u){this.outstandingRequests.add(u);const f=()=>{this.outstandingRequests.delete(u),this.newRequest_()},y=setTimeout(f,Math.floor(25e3));this.addTag(o,()=>{clearTimeout(y),f()})}addTag(o,u){(0,pe.Yr)()?this.doNodeLongPoll(o,u):setTimeout(()=>{try{if(!this.sendNewPolls)return;const f=this.myIFrame.doc.createElement("script");f.type="text/javascript",f.async=!0,f.src=o,f.onload=f.onreadystatechange=function(){const y=f.readyState;(!y||"loaded"===y||"complete"===y)&&(f.onload=f.onreadystatechange=null,f.parentNode&&f.parentNode.removeChild(f),u())},f.onerror=()=>{Rr("Long-poll script failed to load: "+o),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(f)}catch(f){}},Math.floor(1))}}let Lr=null;"undefined"!=typeof MozWebSocket?Lr=MozWebSocket:"undefined"!=typeof WebSocket&&(Lr=WebSocket);let wr=(()=>{class l{constructor(u,f,y,D,N,K,ae){this.connId=u,this.applicationId=y,this.appCheckToken=D,this.authToken=N,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Er(this.connId),this.stats_=Vo(f),this.connURL=l.connectionURL_(f,K,ae,D,y),this.nodeAdmin=f.nodeAdmin}static connectionURL_(u,f,y,D,N){const K={v:"5"};return!(0,pe.Yr)()&&"undefined"!=typeof location&&location.hostname&&bs.test(location.hostname)&&(K.r="f"),f&&(K.s=f),y&&(K.ls=y),D&&(K.ac=D),N&&(K.p=N),gs(u,ls,K)}open(u,f){this.onDisconnect=f,this.onMessage=u,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,dr.set("previous_websocket_failure",!0);try{let y;if((0,pe.Yr)()){const N={headers:{"User-Agent":`Firebase/5/${Pt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(N.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(N.headers["X-Firebase-AppCheck"]=this.appCheckToken);const K=process.env,ae=0===this.connURL.indexOf("wss://")?K.HTTPS_PROXY||K.https_proxy:K.HTTP_PROXY||K.http_proxy;ae&&(N.proxy={origin:ae})}this.mySock=new Lr(this.connURL,[],y)}catch(y){this.log_("Error instantiating WebSocket.");const D=y.message||y.data;return D&&this.log_(D),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=y=>{this.handleIncomingFrame(y)},this.mySock.onerror=y=>{this.log_("WebSocket error.  Closing connection.");const D=y.message||y.data;D&&this.log_(D),this.onClosed_()}}start(){}static forceDisallow(){l.forceDisallow_=!0}static isAvailable(){let u=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const y=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);y&&y.length>1&&parseFloat(y[1])<4.4&&(u=!0)}return!u&&null!==Lr&&!l.forceDisallow_}static previouslyFailed(){return dr.isInMemoryStorage||!0===dr.get("previous_websocket_failure")}markConnectionHealthy(){dr.remove("previous_websocket_failure")}appendFrame_(u){if(this.frames.push(u),this.frames.length===this.totalFrames){const f=this.frames.join("");this.frames=null;const y=(0,pe.cI)(f);this.onMessage(y)}}handleNewFrameCount_(u){this.totalFrames=u,this.frames=[]}extractFrameCount_(u){if((0,pe.hu)(null===this.frames,"We already have a frame buffer"),u.length<=6){const f=Number(u);if(!isNaN(f))return this.handleNewFrameCount_(f),null}return this.handleNewFrameCount_(1),u}handleIncomingFrame(u){if(null===this.mySock)return;const f=u.data;if(this.bytesReceived+=f.length,this.stats_.incrementCounter("bytes_received",f.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(f);else{const y=this.extractFrameCount_(f);null!==y&&this.appendFrame_(y)}}send(u){this.resetKeepAlive();const f=(0,pe.Pz)(u);this.bytesSent+=f.length,this.stats_.incrementCounter("bytes_sent",f.length);const y=ai(f,16384);y.length>1&&this.sendString_(String(y.length));for(let D=0;D<y.length;D++)this.sendString_(y[D])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(u){try{this.mySock.send(u)}catch(f){this.log_("Exception thrown from WebSocket.send():",f.message||f.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return l.responsesRequiredToBeHealthy=2,l.healthyTimeout=3e4,l})(),Nr=(()=>{class l{constructor(u){this.initTransports_(u)}static get ALL_TRANSPORTS(){return[In,wr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(u){const f=wr&&wr.isAvailable();let y=f&&!wr.previouslyFailed();if(u.webSocketOnly&&(f||le("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),y=!0),y)this.transports_=[wr];else{const D=this.transports_=[];for(const N of l.ALL_TRANSPORTS)N&&N.isAvailable()&&D.push(N);l.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return l.globalTransportInitialized_=!1,l})();class yr{constructor(o,u,f,y,D,N,K,ae,De,nt){this.id=o,this.repoInfo_=u,this.applicationId_=f,this.appCheckToken_=y,this.authToken_=D,this.onMessage_=N,this.onReady_=K,this.onDisconnect_=ae,this.onKill_=De,this.lastSessionId=nt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Er("c:"+this.id+":"),this.transportManager_=new Nr(u),this.log_("Connection created"),this.start_()}start_(){const o=this.transportManager_.initialTransport();this.conn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.conn_),f=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(u,f)},Math.floor(0));const y=o.healthyTimeout||0;y>0&&(this.healthyTimeout_=fs(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(y)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(o){return u=>{o===this.conn_?this.onConnectionLost_(u):o===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(o){return u=>{2!==this.state_&&(o===this.rx_?this.onPrimaryMessageReceived_(u):o===this.secondaryConn_?this.onSecondaryMessageReceived_(u):this.log_("message on old connection"))}}sendRequest(o){this.sendData_({t:"d",d:o})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(o){if("t"in o){const u=o.t;"a"===u?this.upgradeIfSecondaryHealthy_():"r"===u?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===u&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(o){const u=gn("t",o),f=gn("d",o);if("c"===u)this.onSecondaryControl_(f);else{if("d"!==u)throw new Error("Unknown protocol layer: "+u);this.pendingDataMessages.push(f)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(o){const u=gn("t",o),f=gn("d",o);"c"===u?this.onControl_(f):"d"===u&&this.onDataMessage_(f)}onDataMessage_(o){this.onPrimaryResponse_(),this.onMessage_(o)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(o){const u=gn("t",o);if("d"in o){const f=o.d;if("h"===u)this.onHandshake_(f);else if("n"===u){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let y=0;y<this.pendingDataMessages.length;++y)this.onDataMessage_(this.pendingDataMessages[y]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===u?this.onConnectionShutdown_(f):"r"===u?this.onReset_(f):"e"===u?Jr("Server Error: "+f):"o"===u?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Jr("Unknown control packet command: "+u)}}onHandshake_(o){const u=o.ts,f=o.v,y=o.h;this.sessionId=o.s,this.repoInfo_.host=y,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,u),"5"!==f&&le("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const o=this.transportManager_.upgradeTransport();o&&this.startUpgrade_(o)}startUpgrade_(o){this.secondaryConn_=new o(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=o.responsesRequiredToBeHealthy||0;const u=this.connReceiver_(this.secondaryConn_),f=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(u,f),fs(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(o){this.log_("Reset packet received.  New host: "+o),this.repoInfo_.host=o,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(o,u){this.log_("Realtime connection established."),this.conn_=o,this.state_=1,this.onReady_&&(this.onReady_(u,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fs(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const o=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===o||this.rx_===o)&&this.close()}onConnectionLost_(o){this.conn_=null,o||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(dr.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(o){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(o),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(o){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(o)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Es{put(o,u,f,y){}merge(o,u,f,y){}refreshAuthToken(o){}refreshAppCheckToken(o){}onDisconnectPut(o,u,f){}onDisconnectMerge(o,u,f){}onDisconnectCancel(o,u){}reportStats(o){}}class cs{constructor(o){this.allowedEvents_=o,this.listeners_={},(0,pe.hu)(Array.isArray(o)&&o.length>0,"Requires a non-empty array")}trigger(o,...u){if(Array.isArray(this.listeners_[o])){const f=[...this.listeners_[o]];for(let y=0;y<f.length;y++)f[y].callback.apply(f[y].context,u)}}on(o,u,f){this.validateEventType_(o),this.listeners_[o]=this.listeners_[o]||[],this.listeners_[o].push({callback:u,context:f});const y=this.getInitialEvent(o);y&&u.apply(f,y)}off(o,u,f){this.validateEventType_(o);const y=this.listeners_[o]||[];for(let D=0;D<y.length;D++)if(y[D].callback===u&&(!f||f===y[D].context))return void y.splice(D,1)}validateEventType_(o){(0,pe.hu)(this.allowedEvents_.find(u=>u===o),"Unknown event: "+o)}}class Ui extends cs{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,pe.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ui}getInitialEvent(o){return(0,pe.hu)("online"===o,"Unknown event type: "+o),[this.online_]}currentlyOnline(){return this.online_}}class Ur{constructor(o,u){if(void 0===u){this.pieces_=o.split("/");let f=0;for(let y=0;y<this.pieces_.length;y++)this.pieces_[y].length>0&&(this.pieces_[f]=this.pieces_[y],f++);this.pieces_.length=f,this.pieceNum_=0}else this.pieces_=o,this.pieceNum_=u}toString(){let o="";for(let u=this.pieceNum_;u<this.pieces_.length;u++)""!==this.pieces_[u]&&(o+="/"+this.pieces_[u]);return o||"/"}}function Mr(){return new Ur("")}function $n(l){return l.pieceNum_>=l.pieces_.length?null:l.pieces_[l.pieceNum_]}function As(l){return l.pieces_.length-l.pieceNum_}function tr(l){let o=l.pieceNum_;return o<l.pieces_.length&&o++,new Ur(l.pieces_,o)}function Ss(l){return l.pieceNum_<l.pieces_.length?l.pieces_[l.pieces_.length-1]:null}function ho(l,o=0){return l.pieces_.slice(l.pieceNum_+o)}function ts(l){if(l.pieceNum_>=l.pieces_.length)return null;const o=[];for(let u=l.pieceNum_;u<l.pieces_.length-1;u++)o.push(l.pieces_[u]);return new Ur(o,0)}function ni(l,o){const u=[];for(let f=l.pieceNum_;f<l.pieces_.length;f++)u.push(l.pieces_[f]);if(o instanceof Ur)for(let f=o.pieceNum_;f<o.pieces_.length;f++)u.push(o.pieces_[f]);else{const f=o.split("/");for(let y=0;y<f.length;y++)f[y].length>0&&u.push(f[y])}return new Ur(u,0)}function Zn(l){return l.pieceNum_>=l.pieces_.length}function Wi(l,o){const u=$n(l),f=$n(o);if(null===u)return o;if(u===f)return Wi(tr(l),tr(o));throw new Error("INTERNAL ERROR: innerPath ("+o+") is not within outerPath ("+l+")")}function Qo(l,o){const u=ho(l,0),f=ho(o,0);for(let y=0;y<u.length&&y<f.length;y++){const D=yn(u[y],f[y]);if(0!==D)return D}return u.length===f.length?0:u.length<f.length?-1:1}function Ha(l,o){if(As(l)!==As(o))return!1;for(let u=l.pieceNum_,f=o.pieceNum_;u<=l.pieces_.length;u++,f++)if(l.pieces_[u]!==o.pieces_[f])return!1;return!0}function Ai(l,o){let u=l.pieceNum_,f=o.pieceNum_;if(As(l)>As(o))return!1;for(;u<l.pieces_.length;){if(l.pieces_[u]!==o.pieces_[f])return!1;++u,++f}return!0}class Ga{constructor(o,u){this.errorPrefix_=u,this.parts_=ho(o,0),this.byteLength_=Math.max(1,this.parts_.length);for(let f=0;f<this.parts_.length;f++)this.byteLength_+=(0,pe.ug)(this.parts_[f]);jo(this)}}function jo(l){if(l.byteLength_>768)throw new Error(l.errorPrefix_+"has a key path longer than 768 bytes ("+l.byteLength_+").");if(l.parts_.length>32)throw new Error(l.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Rs(l))}function Rs(l){return 0===l.parts_.length?"":"in property '"+l.parts_.join(".")+"'"}class Ao extends cs{constructor(){let o,u;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(u="visibilitychange",o="hidden"):void 0!==document.mozHidden?(u="mozvisibilitychange",o="mozHidden"):void 0!==document.msHidden?(u="msvisibilitychange",o="msHidden"):void 0!==document.webkitHidden&&(u="webkitvisibilitychange",o="webkitHidden")),this.visible_=!0,u&&document.addEventListener(u,()=>{const f=!document[o];f!==this.visible_&&(this.visible_=f,this.trigger("visible",f))},!1)}static getInstance(){return new Ao}getInitialEvent(o){return(0,pe.hu)("visible"===o,"Unknown event type: "+o),[this.visible_]}}const So=1e3;let _u,qr=(()=>{class l extends Es{constructor(u,f,y,D,N,K,ae,De){if(super(),this.repoInfo_=u,this.applicationId_=f,this.onDataUpdate_=y,this.onConnectStatus_=D,this.onServerInfoUpdate_=N,this.authTokenProvider_=K,this.appCheckTokenProvider_=ae,this.authOverride_=De,this.id=l.nextPersistentConnectionId_++,this.log_=Er("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=So,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,De&&!(0,pe.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ao.getInstance().on("visible",this.onVisible_,this),-1===u.host.indexOf("fblocal")&&Ui.getInstance().on("online",this.onOnline_,this)}sendRequest(u,f,y){const D=++this.requestNumber_,N={r:D,a:u,b:f};this.log_((0,pe.Pz)(N)),(0,pe.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(N),y&&(this.requestCBHash_[D]=y)}get(u){this.initConnection_();const f=new pe.BH,y={p:u._path.toString(),q:u._queryObject},D={action:"g",request:y,onComplete:K=>{const ae=K.d;"ok"===K.s?(this.onDataUpdate_(y.p,ae,!1,null),f.resolve(ae)):f.reject(ae)}};this.outstandingGets_.push(D),this.outstandingGetCount_++;const N=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const K=this.outstandingGets_[N];void 0===K||D!==K||(delete this.outstandingGets_[N],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+N+" timed out on connection"),f.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(N),f.promise}listen(u,f,y,D){this.initConnection_();const N=u._queryIdentifier,K=u._path.toString();this.log_("Listen called for "+K+" "+N),this.listens.has(K)||this.listens.set(K,new Map),(0,pe.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,pe.hu)(!this.listens.get(K).has(N),"listen() called twice for same path/queryId.");const ae={onComplete:D,hashFn:f,query:u,tag:y};this.listens.get(K).set(N,ae),this.connected_&&this.sendListen_(ae)}sendGet_(u){const f=this.outstandingGets_[u];this.sendRequest("g",f.request,y=>{delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),f.onComplete&&f.onComplete(y)})}sendListen_(u){const f=u.query,y=f._path.toString(),D=f._queryIdentifier;this.log_("Listen on "+y+" for "+D);const N={p:y};u.tag&&(N.q=f._queryObject,N.t=u.tag),N.h=u.hashFn(),this.sendRequest("q",N,ae=>{const De=ae.d,nt=ae.s;l.warnOnListenWarnings_(De,f),(this.listens.get(y)&&this.listens.get(y).get(D))===u&&(this.log_("listen response",ae),"ok"!==nt&&this.removeListen_(y,D),u.onComplete&&u.onComplete(nt,De))})}static warnOnListenWarnings_(u,f){if(u&&"object"==typeof u&&(0,pe.r3)(u,"w")){const y=(0,pe.DV)(u,"w");if(Array.isArray(y)&&~y.indexOf("no_index")){const D='".indexOn": "'+f._queryParams.getIndex().toString()+'"',N=f._path.toString();le(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${D} at ${N} to your security rules for better performance.`)}}}refreshAuthToken(u){this.authToken_=u,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(u)}reduceReconnectDelayIfAdminCredential_(u){(u&&40===u.length||(0,pe.GJ)(u))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(u){this.appCheckToken_=u,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const u=this.authToken_,f=(0,pe.w9)(u)?"auth":"gauth",y={cred:u};null===this.authOverride_?y.noauth=!0:"object"==typeof this.authOverride_&&(y.authvar=this.authOverride_),this.sendRequest(f,y,D=>{const N=D.s,K=D.d||"error";this.authToken_===u&&("ok"===N?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(N,K))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},u=>{const f=u.s,y=u.d||"error";"ok"===f?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(f,y)})}unlisten(u,f){const y=u._path.toString(),D=u._queryIdentifier;this.log_("Unlisten called for "+y+" "+D),(0,pe.hu)(u._queryParams.isDefault()||!u._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(y,D)&&this.connected_&&this.sendUnlisten_(y,D,u._queryObject,f)}sendUnlisten_(u,f,y,D){this.log_("Unlisten on "+u+" for "+f);const N={p:u};D&&(N.q=y,N.t=D),this.sendRequest("n",N)}onDisconnectPut(u,f,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",u,f,y):this.onDisconnectRequestQueue_.push({pathString:u,action:"o",data:f,onComplete:y})}onDisconnectMerge(u,f,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",u,f,y):this.onDisconnectRequestQueue_.push({pathString:u,action:"om",data:f,onComplete:y})}onDisconnectCancel(u,f){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",u,null,f):this.onDisconnectRequestQueue_.push({pathString:u,action:"oc",data:null,onComplete:f})}sendOnDisconnect_(u,f,y,D){const N={p:f,d:y};this.log_("onDisconnect "+u,N),this.sendRequest(u,N,K=>{D&&setTimeout(()=>{D(K.s,K.d)},Math.floor(0))})}put(u,f,y,D){this.putInternal("p",u,f,y,D)}merge(u,f,y,D){this.putInternal("m",u,f,y,D)}putInternal(u,f,y,D,N){this.initConnection_();const K={p:f,d:y};void 0!==N&&(K.h=N),this.outstandingPuts_.push({action:u,request:K,onComplete:D}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+f)}sendPut_(u){const f=this.outstandingPuts_[u].action,y=this.outstandingPuts_[u].request,D=this.outstandingPuts_[u].onComplete;this.outstandingPuts_[u].queued=this.connected_,this.sendRequest(f,y,N=>{this.log_(f+" response",N),delete this.outstandingPuts_[u],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),D&&D(N.s,N.d)})}reportStats(u){if(this.connected_){const f={c:u};this.log_("reportStats",f),this.sendRequest("s",f,y=>{"ok"!==y.s&&this.log_("reportStats","Error sending stats: "+y.d)})}}onDataMessage_(u){if("r"in u){this.log_("from server: "+(0,pe.Pz)(u));const f=u.r,y=this.requestCBHash_[f];y&&(delete this.requestCBHash_[f],y(u.b))}else{if("error"in u)throw"A server-side error has occurred: "+u.error;"a"in u&&this.onDataPush_(u.a,u.b)}}onDataPush_(u,f){this.log_("handleServerMessage",u,f),"d"===u?this.onDataUpdate_(f.p,f.d,!1,f.t):"m"===u?this.onDataUpdate_(f.p,f.d,!0,f.t):"c"===u?this.onListenRevoked_(f.p,f.q):"ac"===u?this.onAuthRevoked_(f.s,f.d):"apc"===u?this.onAppCheckRevoked_(f.s,f.d):"sd"===u?this.onSecurityDebugPacket_(f):Jr("Unrecognized action received from server: "+(0,pe.Pz)(u)+"\nAre you using the latest client?")}onReady_(u,f){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(u),this.lastSessionId=f,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(u){(0,pe.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(u))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(u){u&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=So,this.realtime_||this.scheduleConnect_(0)),this.visible_=u}onOnline_(u){u?(this.log_("Browser went online."),this.reconnectDelay_=So,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=So),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const u=(new Date).getTime()-this.lastConnectionAttemptTime_;let f=Math.max(0,this.reconnectDelay_-u);f=Math.random()*f,this.log_("Trying to reconnect in "+f+"ms"),this.scheduleConnect_(f),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var u=this;return(0,Gn.Z)(function*(){if(u.shouldReconnect_()){u.log_("Making a connection attempt"),u.lastConnectionAttemptTime_=(new Date).getTime(),u.lastConnectionEstablishedTime_=null;const f=u.onDataMessage_.bind(u),y=u.onReady_.bind(u),D=u.onRealtimeDisconnect_.bind(u),N=u.id+":"+l.nextConnectionId_++,K=u.lastSessionId;let ae=!1,De=null;const nt=function(){De?De.close():(ae=!0,D())};u.realtime_={close:nt,sendRequest:function(zt){(0,pe.hu)(De,"sendRequest call when we're not connected not allowed."),De.sendRequest(zt)}};const Dt=u.forceTokenRefresh_;u.forceTokenRefresh_=!1;try{const[zt,dn]=yield Promise.all([u.authTokenProvider_.getToken(Dt),u.appCheckTokenProvider_.getToken(Dt)]);ae?Rr("getToken() completed but was canceled"):(Rr("getToken() completed. Creating connection."),u.authToken_=zt&&zt.accessToken,u.appCheckToken_=dn&&dn.token,De=new yr(N,u.repoInfo_,u.applicationId_,u.appCheckToken_,u.authToken_,f,y,D,Tr=>{le(Tr+" ("+u.repoInfo_.toString()+")"),u.interrupt("server_kill")},K))}catch(zt){u.log_("Failed to get token: "+zt),ae||(u.repoInfo_.nodeAdmin&&le(zt),nt())}}})()}interrupt(u){Rr("Interrupting connection for reason: "+u),this.interruptReasons_[u]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(u){Rr("Resuming connection for reason: "+u),delete this.interruptReasons_[u],(0,pe.xb)(this.interruptReasons_)&&(this.reconnectDelay_=So,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(u){const f=u-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:f})}cancelSentTransactions_(){for(let u=0;u<this.outstandingPuts_.length;u++){const f=this.outstandingPuts_[u];f&&"h"in f.request&&f.queued&&(f.onComplete&&f.onComplete("disconnect"),delete this.outstandingPuts_[u],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(u,f){let y;y=f?f.map(N=>Sn(N)).join("$"):"default";const D=this.removeListen_(u,y);D&&D.onComplete&&D.onComplete("permission_denied")}removeListen_(u,f){const y=new Ur(u).toString();let D;if(this.listens.has(y)){const N=this.listens.get(y);D=N.get(f),N.delete(f),0===N.size&&this.listens.delete(y)}else D=void 0;return D}onAuthRevoked_(u,f){Rr("Auth token revoked: "+u+"/"+f),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===u||"permission_denied"===u)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(u,f){Rr("App check token revoked: "+u+"/"+f),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===u||"permission_denied"===u)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(u){this.securityDebugCallback_?this.securityDebugCallback_(u):"msg"in u&&console.log("FIREBASE: "+u.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const u of this.listens.values())for(const f of u.values())this.sendListen_(f);for(let u=0;u<this.outstandingPuts_.length;u++)this.outstandingPuts_[u]&&this.sendPut_(u);for(;this.onDisconnectRequestQueue_.length;){const u=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(u.action,u.pathString,u.data,u.onComplete)}for(let u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}sendConnectStats_(){const u={};let f="js";(0,pe.Yr)()&&(f=this.repoInfo_.nodeAdmin?"admin_node":"node"),u["sdk."+f+"."+Pt.replace(/\./g,"-")]=1,(0,pe.uI)()?u["framework.cordova"]=1:(0,pe.b$)()&&(u["framework.reactnative"]=1),this.reportStats(u)}shouldReconnect_(){const u=Ui.getInstance().currentlyOnline();return(0,pe.xb)(this.interruptReasons_)&&u}}return l.nextPersistentConnectionId_=0,l.nextConnectionId_=0,l})();class Rn{constructor(o,u){this.name=o,this.node=u}static Wrap(o,u){return new Rn(o,u)}}class mu{getCompare(){return this.compare.bind(this)}indexedValueChanged(o,u){const f=new Rn(qe,o),y=new Rn(qe,u);return 0!==this.compare(f,y)}minPost(){return Rn.MIN}}class $o extends mu{static get __EMPTY_NODE(){return _u}static set __EMPTY_NODE(o){_u=o}compare(o,u){return yn(o.name,u.name)}isDefinedOn(o){throw(0,pe.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(o,u){return!1}minPost(){return Rn.MIN}maxPost(){return new Rn(Rt,_u)}makePost(o,u){return(0,pe.hu)("string"==typeof o,"KeyIndex indexValue must always be a string."),new Rn(o,_u)}toString(){return".key"}}const Wo=new $o;class Ta{constructor(o,u,f,y,D=null){this.isReverse_=y,this.resultGenerator_=D,this.nodeStack_=[];let N=1;for(;!o.isEmpty();)if(o=o,N=u?f(o.key,u):1,y&&(N*=-1),N<0)o=this.isReverse_?o.left:o.right;else{if(0===N){this.nodeStack_.push(o);break}this.nodeStack_.push(o),o=this.isReverse_?o.right:o.left}}getNext(){if(0===this.nodeStack_.length)return null;let u,o=this.nodeStack_.pop();if(u=this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value},this.isReverse_)for(o=o.left;!o.isEmpty();)this.nodeStack_.push(o),o=o.right;else for(o=o.right;!o.isEmpty();)this.nodeStack_.push(o),o=o.left;return u}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const o=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(o.key,o.value):{key:o.key,value:o.value}}}let da,pi=(()=>{class l{constructor(u,f,y,D,N){this.key=u,this.value=f,this.color=null!=y?y:l.RED,this.left=null!=D?D:Hi.EMPTY_NODE,this.right=null!=N?N:Hi.EMPTY_NODE}copy(u,f,y,D,N){return new l(null!=u?u:this.key,null!=f?f:this.value,null!=y?y:this.color,null!=D?D:this.left,null!=N?N:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(u){return this.left.inorderTraversal(u)||!!u(this.key,this.value)||this.right.inorderTraversal(u)}reverseTraversal(u){return this.right.reverseTraversal(u)||u(this.key,this.value)||this.left.reverseTraversal(u)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(u,f,y){let D=this;const N=y(u,D.key);return D=N<0?D.copy(null,null,null,D.left.insert(u,f,y),null):0===N?D.copy(null,f,null,null,null):D.copy(null,null,null,null,D.right.insert(u,f,y)),D.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hi.EMPTY_NODE;let u=this;return!u.left.isRed_()&&!u.left.left.isRed_()&&(u=u.moveRedLeft_()),u=u.copy(null,null,null,u.left.removeMin_(),null),u.fixUp_()}remove(u,f){let y,D;if(y=this,f(u,y.key)<0)!y.left.isEmpty()&&!y.left.isRed_()&&!y.left.left.isRed_()&&(y=y.moveRedLeft_()),y=y.copy(null,null,null,y.left.remove(u,f),null);else{if(y.left.isRed_()&&(y=y.rotateRight_()),!y.right.isEmpty()&&!y.right.isRed_()&&!y.right.left.isRed_()&&(y=y.moveRedRight_()),0===f(u,y.key)){if(y.right.isEmpty())return Hi.EMPTY_NODE;D=y.right.min_(),y=y.copy(D.key,D.value,null,null,y.right.removeMin_())}y=y.copy(null,null,null,null,y.right.remove(u,f))}return y.fixUp_()}isRed_(){return this.color}fixUp_(){let u=this;return u.right.isRed_()&&!u.left.isRed_()&&(u=u.rotateLeft_()),u.left.isRed_()&&u.left.left.isRed_()&&(u=u.rotateRight_()),u.left.isRed_()&&u.right.isRed_()&&(u=u.colorFlip_()),u}moveRedLeft_(){let u=this.colorFlip_();return u.right.left.isRed_()&&(u=u.copy(null,null,null,null,u.right.rotateRight_()),u=u.rotateLeft_(),u=u.colorFlip_()),u}moveRedRight_(){let u=this.colorFlip_();return u.left.left.isRed_()&&(u=u.rotateRight_(),u=u.colorFlip_()),u}rotateLeft_(){const u=this.copy(null,null,l.RED,null,this.right.left);return this.right.copy(null,null,this.color,u,null)}rotateRight_(){const u=this.copy(null,null,l.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,u)}colorFlip_(){const u=this.left.copy(null,null,!this.left.color,null,null),f=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,u,f)}checkMaxDepth_(){const u=this.check_();return Math.pow(2,u)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const u=this.left.check_();if(u!==this.right.check_())throw new Error("Black depths differ");return u+(this.isRed_()?0:1)}}return l.RED=!0,l.BLACK=!1,l})();class Hi{constructor(o,u=Hi.EMPTY_NODE){this.comparator_=o,this.root_=u}insert(o,u){return new Hi(this.comparator_,this.root_.insert(o,u,this.comparator_).copy(null,null,pi.BLACK,null,null))}remove(o){return new Hi(this.comparator_,this.root_.remove(o,this.comparator_).copy(null,null,pi.BLACK,null,null))}get(o){let u,f=this.root_;for(;!f.isEmpty();){if(u=this.comparator_(o,f.key),0===u)return f.value;u<0?f=f.left:u>0&&(f=f.right)}return null}getPredecessorKey(o){let u,f=this.root_,y=null;for(;!f.isEmpty();){if(u=this.comparator_(o,f.key),0===u){if(f.left.isEmpty())return y?y.key:null;for(f=f.left;!f.right.isEmpty();)f=f.right;return f.key}u<0?f=f.left:u>0&&(y=f,f=f.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(o){return this.root_.inorderTraversal(o)}reverseTraversal(o){return this.root_.reverseTraversal(o)}getIterator(o){return new Ta(this.root_,null,this.comparator_,!1,o)}getIteratorFrom(o,u){return new Ta(this.root_,o,this.comparator_,!1,u)}getReverseIteratorFrom(o,u){return new Ta(this.root_,o,this.comparator_,!0,u)}getReverseIterator(o){return new Ta(this.root_,null,this.comparator_,!0,o)}}function kr(l,o){return yn(l.name,o.name)}function Ka(l,o){return yn(l,o)}Hi.EMPTY_NODE=new class Aa{copy(o,u,f,y,D){return this}insert(o,u,f){return new pi(o,u,null)}remove(o,u){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(o){return!1}reverseTraversal(o){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zs=function(l){return"number"==typeof l?"number:"+os(l):"string:"+l},li=function(l){if(l.isLeafNode()){const o=l.val();(0,pe.hu)("string"==typeof o||"number"==typeof o||"object"==typeof o&&(0,pe.r3)(o,".sv"),"Priority must be a string or number.")}else(0,pe.hu)(l===da||l.isEmpty(),"priority of unexpected type.");(0,pe.hu)(l===da||l.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Ro,ha,ml,Si=(()=>{class l{constructor(u,f=l.__childrenNodeConstructor.EMPTY_NODE){this.value_=u,this.priorityNode_=f,this.lazyHash_=null,(0,pe.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),li(this.priorityNode_)}static set __childrenNodeConstructor(u){Ro=u}static get __childrenNodeConstructor(){return Ro}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(u){return new l(this.value_,u)}getImmediateChild(u){return".priority"===u?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}getChild(u){return Zn(u)?this:".priority"===$n(u)?this.priorityNode_:l.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(u,f){return null}updateImmediateChild(u,f){return".priority"===u?this.updatePriority(f):f.isEmpty()&&".priority"!==u?this:l.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(u,f).updatePriority(this.priorityNode_)}updateChild(u,f){const y=$n(u);return null===y?f:f.isEmpty()&&".priority"!==y?this:((0,pe.hu)(".priority"!==y||1===As(u),".priority must be the last token in a path"),this.updateImmediateChild(y,l.__childrenNodeConstructor.EMPTY_NODE.updateChild(tr(u),f)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(u,f){return!1}val(u){return u&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let u="";this.priorityNode_.isEmpty()||(u+="priority:"+zs(this.priorityNode_.val())+":");const f=typeof this.value_;u+=f+":",u+="number"===f?os(this.value_):this.value_,this.lazyHash_=Pr(u)}return this.lazyHash_}getValue(){return this.value_}compareTo(u){return u===l.__childrenNodeConstructor.EMPTY_NODE?1:u instanceof l.__childrenNodeConstructor?-1:((0,pe.hu)(u.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(u))}compareToLeafNode_(u){const f=typeof u.value_,y=typeof this.value_,D=l.VALUE_TYPE_ORDER.indexOf(f),N=l.VALUE_TYPE_ORDER.indexOf(y);return(0,pe.hu)(D>=0,"Unknown leaf type: "+f),(0,pe.hu)(N>=0,"Unknown leaf type: "+y),D===N?"object"===y?0:this.value_<u.value_?-1:this.value_===u.value_?0:1:N-D}withIndex(){return this}isIndexed(){return!0}equals(u){if(u===this)return!0;if(u.isLeafNode()){const f=u;return this.value_===f.value_&&this.priorityNode_.equals(f.priorityNode_)}return!1}}return l.VALUE_TYPE_ORDER=["object","boolean","number","string"],l})();const Zr=new class Bi extends mu{compare(o,u){const f=o.node.getPriority(),y=u.node.getPriority(),D=f.compareTo(y);return 0===D?yn(o.name,u.name):D}isDefinedOn(o){return!o.getPriority().isEmpty()}indexedValueChanged(o,u){return!o.getPriority().equals(u.getPriority())}minPost(){return Rn.MIN}maxPost(){return new Rn(Rt,new Si("[PRIORITY-POST]",ml))}makePost(o,u){const f=ha(o);return new Rn(u,new Si("[PRIORITY-POST]",f))}toString(){return".priority"}},tn=Math.log(2);class Vn{constructor(o){this.count=parseInt(Math.log(o+1)/tn,10),this.current_=this.count-1;const y=(D=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=o+1&y}nextBitIsOne(){const o=!(this.bits_&1<<this.current_);return this.current_--,o}}const Xo=function(l,o,u,f){l.sort(o);const y=function(ae,De){const nt=De-ae;let lt,Dt;if(0===nt)return null;if(1===nt)return lt=l[ae],Dt=u?u(lt):lt,new pi(Dt,lt.node,pi.BLACK,null,null);{const zt=parseInt(nt/2,10)+ae,dn=y(ae,zt),Tr=y(zt+1,De);return lt=l[zt],Dt=u?u(lt):lt,new pi(Dt,lt.node,pi.BLACK,dn,Tr)}},K=function(ae){let De=null,nt=null,lt=l.length;const Dt=function(dn,Tr){const Br=lt-dn,so=lt;lt-=dn;const oo=y(Br+1,so),hs=l[Br],ao=u?u(hs):hs;zt(new pi(ao,hs.node,Tr,null,oo))},zt=function(dn){De?(De.left=dn,De=dn):(nt=dn,De=dn)};for(let dn=0;dn<ae.count;++dn){const Tr=ae.nextBitIsOne(),Br=Math.pow(2,ae.count-(dn+1));Tr?Dt(Br,pi.BLACK):(Dt(Br,pi.BLACK),Dt(Br,pi.RED))}return nt}(new Vn(l.length));return new Hi(f||o,K)};let Kt;const pt={};class It{constructor(o,u){this.indexes_=o,this.indexSet_=u}static get Default(){return(0,pe.hu)(pt&&Zr,"ChildrenNode.ts has not been loaded"),Kt=Kt||new It({".priority":pt},{".priority":Zr}),Kt}get(o){const u=(0,pe.DV)(this.indexes_,o);if(!u)throw new Error("No index defined for "+o);return u instanceof Hi?u:null}hasIndex(o){return(0,pe.r3)(this.indexSet_,o.toString())}addIndex(o,u){(0,pe.hu)(o!==Wo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const f=[];let y=!1;const D=u.getIterator(Rn.Wrap);let K,N=D.getNext();for(;N;)y=y||o.isDefinedOn(N.node),f.push(N),N=D.getNext();K=y?Xo(f,o.getCompare()):pt;const ae=o.toString(),De=Object.assign({},this.indexSet_);De[ae]=o;const nt=Object.assign({},this.indexes_);return nt[ae]=K,new It(nt,De)}addToIndexes(o,u){const f=(0,pe.UI)(this.indexes_,(y,D)=>{const N=(0,pe.DV)(this.indexSet_,D);if((0,pe.hu)(N,"Missing index implementation for "+D),y===pt){if(N.isDefinedOn(o.node)){const K=[],ae=u.getIterator(Rn.Wrap);let De=ae.getNext();for(;De;)De.name!==o.name&&K.push(De),De=ae.getNext();return K.push(o),Xo(K,N.getCompare())}return pt}{const K=u.get(o.name);let ae=y;return K&&(ae=ae.remove(new Rn(o.name,K))),ae.insert(o,o.node)}});return new It(f,this.indexSet_)}removeFromIndexes(o,u){const f=(0,pe.UI)(this.indexes_,y=>{if(y===pt)return y;{const D=u.get(o.name);return D?y.remove(new Rn(o.name,D)):y}});return new It(f,this.indexSet_)}}let _i,On=(()=>{class l{constructor(u,f,y){this.children_=u,this.priorityNode_=f,this.indexMap_=y,this.lazyHash_=null,this.priorityNode_&&li(this.priorityNode_),this.children_.isEmpty()&&(0,pe.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _i||(_i=new l(new Hi(Ka),null,It.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_i}updatePriority(u){return this.children_.isEmpty()?this:new l(this.children_,u,this.indexMap_)}getImmediateChild(u){if(".priority"===u)return this.getPriority();{const f=this.children_.get(u);return null===f?_i:f}}getChild(u){const f=$n(u);return null===f?this:this.getImmediateChild(f).getChild(tr(u))}hasChild(u){return null!==this.children_.get(u)}updateImmediateChild(u,f){if((0,pe.hu)(f,"We should always be passing snapshot nodes"),".priority"===u)return this.updatePriority(f);{const y=new Rn(u,f);let D,N;f.isEmpty()?(D=this.children_.remove(u),N=this.indexMap_.removeFromIndexes(y,this.children_)):(D=this.children_.insert(u,f),N=this.indexMap_.addToIndexes(y,this.children_));const K=D.isEmpty()?_i:this.priorityNode_;return new l(D,K,N)}}updateChild(u,f){const y=$n(u);if(null===y)return f;{(0,pe.hu)(".priority"!==$n(u)||1===As(u),".priority must be the last token in a path");const D=this.getImmediateChild(y).updateChild(tr(u),f);return this.updateImmediateChild(y,D)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(u){if(this.isEmpty())return null;const f={};let y=0,D=0,N=!0;if(this.forEachChild(Zr,(K,ae)=>{f[K]=ae.val(u),y++,N&&l.INTEGER_REGEXP_.test(K)?D=Math.max(D,Number(K)):N=!1}),!u&&N&&D<2*y){const K=[];for(const ae in f)K[ae]=f[ae];return K}return u&&!this.getPriority().isEmpty()&&(f[".priority"]=this.getPriority().val()),f}hash(){if(null===this.lazyHash_){let u="";this.getPriority().isEmpty()||(u+="priority:"+zs(this.getPriority().val())+":"),this.forEachChild(Zr,(f,y)=>{const D=y.hash();""!==D&&(u+=":"+f+":"+D)}),this.lazyHash_=""===u?"":Pr(u)}return this.lazyHash_}getPredecessorChildName(u,f,y){const D=this.resolveIndex_(y);if(D){const N=D.getPredecessorKey(new Rn(u,f));return N?N.name:null}return this.children_.getPredecessorKey(u)}getFirstChildName(u){const f=this.resolveIndex_(u);if(f){const y=f.minKey();return y&&y.name}return this.children_.minKey()}getFirstChild(u){const f=this.getFirstChildName(u);return f?new Rn(f,this.children_.get(f)):null}getLastChildName(u){const f=this.resolveIndex_(u);if(f){const y=f.maxKey();return y&&y.name}return this.children_.maxKey()}getLastChild(u){const f=this.getLastChildName(u);return f?new Rn(f,this.children_.get(f)):null}forEachChild(u,f){const y=this.resolveIndex_(u);return y?y.inorderTraversal(D=>f(D.name,D.node)):this.children_.inorderTraversal(f)}getIterator(u){return this.getIteratorFrom(u.minPost(),u)}getIteratorFrom(u,f){const y=this.resolveIndex_(f);if(y)return y.getIteratorFrom(u,D=>D);{const D=this.children_.getIteratorFrom(u.name,Rn.Wrap);let N=D.peek();for(;null!=N&&f.compare(N,u)<0;)D.getNext(),N=D.peek();return D}}getReverseIterator(u){return this.getReverseIteratorFrom(u.maxPost(),u)}getReverseIteratorFrom(u,f){const y=this.resolveIndex_(f);if(y)return y.getReverseIteratorFrom(u,D=>D);{const D=this.children_.getReverseIteratorFrom(u.name,Rn.Wrap);let N=D.peek();for(;null!=N&&f.compare(N,u)>0;)D.getNext(),N=D.peek();return D}}compareTo(u){return this.isEmpty()?u.isEmpty()?0:-1:u.isLeafNode()||u.isEmpty()?1:u===Ks?-1:0}withIndex(u){if(u===Wo||this.indexMap_.hasIndex(u))return this;{const f=this.indexMap_.addIndex(u,this.children_);return new l(this.children_,this.priorityNode_,f)}}isIndexed(u){return u===Wo||this.indexMap_.hasIndex(u)}equals(u){if(u===this)return!0;if(u.isLeafNode())return!1;{const f=u;if(this.getPriority().equals(f.getPriority())){if(this.children_.count()===f.children_.count()){const y=this.getIterator(Zr),D=f.getIterator(Zr);let N=y.getNext(),K=D.getNext();for(;N&&K;){if(N.name!==K.name||!N.node.equals(K.node))return!1;N=y.getNext(),K=D.getNext()}return null===N&&null===K}return!1}return!1}}resolveIndex_(u){return u===Wo?null:this.indexMap_.get(u.toString())}}return l.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,l})();const Ks=new class qa extends On{constructor(){super(new Hi(Ka),On.EMPTY_NODE,It.Default)}compareTo(o){return o===this?0:1}equals(o){return o===this}getPriority(){return this}getImmediateChild(o){return On.EMPTY_NODE}isEmpty(){return!1}};function hi(l,o=null){if(null===l)return On.EMPTY_NODE;if("object"==typeof l&&".priority"in l&&(o=l[".priority"]),(0,pe.hu)(null===o||"string"==typeof o||"number"==typeof o||"object"==typeof o&&".sv"in o,"Invalid priority type found: "+typeof o),"object"==typeof l&&".value"in l&&null!==l[".value"]&&(l=l[".value"]),"object"!=typeof l||".sv"in l)return new Si(l,hi(o));if(l instanceof Array){let u=On.EMPTY_NODE;return hr(l,(f,y)=>{if((0,pe.r3)(l,f)&&"."!==f.substring(0,1)){const D=hi(y);(D.isLeafNode()||!D.isEmpty())&&(u=u.updateImmediateChild(f,D))}}),u.updatePriority(hi(o))}{const u=[];let f=!1;if(hr(l,(N,K)=>{if("."!==N.substring(0,1)){const ae=hi(K);ae.isEmpty()||(f=f||!ae.getPriority().isEmpty(),u.push(new Rn(N,ae)))}}),0===u.length)return On.EMPTY_NODE;const D=Xo(u,kr,N=>N.name,Ka);if(f){const N=Xo(u,Zr.getCompare());return new On(D,hi(o),new It({".priority":N},{".priority":Zr}))}return new On(D,hi(o),It.Default)}}Object.defineProperties(Rn,{MIN:{value:new Rn(qe,On.EMPTY_NODE)},MAX:{value:new Rn(Rt,Ks)}}),$o.__EMPTY_NODE=On.EMPTY_NODE,Si.__childrenNodeConstructor=On,function Vs(l){da=l}(Ks),function Vi(l){ml=l}(Ks),function jt(l){ha=l}(hi);class fa extends mu{constructor(o){super(),this.indexPath_=o,(0,pe.hu)(!Zn(o)&&".priority"!==$n(o),"Can't create PathIndex with empty path or .priority key")}extractChild(o){return o.getChild(this.indexPath_)}isDefinedOn(o){return!o.getChild(this.indexPath_).isEmpty()}compare(o,u){const f=this.extractChild(o.node),y=this.extractChild(u.node),D=f.compareTo(y);return 0===D?yn(o.name,u.name):D}makePost(o,u){const f=hi(o),y=On.EMPTY_NODE.updateChild(this.indexPath_,f);return new Rn(u,y)}maxPost(){const o=On.EMPTY_NODE.updateChild(this.indexPath_,Ks);return new Rn(Rt,o)}toString(){return ho(this.indexPath_,0).join("/")}}const ea=new class _l extends mu{compare(o,u){const f=o.node.compareTo(u.node);return 0===f?yn(o.name,u.name):f}isDefinedOn(o){return!0}indexedValueChanged(o,u){return!o.equals(u)}minPost(){return Rn.MIN}maxPost(){return Rn.MAX}makePost(o,u){const f=hi(o);return new Rn(u,f)}toString(){return".value"}},fo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",C=function(){let l=0;const o=[];return function(u){const f=u===l;let y;l=u;const D=new Array(8);for(y=7;y>=0;y--)D[y]=fo.charAt(u%64),u=Math.floor(u/64);(0,pe.hu)(0===u,"Cannot push at time == 0");let N=D.join("");if(f){for(y=11;y>=0&&63===o[y];y--)o[y]=0;o[y]++}else for(y=0;y<12;y++)o[y]=Math.floor(64*Math.random());for(y=0;y<12;y++)N+=fo.charAt(o[y]);return(0,pe.hu)(20===N.length,"nextPushId: Length should be 20."),N}}(),I=function(l){if(l===""+ks)return"-";const o=Fo(l);if(null!=o)return""+(o+1);const u=new Array(l.length);for(let N=0;N<u.length;N++)u[N]=l.charAt(N);if(u.length<786)return u.push("-"),u.join("");let f=u.length-1;for(;f>=0&&"z"===u[f];)f--;if(-1===f)return Rt;const D=fo.charAt(fo.indexOf(u[f])+1);return u[f]=D,u.slice(0,f+1).join("")},L=function(l){if(l===""+Ws)return qe;const o=Fo(l);if(null!=o)return""+(o-1);const u=new Array(l.length);for(let f=0;f<u.length;f++)u[f]=l.charAt(f);return"-"===u[u.length-1]?1===u.length?""+ks:(delete u[u.length-1],u.join("")):(u[u.length-1]=fo.charAt(fo.indexOf(u[u.length-1])-1),u.join("")+"z".repeat(786-u.length))};function W(l){return{type:"value",snapshotNode:l}}function q(l,o){return{type:"child_added",snapshotNode:o,childName:l}}function Ce(l,o){return{type:"child_removed",snapshotNode:o,childName:l}}function Oe(l,o,u){return{type:"child_changed",snapshotNode:o,childName:l,oldSnap:u}}class Xt{constructor(o){this.index_=o}updateChild(o,u,f,y,D,N){(0,pe.hu)(o.isIndexed(this.index_),"A node must be indexed if only a child is updated");const K=o.getImmediateChild(u);return K.getChild(y).equals(f.getChild(y))&&K.isEmpty()===f.isEmpty()||(null!=N&&(f.isEmpty()?o.hasChild(u)?N.trackChildChange(Ce(u,K)):(0,pe.hu)(o.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):K.isEmpty()?N.trackChildChange(q(u,f)):N.trackChildChange(Oe(u,f,K))),o.isLeafNode()&&f.isEmpty())?o:o.updateImmediateChild(u,f).withIndex(this.index_)}updateFullNode(o,u,f){return null!=f&&(o.isLeafNode()||o.forEachChild(Zr,(y,D)=>{u.hasChild(y)||f.trackChildChange(Ce(y,D))}),u.isLeafNode()||u.forEachChild(Zr,(y,D)=>{if(o.hasChild(y)){const N=o.getImmediateChild(y);N.equals(D)||f.trackChildChange(Oe(y,D,N))}else f.trackChildChange(q(y,D))})),u.withIndex(this.index_)}updatePriority(o,u){return o.isEmpty()?On.EMPTY_NODE:o.updatePriority(u)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class qt{constructor(o){this.indexedFilter_=new Xt(o.getIndex()),this.index_=o.getIndex(),this.startPost_=qt.getStartPost_(o),this.endPost_=qt.getEndPost_(o)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(o){return this.index_.compare(this.getStartPost(),o)<=0&&this.index_.compare(o,this.getEndPost())<=0}updateChild(o,u,f,y,D,N){return this.matches(new Rn(u,f))||(f=On.EMPTY_NODE),this.indexedFilter_.updateChild(o,u,f,y,D,N)}updateFullNode(o,u,f){u.isLeafNode()&&(u=On.EMPTY_NODE);let y=u.withIndex(this.index_);y=y.updatePriority(On.EMPTY_NODE);const D=this;return u.forEachChild(Zr,(N,K)=>{D.matches(new Rn(N,K))||(y=y.updateImmediateChild(N,On.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(o,y,f)}updatePriority(o,u){return o}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(o){if(o.hasStart()){const u=o.getIndexStartName();return o.getIndex().makePost(o.getIndexStartValue(),u)}return o.getIndex().minPost()}static getEndPost_(o){if(o.hasEnd()){const u=o.getIndexEndName();return o.getIndex().makePost(o.getIndexEndValue(),u)}return o.getIndex().maxPost()}}class vn{constructor(o){this.rangedFilter_=new qt(o),this.index_=o.getIndex(),this.limit_=o.getLimit(),this.reverse_=!o.isViewFromLeft()}updateChild(o,u,f,y,D,N){return this.rangedFilter_.matches(new Rn(u,f))||(f=On.EMPTY_NODE),o.getImmediateChild(u).equals(f)?o:o.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(o,u,f,y,D,N):this.fullLimitUpdateChild_(o,u,f,D,N)}updateFullNode(o,u,f){let y;if(u.isLeafNode()||u.isEmpty())y=On.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<u.numChildren()&&u.isIndexed(this.index_)){let D;y=On.EMPTY_NODE.withIndex(this.index_),D=this.reverse_?u.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):u.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let N=0;for(;D.hasNext()&&N<this.limit_;){const K=D.getNext();let ae;if(ae=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),K)<=0:this.index_.compare(K,this.rangedFilter_.getEndPost())<=0,!ae)break;y=y.updateImmediateChild(K.name,K.node),N++}}else{let D,N,K,ae;if(y=u.withIndex(this.index_),y=y.updatePriority(On.EMPTY_NODE),this.reverse_){ae=y.getReverseIterator(this.index_),D=this.rangedFilter_.getEndPost(),N=this.rangedFilter_.getStartPost();const lt=this.index_.getCompare();K=(Dt,zt)=>lt(zt,Dt)}else ae=y.getIterator(this.index_),D=this.rangedFilter_.getStartPost(),N=this.rangedFilter_.getEndPost(),K=this.index_.getCompare();let De=0,nt=!1;for(;ae.hasNext();){const lt=ae.getNext();!nt&&K(D,lt)<=0&&(nt=!0),nt&&De<this.limit_&&K(lt,N)<=0?De++:y=y.updateImmediateChild(lt.name,On.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(o,y,f)}updatePriority(o,u){return o}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(o,u,f,y,D){let N;if(this.reverse_){const lt=this.index_.getCompare();N=(Dt,zt)=>lt(zt,Dt)}else N=this.index_.getCompare();const K=o;(0,pe.hu)(K.numChildren()===this.limit_,"");const ae=new Rn(u,f),De=this.reverse_?K.getFirstChild(this.index_):K.getLastChild(this.index_),nt=this.rangedFilter_.matches(ae);if(K.hasChild(u)){const lt=K.getImmediateChild(u);let Dt=y.getChildAfterChild(this.index_,De,this.reverse_);for(;null!=Dt&&(Dt.name===u||K.hasChild(Dt.name));)Dt=y.getChildAfterChild(this.index_,Dt,this.reverse_);const zt=null==Dt?1:N(Dt,ae);if(nt&&!f.isEmpty()&&zt>=0)return null!=D&&D.trackChildChange(Oe(u,f,lt)),K.updateImmediateChild(u,f);{null!=D&&D.trackChildChange(Ce(u,lt));const Tr=K.updateImmediateChild(u,On.EMPTY_NODE);return null!=Dt&&this.rangedFilter_.matches(Dt)?(null!=D&&D.trackChildChange(q(Dt.name,Dt.node)),Tr.updateImmediateChild(Dt.name,Dt.node)):Tr}}return f.isEmpty()?o:nt&&N(De,ae)>=0?(null!=D&&(D.trackChildChange(Ce(De.name,De.node)),D.trackChildChange(q(u,f))),K.updateImmediateChild(u,f).updateImmediateChild(De.name,On.EMPTY_NODE)):o}}class Pn{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,pe.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,pe.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qe}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,pe.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,pe.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rt}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,pe.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zr}copy(){const o=new Pn;return o.limitSet_=this.limitSet_,o.limit_=this.limit_,o.startSet_=this.startSet_,o.indexStartValue_=this.indexStartValue_,o.startNameSet_=this.startNameSet_,o.indexStartName_=this.indexStartName_,o.endSet_=this.endSet_,o.indexEndValue_=this.indexEndValue_,o.endNameSet_=this.endNameSet_,o.indexEndName_=this.indexEndName_,o.index_=this.index_,o.viewFrom_=this.viewFrom_,o}}function Mo(l,o,u){const f=l.copy();return f.startSet_=!0,void 0===o&&(o=null),f.indexStartValue_=o,null!=u?(f.startNameSet_=!0,f.indexStartName_=u):(f.startNameSet_=!1,f.indexStartName_=""),f}function br(l,o,u){const f=l.copy();return f.endSet_=!0,void 0===o&&(o=null),f.indexEndValue_=o,void 0!==u?(f.endNameSet_=!0,f.indexEndName_=u):(f.endNameSet_=!1,f.indexEndName_=""),f}function xs(l,o){const u=l.copy();return u.index_=o,u}function zl(l){const o={};if(l.isDefault())return o;let u;return l.index_===Zr?u="$priority":l.index_===ea?u="$value":l.index_===Wo?u="$key":((0,pe.hu)(l.index_ instanceof fa,"Unrecognized index type!"),u=l.index_.toString()),o.orderBy=(0,pe.Pz)(u),l.startSet_&&(o.startAt=(0,pe.Pz)(l.indexStartValue_),l.startNameSet_&&(o.startAt+=","+(0,pe.Pz)(l.indexStartName_))),l.endSet_&&(o.endAt=(0,pe.Pz)(l.indexEndValue_),l.endNameSet_&&(o.endAt+=","+(0,pe.Pz)(l.indexEndName_))),l.limitSet_&&(l.isViewFromLeft()?o.limitToFirst=l.limit_:o.limitToLast=l.limit_),o}function Ra(l){const o={};if(l.startSet_&&(o.sp=l.indexStartValue_,l.startNameSet_&&(o.sn=l.indexStartName_)),l.endSet_&&(o.ep=l.indexEndValue_,l.endNameSet_&&(o.en=l.indexEndName_)),l.limitSet_){o.l=l.limit_;let u=l.viewFrom_;""===u&&(u=l.isViewFromLeft()?"l":"r"),o.vf=u}return l.index_!==Zr&&(o.i=l.index_.toString()),o}class pa extends Es{constructor(o,u,f,y){super(),this.repoInfo_=o,this.onDataUpdate_=u,this.authTokenProvider_=f,this.appCheckTokenProvider_=y,this.log_=Er("p:rest:"),this.listens_={}}reportStats(o){throw new Error("Method not implemented.")}static getListenId_(o,u){return void 0!==u?"tag$"+u:((0,pe.hu)(o._queryParams.isDefault(),"should have a tag if it's not a default query."),o._path.toString())}listen(o,u,f,y){const D=o._path.toString();this.log_("Listen called for "+D+" "+o._queryIdentifier);const N=pa.getListenId_(o,f),K={};this.listens_[N]=K;const ae=zl(o._queryParams);this.restRequest_(D+".json",ae,(De,nt)=>{let lt=nt;if(404===De&&(lt=null,De=null),null===De&&this.onDataUpdate_(D,lt,!1,f),(0,pe.DV)(this.listens_,N)===K){let Dt;Dt=De?401===De?"permission_denied":"rest_error:"+De:"ok",y(Dt,null)}})}unlisten(o,u){const f=pa.getListenId_(o,u);delete this.listens_[f]}get(o){const u=zl(o._queryParams),f=o._path.toString(),y=new pe.BH;return this.restRequest_(f+".json",u,(D,N)=>{let K=N;404===D&&(K=null,D=null),null===D?(this.onDataUpdate_(f,K,!1,null),y.resolve(K)):y.reject(new Error(K))}),y.promise}refreshAuthToken(o){}restRequest_(o,u={},f){return u.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([y,D])=>{y&&y.accessToken&&(u.auth=y.accessToken),D&&D.token&&(u.ac=D.token);const N=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+o+"?ns="+this.repoInfo_.namespace+(0,pe.xO)(u);this.log_("Sending REST request for "+N);const K=new XMLHttpRequest;K.onreadystatechange=()=>{if(f&&4===K.readyState){this.log_("REST Response for "+N+" received. status:",K.status,"response:",K.responseText);let ae=null;if(K.status>=200&&K.status<300){try{ae=(0,pe.cI)(K.responseText)}catch(De){le("Failed to parse JSON response for "+N+": "+K.responseText)}f(null,ae)}else 401!==K.status&&404!==K.status&&le("Got unsuccessful REST response for "+N+" Status: "+K.status),f(K.status);f=null}},K.open("GET",N,!0),K.send()})}}class xo{constructor(){this.rootNode_=On.EMPTY_NODE}getNode(o){return this.rootNode_.getChild(o)}updateSnapshot(o,u){this.rootNode_=this.rootNode_.updateChild(o,u)}}function Za(){return{value:null,children:new Map}}function Xr(l,o,u){if(Zn(o))l.value=u,l.children.clear();else if(null!==l.value)l.value=l.value.updateChild(o,u);else{const f=$n(o);l.children.has(f)||l.children.set(f,Za()),Xr(l.children.get(f),o=tr(o),u)}}function Kl(l,o){if(Zn(o))return l.value=null,l.children.clear(),!0;if(null!==l.value){if(l.value.isLeafNode())return!1;{const u=l.value;return l.value=null,u.forEachChild(Zr,(f,y)=>{Xr(l,new Ur(f),y)}),Kl(l,o)}}if(l.children.size>0){const u=$n(o);return o=tr(o),l.children.has(u)&&Kl(l.children.get(u),o)&&l.children.delete(u),0===l.children.size}return!0}function Qt(l,o,u){null!==l.value?u(o,l.value):function Ya(l,o){l.children.forEach((u,f)=>{o(f,u)})}(l,(f,y)=>{Qt(y,new Ur(o.toString()+"/"+f),u)})}class zu{constructor(o){this.collection_=o,this.last_=null}get(){const o=this.collection_.get(),u=Object.assign({},o);return this.last_&&hr(this.last_,(f,y)=>{u[f]=u[f]-y}),this.last_=o,u}}class Ys{constructor(o,u){this.server_=u,this.statsToReport_={},this.statsListener_=new zu(o);const f=1e4+2e4*Math.random();fs(this.reportStats_.bind(this),Math.floor(f))}reportStats_(){const o=this.statsListener_.get(),u={};let f=!1;hr(o,(y,D)=>{D>0&&(0,pe.r3)(this.statsToReport_,y)&&(u[y]=D,f=!0)}),f&&this.server_.reportStats(u),fs(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var po=(()=>{return(l=po||(po={}))[l.OVERWRITE=0]="OVERWRITE",l[l.MERGE=1]="MERGE",l[l.ACK_USER_WRITE=2]="ACK_USER_WRITE",l[l.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",po;var l})();function Os(l){return{fromUser:!1,fromServer:!0,queryId:l,tagged:!0}}class Ku{constructor(o,u,f){this.path=o,this.affectedTree=u,this.revert=f,this.type=po.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(o){if(Zn(this.path)){if(null!=this.affectedTree.value)return(0,pe.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const u=this.affectedTree.subtree(new Ur(o));return new Ku(Mr(),u,this.revert)}}return(0,pe.hu)($n(this.path)===o,"operationForChild called for unrelated child."),new Ku(tr(this.path),this.affectedTree,this.revert)}}class go{constructor(o,u){this.source=o,this.path=u,this.type=po.LISTEN_COMPLETE}operationForChild(o){return Zn(this.path)?new go(this.source,Mr()):new go(this.source,tr(this.path))}}class yi{constructor(o,u,f){this.source=o,this.path=u,this.snap=f,this.type=po.OVERWRITE}operationForChild(o){return Zn(this.path)?new yi(this.source,Mr(),this.snap.getImmediateChild(o)):new yi(this.source,tr(this.path),this.snap)}}class Gi{constructor(o,u,f){this.source=o,this.path=u,this.children=f,this.type=po.MERGE}operationForChild(o){if(Zn(this.path)){const u=this.children.subtree(new Ur(o));return u.isEmpty()?null:u.value?new yi(this.source,Mr(),u.value):new Gi(this.source,Mr(),u)}return(0,pe.hu)($n(this.path)===o,"Can't get a merge for a child not on the path of the operation"),new Gi(this.source,tr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qs{constructor(o,u,f){this.node_=o,this.fullyInitialized_=u,this.filtered_=f}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(o){if(Zn(o))return this.isFullyInitialized()&&!this.filtered_;const u=$n(o);return this.isCompleteForChild(u)}isCompleteForChild(o){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(o)}getNode(){return this.node_}}class Oo{constructor(o){this.query_=o,this.index_=this.query_._queryParams.getIndex()}}function Js(l,o,u,f,y,D){const N=f.filter(K=>K.type===u);N.sort((K,ae)=>function wd(l,o,u){if(null==o.childName||null==u.childName)throw(0,pe.g5)("Should only compare child_ events.");const f=new Rn(o.childName,o.snapshotNode),y=new Rn(u.childName,u.snapshotNode);return l.index_.compare(f,y)}(l,K,ae)),N.forEach(K=>{const ae=function Nc(l,o,u){return"value"===o.type||"child_removed"===o.type||(o.prevName=u.getPredecessorChildName(o.childName,o.snapshotNode,l.index_)),o}(l,K,D);y.forEach(De=>{De.respondsTo(K.type)&&o.push(De.createEvent(ae,l.query_))})})}function ql(l,o){return{eventCache:l,serverCache:o}}function ns(l,o,u,f){return ql(new Qs(o,u,f),l.serverCache)}function yu(l,o,u,f){return ql(l.eventCache,new Qs(o,u,f))}function Xn(l){return l.eventCache.isFullyInitialized()?l.eventCache.getNode():null}function mo(l){return l.serverCache.isFullyInitialized()?l.serverCache.getNode():null}let ta;class xr{constructor(o,u=(()=>(ta||(ta=new Hi(Nn)),ta))()){this.value=o,this.children=u}static fromObject(o){let u=new xr(null);return hr(o,(f,y)=>{u=u.set(new Ur(f),y)}),u}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(o,u){if(null!=this.value&&u(this.value))return{path:Mr(),value:this.value};if(Zn(o))return null;{const f=$n(o),y=this.children.get(f);if(null!==y){const D=y.findRootMostMatchingPathAndValue(tr(o),u);return null!=D?{path:ni(new Ur(f),D.path),value:D.value}:null}return null}}findRootMostValueAndPath(o){return this.findRootMostMatchingPathAndValue(o,()=>!0)}subtree(o){if(Zn(o))return this;{const u=$n(o),f=this.children.get(u);return null!==f?f.subtree(tr(o)):new xr(null)}}set(o,u){if(Zn(o))return new xr(u,this.children);{const f=$n(o),D=(this.children.get(f)||new xr(null)).set(tr(o),u),N=this.children.insert(f,D);return new xr(this.value,N)}}remove(o){if(Zn(o))return this.children.isEmpty()?new xr(null):new xr(null,this.children);{const u=$n(o),f=this.children.get(u);if(f){const y=f.remove(tr(o));let D;return D=y.isEmpty()?this.children.remove(u):this.children.insert(u,y),null===this.value&&D.isEmpty()?new xr(null):new xr(this.value,D)}return this}}get(o){if(Zn(o))return this.value;{const u=$n(o),f=this.children.get(u);return f?f.get(tr(o)):null}}setTree(o,u){if(Zn(o))return u;{const f=$n(o),D=(this.children.get(f)||new xr(null)).setTree(tr(o),u);let N;return N=D.isEmpty()?this.children.remove(f):this.children.insert(f,D),new xr(this.value,N)}}fold(o){return this.fold_(Mr(),o)}fold_(o,u){const f={};return this.children.inorderTraversal((y,D)=>{f[y]=D.fold_(ni(o,y),u)}),u(o,this.value,f)}findOnPath(o,u){return this.findOnPath_(o,Mr(),u)}findOnPath_(o,u,f){const y=!!this.value&&f(u,this.value);if(y)return y;if(Zn(o))return null;{const D=$n(o),N=this.children.get(D);return N?N.findOnPath_(tr(o),ni(u,D),f):null}}foreachOnPath(o,u){return this.foreachOnPath_(o,Mr(),u)}foreachOnPath_(o,u,f){if(Zn(o))return this;{this.value&&f(u,this.value);const y=$n(o),D=this.children.get(y);return D?D.foreachOnPath_(tr(o),ni(u,y),f):new xr(null)}}foreach(o){this.foreach_(Mr(),o)}foreach_(o,u){this.children.inorderTraversal((f,y)=>{y.foreach_(ni(o,f),u)}),this.value&&u(o,this.value)}foreachChild(o){this.children.inorderTraversal((u,f)=>{f.value&&o(u,f.value)})}}class Is{constructor(o){this.writeTree_=o}static empty(){return new Is(new xr(null))}}function Po(l,o,u){if(Zn(o))return new Is(new xr(u));{const f=l.writeTree_.findRootMostValueAndPath(o);if(null!=f){const y=f.path;let D=f.value;const N=Wi(y,o);return D=D.updateChild(N,u),new Is(l.writeTree_.set(y,D))}{const y=new xr(u),D=l.writeTree_.setTree(o,y);return new Is(D)}}}function qu(l,o,u){let f=l;return hr(u,(y,D)=>{f=Po(f,ni(o,y),D)}),f}function _o(l,o){if(Zn(o))return Is.empty();{const u=l.writeTree_.setTree(o,new xr(null));return new Is(u)}}function Zu(l,o){return null!=Wr(l,o)}function Wr(l,o){const u=l.writeTree_.findRootMostValueAndPath(o);return null!=u?l.writeTree_.get(u.path).getChild(Wi(u.path,o)):null}function Qa(l){const o=[],u=l.writeTree_.value;return null!=u?u.isLeafNode()||u.forEachChild(Zr,(f,y)=>{o.push(new Rn(f,y))}):l.writeTree_.children.inorderTraversal((f,y)=>{null!=y.value&&o.push(new Rn(f,y.value))}),o}function ci(l,o){if(Zn(o))return l;{const u=Wr(l,o);return new Is(null!=u?new xr(u):l.writeTree_.subtree(o))}}function P(l){return l.writeTree_.isEmpty()}function B(l,o){return ne(Mr(),l.writeTree_,o)}function ne(l,o,u){if(null!=o.value)return u.updateChild(l,o.value);{let f=null;return o.children.inorderTraversal((y,D)=>{".priority"===y?((0,pe.hu)(null!==D.value,"Priority writes must always be leaf nodes"),f=D.value):u=ne(ni(l,y),D,u)}),!u.getChild(l).isEmpty()&&null!==f&&(u=u.updateChild(ni(l,".priority"),f)),u}}function Re(l,o){return ra(o,l)}function Kn(l,o){if(l.snap)return Ai(l.path,o);for(const u in l.children)if(l.children.hasOwnProperty(u)&&Ai(ni(l.path,u),o))return!0;return!1}function Vr(l){return l.visible}function sr(l,o,u){let f=Is.empty();for(let y=0;y<l.length;++y){const D=l[y];if(o(D)){const N=D.path;let K;if(D.snap)Ai(u,N)?(K=Wi(u,N),f=Po(f,K,D.snap)):Ai(N,u)&&(K=Wi(N,u),f=Po(f,Mr(),D.snap.getChild(K)));else{if(!D.children)throw(0,pe.g5)("WriteRecord should have .snap or .children");if(Ai(u,N))K=Wi(u,N),f=qu(f,K,D.children);else if(Ai(N,u))if(K=Wi(N,u),Zn(K))f=qu(f,Mr(),D.children);else{const ae=(0,pe.DV)(D.children,$n(K));if(ae){const De=ae.getChild(tr(K));f=Po(f,Mr(),De)}}}}}return f}function Yn(l,o,u,f,y){if(f||y){const D=ci(l.visibleWrites,o);return!y&&P(D)?u:y||null!=u||Zu(D,Mr())?B(sr(l.allWrites,function(De){return(De.visible||y)&&(!f||!~f.indexOf(De.writeId))&&(Ai(De.path,o)||Ai(o,De.path))},o),u||On.EMPTY_NODE):null}{const D=Wr(l.visibleWrites,o);if(null!=D)return D;{const N=ci(l.visibleWrites,o);return P(N)?u:null!=u||Zu(N,Mr())?B(N,u||On.EMPTY_NODE):null}}}function Xa(l,o,u,f){return Yn(l.writeTree,l.treePath,o,u,f)}function Yu(l,o){return function ds(l,o,u){let f=On.EMPTY_NODE;const y=Wr(l.visibleWrites,o);if(y)return y.isLeafNode()||y.forEachChild(Zr,(D,N)=>{f=f.updateImmediateChild(D,N)}),f;if(u){const D=ci(l.visibleWrites,o);return u.forEachChild(Zr,(N,K)=>{const ae=B(ci(D,new Ur(N)),K);f=f.updateImmediateChild(N,ae)}),Qa(D).forEach(N=>{f=f.updateImmediateChild(N.name,N.node)}),f}return Qa(ci(l.visibleWrites,o)).forEach(N=>{f=f.updateImmediateChild(N.name,N.node)}),f}(l.writeTree,l.treePath,o)}function yo(l,o,u,f){return function vl(l,o,u,f,y){(0,pe.hu)(f||y,"Either existingEventSnap or existingServerSnap must exist");const D=ni(o,u);if(Zu(l.visibleWrites,D))return null;{const N=ci(l.visibleWrites,D);return P(N)?y.getChild(u):B(N,y.getChild(u))}}(l.writeTree,l.treePath,o,u,f)}function Na(l,o){return function na(l,o){return Wr(l.visibleWrites,o)}(l.writeTree,ni(l.treePath,o))}function Zl(l,o,u){return function Ja(l,o,u,f){const y=ni(o,u),D=Wr(l.visibleWrites,y);return null!=D?D:f.isCompleteForChild(u)?B(ci(l.visibleWrites,y),f.getNode().getImmediateChild(u)):null}(l.writeTree,l.treePath,o,u)}function Yl(l,o){return ra(ni(l.treePath,o),l.writeTree)}function ra(l,o){return{treePath:l,writeTree:o}}class wl{constructor(){this.changeMap=new Map}trackChildChange(o){const u=o.type,f=o.childName;(0,pe.hu)("child_added"===u||"child_changed"===u||"child_removed"===u,"Only child changes supported for tracking"),(0,pe.hu)(".priority"!==f,"Only non-priority child changes can be tracked.");const y=this.changeMap.get(f);if(y){const D=y.type;if("child_added"===u&&"child_removed"===D)this.changeMap.set(f,Oe(f,o.snapshotNode,y.snapshotNode));else if("child_removed"===u&&"child_added"===D)this.changeMap.delete(f);else if("child_removed"===u&&"child_changed"===D)this.changeMap.set(f,Ce(f,y.oldSnap));else if("child_changed"===u&&"child_added"===D)this.changeMap.set(f,q(f,o.snapshotNode));else{if("child_changed"!==u||"child_changed"!==D)throw(0,pe.g5)("Illegal combination of changes: "+o+" occurred after "+y);this.changeMap.set(f,Oe(f,o.snapshotNode,y.oldSnap))}}else this.changeMap.set(f,o)}getChanges(){return Array.from(this.changeMap.values())}}const gh=new class eu{getCompleteChild(o){return null}getChildAfterChild(o,u,f){return null}};class Ql{constructor(o,u,f=null){this.writes_=o,this.viewCache_=u,this.optCompleteServerCache_=f}getCompleteChild(o){const u=this.viewCache_.eventCache;if(u.isCompleteForChild(o))return u.getNode().getImmediateChild(o);{const f=null!=this.optCompleteServerCache_?new Qs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Zl(this.writes_,o,f)}}getChildAfterChild(o,u,f){const y=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:mo(this.viewCache_),D=function El(l,o,u,f,y,D){return function _a(l,o,u,f,y,D,N){let K;const ae=ci(l.visibleWrites,o),De=Wr(ae,Mr());if(null!=De)K=De;else{if(null==u)return[];K=B(ae,u)}if(K=K.withIndex(N),K.isEmpty()||K.isLeafNode())return[];{const nt=[],lt=N.getCompare(),Dt=D?K.getReverseIteratorFrom(f,N):K.getIteratorFrom(f,N);let zt=Dt.getNext();for(;zt&&nt.length<y;)0!==lt(zt,f)&&nt.push(zt),zt=Dt.getNext();return nt}}(l.writeTree,l.treePath,o,u,f,y,D)}(this.writes_,y,u,1,f,o);return 0===D.length?null:D[0]}}function Jl(l,o,u,f,y,D){const N=o.eventCache;if(null!=Na(f,u))return o;{let K,ae;if(Zn(u))if((0,pe.hu)(o.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),o.serverCache.isFiltered()){const De=mo(o),lt=Yu(f,De instanceof On?De:On.EMPTY_NODE);K=l.filter.updateFullNode(o.eventCache.getNode(),lt,D)}else{const De=Xa(f,mo(o));K=l.filter.updateFullNode(o.eventCache.getNode(),De,D)}else{const De=$n(u);if(".priority"===De){(0,pe.hu)(1===As(u),"Can't have a priority with additional path components");const nt=N.getNode();ae=o.serverCache.getNode();const lt=yo(f,u,nt,ae);K=null!=lt?l.filter.updatePriority(nt,lt):N.getNode()}else{const nt=tr(u);let lt;if(N.isCompleteForChild(De)){ae=o.serverCache.getNode();const Dt=yo(f,u,N.getNode(),ae);lt=null!=Dt?N.getNode().getImmediateChild(De).updateChild(nt,Dt):N.getNode().getImmediateChild(De)}else lt=Zl(f,De,o.serverCache);K=null!=lt?l.filter.updateChild(N.getNode(),De,lt,nt,y,D):N.getNode()}}return ns(o,K,N.isFullyInitialized()||Zn(u),l.filter.filtersNodes())}}function Eu(l,o,u,f,y,D,N,K){const ae=o.serverCache;let De;const nt=N?l.filter:l.filter.getIndexedFilter();if(Zn(u))De=nt.updateFullNode(ae.getNode(),f,null);else if(nt.filtersNodes()&&!ae.isFiltered()){const zt=ae.getNode().updateChild(u,f);De=nt.updateFullNode(ae.getNode(),zt,null)}else{const zt=$n(u);if(!ae.isCompleteForPath(u)&&As(u)>1)return o;const dn=tr(u),Br=ae.getNode().getImmediateChild(zt).updateChild(dn,f);De=".priority"===zt?nt.updatePriority(ae.getNode(),Br):nt.updateChild(ae.getNode(),zt,Br,dn,gh,null)}const lt=yu(o,De,ae.isFullyInitialized()||Zn(u),nt.filtersNodes());return Jl(l,lt,u,y,new Ql(y,lt,D),K)}function Cl(l,o,u,f,y,D,N){const K=o.eventCache;let ae,De;const nt=new Ql(y,o,D);if(Zn(u))De=l.filter.updateFullNode(o.eventCache.getNode(),f,N),ae=ns(o,De,!0,l.filter.filtersNodes());else{const lt=$n(u);if(".priority"===lt)De=l.filter.updatePriority(o.eventCache.getNode(),f),ae=ns(o,De,K.isFullyInitialized(),K.isFiltered());else{const Dt=tr(u),zt=K.getNode().getImmediateChild(lt);let dn;if(Zn(Dt))dn=f;else{const Tr=nt.getCompleteChild(lt);dn=null!=Tr?".priority"===Ss(Dt)&&Tr.getChild(ts(Dt)).isEmpty()?Tr:Tr.updateChild(Dt,f):On.EMPTY_NODE}ae=zt.equals(dn)?o:ns(o,l.filter.updateChild(K.getNode(),lt,dn,Dt,nt,N),K.isFullyInitialized(),l.filter.filtersNodes())}}return ae}function kc(l,o){return l.eventCache.isCompleteForChild(o)}function Cd(l,o,u){return u.foreach((f,y)=>{o=o.updateChild(f,y)}),o}function Qu(l,o,u,f,y,D,N,K){if(o.serverCache.getNode().isEmpty()&&!o.serverCache.isFullyInitialized())return o;let De,ae=o;De=Zn(u)?f:new xr(null).setTree(u,f);const nt=o.serverCache.getNode();return De.children.inorderTraversal((lt,Dt)=>{if(nt.hasChild(lt)){const dn=Cd(0,o.serverCache.getNode().getImmediateChild(lt),Dt);ae=Eu(l,ae,new Ur(lt),dn,y,D,N,K)}}),De.children.inorderTraversal((lt,Dt)=>{const zt=!o.serverCache.isCompleteForChild(lt)&&void 0===Dt.value;if(!nt.hasChild(lt)&&!zt){const Tr=Cd(0,o.serverCache.getNode().getImmediateChild(lt),Dt);ae=Eu(l,ae,new Ur(lt),Tr,y,D,N,K)}}),ae}class _h{constructor(o,u){this.query_=o,this.eventRegistrations_=[];const f=this.query_._queryParams,y=new Xt(f.getIndex()),D=function Ir(l){return l.loadsAllData()?new Xt(l.getIndex()):l.hasLimit()?new vn(l):new qt(l)}(f);this.processor_=function vu(l){return{filter:l}}(D);const N=u.serverCache,K=u.eventCache,ae=y.updateFullNode(On.EMPTY_NODE,N.getNode(),null),De=D.updateFullNode(On.EMPTY_NODE,K.getNode(),null),nt=new Qs(ae,N.isFullyInitialized(),y.filtersNodes()),lt=new Qs(De,K.isFullyInitialized(),D.filtersNodes());this.viewCache_=ql(lt,nt),this.eventGenerator_=new Oo(this.query_)}get query(){return this.query_}}function bd(l,o){const u=mo(l.viewCache_);return u&&(l.query._queryParams.loadsAllData()||!Zn(o)&&!u.getImmediateChild($n(o)).isEmpty())?u.getChild(o):null}function Lc(l){return 0===l.eventRegistrations_.length}function nu(l,o,u){const f=[];if(u){(0,pe.hu)(null==o,"A cancel should cancel all event registrations.");const y=l.query._path;l.eventRegistrations_.forEach(D=>{const N=D.createCancelEvent(u,y);N&&f.push(N)})}if(o){let y=[];for(let D=0;D<l.eventRegistrations_.length;++D){const N=l.eventRegistrations_[D];if(N.matches(o)){if(o.hasAnyCallback()){y=y.concat(l.eventRegistrations_.slice(D+1));break}}else y.push(N)}l.eventRegistrations_=y}else l.eventRegistrations_=[];return f}function ec(l,o,u,f){o.type===po.MERGE&&null!==o.source.queryId&&((0,pe.hu)(mo(l.viewCache_),"We should always have a full cache before handling merges"),(0,pe.hu)(Xn(l.viewCache_),"Missing event cache, even though we have a server cache"));const y=l.viewCache_,D=function Il(l,o,u,f,y){const D=new wl;let N,K;if(u.type===po.OVERWRITE){const De=u;De.source.fromUser?N=Cl(l,o,De.path,De.snap,f,y,D):((0,pe.hu)(De.source.fromServer,"Unknown source."),K=De.source.tagged||o.serverCache.isFiltered()&&!Zn(De.path),N=Eu(l,o,De.path,De.snap,f,y,K,D))}else if(u.type===po.MERGE){const De=u;De.source.fromUser?N=function Id(l,o,u,f,y,D,N){let K=o;return f.foreach((ae,De)=>{const nt=ni(u,ae);kc(o,$n(nt))&&(K=Cl(l,K,nt,De,y,D,N))}),f.foreach((ae,De)=>{const nt=ni(u,ae);kc(o,$n(nt))||(K=Cl(l,K,nt,De,y,D,N))}),K}(l,o,De.path,De.children,f,y,D):((0,pe.hu)(De.source.fromServer,"Unknown source."),K=De.source.tagged||o.serverCache.isFiltered(),N=Qu(l,o,De.path,De.children,f,y,K,D))}else if(u.type===po.ACK_USER_WRITE){const De=u;N=De.revert?function mh(l,o,u,f,y,D){let N;if(null!=Na(f,u))return o;{const K=new Ql(f,o,y),ae=o.eventCache.getNode();let De;if(Zn(u)||".priority"===$n(u)){let nt;if(o.serverCache.isFullyInitialized())nt=Xa(f,mo(o));else{const lt=o.serverCache.getNode();(0,pe.hu)(lt instanceof On,"serverChildren would be complete if leaf node"),nt=Yu(f,lt)}nt=nt,De=l.filter.updateFullNode(ae,nt,D)}else{const nt=$n(u);let lt=Zl(f,nt,o.serverCache);null==lt&&o.serverCache.isCompleteForChild(nt)&&(lt=ae.getImmediateChild(nt)),De=null!=lt?l.filter.updateChild(ae,nt,lt,tr(u),K,D):o.eventCache.getNode().hasChild(nt)?l.filter.updateChild(ae,nt,On.EMPTY_NODE,tr(u),K,D):ae,De.isEmpty()&&o.serverCache.isFullyInitialized()&&(N=Xa(f,mo(o)),N.isLeafNode()&&(De=l.filter.updateFullNode(De,N,D)))}return N=o.serverCache.isFullyInitialized()||null!=Na(f,Mr()),ns(o,De,N,l.filter.filtersNodes())}}(l,o,De.path,f,y,D):function Dd(l,o,u,f,y,D,N){if(null!=Na(y,u))return o;const K=o.serverCache.isFiltered(),ae=o.serverCache;if(null!=f.value){if(Zn(u)&&ae.isFullyInitialized()||ae.isCompleteForPath(u))return Eu(l,o,u,ae.getNode().getChild(u),y,D,K,N);if(Zn(u)){let De=new xr(null);return ae.getNode().forEachChild(Wo,(nt,lt)=>{De=De.set(new Ur(nt),lt)}),Qu(l,o,u,De,y,D,K,N)}return o}{let De=new xr(null);return f.foreach((nt,lt)=>{const Dt=ni(u,nt);ae.isCompleteForPath(Dt)&&(De=De.set(nt,ae.getNode().getChild(Dt)))}),Qu(l,o,u,De,y,D,K,N)}}(l,o,De.path,De.affectedTree,f,y,D)}else{if(u.type!==po.LISTEN_COMPLETE)throw(0,pe.g5)("Unknown operation type: "+u.type);N=function Ju(l,o,u,f,y){const D=o.serverCache;return Jl(l,yu(o,D.getNode(),D.isFullyInitialized()||Zn(u),D.isFiltered()),u,f,gh,y)}(l,o,u.path,f,D)}const ae=D.getChanges();return function ya(l,o,u){const f=o.eventCache;if(f.isFullyInitialized()){const y=f.getNode().isLeafNode()||f.getNode().isEmpty(),D=Xn(l);(u.length>0||!l.eventCache.isFullyInitialized()||y&&!f.getNode().equals(D)||!f.getNode().getPriority().equals(D.getPriority()))&&u.push(W(Xn(o)))}}(o,N,ae),{viewCache:N,changes:ae}}(l.processor_,y,o,u,f);return function tu(l,o){(0,pe.hu)(o.eventCache.getNode().isIndexed(l.filter.getIndex()),"Event snap not indexed"),(0,pe.hu)(o.serverCache.getNode().isIndexed(l.filter.getIndex()),"Server snap not indexed")}(l.processor_,D.viewCache),(0,pe.hu)(D.viewCache.serverCache.isFullyInitialized()||!y.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),l.viewCache_=D.viewCache,Td(l,D.changes,D.viewCache.eventCache.getNode(),null)}function Td(l,o,u,f){return function xa(l,o,u,f){const y=[],D=[];return o.forEach(N=>{"child_changed"===N.type&&l.index_.indexedValueChanged(N.oldSnap,N.snapshotNode)&&D.push(function Tt(l,o){return{type:"child_moved",snapshotNode:o,childName:l}}(N.childName,N.snapshotNode))}),Js(l,y,"child_removed",o,f,u),Js(l,y,"child_added",o,f,u),Js(l,y,"child_moved",D,f,u),Js(l,y,"child_changed",o,f,u),Js(l,y,"value",o,f,u),y}(l.eventGenerator_,o,u,f?[f]:l.eventRegistrations_)}let ru,Fa;class Ad{constructor(){this.views=new Map}}function Sd(l,o,u,f){const y=o.source.queryId;if(null!==y){const D=l.views.get(y);return(0,pe.hu)(null!=D,"SyncTree gave us an op for an invalid query."),ec(D,o,u,f)}{let D=[];for(const N of l.views.values())D=D.concat(ec(N,o,u,f));return D}}function rs(l,o,u,f,y){const N=l.views.get(o._queryIdentifier);if(!N){let K=Xa(u,y?f:null),ae=!1;K?ae=!0:f instanceof On?(K=Yu(u,f),ae=!1):(K=On.EMPTY_NODE,ae=!1);const De=ql(new Qs(K,ae,!1),new Qs(f,y,!1));return new _h(o,De)}return N}function Cf(l){const o=[];for(const u of l.views.values())u.query._queryParams.loadsAllData()||o.push(u);return o}function ka(l,o){let u=null;for(const f of l.views.values())u=u||bd(f,o);return u}function Vc(l,o){return o._queryParams.loadsAllData()?wu(l):l.views.get(o._queryIdentifier)}function Md(l,o){return null!=Vc(l,o)}function iu(l){return null!=wu(l)}function wu(l){for(const o of l.views.values())if(o.query._queryParams.loadsAllData())return o;return null}let v=1;class A{constructor(o){this.listenProvider_=o,this.syncPointTree_=new xr(null),this.pendingWriteTree_=function Pa(){return{visibleWrites:Is.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Y(l,o,u,f,y){return function rt(l,o,u,f,y){(0,pe.hu)(f>l.lastWriteId,"Stacking an older write on top of newer ones"),void 0===y&&(y=!0),l.allWrites.push({path:o,snap:u,writeId:f,visible:y}),y&&(l.visibleWrites=Po(l.visibleWrites,o,u)),l.lastWriteId=f}(l.pendingWriteTree_,o,u,f,y),y?Cu(l,new yi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,u)):[]}function Ze(l,o,u=!1){const f=function $t(l,o){for(let u=0;u<l.allWrites.length;u++){const f=l.allWrites[u];if(f.writeId===o)return f}return null}(l.pendingWriteTree_,o);if(function ln(l,o){const u=l.allWrites.findIndex(K=>K.writeId===o);(0,pe.hu)(u>=0,"removeWrite called with nonexistent writeId.");const f=l.allWrites[u];l.allWrites.splice(u,1);let y=f.visible,D=!1,N=l.allWrites.length-1;for(;y&&N>=0;){const K=l.allWrites[N];K.visible&&(N>=u&&Kn(K,f.path)?y=!1:Ai(f.path,K.path)&&(D=!0)),N--}return!!y&&(D?(function kn(l){l.visibleWrites=sr(l.allWrites,Vr,Mr()),l.lastWriteId=l.allWrites.length>0?l.allWrites[l.allWrites.length-1].writeId:-1}(l),!0):(f.snap?l.visibleWrites=_o(l.visibleWrites,f.path):hr(f.children,ae=>{l.visibleWrites=_o(l.visibleWrites,ni(f.path,ae))}),!0))}(l.pendingWriteTree_,o)){let D=new xr(null);return null!=f.snap?D=D.set(Mr(),!0):hr(f.children,N=>{D=D.set(new Ur(N),!0)}),Cu(l,new Ku(f.path,D,u))}return[]}function vt(l,o,u){return Cu(l,new yi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,u))}function Ci(l,o,u,f){const y=o._path,D=l.syncPointTree_.get(y);let N=[];if(D&&("default"===o._queryIdentifier||Md(D,o))){const K=function tc(l,o,u,f){const y=o._queryIdentifier,D=[];let N=[];const K=iu(l);if("default"===y)for(const[ae,De]of l.views.entries())N=N.concat(nu(De,u,f)),Lc(De)&&(l.views.delete(ae),De.query._queryParams.loadsAllData()||D.push(De.query));else{const ae=l.views.get(y);ae&&(N=N.concat(nu(ae,u,f)),Lc(ae)&&(l.views.delete(y),ae.query._queryParams.loadsAllData()||D.push(ae.query)))}return K&&!iu(l)&&D.push(new(function ia(){return(0,pe.hu)(ru,"Reference.ts has not been loaded"),ru}())(o._repo,o._path)),{removed:D,events:N}}(D,o,u,f);(function tl(l){return 0===l.views.size})(D)&&(l.syncPointTree_=l.syncPointTree_.remove(y));const ae=K.removed;N=K.events;const De=-1!==ae.findIndex(lt=>lt._queryParams.loadsAllData()),nt=l.syncPointTree_.findOnPath(y,(lt,Dt)=>iu(Dt));if(De&&!nt){const lt=l.syncPointTree_.subtree(y);if(!lt.isEmpty()){const Dt=function vh(l){return l.fold((o,u,f)=>{if(u&&iu(u))return[wu(u)];{let y=[];return u&&(y=Cf(u)),hr(f,(D,N)=>{y=y.concat(N)}),y}})}(lt);for(let zt=0;zt<Dt.length;++zt){const dn=Dt[zt],Tr=dn.query,Br=Dl(l,dn);l.listenProvider_.startListening(zi(Tr),ou(l,Tr),Br.hashFn,Br.onComplete)}}}!nt&&ae.length>0&&!f&&(De?l.listenProvider_.stopListening(zi(o),null):ae.forEach(lt=>{const Dt=l.queryToTagMap.get(va(lt));l.listenProvider_.stopListening(zi(lt),Dt)})),function Zp(l,o){for(let u=0;u<o.length;++u){const f=o[u];if(!f._queryParams.loadsAllData()){const y=va(f),D=l.queryToTagMap.get(y);l.queryToTagMap.delete(y),l.tagToQueryMap.delete(D)}}}(l,ae)}return N}function su(l,o,u){const f=o._path;let y=null,D=!1;l.syncPointTree_.foreachOnPath(f,(lt,Dt)=>{const zt=Wi(lt,f);y=y||ka(Dt,zt),D=D||iu(Dt)});let K,N=l.syncPointTree_.get(f);N?(D=D||iu(N),y=y||ka(N,Mr())):(N=new Ad,l.syncPointTree_=l.syncPointTree_.set(f,N)),null!=y?K=!0:(K=!1,y=On.EMPTY_NODE,l.syncPointTree_.subtree(f).foreachChild((Dt,zt)=>{const dn=ka(zt,Mr());dn&&(y=y.updateImmediateChild(Dt,dn))}));const ae=Md(N,o);if(!ae&&!o._queryParams.loadsAllData()){const lt=va(o);(0,pe.hu)(!l.queryToTagMap.has(lt),"View does not exist, but we have a tag");const Dt=function Yp(){return v++}();l.queryToTagMap.set(lt,Dt),l.tagToQueryMap.set(Dt,lt)}let nt=function Rd(l,o,u,f,y,D){const N=rs(l,o,f,y,D);return l.views.has(o._queryIdentifier)||l.views.set(o._queryIdentifier,N),function Xu(l,o){l.eventRegistrations_.push(o)}(N,u),function el(l,o){const u=l.viewCache_.eventCache,f=[];return u.getNode().isLeafNode()||u.getNode().forEachChild(Zr,(D,N)=>{f.push(q(D,N))}),u.isFullyInitialized()&&f.push(W(u.getNode())),Td(l,f,u.getNode(),o)}(N,u)}(N,o,u,Re(l.pendingWriteTree_,f),y,K);if(!ae&&!D){const lt=Vc(N,o);nt=nt.concat(function Df(l,o,u){const f=o._path,y=ou(l,o),D=Dl(l,u),N=l.listenProvider_.startListening(zi(o),y,D.hashFn,D.onComplete),K=l.syncPointTree_.subtree(f);if(y)(0,pe.hu)(!iu(K.value),"If we're adding a query, it shouldn't be shadowed");else{const ae=K.fold((De,nt,lt)=>{if(!Zn(De)&&nt&&iu(nt))return[wu(nt).query];{let Dt=[];return nt&&(Dt=Dt.concat(Cf(nt).map(zt=>zt.query))),hr(lt,(zt,dn)=>{Dt=Dt.concat(dn)}),Dt}});for(let De=0;De<ae.length;++De){const nt=ae[De];l.listenProvider_.stopListening(zi(nt),ou(l,nt))}}return N}(l,o,lt))}return nt}function Iu(l,o,u){const y=l.pendingWriteTree_,D=l.syncPointTree_.findOnPath(o,(N,K)=>{const De=ka(K,Wi(N,o));if(De)return De});return Yn(y,o,D,u,!0)}function Cu(l,o){return ei(o,l.syncPointTree_,null,Re(l.pendingWriteTree_,Mr()))}function ei(l,o,u,f){if(Zn(l.path))return Bc(l,o,u,f);{const y=o.get(Mr());null==u&&null!=y&&(u=ka(y,Mr()));let D=[];const N=$n(l.path),K=l.operationForChild(N),ae=o.children.get(N);if(ae&&K){const De=u?u.getImmediateChild(N):null,nt=Yl(f,N);D=D.concat(ei(K,ae,De,nt))}return y&&(D=D.concat(Sd(y,l,f,u))),D}}function Bc(l,o,u,f){const y=o.get(Mr());null==u&&null!=y&&(u=ka(y,Mr()));let D=[];return o.children.inorderTraversal((N,K)=>{const ae=u?u.getImmediateChild(N):null,De=Yl(f,N),nt=l.operationForChild(N);nt&&(D=D.concat(Bc(nt,K,ae,De)))}),y&&(D=D.concat(Sd(y,l,f,u))),D}function Dl(l,o){const u=o.query,f=ou(l,u);return{hashFn:()=>(function Xl(l){return l.viewCache_.serverCache.getNode()}(o)||On.EMPTY_NODE).hash(),onComplete:y=>{if("ok"===y)return f?function or(l,o,u){const f=Ua(l,u);if(f){const y=jc(f),D=y.path,N=y.queryId,K=Wi(D,o);return Du(l,D,new go(Os(N),K))}return[]}(l,u._path,f):function Fn(l,o){return Cu(l,new go({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o))}(l,u._path);{const D=function la(l,o){let u="Unknown Error";"too_big"===l?u="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===l?u="Client doesn't have permission to access the desired data.":"unavailable"===l&&(u="The service is unavailable");const f=new Error(l+" at "+o._path.toString()+": "+u);return f.code=l.toUpperCase(),f}(y,u);return Ci(l,u,null,D)}}}}function ou(l,o){const u=va(o);return l.queryToTagMap.get(u)}function va(l){return l._path.toString()+"$"+l._queryIdentifier}function Ua(l,o){return l.tagToQueryMap.get(o)}function jc(l){const o=l.indexOf("$");return(0,pe.hu)(-1!==o&&o<l.length-1,"Bad queryKey."),{queryId:l.substr(o+1),path:new Ur(l.substr(0,o))}}function Du(l,o,u){const f=l.syncPointTree_.get(o);return(0,pe.hu)(f,"Missing sync point for query tag that we're tracking"),Sd(f,u,Re(l.pendingWriteTree_,o),null)}function zi(l){return l._queryParams.loadsAllData()&&!l._queryParams.isDefault()?new(function _(){return(0,pe.hu)(Fa,"Reference.ts has not been loaded"),Fa}())(l._repo,l._path):l}class Eh{constructor(o){this.node_=o}getImmediateChild(o){const u=this.node_.getImmediateChild(o);return new Eh(u)}node(){return this.node_}}class bf{constructor(o,u){this.syncTree_=o,this.path_=u}getImmediateChild(o){const u=ni(this.path_,o);return new bf(this.syncTree_,u)}node(){return Iu(this.syncTree_,this.path_)}}const Tf=function(l,o,u){return l&&"object"==typeof l?((0,pe.hu)(".sv"in l,"Unexpected leaf node or priority contents"),"string"==typeof l[".sv"]?xm(l[".sv"],o,u):"object"==typeof l[".sv"]?Xs(l[".sv"],o):void(0,pe.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2))):l},xm=function(l,o,u){if("timestamp"===l)return u.timestamp;(0,pe.hu)(!1,"Unexpected server value: "+l)},Xs=function(l,o,u){l.hasOwnProperty("increment")||(0,pe.hu)(!1,"Unexpected server value: "+JSON.stringify(l,null,2));const f=l.increment;"number"!=typeof f&&(0,pe.hu)(!1,"Unexpected increment value: "+f);const y=o.node();if((0,pe.hu)(null!=y,"Expected ChildrenNode.EMPTY_NODE for nulls"),!y.isLeafNode())return f;const N=y.getValue();return"number"!=typeof N?f:N+f},Af=function(l,o,u,f){return au(o,new bf(u,l),f)},Sf=function(l,o,u){return au(l,new Eh(o),u)};function au(l,o,u){const f=l.getPriority().val(),y=Tf(f,o.getImmediateChild(".priority"),u);let D;if(l.isLeafNode()){const N=l,K=Tf(N.getValue(),o,u);return K!==N.getValue()||y!==N.getPriority().val()?new Si(K,hi(y)):l}{const N=l;return D=N,y!==N.getPriority().val()&&(D=D.updatePriority(new Si(y))),N.forEachChild(Zr,(K,ae)=>{const De=au(ae,o.getImmediateChild(K),u);De!==ae&&(D=D.updateImmediateChild(K,De))}),D}}class Ri{constructor(o="",u=null,f={children:{},childCount:0}){this.name=o,this.parent=u,this.node=f}}function bl(l,o){let u=o instanceof Ur?o:new Ur(o),f=l,y=$n(u);for(;null!==y;){const D=(0,pe.DV)(f.node.children,y)||{children:{},childCount:0};f=new Ri(y,f,D),u=tr(u),y=$n(u)}return f}function nl(l){return l.node.value}function Tl(l,o){l.node.value=o,Od(l)}function eo(l){return l.node.childCount>0}function nc(l,o){hr(l.node.children,(u,f)=>{o(new Ri(u,l,f))})}function Qp(l,o,u,f){u&&!f&&o(l),nc(l,y=>{Qp(y,o,!0,f)}),u&&f&&o(l)}function bu(l){return new Ur(null===l.parent?l.name:bu(l.parent)+"/"+l.name)}function Od(l){null!==l.parent&&function Jp(l,o,u){const f=function $c(l){return void 0===nl(l)&&!eo(l)}(u),y=(0,pe.r3)(l.node.children,o);f&&y?(delete l.node.children[o],l.node.childCount--,Od(l)):!f&&!y&&(l.node.children[o]=u.node,l.node.childCount++,Od(l))}(l.parent,l.name,l)}const Xp=/[\[\].#$\/\u0000-\u001F\u007F]/,Rf=/[\[\].#$\u0000-\u001F\u007F]/,wh=10485760,Ih=function(l){return"string"==typeof l&&0!==l.length&&!Xp.test(l)},Pd=function(l){return"string"==typeof l&&0!==l.length&&!Rf.test(l)},Nd=function(l){return null===l||"string"==typeof l||"number"==typeof l&&!me(l)||l&&"object"==typeof l&&(0,pe.r3)(l,".sv")},vo=function(l,o,u,f){f&&void 0===o||Tu((0,pe.gK)(l,"value"),o,u)},Tu=function(l,o,u){const f=u instanceof Ur?new Ga(u,l):u;if(void 0===o)throw new Error(l+"contains undefined "+Rs(f));if("function"==typeof o)throw new Error(l+"contains a function "+Rs(f)+" with contents = "+o.toString());if(me(o))throw new Error(l+"contains "+o.toString()+" "+Rs(f));if("string"==typeof o&&o.length>wh/3&&(0,pe.ug)(o)>wh)throw new Error(l+"contains a string greater than "+wh+" utf8 bytes "+Rs(f)+" ('"+o.substring(0,50)+"...')");if(o&&"object"==typeof o){let y=!1,D=!1;if(hr(o,(N,K)=>{if(".value"===N)y=!0;else if(".priority"!==N&&".sv"!==N&&(D=!0,!Ih(N)))throw new Error(l+" contains an invalid key ("+N+") "+Rs(f)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function za(l,o){l.parts_.length>0&&(l.byteLength_+=1),l.parts_.push(o),l.byteLength_+=(0,pe.ug)(o),jo(l)})(f,N),Tu(l,K,f),function Da(l){const o=l.parts_.pop();l.byteLength_-=(0,pe.ug)(o),l.parts_.length>0&&(l.byteLength_-=1)}(f)}),y&&D)throw new Error(l+' contains ".value" child '+Rs(f)+" in addition to actual children.")}},kd=function(l,o,u,f){if(f&&void 0===o)return;const y=(0,pe.gK)(l,"values");if(!o||"object"!=typeof o||Array.isArray(o))throw new Error(y+" must be an object containing the children to replace.");const D=[];hr(o,(N,K)=>{const ae=new Ur(N);if(Tu(y,K,ni(u,ae)),".priority"===Ss(ae)&&!Nd(K))throw new Error(y+"contains an invalid value for '"+ae.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");D.push(ae)}),function(l,o){let u,f;for(u=0;u<o.length;u++){f=o[u];const D=ho(f);for(let N=0;N<D.length;N++)if((".priority"!==D[N]||N!==D.length-1)&&!Ih(D[N]))throw new Error(l+"contains an invalid key ("+D[N]+") in path "+f.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}o.sort(Qo);let y=null;for(u=0;u<o.length;u++){if(f=o[u],null!==y&&Ai(y,f))throw new Error(l+"contains a path "+y.toString()+" that is ancestor of another path "+f.toString());y=f}}(y,D)},Mf=function(l,o,u){if(!u||void 0!==o){if(me(o))throw new Error((0,pe.gK)(l,"priority")+"is "+o.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Nd(o))throw new Error((0,pe.gK)(l,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Wc=function(l,o,u,f){if(!(f&&void 0===u||Ih(u)))throw new Error((0,pe.gK)(l,o)+'was an invalid key = "'+u+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Bs=function(l,o,u,f){if(!(f&&void 0===u||Pd(u)))throw new Error((0,pe.gK)(l,o)+'was an invalid path = "'+u+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ea=function(l,o){if(".info"===$n(o))throw new Error(l+" failed = Can't modify data under /.info/")},Va=function(l,o){const u=o.path.toString();if("string"!=typeof o.repoInfo.host||0===o.repoInfo.host.length||!Ih(o.repoInfo.namespace)&&"localhost"!==o.repoInfo.host.split(":")[0]||0!==u.length&&!function(l){return l&&(l=l.replace(/^\/*\.info(\/|$)/,"/")),Pd(l)}(u))throw new Error((0,pe.gK)(l,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class eg{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function rc(l,o){let u=null;for(let f=0;f<o.length;f++){const y=o[f],D=y.getPath();null!==u&&!Ha(D,u.path)&&(l.eventLists_.push(u),u=null),null===u&&(u={events:[],path:D}),u.events.push(y)}u&&l.eventLists_.push(u)}function Ch(l,o,u){rc(l,u),tg(l,f=>Ha(f,o))}function Ba(l,o,u){rc(l,u),tg(l,f=>Ai(f,o)||Ai(o,f))}function tg(l,o){l.recursionDepth_++;let u=!0;for(let f=0;f<l.eventLists_.length;f++){const y=l.eventLists_[f];y&&(o(y.path)?(Fm(l.eventLists_[f]),l.eventLists_[f]=null):u=!1)}u&&(l.eventLists_=[]),l.recursionDepth_--}function Fm(l){for(let o=0;o<l.events.length;o++){const u=l.events[o];if(null!==u){l.events[o]=null;const f=u.getEventRunner();ti&&Rr("event: "+u.toString()),Ji(f)}}}const ng="repo_interrupt";class Hc{constructor(o,u,f,y){this.repoInfo_=o,this.forceRestClient_=u,this.authTokenProvider_=f,this.appCheckProvider_=y,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eg,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Za(),this.transactionQueueTree_=new Ri,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Um(l){const u=l.infoData_.getNode(new Ur(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+u}function Dh(l){return function(l){return(l=l||{}).timestamp=l.timestamp||(new Date).getTime(),l}({timestamp:Um(l)})}function xf(l,o,u,f,y){l.dataUpdateCount++;const D=new Ur(o);u=l.interceptServerDataCallback_?l.interceptServerDataCallback_(o,u):u;let N=[];if(y)if(f){const ae=(0,pe.UI)(u,De=>hi(De));N=function La(l,o,u,f){const y=Ua(l,f);if(y){const D=jc(y),N=D.path,K=D.queryId,ae=Wi(N,o),De=xr.fromObject(u);return Du(l,N,new Gi(Os(K),ae,De))}return[]}(l.serverSyncTree_,D,ae,y)}else{const ae=hi(u);N=function $i(l,o,u,f){const y=Ua(l,f);if(null!=y){const D=jc(y),N=D.path,K=D.queryId,ae=Wi(N,o);return Du(l,N,new yi(Os(K),ae,u))}return[]}(l.serverSyncTree_,D,ae,y)}else if(f){const ae=(0,pe.UI)(u,De=>hi(De));N=function cn(l,o,u){const f=xr.fromObject(u);return Cu(l,new Gi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},o,f))}(l.serverSyncTree_,D,ae)}else{const ae=hi(u);N=vt(l.serverSyncTree_,D,ae)}let K=D;N.length>0&&(K=is(l,D)),Ba(l.eventQueue_,K,N)}function Vm(l,o){Fd(l,"connected",o),!1===o&&function Of(l){ja(l,"onDisconnectEvents");const o=Dh(l),u=Za();Qt(l.onDisconnect_,Mr(),(y,D)=>{const N=Af(y,D,l.serverSyncTree_,o);Xr(u,y,N)});let f=[];Qt(u,Mr(),(y,D)=>{f=f.concat(vt(l.serverSyncTree_,y,D));const N=kf(l,y);is(l,N)}),l.onDisconnect_=Za(),Ba(l.eventQueue_,Mr(),f)}(l)}function Fd(l,o,u){const f=new Ur("/.info/"+o),y=hi(u);l.infoData_.updateSnapshot(f,y);const D=vt(l.infoSyncTree_,f,y);Ba(l.eventQueue_,f,D)}function Gc(l){return l.nextWriteId_++}function Ld(l,o,u,f,y){ja(l,"set",{path:o.toString(),value:u,priority:f});const D=Dh(l),N=hi(u,f),K=Iu(l.serverSyncTree_,o),ae=Sf(N,K,D),De=Gc(l),nt=Y(l.serverSyncTree_,o,ae,De,!0);rc(l.eventQueue_,nt),l.server_.put(o.toString(),N.val(!0),(Dt,zt)=>{const dn="ok"===Dt;dn||le("set at "+o+" failed: "+Dt);const Tr=Ze(l.serverSyncTree_,De,!dn);Ba(l.eventQueue_,o,Tr),Ru(0,y,Dt,zt)});const lt=kf(l,o);is(l,lt),Ba(l.eventQueue_,lt,[])}function rg(l,o,u){l.server_.onDisconnectCancel(o.toString(),(f,y)=>{"ok"===f&&Kl(l.onDisconnect_,o),Ru(0,u,f,y)})}function Vd(l,o,u,f){const y=hi(u);l.server_.onDisconnectPut(o.toString(),y.val(!0),(D,N)=>{"ok"===D&&Xr(l.onDisconnect_,o,y),Ru(0,f,D,N)})}function to(l,o,u){let f;f=".info"===$n(o._path)?Ci(l.infoSyncTree_,o,u):Ci(l.serverSyncTree_,o,u),Ch(l.eventQueue_,o._path,f)}function Th(l){l.persistentConnection_&&l.persistentConnection_.interrupt(ng)}function ja(l,...o){let u="";l.persistentConnection_&&(u=l.persistentConnection_.id+":"),Rr(u,...o)}function Ru(l,o,u,f){o&&Ji(()=>{if("ok"===u)o(null);else{const y=(u||"error").toUpperCase();let D=y;f&&(D+=": "+f);const N=new Error(D);N.code=y,o(N)}})}function Ah(l,o,u){return Iu(l.serverSyncTree_,o,u)||On.EMPTY_NODE}function Kc(l,o=l.transactionQueueTree_){if(o||sc(l,o),nl(o)){const u=qc(l,o);(0,pe.hu)(u.length>0,"Sending zero length transaction queue"),u.every(y=>0===y.status)&&function ig(l,o,u){const f=u.map(De=>De.currentWriteId),y=Ah(l,o,f);let D=y;const N=y.hash();for(let De=0;De<u.length;De++){const nt=u[De];(0,pe.hu)(0===nt.status,"tryToSendTransactionQueue_: items in queue should all be run."),nt.status=1,nt.retryCount++;const lt=Wi(o,nt.path);D=D.updateChild(lt,nt.currentOutputSnapshotRaw)}const K=D.val(!0),ae=o;l.server_.put(ae.toString(),K,De=>{ja(l,"transaction put response",{path:ae.toString(),status:De});let nt=[];if("ok"===De){const lt=[];for(let Dt=0;Dt<u.length;Dt++)u[Dt].status=2,nt=nt.concat(Ze(l.serverSyncTree_,u[Dt].currentWriteId)),u[Dt].onComplete&&lt.push(()=>u[Dt].onComplete(null,!0,u[Dt].currentOutputSnapshotResolved)),u[Dt].unwatcher();sc(l,bl(l.transactionQueueTree_,o)),Kc(l,l.transactionQueueTree_),Ba(l.eventQueue_,o,nt);for(let Dt=0;Dt<lt.length;Dt++)Ji(lt[Dt])}else{if("datastale"===De)for(let lt=0;lt<u.length;lt++)u[lt].status=3===u[lt].status?4:0;else{le("transaction at "+ae.toString()+" failed: "+De);for(let lt=0;lt<u.length;lt++)u[lt].status=4,u[lt].abortReason=De}is(l,o)}},N)}(l,bu(o),u)}else eo(o)&&nc(o,u=>{Kc(l,u)})}function is(l,o){const u=Bd(l,o),f=bu(u);return function Nf(l,o,u){if(0===o.length)return;const f=[];let y=[];const N=o.filter(K=>0===K.status).map(K=>K.currentWriteId);for(let K=0;K<o.length;K++){const ae=o[K],De=Wi(u,ae.path);let lt,nt=!1;if((0,pe.hu)(null!==De,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ae.status)nt=!0,lt=ae.abortReason,y=y.concat(Ze(l.serverSyncTree_,ae.currentWriteId,!0));else if(0===ae.status)if(ae.retryCount>=25)nt=!0,lt="maxretry",y=y.concat(Ze(l.serverSyncTree_,ae.currentWriteId,!0));else{const Dt=Ah(l,ae.path,N);ae.currentInputSnapshot=Dt;const zt=o[K].update(Dt.val());if(void 0!==zt){Tu("transaction failed: Data returned ",zt,ae.path);let dn=hi(zt);"object"==typeof zt&&null!=zt&&(0,pe.r3)(zt,".priority")||(dn=dn.updatePriority(Dt.getPriority()));const Br=ae.currentWriteId,so=Dh(l),oo=Sf(dn,Dt,so);ae.currentOutputSnapshotRaw=dn,ae.currentOutputSnapshotResolved=oo,ae.currentWriteId=Gc(l),N.splice(N.indexOf(Br),1),y=y.concat(Y(l.serverSyncTree_,ae.path,oo,ae.currentWriteId,ae.applyLocally)),y=y.concat(Ze(l.serverSyncTree_,Br,!0))}else nt=!0,lt="nodata",y=y.concat(Ze(l.serverSyncTree_,ae.currentWriteId,!0))}Ba(l.eventQueue_,u,y),y=[],nt&&(o[K].status=2,setTimeout(o[K].unwatcher,Math.floor(0)),o[K].onComplete&&f.push("nodata"===lt?()=>o[K].onComplete(null,!1,o[K].currentInputSnapshot):()=>o[K].onComplete(new Error(lt),!1,null)))}sc(l,l.transactionQueueTree_);for(let K=0;K<f.length;K++)Ji(f[K]);Kc(l,l.transactionQueueTree_)}(l,qc(l,u),f),f}function Bd(l,o){let u,f=l.transactionQueueTree_;for(u=$n(o);null!==u&&void 0===nl(f);)f=bl(f,u),u=$n(o=tr(o));return f}function qc(l,o){const u=[];return Mu(l,o,u),u.sort((f,y)=>f.order-y.order),u}function Mu(l,o,u){const f=nl(o);if(f)for(let y=0;y<f.length;y++)u.push(f[y]);nc(o,y=>{Mu(l,y,u)})}function sc(l,o){const u=nl(o);if(u){let f=0;for(let y=0;y<u.length;y++)2!==u[y].status&&(u[f]=u[y],f++);u.length=f,Tl(o,u.length>0?u:void 0)}nc(o,f=>{sc(l,f)})}function kf(l,o){const u=bu(Bd(l,o)),f=bl(l.transactionQueueTree_,o);return function Om(l,o,u){let f=u?l:l.parent;for(;null!==f;){if(o(f))return!0;f=f.parent}}(f,y=>{Sh(l,y)}),Sh(l,f),Qp(f,y=>{Sh(l,y)}),u}function Sh(l,o){const u=nl(o);if(u){const f=[];let y=[],D=-1;for(let N=0;N<u.length;N++)3===u[N].status||(1===u[N].status?((0,pe.hu)(D===N-1,"All SENT items should be at beginning of queue."),D=N,u[N].status=3,u[N].abortReason="set"):((0,pe.hu)(0===u[N].status,"Unexpected transaction status in abort"),u[N].unwatcher(),y=y.concat(Ze(l.serverSyncTree_,u[N].currentWriteId,!0)),u[N].onComplete&&f.push(u[N].onComplete.bind(null,new Error("set"),!1,null))));-1===D?Tl(o,void 0):u.length=D+1,Ba(l.eventQueue_,bu(o),y);for(let N=0;N<f.length;N++)Ji(f[N])}}const Ho=function(l,o){const u=oc(l),f=u.namespace;return"firebase.com"===u.domain&&ve(u.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!f||"undefined"===f)&&"localhost"!==u.domain&&ve("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),u.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&le("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Hs(u.host,u.secure,f,"ws"===u.scheme||"wss"===u.scheme,o,"",f!==u.subdomain),path:new Ur(u.pathString)}},oc=function(l){let o="",u="",f="",y="",D="",N=!0,K="https",ae=443;if("string"==typeof l){let De=l.indexOf("//");De>=0&&(K=l.substring(0,De-1),l=l.substring(De+2));let nt=l.indexOf("/");-1===nt&&(nt=l.length);let lt=l.indexOf("?");-1===lt&&(lt=l.length),o=l.substring(0,Math.min(nt,lt)),nt<lt&&(y=function jd(l){let o="";const u=l.split("/");for(let f=0;f<u.length;f++)if(u[f].length>0){let y=u[f];try{y=decodeURIComponent(y.replace(/\+/g," "))}catch(D){}o+="/"+y}return o}(l.substring(nt,lt)));const Dt=function Al(l){const o={};"?"===l.charAt(0)&&(l=l.substring(1));for(const u of l.split("&")){if(0===u.length)continue;const f=u.split("=");2===f.length?o[decodeURIComponent(f[0])]=decodeURIComponent(f[1]):le(`Invalid query segment '${u}' in query '${l}'`)}return o}(l.substring(Math.min(l.length,lt)));De=o.indexOf(":"),De>=0?(N="https"===K||"wss"===K,ae=parseInt(o.substring(De+1),10)):De=o.length;const zt=o.slice(0,De);if("localhost"===zt.toLowerCase())u="localhost";else if(zt.split(".").length<=2)u=zt;else{const dn=o.indexOf(".");f=o.substring(0,dn).toLowerCase(),u=o.substring(dn+1),D=f}"ns"in Dt&&(D=Dt.ns)}return{host:o,port:ae,domain:u,subdomain:f,secure:N,scheme:K,pathString:y,namespace:D}};class ac{constructor(o,u,f,y){this.eventType=o,this.eventRegistration=u,this.snapshot=f,this.prevName=y}getPath(){const o=this.snapshot.ref;return"value"===this.eventType?o._path:o.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,pe.Pz)(this.snapshot.exportVal())}}class Ff{constructor(o,u,f){this.eventRegistration=o,this.error=u,this.path=f}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class uc{constructor(o,u){this.snapshotCallback=o,this.cancelCallback=u}onValue(o,u){this.snapshotCallback.call(null,o,u)}onCancel(o){return(0,pe.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,o)}get hasCancelCallback(){return!!this.cancelCallback}matches(o){return this.snapshotCallback===o.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===o.snapshotCallback.userCallback&&this.snapshotCallback.context===o.snapshotCallback.context}}class Rh{constructor(o,u){this._repo=o,this._path=u}cancel(){const o=new pe.BH;return rg(this._repo,this._path,o.wrapCallback(()=>{})),o.promise}remove(){Ea("OnDisconnect.remove",this._path);const o=new pe.BH;return Vd(this._repo,this._path,null,o.wrapCallback(()=>{})),o.promise}set(o){Ea("OnDisconnect.set",this._path),vo("OnDisconnect.set",o,this._path,!1);const u=new pe.BH;return Vd(this._repo,this._path,o,u.wrapCallback(()=>{})),u.promise}setWithPriority(o,u){Ea("OnDisconnect.setWithPriority",this._path),vo("OnDisconnect.setWithPriority",o,this._path,!1),Mf("OnDisconnect.setWithPriority",u,!1);const f=new pe.BH;return function bh(l,o,u,f,y){const D=hi(u,f);l.server_.onDisconnectPut(o.toString(),D.val(!0),(N,K)=>{"ok"===N&&Xr(l.onDisconnect_,o,D),Ru(0,y,N,K)})}(this._repo,this._path,o,u,f.wrapCallback(()=>{})),f.promise}update(o){Ea("OnDisconnect.update",this._path),kd("OnDisconnect.update",o,this._path,!1);const u=new pe.BH;return function Ct(l,o,u,f){if((0,pe.xb)(u))return Rr("onDisconnect().update() called with empty data.  Don't do anything."),void Ru(0,f,"ok",void 0);l.server_.onDisconnectMerge(o.toString(),u,(y,D)=>{"ok"===y&&hr(u,(N,K)=>{const ae=hi(K);Xr(l.onDisconnect_,ni(o,N),ae)}),Ru(0,f,y,D)})}(this._repo,this._path,o,u.wrapCallback(()=>{})),u.promise}}class No{constructor(o,u,f,y){this._repo=o,this._path=u,this._queryParams=f,this._orderByCalled=y}get key(){return Zn(this._path)?null:Ss(this._path)}get ref(){return new Go(this._repo,this._path)}get _queryIdentifier(){const o=Ra(this._queryParams),u=Sn(o);return"{}"===u?"default":u}get _queryObject(){return Ra(this._queryParams)}isEqual(o){if(!((o=(0,pe.m9)(o))instanceof No))return!1;const u=this._repo===o._repo,f=Ha(this._path,o._path);return u&&f&&this._queryIdentifier===o._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function To(l){let o="";for(let u=l.pieceNum_;u<l.pieces_.length;u++)""!==l.pieces_[u]&&(o+="/"+encodeURIComponent(String(l.pieces_[u])));return o||"/"}(this._path)}}function $d(l,o){if(!0===l._orderByCalled)throw new Error(o+": You can't combine multiple orderBy calls.")}function xu(l){let o=null,u=null;if(l.hasStart()&&(o=l.getIndexStartValue()),l.hasEnd()&&(u=l.getIndexEndValue()),l.getIndex()===Wo){const f="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",y="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(l.hasStart()){if(l.getIndexStartName()!==qe)throw new Error(f);if("string"!=typeof o)throw new Error(y)}if(l.hasEnd()){if(l.getIndexEndName()!==Rt)throw new Error(f);if("string"!=typeof u)throw new Error(y)}}else if(l.getIndex()===Zr){if(null!=o&&!Nd(o)||null!=u&&!Nd(u))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,pe.hu)(l.getIndex()instanceof fa||l.getIndex()===ea,"unknown index type."),null!=o&&"object"==typeof o||null!=u&&"object"==typeof u)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function lc(l){if(l.hasStart()&&l.hasEnd()&&l.hasLimit()&&!l.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Go extends No{constructor(o,u){super(o,u,new Pn,!1)}get parent(){const o=ts(this._path);return null===o?null:new Go(this._repo,o)}get root(){let o=this;for(;null!==o.parent;)o=o.parent;return o}}class sa{constructor(o,u,f){this._node=o,this.ref=u,this._index=f}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(o){const u=new Ur(o),f=Ou(this.ref,o);return new sa(this._node.getChild(u),f,Zr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(o){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(f,y)=>o(new sa(y,Ou(this.ref,f),Zr)))}hasChild(o){const u=new Ur(o);return!this._node.getChild(u).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function uu(l,o){return(l=(0,pe.m9)(l))._checkNotDeleted("ref"),void 0!==o?Ou(l._root,o):l._root}function Lf(l,o){(l=(0,pe.m9)(l))._checkNotDeleted("refFromURL");const u=Ho(o,l._repo.repoInfo_.nodeAdmin);Va("refFromURL",u);const f=u.repoInfo;return!l._repo.repoInfo_.isCustomHost()&&f.host!==l._repo.repoInfo_.host&&ve("refFromURL: Host name does not match the current database: (found "+f.host+" but expected "+l._repo.repoInfo_.host+")"),uu(l,u.path.toString())}function Ou(l,o){return null===$n((l=(0,pe.m9)(l))._path)?(u=o,u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Bs("child","path",u,!1)):Bs("child","path",o,!1),new Go(l._repo,ni(l._path,o));var u}function cc(l,o){l=(0,pe.m9)(l),Ea("set",l._path),vo("set",o,l._path,!1);const u=new pe.BH;return Ld(l._repo,l._path,o,null,u.wrapCallback(()=>{})),u.promise}function sg(l,o){kd("update",o,l._path,!1);const u=new pe.BH;return function Ud(l,o,u,f){ja(l,"update",{path:o.toString(),value:u});let y=!0;const D=Dh(l),N={};if(hr(u,(K,ae)=>{y=!1,N[K]=Af(ni(o,K),hi(ae),l.serverSyncTree_,D)}),y)Rr("update() called with empty data.  Don't do anything."),Ru(0,f,"ok",void 0);else{const K=Gc(l),ae=function ge(l,o,u,f){!function ft(l,o,u,f){(0,pe.hu)(f>l.lastWriteId,"Stacking an older merge on top of newer ones"),l.allWrites.push({path:o,children:u,writeId:f,visible:!0}),l.visibleWrites=qu(l.visibleWrites,o,u),l.lastWriteId=f}(l.pendingWriteTree_,o,u,f);const y=xr.fromObject(u);return Cu(l,new Gi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},o,y))}(l.serverSyncTree_,o,N,K);rc(l.eventQueue_,ae),l.server_.merge(o.toString(),u,(De,nt)=>{const lt="ok"===De;lt||le("update at "+o+" failed: "+De);const Dt=Ze(l.serverSyncTree_,K,!lt),zt=Dt.length>0?is(l,o):o;Ba(l.eventQueue_,zt,Dt),Ru(0,f,De,nt)}),hr(u,De=>{const nt=kf(l,ni(o,De));is(l,nt)}),Ba(l.eventQueue_,o,[])}}(l._repo,l._path,o,u.wrapCallback(()=>{})),u.promise}function og(l){return function Bm(l,o){const u=function yh(l,o){const u=o._path;let f=null;l.syncPointTree_.foreachOnPath(u,(De,nt)=>{const lt=Wi(De,u);f=f||ka(nt,lt)});let y=l.syncPointTree_.get(u);y?f=f||ka(y,Mr()):(y=new Ad,l.syncPointTree_=l.syncPointTree_.set(u,y));const D=null!=f,N=D?new Qs(f,!0,!1):null;return function Fc(l){return Xn(l.viewCache_)}(rs(y,o,Re(l.pendingWriteTree_,o._path),D?N.getNode():On.EMPTY_NODE,D))}(l.serverSyncTree_,o);return null!=u?Promise.resolve(u):l.server_.get(o).then(f=>{const y=hi(f).withIndex(o._queryParams.getIndex()),D=vt(l.serverSyncTree_,o._path,y);return Ch(l.eventQueue_,o._path,D),Promise.resolve(y)},f=>(ja(l,"get for query "+(0,pe.Pz)(o)+" failed: "+f),Promise.reject(new Error(f))))}((l=(0,pe.m9)(l))._repo,l).then(o=>new sa(o,new Go(l._repo,l._path),l._queryParams.getIndex()))}class Zc{constructor(o){this.callbackContext=o}respondsTo(o){return"value"===o}createEvent(o,u){const f=u._queryParams.getIndex();return new ac("value",this,new sa(o.snapshotNode,new Go(u._repo,u._path),f))}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,null)}createCancelEvent(o,u){return this.callbackContext.hasCancelCallback?new Ff(this,o,u):null}matches(o){return o instanceof Zc&&(!o.callbackContext||!this.callbackContext||o.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class hc{constructor(o,u){this.eventType=o,this.callbackContext=u}respondsTo(o){let u="children_added"===o?"child_added":o;return u="children_removed"===u?"child_removed":u,this.eventType===u}createCancelEvent(o,u){return this.callbackContext.hasCancelCallback?new Ff(this,o,u):null}createEvent(o,u){(0,pe.hu)(null!=o.childName,"Child events should have a childName.");const f=Ou(new Go(u._repo,u._path),o.childName),y=u._queryParams.getIndex();return new ac(o.type,this,new sa(o.snapshotNode,f,y),o.prevName)}getEventRunner(o){return"cancel"===o.getEventType()?()=>this.callbackContext.onCancel(o.error):()=>this.callbackContext.onValue(o.snapshot,o.prevName)}matches(o){return o instanceof hc&&this.eventType===o.eventType&&(!this.callbackContext||!o.callbackContext||this.callbackContext.matches(o.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function fc(l,o,u,f,y){let D;if("object"==typeof f&&(D=void 0,y=f),"function"==typeof f&&(D=f),y&&y.onlyOnce){const ae=u,De=(nt,lt)=>{to(l._repo,l,K),ae(nt,lt)};De.userCallback=u.userCallback,De.context=u.context,u=De}const N=new uc(u,D||void 0),K="value"===o?new Zc(N):new hc(o,N);return function Pf(l,o,u){let f;f=".info"===$n(o._path)?su(l.infoSyncTree_,o,u):su(l.serverSyncTree_,o,u),Ch(l.eventQueue_,o._path,f)}(l._repo,l,K),()=>to(l._repo,l,K)}function Mh(l,o,u,f){return fc(l,"value",o,u,f)}function Vf(l,o,u,f){return fc(l,"child_added",o,u,f)}function pc(l,o,u,f){return fc(l,"child_changed",o,u,f)}function Hd(l,o,u,f){return fc(l,"child_moved",o,u,f)}function Gd(l,o,u,f){return fc(l,"child_removed",o,u,f)}function wa(l,o,u){let f=null;const y=u?new uc(u):null;"value"===o?f=new Zc(y):o&&(f=new hc(o,y)),to(l._repo,l,f)}class Ki{}class xh extends Ki{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){vo("endAt",this._value,o._path,!0);const u=br(o._queryParams,this._value,this._key);if(lc(u),xu(u),o._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new No(o._repo,o._path,u,o._orderByCalled)}}class Bf extends Ki{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){vo("endBefore",this._value,o._path,!1);const u=function Zs(l,o,u){let f,y;return l.index_===Wo?("string"==typeof o&&(o=L(o)),y=br(l,o,u)):(f=null==u?qe:L(u),y=br(l,o,f)),y.endBeforeSet_=!0,y}(o._queryParams,this._value,this._key);if(lc(u),xu(u),o._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new No(o._repo,o._path,u,o._orderByCalled)}}class rl extends Ki{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){vo("startAt",this._value,o._path,!0);const u=Mo(o._queryParams,this._value,this._key);if(lc(u),xu(u),o._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new No(o._repo,o._path,u,o._orderByCalled)}}class ug extends Ki{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){vo("startAfter",this._value,o._path,!1);const u=function qs(l,o,u){let f;if(l.index_===Wo)"string"==typeof o&&(o=I(o)),f=Mo(l,o,u);else{let y;y=null==u?Rt:I(u),f=Mo(l,o,y)}return f.startAfterSet_=!0,f}(o._queryParams,this._value,this._key);if(lc(u),xu(u),o._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new No(o._repo,o._path,u,o._orderByCalled)}}class $m extends Ki{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new No(o._repo,o._path,function ji(l,o){const u=l.copy();return u.limitSet_=!0,u.limit_=o,u.viewFrom_="l",u}(o._queryParams,this._limit),o._orderByCalled)}}class jf extends Ki{constructor(o){super(),this._limit=o}_apply(o){if(o._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new No(o._repo,o._path,function ii(l,o){const u=l.copy();return u.limitSet_=!0,u.limit_=o,u.viewFrom_="r",u}(o._queryParams,this._limit),o._orderByCalled)}}class Rl extends Ki{constructor(o){super(),this._path=o}_apply(o){$d(o,"orderByChild");const u=new Ur(this._path);if(Zn(u))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const f=new fa(u),y=xs(o._queryParams,f);return xu(y),new No(o._repo,o._path,y,!0)}}class $a extends Ki{_apply(o){$d(o,"orderByKey");const u=xs(o._queryParams,Wo);return xu(u),new No(o._repo,o._path,u,!0)}}class Wm extends Ki{_apply(o){$d(o,"orderByPriority");const u=xs(o._queryParams,Zr);return xu(u),new No(o._repo,o._path,u,!0)}}class sl extends Ki{_apply(o){$d(o,"orderByValue");const u=xs(o._queryParams,ea);return xu(u),new No(o._repo,o._path,u,!0)}}class Wf extends Ki{constructor(o,u){super(),this._value=o,this._key=u}_apply(o){if(vo("equalTo",this._value,o._path,!1),o._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(o._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new xh(this._value,this._key)._apply(new rl(this._value,this._key)._apply(o))}}function Pu(l,...o){let u=(0,pe.m9)(l);for(const f of o)u=f._apply(u);return u}(function Uc(l){(0,pe.hu)(!ru,"__referenceConstructor has already been defined"),ru=l})(Go),function b(l){(0,pe.hu)(!Fa,"__referenceConstructor has already been defined"),Fa=l}(Go);const Ml={};function Kd(l,o,u,f,y){let D=f||l.options.databaseURL;void 0===D&&(l.options.projectId||ve("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Rr("Using default host for project ",l.options.projectId),D=`${l.options.projectId}-default-rtdb.firebaseio.com`);let ae,De,N=Ho(D,y),K=N.repoInfo;"undefined"!=typeof process&&process.env&&(De=process.env.FIREBASE_DATABASE_EMULATOR_HOST),De?(ae=!0,D=`http://${De}?ns=${K.namespace}`,N=Ho(D,y),K=N.repoInfo):ae=!N.repoInfo.secure;const nt=y&&ae?new us(us.OWNER):new Yo(l.name,l.options,o);Va("Invalid Firebase Database URL",N),Zn(N.path)||ve("Database URL must point to the root of a Firebase Database (not including a child path).");const lt=function Ph(l,o,u,f){let y=Ml[o.name];y||(y={},Ml[o.name]=y);let D=y[l.toURLString()];return D&&ve("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),D=new Hc(l,false,u,f),y[l.toURLString()]=D,D}(K,l,nt,new ca(l.name,u));return new Kf(lt,l)}class Kf{constructor(o,u){this._repoInternal=o,this.app=u,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Au(l,o,u){if(l.stats_=Vo(l.repoInfo_),l.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)l.server_=new pa(l.repoInfo_,(f,y,D,N)=>{xf(l,f,y,D,N)},l.authTokenProvider_,l.appCheckProvider_),setTimeout(()=>Vm(l,!0),0);else{if(null!=u){if("object"!=typeof u)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,pe.Pz)(u)}catch(f){throw new Error("Invalid authOverride provided: "+f)}}l.persistentConnection_=new qr(l.repoInfo_,o,(f,y,D,N)=>{xf(l,f,y,D,N)},f=>{Vm(l,f)},f=>{!function Su(l,o){hr(o,(u,f)=>{Fd(l,u,f)})}(l,f)},l.authTokenProvider_,l.appCheckProvider_,u),l.server_=l.persistentConnection_}l.authTokenProvider_.addTokenChangeListener(f=>{l.server_.refreshAuthToken(f)}),l.appCheckProvider_.addTokenChangeListener(f=>{l.server_.refreshAppCheckToken(f.token)}),l.statsReporter_=function Fi(l,o){const u=l.toString();return Ti[u]||(Ti[u]=o()),Ti[u]}(l.repoInfo_,()=>new Ys(l.stats_,l.server_)),l.infoData_=new xo,l.infoSyncTree_=new A({startListening:(f,y,D,N)=>{let K=[];const ae=l.infoData_.getNode(f._path);return ae.isEmpty()||(K=vt(l.infoSyncTree_,f._path,ae),setTimeout(()=>{N("ok")},0)),K},stopListening:()=>{}}),Fd(l,"connected",!1),l.serverSyncTree_=new A({startListening:(f,y,D,N)=>(l.server_.listen(f,D,y,(K,ae)=>{const De=N(K,ae);Ba(l.eventQueue_,f._path,De)}),[]),stopListening:(f,y)=>{l.server_.unlisten(f,y)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Go(this._repo,Mr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function zf(l,o){const u=Ml[o];(!u||u[l.key]!==l)&&ve(`Database ${o}(${l.repoInfo_}) has already been deleted.`),Th(l),delete u[l.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(o){null===this._rootInternal&&ve("Cannot call "+o+" on a deleted database.")}}function Jc(){Nr.IS_TRANSPORT_INITIALIZED&&le("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Nh(){Jc(),In.forceDisallow()}function qf(){Jc(),wr.forceDisallow(),In.forceAllow()}function dg(l=(0,fn.getApp)(),o){return(0,fn._getProvider)(l,"database").getImmediate({identifier:o})}function Zf(l,o){Pi(l,o)}const Qf={".sv":"timestamp"};class Y_{constructor(o,u){this.committed=o,this.snapshot=u}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}qr.prototype.simpleListen=function(l,o){this.sendRequest("q",{p:l},o)},qr.prototype.echo=function(l,o){this.sendRequest("echo",{d:l},o)},function Yf(l){_n(fn.SDK_VERSION),(0,fn._registerComponent)(new rr.wA("database",(o,{instanceIdentifier:u})=>Kd(o.getProvider("app").getImmediate(),o.getProvider("auth-internal"),o.getProvider("app-check-internal"),u),"PUBLIC").setMultipleInstances(!0)),(0,fn.registerVersion)(Oi,"0.13.0",l),(0,fn.registerVersion)(Oi,"0.13.0","esm2017")}();class _c{constructor(o){return o}}const Xf="database",tp=new M.OlP("angularfire2.database-instances");function np(l){return(o,u)=>{const f=o.runOutsideAngular(()=>l(u));return new _c(f)}}const rp={provide:class ep{constructor(){return(0,Xe.vb)(Xf)}},deps:[[new M.FiY,tp]]},pg={provide:_c,useFactory:function al(l,o){const u=(0,Xe.JM)(Xf,l,o);return u&&new _c(u)},deps:[[new M.FiY,tp],je.Ot]};let qd=(()=>{class l{constructor(){(0,Fe.KN)("angularfire",Xe.q4.full,"rtdb")}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({providers:[pg,rp]}),l})();function gg(l,...o){return{ngModule:qd,providers:[{provide:tp,useFactory:np(l),multi:!0,deps:[M.R0b,M.zs3,Xe.HU,je.z6,[new M.FiY,_t],[new M.FiY,ze.nm],...o]}]}}const ul=(0,Xe.u3)(dg,!0);var ll=S(5525);class Uh{constructor(o){return o}}const dp="firestore",nd=new M.OlP("angularfire2.firestore-instances");function fp(l){return(o,u)=>{const f=o.runOutsideAngular(()=>l(u));return new Uh(f)}}const Ia={provide:class hp{constructor(){return(0,Xe.vb)(dp)}},deps:[[new M.FiY,nd]]},Qd={provide:Uh,useFactory:function Ag(l,o){const u=(0,Xe.JM)(dp,l,o);return u&&new Uh(u)},deps:[[new M.FiY,nd],je.Ot]};let Sg=(()=>{class l{constructor(){(0,Fe.KN)("angularfire",Xe.q4.full,"fst")}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({providers:[Qd,Ia]}),l})();function rd(l,...o){return{ngModule:Sg,providers:[{provide:nd,useFactory:fp(l),multi:!0,deps:[M.R0b,M.zs3,Xe.HU,je.z6,[new M.FiY,_t],[new M.FiY,ze.nm],...o]}]}}const vc=(0,Xe.u3)(ll.ad,!0);var ku=S(2011),lu=S(1041),qg=S(8306),eh=S(9646),Hh=S(8996),Gh=S(8372),Nl=S(4004),ad=S(3900),wc=S(3942);const yp="firebasestorage.googleapis.com",vp="storageBucket";class fi extends pe.ZR{constructor(o,u){super(ud(o),`Firebase Storage: ${u} (${ud(o)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fi.prototype)}_codeEquals(o){return ud(o)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(o){this.customData.serverResponse=o,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function ud(l){return"storage/"+l}function zh(){return new fi("unknown","An unknown error occurred, please check the error payload for server response.")}function Ep(){return new fi("canceled","User canceled the upload/download.")}function nh(){return new fi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ld(l){return new fi("invalid-argument",l)}function Jg(){return new fi("app-deleted","The Firebase app was deleted.")}function Yh(l){return new fi("invalid-root-operation","The operation '"+l+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function rh(l,o){return new fi("invalid-format","String does not match format '"+l+"': "+o)}function Ic(l){throw new fi("internal-error","Internal error: "+l)}class no{constructor(o,u){this.bucket=o,this.path_=u}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const o=encodeURIComponent;return"/b/"+o(this.bucket)+"/o/"+o(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(o,u){let f;try{f=no.makeFromUrl(o,u)}catch(y){return new no(o,"")}if(""===f.path)return f;throw function gy(l){return new fi("invalid-default-bucket","Invalid default bucket '"+l+"'.")}(o)}static makeFromUrl(o,u){let f=null;const y="([A-Za-z0-9.\\-_]+)",K=new RegExp("^gs://"+y+"(/(.*))?$","i");function De(ao){ao.path_=decodeURIComponent(ao.path)}const lt=u.replace(/[.]/g,"\\."),hs=[{regex:K,indices:{bucket:1,path:3},postModify:function D(ao){"/"===ao.path.charAt(ao.path.length-1)&&(ao.path_=ao.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${lt}/v[A-Za-z0-9_]+/b/${y}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:De},{regex:new RegExp(`^https?://${u===yp?"(?:storage.googleapis.com|storage.cloud.google.com)":u}/${y}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:De}];for(let ao=0;ao<hs.length;ao++){const If=hs[ao],Gl=If.regex.exec(o);if(Gl){let Gp=Gl[If.indices.path];Gp||(Gp=""),f=new no(Gl[If.indices.bucket],Gp),If.postModify(f);break}}if(null==f)throw function wp(l){return new fi("invalid-url","Invalid URL '"+l+"'.")}(o);return f}}class cd{constructor(o){this.promise_=Promise.reject(o)}getPromise(){return this.promise_}cancel(o=!1){}}function Cc(l){return"string"==typeof l||l instanceof String}function oa(l){return Dc()&&l instanceof Blob}function Dc(){return"undefined"!=typeof Blob}function ro(l,o,u,f){if(f<o)throw ld(`Invalid value for '${l}'. Expected ${o} or greater.`);if(f>u)throw ld(`Invalid value for '${l}'. Expected ${u} or less.`)}function zo(l,o,u){let f=o;return null==u&&(f=`https://${o}`),`${u}://${f}/v0${l}`}function ih(l){const o=encodeURIComponent;let u="?";for(const f in l)l.hasOwnProperty(f)&&(u=u+(o(f)+"=")+o(l[f])+"&");return u=u.slice(0,-1),u}var Ps=(()=>{return(l=Ps||(Ps={}))[l.NO_ERROR=0]="NO_ERROR",l[l.NETWORK_ERROR=1]="NETWORK_ERROR",l[l.ABORT=2]="ABORT",Ps;var l})();class sh{constructor(o,u,f,y,D,N,K,ae,De,nt,lt){this.url_=o,this.method_=u,this.headers_=f,this.body_=y,this.successCodes_=D,this.additionalRetryCodes_=N,this.callback_=K,this.errorCallback_=ae,this.timeout_=De,this.progressCallback_=nt,this.connectionFactory_=lt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Dt,zt)=>{this.resolve_=Dt,this.reject_=zt,this.start_()})}start_(){const u=(f,y)=>{const D=this.resolve_,N=this.reject_,K=y.connection;if(y.wasSuccessCode)try{const ae=this.callback_(K,K.getResponse());!function hd(l){return void 0!==l}(ae)?D():D(ae)}catch(ae){N(ae)}else if(null!==K){const ae=zh();ae.serverResponse=K.getErrorText(),N(this.errorCallback_?this.errorCallback_(K,ae):ae)}else N(y.canceled?this.appDelete_?Jg():Ep():function Kh(){return new fi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?u(0,new Fu(!1,null,!0)):this.backoffId_=function dd(l,o,u){let f=1,y=null,D=null,N=!1,K=0;function ae(){return 2===K}let De=!1;function nt(...Br){De||(De=!0,o.apply(null,Br))}function lt(Br){y=setTimeout(()=>{y=null,l(zt,ae())},Br)}function Dt(){D&&clearTimeout(D)}function zt(Br,...so){if(De)return void Dt();if(Br)return Dt(),void nt.call(null,Br,...so);if(ae()||N)return Dt(),void nt.call(null,Br,...so);let hs;f<64&&(f*=2),1===K?(K=2,hs=0):hs=1e3*(f+Math.random()),lt(hs)}let dn=!1;function Tr(Br){dn||(dn=!0,Dt(),!De&&(null!==y?(Br||(K=2),clearTimeout(y),lt(0)):Br||(K=1)))}return lt(0),D=setTimeout(()=>{N=!0,Tr(!0)},u),Tr}((f,y)=>{if(y)return void f(!1,new Fu(!1,null,!0));const D=this.connectionFactory_();this.pendingConnection_=D;const N=K=>{null!==this.progressCallback_&&this.progressCallback_(K.loaded,K.lengthComputable?K.total:-1)};null!==this.progressCallback_&&D.addUploadProgressListener(N),D.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&D.removeUploadProgressListener(N),this.pendingConnection_=null;const K=D.getErrorCode()===Ps.NO_ERROR,ae=D.getStatus();if(!K||this.isRetryStatusCode_(ae)){const nt=D.getErrorCode()===Ps.ABORT;return void f(!1,new Fu(!1,null,nt))}const De=-1!==this.successCodes_.indexOf(ae);f(!0,new Fu(De,D))})},u,this.timeout_)}getPromise(){return this.promise_}cancel(o){this.canceled_=!0,this.appDelete_=o||!1,null!==this.backoffId_&&function Xg(l){l(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(o){const u=o>=500&&o<600,y=-1!==[408,429].indexOf(o),D=-1!==this.additionalRetryCodes_.indexOf(o);return u||y||D}}class Fu{constructor(o,u,f){this.wasSuccessCode=o,this.connection=u,this.canceled=!!f}}function Vl(...l){const o=function bc(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==o){const u=new o;for(let f=0;f<l.length;f++)u.append(l[f]);return u.getBlob()}if(Dc())return new Blob(l);throw new fi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const js={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class fd{constructor(o,u){this.data=o,this.contentType=u||null}}function Jh(l,o){switch(l){case js.RAW:return new fd(Dp(o));case js.BASE64:case js.BASE64URL:return new fd(Xh(l,o));case js.DATA_URL:return new fd(function Tp(l){const o=new bp(l);return o.base64?Xh(js.BASE64,o.rest):function em(l){let o;try{o=decodeURIComponent(l)}catch(u){throw rh(js.DATA_URL,"Malformed data URL.")}return Dp(o)}(o.rest)}(o),function f_(l){return new bp(l).contentType}(o))}throw zh()}function Dp(l){const o=[];for(let u=0;u<l.length;u++){let f=l.charCodeAt(u);f<=127?o.push(f):f<=2047?o.push(192|f>>6,128|63&f):55296==(64512&f)?u<l.length-1&&56320==(64512&l.charCodeAt(u+1))?(f=65536|(1023&f)<<10|1023&l.charCodeAt(++u),o.push(240|f>>18,128|f>>12&63,128|f>>6&63,128|63&f)):o.push(239,191,189):56320==(64512&f)?o.push(239,191,189):o.push(224|f>>12,128|f>>6&63,128|63&f)}return new Uint8Array(o)}function Xh(l,o){switch(l){case js.BASE64:{const y=-1!==o.indexOf("-"),D=-1!==o.indexOf("_");if(y||D)throw rh(l,"Invalid character '"+(y?"-":"_")+"' found: is it base64url encoded?");break}case js.BASE64URL:{const y=-1!==o.indexOf("+"),D=-1!==o.indexOf("/");if(y||D)throw rh(l,"Invalid character '"+(y?"+":"/")+"' found: is it base64 encoded?");o=o.replace(/-/g,"+").replace(/_/g,"/");break}}let u;try{u=function Qh(l){return atob(l)}(o)}catch(y){throw rh(l,"Invalid character found")}const f=new Uint8Array(u.length);for(let y=0;y<u.length;y++)f[y]=u.charCodeAt(y);return f}class bp{constructor(o){this.base64=!1,this.contentType=null;const u=o.match(/^data:([^,]+)?,/);if(null===u)throw rh(js.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const f=u[1]||null;null!=f&&(this.base64=function tm(l,o){return l.length>=o.length&&l.substring(l.length-o.length)===o}(f,";base64"),this.contentType=this.base64?f.substring(0,f.length-7):f),this.rest=o.substring(o.indexOf(",")+1)}}class Lu{constructor(o,u){let f=0,y="";oa(o)?(this.data_=o,f=o.size,y=o.type):o instanceof ArrayBuffer?(u?this.data_=new Uint8Array(o):(this.data_=new Uint8Array(o.byteLength),this.data_.set(new Uint8Array(o))),f=this.data_.length):o instanceof Uint8Array&&(u?this.data_=o:(this.data_=new Uint8Array(o.length),this.data_.set(o)),f=o.length),this.size_=f,this.type_=y}size(){return this.size_}type(){return this.type_}slice(o,u){if(oa(this.data_)){const y=function Tc(l,o,u){return l.webkitSlice?l.webkitSlice(o,u):l.mozSlice?l.mozSlice(o,u):l.slice?l.slice(o,u):null}(this.data_,o,u);return null===y?null:new Lu(y)}{const f=new Uint8Array(this.data_.buffer,o,u-o);return new Lu(f,!0)}}static getBlob(...o){if(Dc()){const u=o.map(f=>f instanceof Lu?f.data_:f);return new Lu(Vl.apply(null,u))}{const u=o.map(N=>Cc(N)?Jh(js.RAW,N).data:N.data_);let f=0;u.forEach(N=>{f+=N.byteLength});const y=new Uint8Array(f);let D=0;return u.forEach(N=>{for(let K=0;K<N.length;K++)y[D++]=N[K]}),new Lu(y,!0)}}uploadData(){return this.data_}}function ef(l){let o;try{o=JSON.parse(l)}catch(u){return null}return function Cp(l){return"object"==typeof l&&!Array.isArray(l)}(o)?o:null}function Rp(l){const o=l.lastIndexOf("/",l.length-2);return-1===o?l:l.slice(o+1)}function Mp(l,o){return o}class ko{constructor(o,u,f,y){this.server=o,this.local=u||o,this.writable=!!f,this.xform=y||Mp}}let Bl=null;function pd(){if(Bl)return Bl;const l=[];l.push(new ko("bucket")),l.push(new ko("generation")),l.push(new ko("metageneration")),l.push(new ko("name","fullPath",!0));const u=new ko("name");u.xform=function o(D,N){return function Yr(l){return!Cc(l)||l.length<2?l:Rp(l)}(N)},l.push(u);const y=new ko("size");return y.xform=function f(D,N){return void 0!==N?Number(N):N},l.push(y),l.push(new ko("timeCreated")),l.push(new ko("updated")),l.push(new ko("md5Hash",null,!0)),l.push(new ko("cacheControl",null,!0)),l.push(new ko("contentDisposition",null,!0)),l.push(new ko("contentEncoding",null,!0)),l.push(new ko("contentLanguage",null,!0)),l.push(new ko("contentType",null,!0)),l.push(new ko("metadata","customMetadata",!0)),Bl=l,Bl}function tf(l,o,u){const f=ef(o);return null===f?null:function oh(l,o,u){const f={type:"file"},y=u.length;for(let D=0;D<y;D++){const N=u[D];f[N.local]=N.xform(f,o[N.server])}return function p_(l,o){Object.defineProperty(l,"ref",{get:function u(){const D=new no(l.bucket,l.fullPath);return o._makeStorageReference(D)}})}(f,l),f}(l,f,u)}function io(l,o){const u={},f=o.length;for(let y=0;y<f;y++){const D=o[y];D.writable&&(u[D.server]=l[D.local])}return JSON.stringify(u)}const Uu="prefixes";class du{constructor(o,u,f,y){this.url=o,this.method=u,this.handler=f,this.timeout=y,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Vu(l){if(!l)throw zh()}function nf(l,o){return function u(f,y){const D=tf(l,y,o);return Vu(null!==D),D}}function Ac(l){return function o(u,f){let y;return y=401===u.getStatus()?u.getErrorText().includes("Firebase App Check token is invalid")?function Yg(){return new fi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function py(){return new fi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===u.getStatus()?function cu(l){return new fi("quota-exceeded","Quota for bucket '"+l+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(l.bucket):403===u.getStatus()?function Qg(l){return new fi("unauthorized","User does not have permission to access '"+l+"'.")}(l.path):f,y.serverResponse=f.serverResponse,y}}function vi(l){const o=Ac(l);return function u(f,y){let D=o(f,y);return 404===f.getStatus()&&(D=function Zg(l){return new fi("object-not-found","Object '"+l+"' does not exist.")}(l.path)),D.serverResponse=y.serverResponse,D}}function rm(l,o,u){const y=zo(o.fullServerUrl(),l.host,l._protocol),N=l.maxOperationRetryTime,K=new du(y,"GET",nf(l,u),N);return K.errorHandler=vi(o),K}function rf(l,o,u,f,y){const D={};D.prefix=o.isRoot?"":o.path+"/",u&&u.length>0&&(D.delimiter=u),f&&(D.pageToken=f),y&&(D.maxResults=y);const K=zo(o.bucketOnlyServerUrl(),l.host,l._protocol),De=l.maxOperationRetryTime,nt=new du(K,"GET",function jl(l,o){return function u(f,y){const D=function nm(l,o,u){const f=ef(u);return null===f?null:function my(l,o,u){const f={prefixes:[],items:[],nextPageToken:u.nextPageToken};if(u[Uu])for(const y of u[Uu]){const D=y.replace(/\/$/,""),N=l._makeStorageReference(new no(o,D));f.prefixes.push(N)}if(u.items)for(const y of u.items){const D=l._makeStorageReference(new no(o,y.name));f.items.push(D)}return f}(l,o,f)}(l,o,y);return Vu(null!==D),D}}(l,o.bucket),De);return nt.urlParams=D,nt.errorHandler=Ac(o),nt}function sm(l,o,u){const f=Object.assign({},u);return f.fullPath=l.path,f.size=o.size(),f.contentType||(f.contentType=function im(l,o){return l&&l.contentType||o&&o.type()||"application/octet-stream"}(null,o)),f}class ah{constructor(o,u,f,y){this.current=o,this.total=u,this.finalized=!!f,this.metadata=y||null}}function Op(l,o){let u=null;try{u=l.getResponseHeader("X-Goog-Upload-Status")}catch(y){Vu(!1)}return Vu(!!u&&-1!==(o||["active"]).indexOf(u)),u}const Bu={STATE_CHANGED:"state_changed"},aa={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function dl(l){switch(l){case"running":case"pausing":case"canceling":return aa.RUNNING;case"paused":return aa.PAUSED;case"success":return aa.SUCCESS;case"canceled":return aa.CANCELED;default:return aa.ERROR}}class hu{constructor(o,u,f){if(function h_(l){return"function"==typeof l}(o)||null!=u||null!=f)this.next=o,this.error=null!=u?u:void 0,this.complete=null!=f?f:void 0;else{const D=o;this.next=D.next,this.error=D.error,this.complete=D.complete}}}function ju(l){return(...o)=>{Promise.resolve().then(()=>l(...o))}}class um extends class Pp{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ps.NO_ERROR,this.sendPromise_=new Promise(o=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ps.ABORT,o()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ps.NETWORK_ERROR,o()}),this.xhr_.addEventListener("load",()=>{o()})})}send(o,u,f,y){if(this.sent_)throw Ic("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(u,o,!0),void 0!==y)for(const D in y)y.hasOwnProperty(D)&&this.xhr_.setRequestHeader(D,y[D].toString());return void 0!==f?this.xhr_.send(f):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ic("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ic("cannot .getStatus() before sending");try{return this.xhr_.status}catch(o){return-1}}getResponse(){if(!this.sent_)throw Ic("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ic("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(o){return this.xhr_.getResponseHeader(o)}addUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",o)}removeUploadProgressListener(o){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",o)}}{initXhr(){this.xhr_.responseType="text"}}function Ko(){return new um}class $l{constructor(o,u,f=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=o,this._blob=u,this._metadata=f,this._mappings=pd(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=y=>{this._request=void 0,this._chunkMultiplier=1,y._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=y,this._transition("error"))},this._metadataErrorHandler=y=>{this._request=void 0,y._codeEquals("canceled")?this.completeTransitions_():(this._error=y,this._transition("error"))},this._promise=new Promise((y,D)=>{this._resolve=y,this._reject=D,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const o=this._transferred;return u=>this._updateProgress(o+u)}_shouldDoResumable(o){return o.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(o){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([u,f])=>{switch(this._state){case"running":o(u,f);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((o,u)=>{const f=function v_(l,o,u,f,y){const D=o.bucketOnlyServerUrl(),N=sm(o,f,y),K={name:N.fullPath},ae=zo(D,l.host,l._protocol),nt={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${f.size()}`,"X-Goog-Upload-Header-Content-Type":N.contentType,"Content-Type":"application/json; charset=utf-8"},lt=io(N,u),dn=new du(ae,"POST",function zt(Tr){let Br;Op(Tr);try{Br=Tr.getResponseHeader("X-Goog-Upload-URL")}catch(so){Vu(!1)}return Vu(Cc(Br)),Br},l.maxUploadRetryTime);return dn.urlParams=K,dn.headers=nt,dn.body=lt,dn.errorHandler=Ac(o),dn}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),y=this._ref.storage._makeRequest(f,Ko,o,u);this._request=y,y.getPromise().then(D=>{this._request=void 0,this._uploadUrl=D,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const o=this._uploadUrl;this._resolveToken((u,f)=>{const y=function am(l,o,u,f){const ae=new du(u,"POST",function D(De){const nt=Op(De,["active","final"]);let lt=null;try{lt=De.getResponseHeader("X-Goog-Upload-Size-Received")}catch(zt){Vu(!1)}lt||Vu(!1);const Dt=Number(lt);return Vu(!isNaN(Dt)),new ah(Dt,f.size(),"final"===nt)},l.maxUploadRetryTime);return ae.headers={"X-Goog-Upload-Command":"query"},ae.errorHandler=Ac(o),ae}(this._ref.storage,this._ref._location,o,this._blob),D=this._ref.storage._makeRequest(y,Ko,u,f);this._request=D,D.getPromise().then(N=>{N=N,this._request=void 0,this._updateProgress(N.current),this._needToFetchStatus=!1,N.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const o=262144*this._chunkMultiplier,u=new ah(this._transferred,this._blob.size()),f=this._uploadUrl;this._resolveToken((y,D)=>{let N;try{N=function E_(l,o,u,f,y,D,N,K){const ae=new ah(0,0);if(N?(ae.current=N.current,ae.total=N.total):(ae.current=0,ae.total=f.size()),f.size()!==ae.total)throw function Ip(){return new fi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const De=ae.total-ae.current;let nt=De;y>0&&(nt=Math.min(nt,y));const lt=ae.current,dn={"X-Goog-Upload-Command":nt===De?"upload, finalize":"upload","X-Goog-Upload-Offset":`${ae.current}`},Tr=f.slice(lt,lt+nt);if(null===Tr)throw nh();const hs=new du(u,"POST",function Br(ao,If){const Gl=Op(ao,["active","final"]),ph=ae.current+nt,Gp=f.size();let j_;return j_="final"===Gl?nf(o,D)(ao,If):null,new ah(ph,Gp,"final"===Gl,j_)},o.maxUploadRetryTime);return hs.headers=dn,hs.body=Tr.uploadData(),hs.progressCallback=K||null,hs.errorHandler=Ac(l),hs}(this._ref._location,this._ref.storage,f,this._blob,o,this._mappings,u,this._makeProgressCallback())}catch(ae){return this._error=ae,void this._transition("error")}const K=this._ref.storage._makeRequest(N,Ko,y,D);this._request=K,K.getPromise().then(ae=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(ae.current),ae.finalized?(this._metadata=ae.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((o,u)=>{const f=rm(this._ref.storage,this._ref._location,this._mappings),y=this._ref.storage._makeRequest(f,Ko,o,u);this._request=y,y.getPromise().then(D=>{this._request=void 0,this._metadata=D,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((o,u)=>{const f=function om(l,o,u,f,y){const D=o.bucketOnlyServerUrl(),N={"X-Goog-Upload-Protocol":"multipart"},ae=function K(){let hs="";for(let ao=0;ao<2;ao++)hs+=Math.random().toString().slice(2);return hs}();N["Content-Type"]="multipart/related; boundary="+ae;const De=sm(o,f,y),nt=io(De,u),zt=Lu.getBlob("--"+ae+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+nt+"\r\n--"+ae+"\r\nContent-Type: "+De.contentType+"\r\n\r\n",f,"\r\n--"+ae+"--");if(null===zt)throw nh();const dn={name:De.fullPath},Tr=zo(D,l.host,l._protocol),so=l.maxUploadRetryTime,oo=new du(Tr,"POST",nf(l,u),so);return oo.urlParams=dn,oo.headers=N,oo.body=zt.uploadData(),oo.errorHandler=Ac(o),oo}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),y=this._ref.storage._makeRequest(f,Ko,o,u);this._request=y,y.getPromise().then(D=>{this._request=void 0,this._metadata=D,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(o){const u=this._transferred;this._transferred=o,this._transferred!==u&&this._notifyObservers()}_transition(o){if(this._state!==o)switch(o){case"canceling":case"pausing":this._state=o,void 0!==this._request&&this._request.cancel();break;case"running":const u="paused"===this._state;this._state=o,u&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=o,this._notifyObservers();break;case"canceled":this._error=Ep(),this._state=o,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const o=dl(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:o,metadata:this._metadata,task:this,ref:this._ref}}on(o,u,f,y){const D=new hu(u||void 0,f||void 0,y||void 0);return this._addObserver(D),()=>{this._removeObserver(D)}}then(o,u){return this._promise.then(o,u)}catch(o){return this.then(null,o)}_addObserver(o){this._observers.push(o),this._notifyObserver(o)}_removeObserver(o){const u=this._observers.indexOf(o);-1!==u&&this._observers.splice(u,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(u=>{this._notifyObserver(u)})}_finishPromise(){if(void 0!==this._resolve){let o=!0;switch(dl(this._state)){case aa.SUCCESS:ju(this._resolve.bind(null,this.snapshot))();break;case aa.CANCELED:case aa.ERROR:ju(this._reject.bind(null,this._error))();break;default:o=!1}o&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(o){switch(dl(this._state)){case aa.RUNNING:case aa.PAUSED:o.next&&ju(o.next.bind(o,this.snapshot))();break;case aa.SUCCESS:o.complete&&ju(o.complete.bind(o))();break;default:o.error&&ju(o.error.bind(o,this._error))()}}resume(){const o="paused"===this._state||"pausing"===this._state;return o&&this._transition("running"),o}pause(){const o="running"===this._state;return o&&this._transition("pausing"),o}cancel(){const o="running"===this._state||"pausing"===this._state;return o&&this._transition("canceling"),o}}class $u{constructor(o,u){this._service=o,this._location=u instanceof no?u:no.makeFromUrl(u,o.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(o,u){return new $u(o,u)}get root(){const o=new no(this._location.bucket,"");return this._newRef(this._service,o)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Rp(this._location.path)}get storage(){return this._service}get parent(){const o=function Ap(l){if(0===l.length)return null;const o=l.lastIndexOf("/");return-1===o?"":l.slice(0,o)}(this._location.path);if(null===o)return null;const u=new no(this._location.bucket,o);return new $u(this._service,u)}_throwIfRoot(o){if(""===this._location.path)throw Yh(o)}}function hf(l,o,u){return hl.apply(this,arguments)}function hl(){return(hl=(0,Gn.Z)(function*(l,o,u){const y=yield ff(l,{pageToken:u});o.prefixes.push(...y.prefixes),o.items.push(...y.items),null!=y.nextPageToken&&(yield hf(l,o,y.nextPageToken))})).apply(this,arguments)}function ff(l,o){null!=o&&"number"==typeof o.maxResults&&ro("options.maxResults",1,1e3,o.maxResults);const u=o||{},f=rf(l.storage,l._location,"/",u.pageToken,u.maxResults);return l.storage.makeRequestWithTokens(f,Ko)}function Fp(l){l._throwIfRoot("getDownloadURL");const o=function xp(l,o,u){const y=zo(o.fullServerUrl(),l.host,l._protocol),N=l.maxOperationRetryTime,K=new du(y,"GET",function m_(l,o){return function u(f,y){const D=tf(l,y,o);return Vu(null!==D),function Zi(l,o,u,f){const y=ef(o);if(null===y||!Cc(y.downloadTokens))return null;const D=y.downloadTokens;if(0===D.length)return null;const N=encodeURIComponent;return D.split(",").map(De=>{const lt=l.fullPath;return zo("/b/"+N(l.bucket)+"/o/"+N(lt),u,f)+ih({alt:"media",token:De})})[0]}(D,y,l.host,l._protocol)}}(l,u),N);return K.errorHandler=vi(o),K}(l.storage,l._location,pd());return l.storage.makeRequestWithTokens(o,Ko).then(u=>{if(null===u)throw function Zh(){return new fi("no-download-url","The given file does not have any download URLs.")}();return u})}function ch(l,o){const u=function Sp(l,o){const u=o.split("/").filter(f=>f.length>0).join("/");return 0===l.length?u:l+"/"+u}(l._location.path,o),f=new no(l._location.bucket,u);return new $u(l.storage,f)}function Wl(l,o){if(l instanceof Wu){const u=l;if(null==u._bucket)throw function qh(){return new fi("no-default-bucket","No default bucket found. Did you set the '"+vp+"' property when initializing the app?")}();const f=new $u(u,u._bucket);return null!=o?Wl(f,o):f}return void 0!==o?ch(l,o):l}function dm(l,o){if(o&&function pf(l){return/^[A-Za-z]+:\/\//.test(l)}(o)){if(l instanceof Wu)return function Lp(l,o){return new $u(l,o)}(l,o);throw ld("To use ref(service, url), the first argument must be a Storage instance.")}return Wl(l,o)}function md(l,o){const u=null==o?void 0:o[vp];return null==u?null:no.makeFromBucketSpec(u,l)}class Wu{constructor(o,u,f,y,D){this.app=o,this._authProvider=u,this._appCheckProvider=f,this._url=y,this._firebaseVersion=D,this._bucket=null,this._host=yp,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=y?no.makeFromBucketSpec(y,this._host):md(this._host,this.app.options)}get host(){return this._host}set host(o){this._host=o,this._bucket=null!=this._url?no.makeFromBucketSpec(this._url,o):md(o,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(o){ro("time",0,Number.POSITIVE_INFINITY,o),this._maxUploadRetryTime=o}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(o){ro("time",0,Number.POSITIVE_INFINITY,o),this._maxOperationRetryTime=o}_getAuthToken(){var o=this;return(0,Gn.Z)(function*(){if(o._overrideAuthToken)return o._overrideAuthToken;const u=o._authProvider.getImmediate({optional:!0});if(u){const f=yield u.getToken();if(null!==f)return f.accessToken}return null})()}_getAppCheckToken(){var o=this;return(0,Gn.Z)(function*(){const u=o._appCheckProvider.getImmediate({optional:!0});return u?(yield u.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(o=>o.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(o){return new $u(this,o)}_makeRequest(o,u,f,y){if(this._deleted)return new cd(Jg());{const D=function Ul(l,o,u,f,y,D){const N=ih(l.urlParams),K=l.url+N,ae=Object.assign({},l.headers);return function Ll(l,o){o&&(l["X-Firebase-GMPID"]=o)}(ae,o),function kl(l,o){null!==o&&o.length>0&&(l.Authorization="Firebase "+o)}(ae,u),function Fl(l,o){l["X-Firebase-Storage-Version"]="webjs/"+(null!=o?o:"AppManager")}(ae,D),function cl(l,o){null!==o&&(l["X-Firebase-AppCheck"]=o)}(ae,f),new sh(K,l.method,ae,l.body,l.successCodes,l.additionalRetryCodes,l.handler,l.errorHandler,l.timeout,l.progressCallback,y)}(o,this._appId,f,y,u,this._firebaseVersion);return this._requests.add(D),D.getPromise().then(()=>this._requests.delete(D),()=>this._requests.delete(D)),D}}makeRequestWithTokens(o,u){var f=this;return(0,Gn.Z)(function*(){const[y,D]=yield Promise.all([f._getAuthToken(),f._getAppCheckToken()]);return f._makeRequest(o,u,y,D).getPromise()})()}}const Rc="@firebase/storage";function Vp(l,o){return dm(l=(0,pe.m9)(l),o)}function A_(l,{instanceIdentifier:o}){const u=l.getProvider("app").getImmediate(),f=l.getProvider("auth-internal"),y=l.getProvider("app-check-internal");return new Wu(u,f,y,o,fn.SDK_VERSION)}!function Bp(){(0,fn._registerComponent)(new rr.wA("storage",A_,"PUBLIC").setMultipleInstances(!0)),(0,fn.registerVersion)(Rc,"0.9.6",""),(0,fn.registerVersion)(Rc,"0.9.6","esm2017")}();class dh{constructor(o,u,f){this._delegate=o,this.task=u,this.ref=f}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class mf{constructor(o,u){this._delegate=o,this._ref=u,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new dh(this._delegate.snapshot,this,this._ref)}then(o,u){return this._delegate.then(f=>{if(o)return o(new dh(f,this,this._ref))},u)}on(o,u,f,y){let D;return u&&(D="function"==typeof u?N=>u(new dh(N,this,this._ref)):{next:u.next?N=>u.next(new dh(N,this,this._ref)):void 0,complete:u.complete||void 0,error:u.error||void 0}),this._delegate.on(o,D,f||void 0,y||void 0)}}class _m{constructor(o,u){this._delegate=o,this._service=u}get prefixes(){return this._delegate.prefixes.map(o=>new Hu(o,this._service))}get items(){return this._delegate.items.map(o=>new Hu(o,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Hu{constructor(o,u){this._delegate=o,this.storage=u}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(o){const u=function gm(l,o){return ch(l,o)}(this._delegate,o);return new Hu(u,this.storage)}get root(){return new Hu(this._delegate.root,this.storage)}get parent(){const o=this._delegate.parent;return null==o?null:new Hu(o,this.storage)}put(o,u){return this._throwIfRoot("put"),new mf(function C_(l,o,u){return function cm(l,o,u){return l._throwIfRoot("uploadBytesResumable"),new $l(l,new Lu(o),u)}(l=(0,pe.m9)(l),o,u)}(this._delegate,o,u),this)}putString(o,u=js.RAW,f){this._throwIfRoot("putString");const y=Jh(u,o),D=Object.assign({},f);return null==D.contentType&&null!=y.contentType&&(D.contentType=y.contentType),new mf(new $l(this._delegate,new Lu(y.data,!0),D),this)}listAll(){return function fm(l){return function uh(l){const o={prefixes:[],items:[]};return hf(l,o).then(()=>o)}(l=(0,pe.m9)(l))}(this._delegate).then(o=>new _m(o,this.storage))}list(o){return function $s(l,o){return ff(l=(0,pe.m9)(l),o)}(this._delegate,o||void 0).then(u=>new _m(u,this.storage))}getMetadata(){return function hm(l){return function kp(l){l._throwIfRoot("getMetadata");const o=rm(l.storage,l._location,pd());return l.storage.makeRequestWithTokens(o,Ko)}(l=(0,pe.m9)(l))}(this._delegate)}updateMetadata(o){return function D_(l,o){return function lh(l,o){l._throwIfRoot("updateMetadata");const u=function __(l,o,u,f){const D=zo(o.fullServerUrl(),l.host,l._protocol),K=io(u,f),De=l.maxOperationRetryTime,nt=new du(D,"PATCH",nf(l,f),De);return nt.headers={"Content-Type":"application/json; charset=utf-8"},nt.body=K,nt.errorHandler=vi(o),nt}(l.storage,l._location,o,pd());return l.storage.makeRequestWithTokens(u,Ko)}(l=(0,pe.m9)(l),o)}(this._delegate,o)}getDownloadURL(){return function pm(l){return Fp(l=(0,pe.m9)(l))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function b_(l){return function w_(l){l._throwIfRoot("deleteObject");const o=function y_(l,o){const f=zo(o.fullServerUrl(),l.host,l._protocol),K=new du(f,"DELETE",function N(ae,De){},l.maxOperationRetryTime);return K.successCodes=[200,204],K.errorHandler=vi(o),K}(l.storage,l._location);return l.storage.makeRequestWithTokens(o,Ko)}(l=(0,pe.m9)(l))}(this._delegate)}_throwIfRoot(o){if(""===this._delegate._location.path)throw Yh(o)}}class yd{constructor(o,u){this.app=o,this._delegate=u}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(o){if(ua(o))throw ld("ref() expected a child path but got a URL, use refFromURL instead.");return new Hu(Vp(this._delegate,o),this)}refFromURL(o){if(!ua(o))throw ld("refFromURL() expected a full URL but got a child path, use ref() instead.");try{no.makeFromUrl(o,this._delegate.host)}catch(u){throw ld("refFromUrl() expected a valid full URL but got an invalid one.")}return new Hu(Vp(this._delegate,o),this)}setMaxUploadRetryTime(o){this._delegate.maxUploadRetryTime=o}setMaxOperationRetryTime(o){this._delegate.maxOperationRetryTime=o}useEmulator(o,u,f={}){!function mm(l,o,u,f={}){!function Hl(l,o,u,f={}){l.host=`${o}:${u}`,l._protocol="http";const{mockUserToken:y}=f;y&&(l._overrideAuthToken="string"==typeof y?y:(0,pe.Sg)(y,l.app.options.projectId))}(l,o,u,f)}(this._delegate,o,u,f)}}function ua(l){return/^[A-Za-z]+:\/\//.test(l)}function fu(l,{instanceIdentifier:o}){const u=l.getProvider("app-compat").getImmediate(),f=l.getProvider("storage").getImmediate({identifier:o});return new yd(u,f)}!function wo(l){const o={TaskState:aa,TaskEvent:Bu,StringFormat:js,Storage:yd,Reference:Hu};l.INTERNAL.registerComponent(new rr.wA("storage-compat",fu,"PUBLIC").setServiceProps(o).setMultipleInstances(!0)),l.registerVersion("@firebase/storage-compat","0.1.14")}(wc.Z);var jp=S(127);function Em(l){const o=function vm(l){return new qg.y(o=>{const u=N=>o.next(N);u(l.snapshot);const D=l.on("state_changed",u);return l.then(N=>{u(N),o.complete()},N=>{u(l.snapshot),(N=>{o.error(N)})(N)}),function(){D()}}).pipe((0,Gh.b)(0))}(l);return{task:l,then:l.then.bind(l),catch:l.catch.bind(l),pause:l.pause.bind(l),cancel:l.cancel.bind(l),resume:l.resume.bind(l),snapshotChanges:()=>o,percentageChanges:()=>o.pipe((0,Nl.U)(u=>u.bytesTransferred/u.totalBytes*100))}}function _f(l){return{getDownloadURL:()=>(0,eh.of)(void 0).pipe(Xe.fc,(0,ad.w)(()=>l.getDownloadURL()),Xe.iC),getMetadata:()=>(0,eh.of)(void 0).pipe(Xe.fc,(0,ad.w)(()=>l.getMetadata()),Xe.iC),delete:()=>(0,Hh.D)(l.delete()),child:o=>_f(l.child(o)),updateMetadata:o=>(0,Hh.D)(l.updateMetadata(o)),put:(o,u)=>Em(l.put(o,u)),putString:(o,u,f)=>Em(l.putString(o,u,f)),list:o=>(0,Hh.D)(l.list(o)),listAll:()=>(0,Hh.D)(l.listAll())}}const R_=new M.OlP("angularfire2.storageBucket"),M_=new M.OlP("angularfire2.storage.maxUploadRetryTime"),$p=new M.OlP("angularfire2.storage.maxOperationRetryTime"),hh=new M.OlP("angularfire2.storage.use-emulator");let x_=(()=>{class l{constructor(u,f,y,D,N,K,ae,De,nt,lt){const Dt=(0,ku.on)(u,N,f);this.storage=(0,ku.cc)(`${Dt.name}.storage.${y}`,"AngularFireStorage",Dt.name,()=>{const zt=N.runOutsideAngular(()=>Dt.storage(y||void 0)),dn=nt;return dn&&zt.useEmulator(...dn),ae&&zt.setMaxUploadRetryTime(ae),De&&zt.setMaxOperationRetryTime(De),zt},[ae,De])}ref(u){return _f(this.storage.ref(u))}refFromURL(u){return _f(this.storage.refFromURL(u))}upload(u,f,y){return _f(this.storage.ref(u)).put(f,y)}}return l.\u0275fac=function(u){return new(u||l)(M.LFG(ku.Dh),M.LFG(ku.xv,8),M.LFG(R_,8),M.LFG(M.Lbi),M.LFG(M.R0b),M.LFG(Xe.HU),M.LFG(M_,8),M.LFG($p,8),M.LFG(hh,8),M.LFG(ze.nm,8))},l.\u0275prov=M.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),P_=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({}),l})(),Mc=(()=>{class l{constructor(){jp.Z.registerVersion("angularfire",Xe.q4.full,"gcs-compat")}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({providers:[x_],imports:[P_]}),l})();var yf=S(6185),vf=S(4986),wm=S(6451),Im=S(3099),Wp=S(5026),Hp=S(1884),Ef=S(1365),Cm=S(4482),N_=S(5403);S(5881);const n=new Sr.Yd("@firebase/database-compat"),a=function(l){n.warn("FIREBASE WARNING: "+l)};class E{constructor(o){this._delegate=o}cancel(o){(0,pe.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,pe.Wj)("OnDisconnect.cancel","onComplete",o,!0);const u=this._delegate.cancel();return o&&u.then(()=>o(null),f=>o(f)),u}remove(o){(0,pe.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,pe.Wj)("OnDisconnect.remove","onComplete",o,!0);const u=this._delegate.remove();return o&&u.then(()=>o(null),f=>o(f)),u}set(o,u){(0,pe.Dv)("OnDisconnect.set",1,2,arguments.length),(0,pe.Wj)("OnDisconnect.set","onComplete",u,!0);const f=this._delegate.set(o);return u&&f.then(()=>u(null),y=>u(y)),f}setWithPriority(o,u,f){(0,pe.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,pe.Wj)("OnDisconnect.setWithPriority","onComplete",f,!0);const y=this._delegate.setWithPriority(o,u);return f&&y.then(()=>f(null),D=>f(D)),y}update(o,u){if((0,pe.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let D=0;D<o.length;++D)y[""+D]=o[D];o=y,a("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,pe.Wj)("OnDisconnect.update","onComplete",u,!0);const f=this._delegate.update(o);return u&&f.then(()=>u(null),y=>u(y)),f}}class x{constructor(o,u){this.committed=o,this.snapshot=u}toJSON(){return(0,pe.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class H{constructor(o,u){this._database=o,this._delegate=u}val(){return(0,pe.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,pe.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,pe.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,pe.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(o){return(0,pe.Dv)("DataSnapshot.child",0,1,arguments.length),o=String(o),Bs("DataSnapshot.child","path",o,!1),new H(this._database,this._delegate.child(o))}hasChild(o){return(0,pe.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Bs("DataSnapshot.hasChild","path",o,!1),this._delegate.hasChild(o)}getPriority(){return(0,pe.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(o){return(0,pe.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,pe.Wj)("DataSnapshot.forEach","action",o,!1),this._delegate.forEach(u=>o(new H(this._database,u)))}hasChildren(){return(0,pe.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,pe.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,pe.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ie(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Z{constructor(o,u){this.database=o,this._delegate=u}on(o,u,f,y){var D;(0,pe.Dv)("Query.on",2,4,arguments.length),(0,pe.Wj)("Query.on","callback",u,!1);const N=Z.getCancelAndContextArgs_("Query.on",f,y),K=(De,nt)=>{u.call(N.context,new H(this.database,De),nt)};K.userCallback=u,K.context=N.context;const ae=null===(D=N.cancel)||void 0===D?void 0:D.bind(N.context);switch(o){case"value":return Mh(this._delegate,K,ae),u;case"child_added":return Vf(this._delegate,K,ae),u;case"child_removed":return Gd(this._delegate,K,ae),u;case"child_changed":return pc(this._delegate,K,ae),u;case"child_moved":return Hd(this._delegate,K,ae),u;default:throw new Error((0,pe.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(o,u,f){if((0,pe.Dv)("Query.off",0,3,arguments.length),function(l,o,u){if(void 0!==o)switch(o){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,pe.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,o),(0,pe.Wj)("Query.off","callback",u,!0),(0,pe.lb)("Query.off","context",f,!0),u){const y=()=>{};y.userCallback=u,y.context=f,wa(this._delegate,o,y)}else wa(this._delegate,o)}get(){return og(this._delegate).then(o=>new H(this.database,o))}once(o,u,f,y){(0,pe.Dv)("Query.once",1,4,arguments.length),(0,pe.Wj)("Query.once","callback",u,!0);const D=Z.getCancelAndContextArgs_("Query.once",f,y),N=new pe.BH,K=(De,nt)=>{const lt=new H(this.database,De);u&&u.call(D.context,lt,nt),N.resolve(lt)};K.userCallback=u,K.context=D.context;const ae=De=>{D.cancel&&D.cancel.call(D.context,De),N.reject(De)};switch(o){case"value":Mh(this._delegate,K,ae,{onlyOnce:!0});break;case"child_added":Vf(this._delegate,K,ae,{onlyOnce:!0});break;case"child_removed":Gd(this._delegate,K,ae,{onlyOnce:!0});break;case"child_changed":pc(this._delegate,K,ae,{onlyOnce:!0});break;case"child_moved":Hd(this._delegate,K,ae,{onlyOnce:!0});break;default:throw new Error((0,pe.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return N.promise}limitToFirst(o){return(0,pe.Dv)("Query.limitToFirst",1,1,arguments.length),new Z(this.database,Pu(this._delegate,function nr(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new $m(l)}(o)))}limitToLast(o){return(0,pe.Dv)("Query.limitToLast",1,1,arguments.length),new Z(this.database,Pu(this._delegate,function il(l){if("number"!=typeof l||Math.floor(l)!==l||l<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new jf(l)}(o)))}orderByChild(o){return(0,pe.Dv)("Query.orderByChild",1,1,arguments.length),new Z(this.database,Pu(this._delegate,function Yc(l){if("$key"===l)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===l)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===l)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Bs("orderByChild","path",l,!1),new Rl(l)}(o)))}orderByKey(){return(0,pe.Dv)("Query.orderByKey",0,0,arguments.length),new Z(this.database,Pu(this._delegate,function lg(){return new $a}()))}orderByPriority(){return(0,pe.Dv)("Query.orderByPriority",0,0,arguments.length),new Z(this.database,Pu(this._delegate,function $f(){return new Wm}()))}orderByValue(){return(0,pe.Dv)("Query.orderByValue",0,0,arguments.length),new Z(this.database,Pu(this._delegate,function Qc(){return new sl}()))}startAt(o=null,u){return(0,pe.Dv)("Query.startAt",0,2,arguments.length),new Z(this.database,Pu(this._delegate,function gc(l=null,o){return Wc("startAt","key",o,!0),new rl(l,o)}(o,u)))}startAfter(o=null,u){return(0,pe.Dv)("Query.startAfter",0,2,arguments.length),new Z(this.database,Pu(this._delegate,function mc(l,o){return Wc("startAfter","key",o,!0),new ug(l,o)}(o,u)))}endAt(o=null,u){return(0,pe.Dv)("Query.endAt",0,2,arguments.length),new Z(this.database,Pu(this._delegate,function Oh(l,o){return Wc("endAt","key",o,!0),new xh(l,o)}(o,u)))}endBefore(o=null,u){return(0,pe.Dv)("Query.endBefore",0,2,arguments.length),new Z(this.database,Pu(this._delegate,function ag(l,o){return Wc("endBefore","key",o,!0),new Bf(l,o)}(o,u)))}equalTo(o,u){return(0,pe.Dv)("Query.equalTo",1,2,arguments.length),new Z(this.database,Pu(this._delegate,function Hf(l,o){return Wc("equalTo","key",o,!0),new Wf(l,o)}(o,u)))}toString(){return(0,pe.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,pe.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(o){if((0,pe.Dv)("Query.isEqual",1,1,arguments.length),!(o instanceof Z))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(o._delegate)}static getCancelAndContextArgs_(o,u,f){const y={cancel:void 0,context:void 0};if(u&&f)y.cancel=u,(0,pe.Wj)(o,"cancel",y.cancel,!0),y.context=f,(0,pe.lb)(o,"context",y.context,!0);else if(u)if("object"==typeof u&&null!==u)y.context=u;else{if("function"!=typeof u)throw new Error((0,pe.gK)(o,"cancelOrContext")+" must either be a cancel callback or a context object.");y.cancel=u}return y}get ref(){return new Ie(this.database,new Go(this._delegate._repo,this._delegate._path))}}class Ie extends Z{constructor(o,u){super(o,new No(u._repo,u._path,new Pn,!1)),this.database=o,this._delegate=u}getKey(){return(0,pe.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(o){return(0,pe.Dv)("Reference.child",1,1,arguments.length),"number"==typeof o&&(o=String(o)),new Ie(this.database,Ou(this._delegate,o))}getParent(){(0,pe.Dv)("Reference.parent",0,0,arguments.length);const o=this._delegate.parent;return o?new Ie(this.database,o):null}getRoot(){return(0,pe.Dv)("Reference.root",0,0,arguments.length),new Ie(this.database,this._delegate.root)}set(o,u){(0,pe.Dv)("Reference.set",1,2,arguments.length),(0,pe.Wj)("Reference.set","onComplete",u,!0);const f=cc(this._delegate,o);return u&&f.then(()=>u(null),y=>u(y)),f}update(o,u){if((0,pe.Dv)("Reference.update",1,2,arguments.length),Array.isArray(o)){const y={};for(let D=0;D<o.length;++D)y[""+D]=o[D];o=y,a("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ea("Reference.update",this._delegate._path),(0,pe.Wj)("Reference.update","onComplete",u,!0);const f=sg(this._delegate,o);return u&&f.then(()=>u(null),y=>u(y)),f}setWithPriority(o,u,f){(0,pe.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,pe.Wj)("Reference.setWithPriority","onComplete",f,!0);const y=function dc(l,o,u){if(Ea("setWithPriority",l._path),vo("setWithPriority",o,l._path,!1),Mf("setWithPriority",u,!1),".length"===l.key||".keys"===l.key)throw"setWithPriority failed: "+l.key+" is a read-only object.";const f=new pe.BH;return Ld(l._repo,l._path,o,u,f.wrapCallback(()=>{})),f.promise}(this._delegate,o,u);return f&&y.then(()=>f(null),D=>f(D)),y}remove(o){(0,pe.Dv)("Reference.remove",0,1,arguments.length),(0,pe.Wj)("Reference.remove","onComplete",o,!0);const u=function Wd(l){return Ea("remove",l._path),cc(l,null)}(this._delegate);return o&&u.then(()=>o(null),f=>o(f)),u}transaction(o,u,f){(0,pe.Dv)("Reference.transaction",1,3,arguments.length),(0,pe.Wj)("Reference.transaction","transactionUpdate",o,!1),(0,pe.Wj)("Reference.transaction","onComplete",u,!0),function(l,o,u,f){if(void 0!==u&&"boolean"!=typeof u)throw new Error((0,pe.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,f);const y=function Gm(l,o,u){var f;if(l=(0,pe.m9)(l),Ea("Reference.transaction",l._path),".length"===l.key||".keys"===l.key)throw"Reference.transaction failed: "+l.key+" is a read-only object.";const y=null===(f=null==u?void 0:u.applyLocally)||void 0===f||f,D=new pe.BH,K=Mh(l,()=>{});return function ic(l,o,u,f,y,D){ja(l,"transaction on "+o);const N={path:o,update:u,onComplete:f,status:null,order:mi(),applyLocally:D,retryCount:0,unwatcher:y,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},K=Ah(l,o,void 0);N.currentInputSnapshot=K;const ae=N.update(K.val());if(void 0===ae)N.unwatcher(),N.currentOutputSnapshotRaw=null,N.currentOutputSnapshotResolved=null,N.onComplete&&N.onComplete(null,!1,N.currentInputSnapshot);else{Tu("transaction failed: Data returned ",ae,N.path),N.status=0;const De=bl(l.transactionQueueTree_,o),nt=nl(De)||[];let lt;nt.push(N),Tl(De,nt),"object"==typeof ae&&null!==ae&&(0,pe.r3)(ae,".priority")?(lt=(0,pe.DV)(ae,".priority"),(0,pe.hu)(Nd(lt),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):lt=(Iu(l.serverSyncTree_,o)||On.EMPTY_NODE).getPriority().val();const Dt=Dh(l),zt=hi(ae,lt),dn=Sf(zt,K,Dt);N.currentOutputSnapshotRaw=zt,N.currentOutputSnapshotResolved=dn,N.currentWriteId=Gc(l);const Tr=Y(l.serverSyncTree_,o,dn,N.currentWriteId,N.applyLocally);Ba(l.eventQueue_,o,Tr),Kc(l,l.transactionQueueTree_)}}(l._repo,l._path,o,(ae,De,nt)=>{let lt=null;ae?D.reject(ae):(lt=new sa(nt,new Go(l._repo,l._path),Zr),D.resolve(new Y_(De,lt)))},K,y),D.promise}(this._delegate,o,{applyLocally:f}).then(D=>new x(D.committed,new H(this.database,D.snapshot)));return u&&y.then(D=>u(null,D.committed,D.snapshot),D=>u(D,!1,null)),y}setPriority(o,u){(0,pe.Dv)("Reference.setPriority",1,2,arguments.length),(0,pe.Wj)("Reference.setPriority","onComplete",u,!0);const f=function Sl(l,o){l=(0,pe.m9)(l),Ea("setPriority",l._path),Mf("setPriority",o,!1);const u=new pe.BH;return Ld(l._repo,ni(l._path,".priority"),o,null,u.wrapCallback(()=>{})),u.promise}(this._delegate,o);return u&&f.then(()=>u(null),y=>u(y)),f}push(o,u){(0,pe.Dv)("Reference.push",0,2,arguments.length),(0,pe.Wj)("Reference.push","onComplete",u,!0);const f=function Uf(l,o){l=(0,pe.m9)(l),Ea("push",l._path),vo("push",o,l._path,!0);const u=Um(l._repo),f=C(u),y=Ou(l,f),D=Ou(l,f);let N;return N=null!=o?cc(D,o).then(()=>D):Promise.resolve(D),y.then=N.then.bind(N),y.catch=N.then.bind(N,void 0),y}(this._delegate,o),y=f.then(N=>new Ie(this.database,N));u&&y.then(()=>u(null),N=>u(N));const D=new Ie(this.database,f);return D.then=y.then.bind(y),D.catch=y.catch.bind(y,void 0),D}onDisconnect(){return Ea("Reference.onDisconnect",this._delegate._path),new E(new Rh(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Be{constructor(o,u){this._delegate=o,this.app=u,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Nh,forceLongPolling:qf}}useEmulator(o,u,f={}){!function hg(l,o,u,f={}){(l=(0,pe.m9)(l))._checkNotDeleted("useEmulator"),l._instanceStarted&&ve("Cannot call useEmulator() after instance has already been initialized.");const y=l._repoInternal;let D;if(y.repoInfo_.nodeAdmin)f.mockUserToken&&ve('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),D=new us(us.OWNER);else if(f.mockUserToken){const N="string"==typeof f.mockUserToken?f.mockUserToken:(0,pe.Sg)(f.mockUserToken,l.app.options.projectId);D=new us(N)}!function zd(l,o,u,f){l.repoInfo_=new Hs(`${o}:${u}`,!1,l.repoInfo_.namespace,l.repoInfo_.webSocketOnly,l.repoInfo_.nodeAdmin,l.repoInfo_.persistenceKey,l.repoInfo_.includeNamespaceInQueryParams),f&&(l.authTokenProvider_=f)}(y,o,u,D)}(this._delegate,o,u,f)}ref(o){if((0,pe.Dv)("database.ref",0,1,arguments.length),o instanceof Ie){const u=Lf(this._delegate,o.toString());return new Ie(this,u)}{const u=uu(this._delegate,o);return new Ie(this,u)}}refFromURL(o){(0,pe.Dv)("database.refFromURL",1,1,arguments.length);const f=Lf(this._delegate,o);return new Ie(this,f)}goOffline(){return(0,pe.Dv)("database.goOffline",0,0,arguments.length),function fg(l){(l=(0,pe.m9)(l))._checkNotDeleted("goOffline"),Th(l._repo)}(this._delegate)}goOnline(){return(0,pe.Dv)("database.goOnline",0,0,arguments.length),function Z_(l){(l=(0,pe.m9)(l))._checkNotDeleted("goOnline"),function zc(l){l.persistentConnection_&&l.persistentConnection_.resume(ng)}(l._repo)}(this._delegate)}}Be.ServerValue={TIMESTAMP:function Jf(){return Qf}(),increment:l=>function Hm(l){return{".sv":{increment:l}}}(l)};var Nt=Object.freeze({__proto__:null,initStandalone:function mt({app:l,url:o,version:u,customAuthImpl:f,namespace:y,nodeAdmin:D=!1}){_n(u);const N=new rr.zt("auth-internal",new rr.H0("database-standalone"));return N.setComponent(new rr.wA("auth-internal",()=>f,"PRIVATE")),{instance:new Be(Kd(l,N,void 0,o,D),l),namespace:y}}});const Bt=Be.ServerValue;function Ds(l){return null==l}function Yi(l){return"function"==typeof l.set}function Io(l,o){return Yi(o)?o:l.ref(o)}function Ns(l,o){if(function cr(l){return"string"==typeof l}(l))return o.stringCase();if(Yi(l))return o.firebaseCase();if(function ss(l){return"function"==typeof l.exportVal}(l))return o.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof l)}function Mi(l,o,u="on",f=vf.z){return new qg.y(y=>{let D=null;return D=l[u](o,(N,K)=>{f.schedule(()=>{y.next({snapshot:N,prevKey:K})}),"once"===u&&f.schedule(()=>y.complete())},N=>{f.schedule(()=>y.error(N))}),"on"===u?{unsubscribe(){null!=D&&l.off(o,D)}}:{unsubscribe(){}}}).pipe((0,Nl.U)(y=>{const{snapshot:D,prevKey:N}=y;let K=null;return D.exists()&&(K=D.key),{type:o,payload:D,prevKey:N,key:K}}),(0,Im.B)())}function xc(l,o){const u=l.length;for(let f=0;f<u;f++)if(l[f].payload.key===o)return f;return-1}function Ey(l,o){const{payload:u,prevKey:f,key:y}=o,D=xc(l,y),N=function vy(l,o){if(Ds(o))return 0;{const u=xc(l,o);return-1===u?l.length:u+1}}(l,f);switch(o.type){case"value":if(o.payload&&o.payload.exists()){let K=null;o.payload.forEach(ae=>{const De={payload:ae,type:"value",prevKey:K,key:ae.key};return K=ae.key,l=[...l,De],!1})}return l;case"child_added":if(D>-1){const K=l[D-1];(K&&K.key||null)!==f&&(l=l.filter(ae=>ae.payload.key!==u.key)).splice(N,0,o)}else{if(null==f)return[o,...l];(l=l.slice()).splice(N,0,o)}return l;case"child_removed":return l.filter(K=>K.payload.key!==u.key);case"child_changed":return l.map(K=>K.payload.key===y?o:K);case"child_moved":if(D>-1){const K=l.splice(D,1)[0];return(l=l.slice()).splice(N,0,K),l}return l;default:return l}}function F_(l){return(Ds(l)||0===l.length)&&(l=["child_added","child_removed","child_changed","child_moved"]),l}function L_(l,o,u){return function qo(l,o,u){return Mi(l,"value","once",u).pipe((0,ad.w)(f=>{const y=[(0,eh.of)(f)];return o.forEach(D=>y.push(Mi(l,D,"on",u))),(0,wm.T)(...y).pipe((0,Wp.R)(Ey,[]))}),(0,Hp.x)())}(l,o=F_(o),u)}function U_(l,o,u){const f=(o=F_(o)).map(y=>Mi(l,y,"on",u));return(0,wm.T)(...f)}function vd(l,o){return function(f,y){return Ns(f,{stringCase:()=>l.child(f)[o](y),firebaseCase:()=>f[o](y),snapshotCase:()=>f.ref[o](y)})}}function Ly(l){return function(u){return u?Ns(u,{stringCase:()=>l.child(u).remove(),firebaseCase:()=>u.remove(),snapshotCase:()=>u.ref.remove()}):l.remove()}}function fh(l,o){return function(){return Mi(l,"value","on",o)}}!function mn(l){l.INTERNAL.registerComponent(new rr.wA("database-compat",(o,{instanceIdentifier:u})=>{const f=o.getProvider("app-compat").getImmediate(),y=o.getProvider("database").getImmediate({identifier:u});return new Be(y,f)},"PUBLIC").setServiceProps({Reference:Ie,Query:Z,Database:Be,DataSnapshot:H,enableLogging:Zf,INTERNAL:Nt,ServerValue:Bt}).setMultipleInstances(!0)),l.registerVersion("@firebase/database-compat","0.2.0")}(wc.Z);const V_=new M.OlP("angularfire2.realtimeDatabaseURL"),Lv=new M.OlP("angularfire2.database.use-emulator");let Dy=(()=>{class l{constructor(u,f,y,D,N,K,ae,De,nt,lt,Dt,zt,dn,Tr,Br){this.schedulers=K;const so=ae,oo=(0,ku.on)(u,N,f);De&&(0,lu.nw)(oo,N,nt,Dt,zt,dn,lt,Tr),this.database=(0,ku.cc)(`${oo.name}.database.${y}`,"AngularFireDatabase",oo.name,()=>{const hs=N.runOutsideAngular(()=>oo.database(y||void 0));return so&&hs.useEmulator(...so),hs},[so])}list(u,f){const y=this.schedulers.ngZone.runOutsideAngular(()=>Io(this.database,u));let D=y;return f&&(D=f(y)),function Uy(l,o){const u=o.schedulers.outsideAngular,f=o.schedulers.ngZone.run(()=>l.ref);return{query:l,update:vd(f,"update"),set:vd(f,"set"),push:y=>f.push(y),remove:Ly(f),snapshotChanges:y=>L_(l,y,u).pipe(Xe.iC),stateChanges:y=>U_(l,y,u).pipe(Xe.iC),auditTrail:y=>function wy(l,o,u){return function Cy(l,o,u){return function Iy(l,o){return Mi(l,"value","on",o).pipe((0,Nl.U)(u=>{let f;return u.payload.forEach(y=>(f=y.key,!1)),{data:u,lastKeyToLoad:f}}))}(l,u).pipe((0,Ef.M)(o),(0,Nl.U)(([y,D])=>{const N=y.lastKeyToLoad,K=D.map(ae=>ae.key);return{actions:D,lastKeyToLoad:N,loadedKeys:K}}),function k_(l){return(0,Cm.e)((o,u)=>{let f=!1,y=0;o.subscribe((0,N_.x)(u,D=>(f||(f=!l(D,y++)))&&u.next(D)))})}(y=>-1===y.loadedKeys.indexOf(y.lastKeyToLoad)),(0,Nl.U)(y=>y.actions))}(l,U_(l,o).pipe((0,Wp.R)((y,D)=>[...y,D],[])),u)}(l,y,u).pipe(Xe.iC),valueChanges:(y,D)=>L_(l,y,u).pipe((0,Nl.U)(K=>K.map(ae=>D&&D.idField?Object.assign(Object.assign({},ae.payload.val()),{[D.idField]:ae.key}):ae.payload.val())),Xe.iC)}}(D,this)}object(u){return function Fv(l,o){return{query:l,snapshotChanges:()=>fh(l,o.schedulers.outsideAngular)().pipe(Xe.iC),update:u=>l.ref.update(u),set:u=>l.ref.set(u),remove:()=>l.ref.remove(),valueChanges:()=>fh(l,o.schedulers.outsideAngular)().pipe(Xe.iC,(0,Nl.U)(f=>f.payload.exists()?f.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Io(this.database,u)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return l.\u0275fac=function(u){return new(u||l)(M.LFG(ku.Dh),M.LFG(ku.xv,8),M.LFG(V_,8),M.LFG(M.Lbi),M.LFG(M.R0b),M.LFG(Xe.HU),M.LFG(Lv,8),M.LFG(lu.zQ,8),M.LFG(lu.Qv,8),M.LFG(lu.L6,8),M.LFG(lu._Q,8),M.LFG(lu.rT,8),M.LFG(lu.lh,8),M.LFG(lu.f7,8),M.LFG(ze.nm,8))},l.\u0275prov=M.Yz7({token:l,factory:l.\u0275fac,providedIn:"any"}),l})(),by=(()=>{class l{constructor(){jp.Z.registerVersion("angularfire",Xe.q4.full,"rtdb-compat")}}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l}),l.\u0275inj=M.cJS({providers:[Dy]}),l})();var wf=S(5620),er=S(9565);const Vy=(0,wf.PH)("[INGRESO EGRESO] SET_ITEMS",(0,wf.Ky)()),By=(0,wf.PH)("[INGRESO EGRESO] UNSET_ITEMS"),$y={ingresoEgreso:(0,wf.Lq)({items:[]},(0,wf.on)(Vy,(l,{items:o})=>Object.assign(Object.assign({},l),o)),(0,wf.on)(By,l=>Object.assign(Object.assign({},l),{items:[]})))};let bm=(()=>{class l{}return l.\u0275fac=function(u){return new(u||l)},l.\u0275mod=M.oAB({type:l,bootstrap:[Te]}),l.\u0275inj=M.cJS({providers:[Ae.e],imports:[[p.b2,fe,At,de,ku.hO.initializeApp(it_firebase),(0,je.hX)(()=>(0,je.ZF)(it_firebase)),on(()=>Ut()),gg(()=>ul()),rd(()=>vc()),lu.ww,yf.yb,Mc,by,wf.Aw.forRoot($y),er.FT.instrument({maxAge:25,logOnly:true})]]}),l})();(0,M.G48)(),p.q6().bootstrapModule(bm).catch(l=>console.error(l))},5867:(ke,ye,S)=>{S.d(ye,{C6:()=>p.getApps,KN:()=>p.registerVersion,Mq:()=>p.getApp,ZF:()=>p.initializeApp});var p=S(9681);(0,p.registerVersion)("firebase","9.8.2","app")},8937:(ke,ye,S)=>{S.d(ye,{hJ:()=>p.Q,v0:()=>p.n});var p=S(2587);S(2090),S(9681),S(1877),S(4859)},127:(ke,ye,S)=>{S.d(ye,{Z:()=>p.Z});var p=S(3942);p.Z.registerVersion("firebase","9.8.2","app-compat")},5881:(ke,ye,S)=>{S.r(ye);var p=S(5861),M=S(3942),G=S(2587),Ee=S(2090),be=(S(9681),S(1877),S(4859));function ce(){return window}function fe(){return(fe=(0,p.Z)(function*(st,Le,te){var he;const{BuildInfo:re}=ce();(0,G.aq)(Le.sessionId,"AuthEvent did not contain a session ID");const Ve=yield tt(Le.sessionId),ht={};return(0,G.ar)()?ht.ibi=re.packageName:(0,G.as)()?ht.apn=re.packageName:(0,G.at)(st,"operation-not-supported-in-this-environment"),re.displayName&&(ht.appDisplayName=re.displayName),ht.sessionId=Ve,(0,G.au)(st,te,Le.type,void 0,null!==(he=Le.eventId)&&void 0!==he?he:void 0,ht)})).apply(this,arguments)}function Ye(){return(Ye=(0,p.Z)(function*(st){const{BuildInfo:Le}=ce(),te={};(0,G.ar)()?te.iosBundleId=Le.packageName:(0,G.as)()?te.androidPackageName=Le.packageName:(0,G.at)(st,"operation-not-supported-in-this-environment"),yield(0,G.av)(st,te)})).apply(this,arguments)}function bt(){return(bt=(0,p.Z)(function*(st,Le,te){const{cordova:he}=ce();let re=()=>{};try{yield new Promise((Ve,ht)=>{let Lt=null;function Yt(){var fn;Ve();const rr=null===(fn=he.plugins.browsertab)||void 0===fn?void 0:fn.close;"function"==typeof rr&&rr(),"function"==typeof(null==te?void 0:te.close)&&te.close()}function Jn(){Lt||(Lt=window.setTimeout(()=>{ht((0,G.aw)(st,"redirect-cancelled-by-user"))},2e3))}function Gn(){"visible"===(null==document?void 0:document.visibilityState)&&Jn()}Le.addPassiveListener(Yt),document.addEventListener("resume",Jn,!1),(0,G.as)()&&document.addEventListener("visibilitychange",Gn,!1),re=()=>{Le.removePassiveListener(Yt),document.removeEventListener("resume",Jn,!1),document.removeEventListener("visibilitychange",Gn,!1),Lt&&window.clearTimeout(Lt)}})}finally{re()}})).apply(this,arguments)}function tt(st){return xe.apply(this,arguments)}function xe(){return(xe=(0,p.Z)(function*(st){const Le=wt(st),te=yield crypto.subtle.digest("SHA-256",Le);return Array.from(new Uint8Array(te)).map(re=>re.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wt(st){if((0,G.aq)(/[0-9a-zA-Z]+/.test(st),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(st);const Le=new ArrayBuffer(st.length),te=new Uint8Array(Le);for(let he=0;he<st.length;he++)te[he]=st.charCodeAt(he);return te}class Ge extends G.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Le=>{this.resolveInialized=Le})}addPassiveListener(Le){this.passiveListeners.add(Le)}removePassiveListener(Le){this.passiveListeners.delete(Le)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Le){return this.resolveInialized(),this.passiveListeners.forEach(te=>te(Le)),super.onEvent(Le)}initialized(){var Le=this;return(0,p.Z)(function*(){yield Le.initPromise})()}}function je(st){return it.apply(this,arguments)}function it(){return(it=(0,p.Z)(function*(st){const Le=yield ze()._get(et(st));return Le&&(yield ze()._remove(et(st))),Le})).apply(this,arguments)}function Fe(){const st=[],Le="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let te=0;te<20;te++){const he=Math.floor(Math.random()*Le.length);st.push(Le.charAt(he))}return st.join("")}function ze(){return(0,G.ay)(G.b)}function et(st){return(0,G.az)("authEvent",st.config.apiKey,st.name)}function _t(st){if(!(null==st?void 0:st.includes("?")))return{};const[Le,...te]=st.split("?");return(0,Ee.zd)(te.join("?"))}function Ot(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,G.aw)("no-auth-event")}}function sn(){var st;return(null===(st=null==self?void 0:self.location)||void 0===st?void 0:st.protocol)||null}function Wn(st=(0,Ee.z$)()){return!("file:"!==sn()&&"ionic:"!==sn()&&"capacitor:"!==sn()||!st.toLowerCase().match(/iphone|ipad|ipod|android/))}function ur(){try{const st=self.localStorage,Le=G.aI();if(st)return st.setItem(Le,"1"),st.removeItem(Le),!function Cr(st=(0,Ee.z$)()){return function Hn(){return(0,Ee.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ln(st=(0,Ee.z$)()){return/Edge\/\d+/.test(st)}(st)}()||(0,Ee.hl)()}catch(st){return Ar()&&(0,Ee.hl)()}return!1}function Ar(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function qn(){return(function Jt(){return"http:"===sn()||"https:"===sn()}()||(0,Ee.ru)()||Wn())&&!function ar(){return(0,Ee.b$)()||(0,Ee.UG)()}()&&ur()&&!Ar()}function jr(){return Wn()&&"undefined"!=typeof document}function pr(){return(pr=(0,p.Z)(function*(){return!!jr()&&new Promise(st=>{const Le=setTimeout(()=>{st(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Le),st(!0)})})})).apply(this,arguments)}const pn={LOCAL:"local",NONE:"none",SESSION:"session"},Dr=G.ax,Hr="persistence";function Tn(st){return vr.apply(this,arguments)}function vr(){return(vr=(0,p.Z)(function*(st){yield st._initializationPromise;const Le=Vt(),te=G.az(Hr,st.config.apiKey,st.name);Le&&Le.setItem(te,st._getPersistence())})).apply(this,arguments)}function Vt(){var st;try{return(null===(st=function An(){return"undefined"!=typeof window?window:null}())||void 0===st?void 0:st.sessionStorage)||null}catch(Le){return null}}const an=G.ax;class Wt{constructor(){this.browserResolver=G.ay(G.k),this.cordovaResolver=G.ay(class nn{constructor(){this._redirectPersistence=G.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=G.aB,this._overrideRedirectResult=G.aC}_initialize(Le){var te=this;return(0,p.Z)(function*(){const he=Le._key();let re=te.eventManagers.get(he);return re||(re=new Ge(Le),te.eventManagers.set(he,re),te.attachCallbackListeners(Le,re)),re})()}_openPopup(Le){(0,G.at)(Le,"operation-not-supported-in-this-environment")}_openRedirect(Le,te,he,re){var Ve=this;return(0,p.Z)(function*(){!function at(st){var Le,te,he,re,Ve,ht,Lt,Yt,Jn,Gn;const fn=ce();(0,G.ax)("function"==typeof(null===(Le=null==fn?void 0:fn.universalLinks)||void 0===Le?void 0:Le.subscribe),st,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,G.ax)(void 0!==(null===(te=null==fn?void 0:fn.BuildInfo)||void 0===te?void 0:te.packageName),st,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,G.ax)("function"==typeof(null===(Ve=null===(re=null===(he=null==fn?void 0:fn.cordova)||void 0===he?void 0:he.plugins)||void 0===re?void 0:re.browsertab)||void 0===Ve?void 0:Ve.openUrl),st,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,G.ax)("function"==typeof(null===(Yt=null===(Lt=null===(ht=null==fn?void 0:fn.cordova)||void 0===ht?void 0:ht.plugins)||void 0===Lt?void 0:Lt.browsertab)||void 0===Yt?void 0:Yt.isAvailable),st,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,G.ax)("function"==typeof(null===(Gn=null===(Jn=null==fn?void 0:fn.cordova)||void 0===Jn?void 0:Jn.InAppBrowser)||void 0===Gn?void 0:Gn.open),st,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Le);const ht=yield Ve._initialize(Le);yield ht.initialized(),ht.resetRedirect(),(0,G.aD)(),yield Ve._originValidation(Le);const Lt=function ut(st,Le,te=null){return{type:Le,eventId:te,urlResponse:null,sessionId:Fe(),postBody:null,tenantId:st.tenantId,error:(0,G.aw)(st,"no-auth-event")}}(Le,he,re);yield function At(st,Le){return ze()._set(et(st),Le)}(Le,Lt);const Yt=yield function ee(st,Le,te){return fe.apply(this,arguments)}(Le,Lt,te),Jn=yield function Je(st){const{cordova:Le}=ce();return new Promise(te=>{Le.plugins.browsertab.isAvailable(he=>{let re=null;he?Le.plugins.browsertab.openUrl(st):re=Le.InAppBrowser.open(st,(0,G.ap)()?"_blank":"_system","location=yes"),te(re)})})}(Yt);return function ot(st,Le,te){return bt.apply(this,arguments)}(Le,ht,Jn)})()}_isIframeWebStorageSupported(Le,te){throw new Error("Method not implemented.")}_originValidation(Le){const te=Le._key();return this.originValidationPromises[te]||(this.originValidationPromises[te]=function Ae(st){return Ye.apply(this,arguments)}(Le)),this.originValidationPromises[te]}attachCallbackListeners(Le,te){const{universalLinks:he,handleOpenURL:re,BuildInfo:Ve}=ce(),ht=setTimeout((0,p.Z)(function*(){yield je(Le),te.onEvent(Ot())}),500),Lt=function(){var Gn=(0,p.Z)(function*(fn){clearTimeout(ht);const rr=yield je(Le);let pe=null;rr&&(null==fn?void 0:fn.url)&&(pe=function Xe(st,Le){var te,he;const re=function Ke(st){const Le=_t(st),te=Le.link?decodeURIComponent(Le.link):void 0,he=_t(te).link,re=Le.deep_link_id?decodeURIComponent(Le.deep_link_id):void 0;return _t(re).link||re||he||te||st}(Le);if(re.includes("/__/auth/callback")){const Ve=_t(re),ht=Ve.firebaseError?function dt(st){try{return JSON.parse(st)}catch(Le){return null}}(decodeURIComponent(Ve.firebaseError)):null,Lt=null===(he=null===(te=null==ht?void 0:ht.code)||void 0===te?void 0:te.split("auth/"))||void 0===he?void 0:he[1],Yt=Lt?(0,G.aw)(Lt):null;return Yt?{type:st.type,eventId:st.eventId,tenantId:st.tenantId,error:Yt,urlResponse:null,sessionId:null,postBody:null}:{type:st.type,eventId:st.eventId,tenantId:st.tenantId,sessionId:st.sessionId,urlResponse:re,postBody:null}}return null}(rr,fn.url)),te.onEvent(pe||Ot())});return function(rr){return Gn.apply(this,arguments)}}();void 0!==he&&"function"==typeof he.subscribe&&he.subscribe(null,Lt);const Yt=re,Jn=`${Ve.packageName.toLowerCase()}://`;ce().handleOpenURL=function(){var Gn=(0,p.Z)(function*(fn){if(fn.toLowerCase().startsWith(Jn)&&Lt({url:fn}),"function"==typeof Yt)try{Yt(fn)}catch(rr){console.error(rr)}});return function(fn){return Gn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=G.a,this._completeRedirectFn=G.aB,this._overrideRedirectResult=G.aC}_initialize(Le){var te=this;return(0,p.Z)(function*(){return yield te.selectUnderlyingResolver(),te.assertedUnderlyingResolver._initialize(Le)})()}_openPopup(Le,te,he,re){var Ve=this;return(0,p.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openPopup(Le,te,he,re)})()}_openRedirect(Le,te,he,re){var Ve=this;return(0,p.Z)(function*(){return yield Ve.selectUnderlyingResolver(),Ve.assertedUnderlyingResolver._openRedirect(Le,te,he,re)})()}_isIframeWebStorageSupported(Le,te){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Le,te)}_originValidation(Le){return this.assertedUnderlyingResolver._originValidation(Le)}get _shouldInitProactively(){return jr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return an(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Le=this;return(0,p.Z)(function*(){if(Le.underlyingResolver)return;const te=yield function Ut(){return pr.apply(this,arguments)}();Le.underlyingResolver=te?Le.cordovaResolver:Le.browserResolver})()}}function Or(st){return st.unwrap()}function Bn(st){return gr(st)}function gr(st){const{_tokenResponse:Le}=st instanceof Ee.ZR?st.customData:st;if(!Le)return null;if(!(st instanceof Ee.ZR)&&"temporaryProof"in Le&&"phoneNumber"in Le)return G.P.credentialFromResult(st);const te=Le.providerId;if(!te||te===G.o.PASSWORD)return null;let he;switch(te){case G.o.GOOGLE:he=G.Q;break;case G.o.FACEBOOK:he=G.N;break;case G.o.GITHUB:he=G.T;break;case G.o.TWITTER:he=G.W;break;default:const{oauthIdToken:re,oauthAccessToken:Ve,oauthTokenSecret:ht,pendingToken:Lt,nonce:Yt}=Le;return Ve||ht||re||Lt?Lt?te.startsWith("saml.")?G.aL._create(te,Lt):G.J._fromParams({providerId:te,signInMethod:te,pendingToken:Lt,idToken:re,accessToken:Ve}):new G.U(te).credential({idToken:re,accessToken:Ve,rawNonce:Yt}):null}return st instanceof Ee.ZR?he.credentialFromError(st):he.credentialFromResult(st)}function jn(st,Le){return Le.catch(te=>{throw te instanceof Ee.ZR&&function di(st,Le){var te;const he=null===(te=Le.customData)||void 0===te?void 0:te._tokenResponse;if("auth/multi-factor-auth-required"===Le.code)Le.resolver=new Ue(st,G.an(st,Le));else if(he){const re=gr(Le),Ve=Le;re&&(Ve.credential=re,Ve.tenantId=he.tenantId||void 0,Ve.email=he.email||void 0,Ve.phoneNumber=he.phoneNumber||void 0)}}(st,te),te}).then(te=>{const re=te.user;return{operationType:te.operationType,credential:Bn(te),additionalUserInfo:G.al(te),user:Et.getOrCreate(re)}})}function Me(st,Le){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,p.Z)(function*(st,Le){const te=yield Le;return{verificationId:te.verificationId,confirm:he=>jn(st,te.confirm(he))}})).apply(this,arguments)}class Ue{constructor(Le,te){this.resolver=te,this.auth=function zr(st){return st.wrapped()}(Le)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Le){return jn(Or(this.auth),this.resolver.resolveSignIn(Le))}}class Et{constructor(Le){this._delegate=Le,this.multiFactor=G.ao(Le)}static getOrCreate(Le){return Et.USER_MAP.has(Le)||Et.USER_MAP.set(Le,new Et(Le)),Et.USER_MAP.get(Le)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Le){return this._delegate.getIdTokenResult(Le)}getIdToken(Le){return this._delegate.getIdToken(Le)}linkAndRetrieveDataWithCredential(Le){return this.linkWithCredential(Le)}linkWithCredential(Le){var te=this;return(0,p.Z)(function*(){return jn(te.auth,G.Z(te._delegate,Le))})()}linkWithPhoneNumber(Le,te){var he=this;return(0,p.Z)(function*(){return Me(he.auth,G.l(he._delegate,Le,te))})()}linkWithPopup(Le){var te=this;return(0,p.Z)(function*(){return jn(te.auth,G.d(te._delegate,Le,Wt))})()}linkWithRedirect(Le){var te=this;return(0,p.Z)(function*(){return yield Tn(G.aE(te.auth)),G.g(te._delegate,Le,Wt)})()}reauthenticateAndRetrieveDataWithCredential(Le){return this.reauthenticateWithCredential(Le)}reauthenticateWithCredential(Le){var te=this;return(0,p.Z)(function*(){return jn(te.auth,G._(te._delegate,Le))})()}reauthenticateWithPhoneNumber(Le,te){return Me(this.auth,G.r(this._delegate,Le,te))}reauthenticateWithPopup(Le){return jn(this.auth,G.e(this._delegate,Le,Wt))}reauthenticateWithRedirect(Le){var te=this;return(0,p.Z)(function*(){return yield Tn(G.aE(te.auth)),G.h(te._delegate,Le,Wt)})()}sendEmailVerification(Le){return G.ab(this._delegate,Le)}unlink(Le){var te=this;return(0,p.Z)(function*(){return yield G.ak(te._delegate,Le),te})()}updateEmail(Le){return G.ag(this._delegate,Le)}updatePassword(Le){return G.ah(this._delegate,Le)}updatePhoneNumber(Le){return G.u(this._delegate,Le)}updateProfile(Le){return G.af(this._delegate,Le)}verifyBeforeUpdateEmail(Le,te){return G.ac(this._delegate,Le,te)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Et.USER_MAP=new WeakMap;const ue=G.ax;let j=(()=>{class st{constructor(te,he){if(this.app=te,he.isInitialized())return this._delegate=he.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:re}=te.options;ue(re,"invalid-api-key",{appName:te.name}),ue(re,"invalid-api-key",{appName:te.name});const Ve="undefined"!=typeof window?Wt:void 0;this._delegate=he.initialize({options:{persistence:He(re,te.name),popupRedirectResolver:Ve}}),this._delegate._updateErrorMap(G.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Et.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(te){this._delegate.languageCode=te}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(te){this._delegate.tenantId=te}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(te,he){G.G(this._delegate,te,he)}applyActionCode(te){return G.a2(this._delegate,te)}checkActionCode(te){return G.a3(this._delegate,te)}confirmPasswordReset(te,he){return G.a1(this._delegate,te,he)}createUserWithEmailAndPassword(te,he){var re=this;return(0,p.Z)(function*(){return jn(re._delegate,G.a5(re._delegate,te,he))})()}fetchProvidersForEmail(te){return this.fetchSignInMethodsForEmail(te)}fetchSignInMethodsForEmail(te){return G.aa(this._delegate,te)}isSignInWithEmailLink(te){return G.a8(this._delegate,te)}getRedirectResult(){var te=this;return(0,p.Z)(function*(){ue(qn(),te._delegate,"operation-not-supported-in-this-environment");const he=yield G.j(te._delegate,Wt);return he?jn(te._delegate,Promise.resolve(he)):{credential:null,user:null}})()}addFrameworkForLogging(te){!function en(st,Le){(0,G.aE)(st)._logFramework(Le)}(this._delegate,te)}onAuthStateChanged(te,he,re){const{next:Ve,error:ht,complete:Lt}=oe(te,he,re);return this._delegate.onAuthStateChanged(Ve,ht,Lt)}onIdTokenChanged(te,he,re){const{next:Ve,error:ht,complete:Lt}=oe(te,he,re);return this._delegate.onIdTokenChanged(Ve,ht,Lt)}sendSignInLinkToEmail(te,he){return G.a7(this._delegate,te,he)}sendPasswordResetEmail(te,he){return G.a0(this._delegate,te,he||void 0)}setPersistence(te){var he=this;return(0,p.Z)(function*(){let re;switch(function Gr(st,Le){Dr(Object.values(pn).includes(Le),st,"invalid-persistence-type"),(0,Ee.b$)()?Dr(Le!==pn.SESSION,st,"unsupported-persistence-type"):(0,Ee.UG)()?Dr(Le===pn.NONE,st,"unsupported-persistence-type"):Ar()?Dr(Le===pn.NONE||Le===pn.LOCAL&&(0,Ee.hl)(),st,"unsupported-persistence-type"):Dr(Le===pn.NONE||ur(),st,"unsupported-persistence-type")}(he._delegate,te),te){case pn.SESSION:re=G.a;break;case pn.LOCAL:re=(yield G.ay(G.i)._isAvailable())?G.i:G.b;break;case pn.NONE:re=G.L;break;default:return G.at("argument-error",{appName:he._delegate.name})}return he._delegate.setPersistence(re)})()}signInAndRetrieveDataWithCredential(te){return this.signInWithCredential(te)}signInAnonymously(){return jn(this._delegate,G.X(this._delegate))}signInWithCredential(te){return jn(this._delegate,G.Y(this._delegate,te))}signInWithCustomToken(te){return jn(this._delegate,G.$(this._delegate,te))}signInWithEmailAndPassword(te,he){return jn(this._delegate,G.a6(this._delegate,te,he))}signInWithEmailLink(te,he){return jn(this._delegate,G.a9(this._delegate,te,he))}signInWithPhoneNumber(te,he){return Me(this._delegate,G.s(this._delegate,te,he))}signInWithPopup(te){var he=this;return(0,p.Z)(function*(){return ue(qn(),he._delegate,"operation-not-supported-in-this-environment"),jn(he._delegate,G.c(he._delegate,te,Wt))})()}signInWithRedirect(te){var he=this;return(0,p.Z)(function*(){return ue(qn(),he._delegate,"operation-not-supported-in-this-environment"),yield Tn(he._delegate),G.f(he._delegate,te,Wt)})()}updateCurrentUser(te){return this._delegate.updateCurrentUser(te)}verifyPasswordResetCode(te){return G.a4(this._delegate,te)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return st.Persistence=pn,st})();function oe(st,Le,te){let he=st;"function"!=typeof st&&({next:he,error:Le,complete:te}=st);const re=he;return{next:ht=>re(ht&&Et.getOrCreate(ht)),error:Le,complete:te}}function He(st,Le){const te=function $r(st,Le){const te=Vt();if(!te)return[];const he=G.az(Hr,st,Le);switch(te.getItem(he)){case pn.NONE:return[G.L];case pn.LOCAL:return[G.i,G.a];case pn.SESSION:return[G.a];default:return[]}}(st,Le);if("undefined"!=typeof self&&!te.includes(G.i)&&te.push(G.i),"undefined"!=typeof window)for(const he of[G.b,G.a])te.includes(he)||te.push(he);return te.includes(G.L)||te.push(G.L),te}class gt{constructor(){this.providerId="phone",this._delegate=new G.P(Or(M.Z.auth()))}static credential(Le,te){return G.P.credential(Le,te)}verifyPhoneNumber(Le,te){return this._delegate.verifyPhoneNumber(Le,te)}unwrap(){return this._delegate}}gt.PHONE_SIGN_IN_METHOD=G.P.PHONE_SIGN_IN_METHOD,gt.PROVIDER_ID=G.P.PROVIDER_ID;const Ht=G.ax;class wn{constructor(Le,te,he=M.Z.app()){var re;Ht(null===(re=he.options)||void 0===re?void 0:re.apiKey,"invalid-api-key",{appName:he.name}),this._delegate=new G.R(Le,te,he.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Mn(st){st.INTERNAL.registerComponent(new be.wA("auth-compat",Le=>{const te=Le.getProvider("app-compat").getImmediate(),he=Le.getProvider("auth");return new j(te,he)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:G.A.EMAIL_SIGNIN,PASSWORD_RESET:G.A.PASSWORD_RESET,RECOVER_EMAIL:G.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:G.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:G.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:G.A.VERIFY_EMAIL}},EmailAuthProvider:G.M,FacebookAuthProvider:G.N,GithubAuthProvider:G.T,GoogleAuthProvider:G.Q,OAuthProvider:G.U,SAMLAuthProvider:G.V,PhoneAuthProvider:gt,PhoneMultiFactorGenerator:G.m,RecaptchaVerifier:wn,TwitterAuthProvider:G.W,Auth:j,AuthCredential:G.H,Error:Ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),st.registerVersion("@firebase/auth-compat","0.2.15")}(M.Z)},1135:(ke,ye,S)=>{S.d(ye,{X:()=>M});var p=S(7579);class M extends p.x{constructor(Ee){super(),this._value=Ee}get value(){return this.getValue()}_subscribe(Ee){const de=super._subscribe(Ee);return!de.closed&&Ee.next(this._value),de}getValue(){const{hasError:Ee,thrownError:de,_value:Te}=this;if(Ee)throw de;return this._throwIfClosed(),Te}next(Ee){super.next(this._value=Ee)}}},8306:(ke,ye,S)=>{S.d(ye,{y:()=>ee});var p=S(930),M=S(727),G=S(8822),Ee=S(4671);var be=S(2416),ce=S(576),_e=S(2806);let ee=(()=>{class Je{constructor(bt){bt&&(this._subscribe=bt)}lift(bt){const at=new Je;return at.source=this,at.operator=bt,at}subscribe(bt,at,tt){const xe=function Ye(Je){return Je&&Je instanceof p.Lv||function Ae(Je){return Je&&(0,ce.m)(Je.next)&&(0,ce.m)(Je.error)&&(0,ce.m)(Je.complete)}(Je)&&(0,M.Nn)(Je)}(bt)?bt:new p.Hp(bt,at,tt);return(0,_e.x)(()=>{const{operator:wt,source:Qe}=this;xe.add(wt?wt.call(xe,Qe):Qe?this._subscribe(xe):this._trySubscribe(xe))}),xe}_trySubscribe(bt){try{return this._subscribe(bt)}catch(at){bt.error(at)}}forEach(bt,at){return new(at=fe(at))((tt,xe)=>{const wt=new p.Hp({next:Qe=>{try{bt(Qe)}catch(Ge){xe(Ge),wt.unsubscribe()}},error:xe,complete:tt});this.subscribe(wt)})}_subscribe(bt){var at;return null===(at=this.source)||void 0===at?void 0:at.subscribe(bt)}[G.L](){return this}pipe(...bt){return function Te(Je){return 0===Je.length?Ee.y:1===Je.length?Je[0]:function(bt){return Je.reduce((at,tt)=>tt(at),bt)}}(bt)(this)}toPromise(bt){return new(bt=fe(bt))((at,tt)=>{let xe;this.subscribe(wt=>xe=wt,wt=>tt(wt),()=>at(xe))})}}return Je.create=ot=>new Je(ot),Je})();function fe(Je){var ot;return null!==(ot=null!=Je?Je:be.v.Promise)&&void 0!==ot?ot:Promise}},4707:(ke,ye,S)=>{S.d(ye,{t:()=>G});var p=S(7579),M=S(6063);class G extends p.x{constructor(de=1/0,Te=1/0,be=M.l){super(),this._bufferSize=de,this._windowTime=Te,this._timestampProvider=be,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Te===1/0,this._bufferSize=Math.max(1,de),this._windowTime=Math.max(1,Te)}next(de){const{isStopped:Te,_buffer:be,_infiniteTimeWindow:ce,_timestampProvider:_e,_windowTime:ee}=this;Te||(be.push(de),!ce&&be.push(_e.now()+ee)),this._trimBuffer(),super.next(de)}_subscribe(de){this._throwIfClosed(),this._trimBuffer();const Te=this._innerSubscribe(de),{_infiniteTimeWindow:be,_buffer:ce}=this,_e=ce.slice();for(let ee=0;ee<_e.length&&!de.closed;ee+=be?1:2)de.next(_e[ee]);return this._checkFinalizedStatuses(de),Te}_trimBuffer(){const{_bufferSize:de,_timestampProvider:Te,_buffer:be,_infiniteTimeWindow:ce}=this,_e=(ce?1:2)*de;if(de<1/0&&_e<be.length&&be.splice(0,be.length-_e),!ce){const ee=Te.now();let fe=0;for(let Ae=1;Ae<be.length&&be[Ae]<=ee;Ae+=2)fe=Ae;fe&&be.splice(0,fe+1)}}}},7579:(ke,ye,S)=>{S.d(ye,{x:()=>be});var p=S(8306),M=S(727);const Ee=(0,S(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var de=S(8737),Te=S(2806);let be=(()=>{class _e extends p.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(fe){const Ae=new ce(this,this);return Ae.operator=fe,Ae}_throwIfClosed(){if(this.closed)throw new Ee}next(fe){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ae of this.currentObservers)Ae.next(fe)}})}error(fe){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=fe;const{observers:Ae}=this;for(;Ae.length;)Ae.shift().error(fe)}})}complete(){(0,Te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:fe}=this;for(;fe.length;)fe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var fe;return(null===(fe=this.observers)||void 0===fe?void 0:fe.length)>0}_trySubscribe(fe){return this._throwIfClosed(),super._trySubscribe(fe)}_subscribe(fe){return this._throwIfClosed(),this._checkFinalizedStatuses(fe),this._innerSubscribe(fe)}_innerSubscribe(fe){const{hasError:Ae,isStopped:Ye,observers:Je}=this;return Ae||Ye?M.Lc:(this.currentObservers=null,Je.push(fe),new M.w0(()=>{this.currentObservers=null,(0,de.P)(Je,fe)}))}_checkFinalizedStatuses(fe){const{hasError:Ae,thrownError:Ye,isStopped:Je}=this;Ae?fe.error(Ye):Je&&fe.complete()}asObservable(){const fe=new p.y;return fe.source=this,fe}}return _e.create=(ee,fe)=>new ce(ee,fe),_e})();class ce extends be{constructor(ee,fe){super(),this.destination=ee,this.source=fe}next(ee){var fe,Ae;null===(Ae=null===(fe=this.destination)||void 0===fe?void 0:fe.next)||void 0===Ae||Ae.call(fe,ee)}error(ee){var fe,Ae;null===(Ae=null===(fe=this.destination)||void 0===fe?void 0:fe.error)||void 0===Ae||Ae.call(fe,ee)}complete(){var ee,fe;null===(fe=null===(ee=this.destination)||void 0===ee?void 0:ee.complete)||void 0===fe||fe.call(ee)}_subscribe(ee){var fe,Ae;return null!==(Ae=null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(ee))&&void 0!==Ae?Ae:M.Lc}}},930:(ke,ye,S)=>{S.d(ye,{Hp:()=>bt,Lv:()=>Ae});var p=S(576),M=S(727),G=S(2416),Ee=S(7849),de=S(5032);const Te=_e("C",void 0,void 0);function _e(Qe,Ge,ut){return{kind:Qe,value:Ge,error:ut}}var ee=S(3410),fe=S(2806);class Ae extends M.w0{constructor(Ge){super(),this.isStopped=!1,Ge?(this.destination=Ge,(0,M.Nn)(Ge)&&Ge.add(this)):this.destination=wt}static create(Ge,ut,At){return new bt(Ge,ut,At)}next(Ge){this.isStopped?xe(function ce(Qe){return _e("N",Qe,void 0)}(Ge),this):this._next(Ge)}error(Ge){this.isStopped?xe(function be(Qe){return _e("E",void 0,Qe)}(Ge),this):(this.isStopped=!0,this._error(Ge))}complete(){this.isStopped?xe(Te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ge){this.destination.next(Ge)}_error(Ge){try{this.destination.error(Ge)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ye=Function.prototype.bind;function Je(Qe,Ge){return Ye.call(Qe,Ge)}class ot{constructor(Ge){this.partialObserver=Ge}next(Ge){const{partialObserver:ut}=this;if(ut.next)try{ut.next(Ge)}catch(At){at(At)}}error(Ge){const{partialObserver:ut}=this;if(ut.error)try{ut.error(Ge)}catch(At){at(At)}else at(Ge)}complete(){const{partialObserver:Ge}=this;if(Ge.complete)try{Ge.complete()}catch(ut){at(ut)}}}class bt extends Ae{constructor(Ge,ut,At){let je;if(super(),(0,p.m)(Ge)||!Ge)je={next:null!=Ge?Ge:void 0,error:null!=ut?ut:void 0,complete:null!=At?At:void 0};else{let it;this&&G.v.useDeprecatedNextContext?(it=Object.create(Ge),it.unsubscribe=()=>this.unsubscribe(),je={next:Ge.next&&Je(Ge.next,it),error:Ge.error&&Je(Ge.error,it),complete:Ge.complete&&Je(Ge.complete,it)}):je=Ge}this.destination=new ot(je)}}function at(Qe){G.v.useDeprecatedSynchronousErrorHandling?(0,fe.O)(Qe):(0,Ee.h)(Qe)}function xe(Qe,Ge){const{onStoppedNotification:ut}=G.v;ut&&ee.z.setTimeout(()=>ut(Qe,Ge))}const wt={closed:!0,next:de.Z,error:function tt(Qe){throw Qe},complete:de.Z}},727:(ke,ye,S)=>{S.d(ye,{Lc:()=>Te,w0:()=>de,Nn:()=>be});var p=S(576);const G=(0,S(3888).d)(_e=>function(fe){_e(this),this.message=fe?`${fe.length} errors occurred during unsubscription:\n${fe.map((Ae,Ye)=>`${Ye+1}) ${Ae.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=fe});var Ee=S(8737);class de{constructor(ee){this.initialTeardown=ee,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ee;if(!this.closed){this.closed=!0;const{_parentage:fe}=this;if(fe)if(this._parentage=null,Array.isArray(fe))for(const Je of fe)Je.remove(this);else fe.remove(this);const{initialTeardown:Ae}=this;if((0,p.m)(Ae))try{Ae()}catch(Je){ee=Je instanceof G?Je.errors:[Je]}const{_finalizers:Ye}=this;if(Ye){this._finalizers=null;for(const Je of Ye)try{ce(Je)}catch(ot){ee=null!=ee?ee:[],ot instanceof G?ee=[...ee,...ot.errors]:ee.push(ot)}}if(ee)throw new G(ee)}}add(ee){var fe;if(ee&&ee!==this)if(this.closed)ce(ee);else{if(ee instanceof de){if(ee.closed||ee._hasParent(this))return;ee._addParent(this)}(this._finalizers=null!==(fe=this._finalizers)&&void 0!==fe?fe:[]).push(ee)}}_hasParent(ee){const{_parentage:fe}=this;return fe===ee||Array.isArray(fe)&&fe.includes(ee)}_addParent(ee){const{_parentage:fe}=this;this._parentage=Array.isArray(fe)?(fe.push(ee),fe):fe?[fe,ee]:ee}_removeParent(ee){const{_parentage:fe}=this;fe===ee?this._parentage=null:Array.isArray(fe)&&(0,Ee.P)(fe,ee)}remove(ee){const{_finalizers:fe}=this;fe&&(0,Ee.P)(fe,ee),ee instanceof de&&ee._removeParent(this)}}de.EMPTY=(()=>{const _e=new de;return _e.closed=!0,_e})();const Te=de.EMPTY;function be(_e){return _e instanceof de||_e&&"closed"in _e&&(0,p.m)(_e.remove)&&(0,p.m)(_e.add)&&(0,p.m)(_e.unsubscribe)}function ce(_e){(0,p.m)(_e)?_e():_e.unsubscribe()}},2416:(ke,ye,S)=>{S.d(ye,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(ke,ye,S)=>{S.d(ye,{z:()=>de});var p=S(8189),G=S(7669),Ee=S(8996);function de(...Te){return function M(){return(0,p.J)(1)}()((0,Ee.D)(Te,(0,G.yG)(Te)))}},515:(ke,ye,S)=>{S.d(ye,{E:()=>M});const M=new(S(8306).y)(de=>de.complete())},8996:(ke,ye,S)=>{S.d(ye,{D:()=>Ge});var p=S(8421),M=S(5363),G=S(9468),Te=S(8306),ce=S(2202),_e=S(576),ee=S(9672);function Ae(ut,At){if(!ut)throw new Error("Iterable cannot be null");return new Te.y(je=>{(0,ee.f)(je,At,()=>{const it=ut[Symbol.asyncIterator]();(0,ee.f)(je,At,()=>{it.next().then(Xe=>{Xe.done?je.complete():je.next(Xe.value)})},0,!0)})})}var Ye=S(3670),Je=S(8239),ot=S(1144),bt=S(6495),at=S(2206),tt=S(4532),xe=S(3260);function Ge(ut,At){return At?function Qe(ut,At){if(null!=ut){if((0,Ye.c)(ut))return function Ee(ut,At){return(0,p.Xf)(ut).pipe((0,G.R)(At),(0,M.Q)(At))}(ut,At);if((0,ot.z)(ut))return function be(ut,At){return new Te.y(je=>{let it=0;return At.schedule(function(){it===ut.length?je.complete():(je.next(ut[it++]),je.closed||this.schedule())})})}(ut,At);if((0,Je.t)(ut))return function de(ut,At){return(0,p.Xf)(ut).pipe((0,G.R)(At),(0,M.Q)(At))}(ut,At);if((0,at.D)(ut))return Ae(ut,At);if((0,bt.T)(ut))return function fe(ut,At){return new Te.y(je=>{let it;return(0,ee.f)(je,At,()=>{it=ut[ce.h](),(0,ee.f)(je,At,()=>{let Xe,Fe;try{({value:Xe,done:Fe}=it.next())}catch(ze){return void je.error(ze)}Fe?je.complete():je.next(Xe)},0,!0)}),()=>(0,_e.m)(null==it?void 0:it.return)&&it.return()})}(ut,At);if((0,xe.L)(ut))return function wt(ut,At){return Ae((0,xe.Q)(ut),At)}(ut,At)}throw(0,tt.z)(ut)}(ut,At):(0,p.Xf)(ut)}},8421:(ke,ye,S)=>{S.d(ye,{Xf:()=>Ye});var p=S(655),M=S(1144),G=S(8239),Ee=S(8306),de=S(3670),Te=S(2206),be=S(4532),ce=S(6495),_e=S(3260),ee=S(576),fe=S(7849),Ae=S(8822);function Ye(Qe){if(Qe instanceof Ee.y)return Qe;if(null!=Qe){if((0,de.c)(Qe))return function Je(Qe){return new Ee.y(Ge=>{const ut=Qe[Ae.L]();if((0,ee.m)(ut.subscribe))return ut.subscribe(Ge);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Qe);if((0,M.z)(Qe))return function ot(Qe){return new Ee.y(Ge=>{for(let ut=0;ut<Qe.length&&!Ge.closed;ut++)Ge.next(Qe[ut]);Ge.complete()})}(Qe);if((0,G.t)(Qe))return function bt(Qe){return new Ee.y(Ge=>{Qe.then(ut=>{Ge.closed||(Ge.next(ut),Ge.complete())},ut=>Ge.error(ut)).then(null,fe.h)})}(Qe);if((0,Te.D)(Qe))return tt(Qe);if((0,ce.T)(Qe))return function at(Qe){return new Ee.y(Ge=>{for(const ut of Qe)if(Ge.next(ut),Ge.closed)return;Ge.complete()})}(Qe);if((0,_e.L)(Qe))return function xe(Qe){return tt((0,_e.Q)(Qe))}(Qe)}throw(0,be.z)(Qe)}function tt(Qe){return new Ee.y(Ge=>{(function wt(Qe,Ge){var ut,At,je,it;return(0,p.mG)(this,void 0,void 0,function*(){try{for(ut=(0,p.KL)(Qe);!(At=yield ut.next()).done;)if(Ge.next(At.value),Ge.closed)return}catch(Xe){je={error:Xe}}finally{try{At&&!At.done&&(it=ut.return)&&(yield it.call(ut))}finally{if(je)throw je.error}}Ge.complete()})})(Qe,Ge).catch(ut=>Ge.error(ut))})}},6451:(ke,ye,S)=>{S.d(ye,{T:()=>Te});var p=S(8189),M=S(8421),G=S(515),Ee=S(7669),de=S(8996);function Te(...be){const ce=(0,Ee.yG)(be),_e=(0,Ee._6)(be,1/0),ee=be;return ee.length?1===ee.length?(0,M.Xf)(ee[0]):(0,p.J)(_e)((0,de.D)(ee,ce)):G.E}},9646:(ke,ye,S)=>{S.d(ye,{of:()=>G});var p=S(7669),M=S(8996);function G(...Ee){const de=(0,p.yG)(Ee);return(0,M.D)(Ee,de)}},5403:(ke,ye,S)=>{S.d(ye,{x:()=>M});var p=S(930);function M(Ee,de,Te,be,ce){return new G(Ee,de,Te,be,ce)}class G extends p.Lv{constructor(de,Te,be,ce,_e,ee){super(de),this.onFinalize=_e,this.shouldUnsubscribe=ee,this._next=Te?function(fe){try{Te(fe)}catch(Ae){de.error(Ae)}}:super._next,this._error=ce?function(fe){try{ce(fe)}catch(Ae){de.error(Ae)}finally{this.unsubscribe()}}:super._error,this._complete=be?function(){try{be()}catch(fe){de.error(fe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Te}=this;super.unsubscribe(),!Te&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}}},262:(ke,ye,S)=>{S.d(ye,{K:()=>Ee});var p=S(8421),M=S(5403),G=S(4482);function Ee(de){return(0,G.e)((Te,be)=>{let ee,ce=null,_e=!1;ce=Te.subscribe((0,M.x)(be,void 0,void 0,fe=>{ee=(0,p.Xf)(de(fe,Ee(de)(Te))),ce?(ce.unsubscribe(),ce=null,ee.subscribe(be)):_e=!0})),_e&&(ce.unsubscribe(),ce=null,ee.subscribe(be))})}},4351:(ke,ye,S)=>{S.d(ye,{b:()=>G});var p=S(5577),M=S(576);function G(Ee,de){return(0,M.m)(de)?(0,p.z)(Ee,de,1):(0,p.z)(Ee,1)}},8372:(ke,ye,S)=>{S.d(ye,{b:()=>Ee});var p=S(4986),M=S(4482),G=S(5403);function Ee(de,Te=p.z){return(0,M.e)((be,ce)=>{let _e=null,ee=null,fe=null;const Ae=()=>{if(_e){_e.unsubscribe(),_e=null;const Je=ee;ee=null,ce.next(Je)}};function Ye(){const Je=fe+de,ot=Te.now();if(ot<Je)return _e=this.schedule(void 0,Je-ot),void ce.add(_e);Ae()}be.subscribe((0,G.x)(ce,Je=>{ee=Je,fe=Te.now(),_e||(_e=Te.schedule(Ye,de),ce.add(_e))},()=>{Ae(),ce.complete()},void 0,()=>{ee=_e=null}))})}},6590:(ke,ye,S)=>{S.d(ye,{d:()=>G});var p=S(4482),M=S(5403);function G(Ee){return(0,p.e)((de,Te)=>{let be=!1;de.subscribe((0,M.x)(Te,ce=>{be=!0,Te.next(ce)},()=>{be||Te.next(Ee),Te.complete()}))})}},1884:(ke,ye,S)=>{S.d(ye,{x:()=>Ee});var p=S(4671),M=S(4482),G=S(5403);function Ee(Te,be=p.y){return Te=null!=Te?Te:de,(0,M.e)((ce,_e)=>{let ee,fe=!0;ce.subscribe((0,G.x)(_e,Ae=>{const Ye=be(Ae);(fe||!Te(ee,Ye))&&(fe=!1,ee=Ye,_e.next(Ae))}))})}function de(Te,be){return Te===be}},9300:(ke,ye,S)=>{S.d(ye,{h:()=>G});var p=S(4482),M=S(5403);function G(Ee,de){return(0,p.e)((Te,be)=>{let ce=0;Te.subscribe((0,M.x)(be,_e=>Ee.call(de,_e,ce++)&&be.next(_e)))})}},590:(ke,ye,S)=>{S.d(ye,{P:()=>be});var p=S(6805),M=S(9300),G=S(5698),Ee=S(6590),de=S(8068),Te=S(4671);function be(ce,_e){const ee=arguments.length>=2;return fe=>fe.pipe(ce?(0,M.h)((Ae,Ye)=>ce(Ae,Ye,fe)):Te.y,(0,G.q)(1),ee?(0,Ee.d)(_e):(0,de.T)(()=>new p.K))}},4004:(ke,ye,S)=>{S.d(ye,{U:()=>G});var p=S(4482),M=S(5403);function G(Ee,de){return(0,p.e)((Te,be)=>{let ce=0;Te.subscribe((0,M.x)(be,_e=>{be.next(Ee.call(de,_e,ce++))}))})}},8189:(ke,ye,S)=>{S.d(ye,{J:()=>G});var p=S(5577),M=S(4671);function G(Ee=1/0){return(0,p.z)(M.y,Ee)}},5577:(ke,ye,S)=>{S.d(ye,{z:()=>ce});var p=S(4004),M=S(8421),G=S(4482),Ee=S(9672),de=S(5403),be=S(576);function ce(_e,ee,fe=1/0){return(0,be.m)(ee)?ce((Ae,Ye)=>(0,p.U)((Je,ot)=>ee(Ae,Je,Ye,ot))((0,M.Xf)(_e(Ae,Ye))),fe):("number"==typeof ee&&(fe=ee),(0,G.e)((Ae,Ye)=>function Te(_e,ee,fe,Ae,Ye,Je,ot,bt){const at=[];let tt=0,xe=0,wt=!1;const Qe=()=>{wt&&!at.length&&!tt&&ee.complete()},Ge=At=>tt<Ae?ut(At):at.push(At),ut=At=>{Je&&ee.next(At),tt++;let je=!1;(0,M.Xf)(fe(At,xe++)).subscribe((0,de.x)(ee,it=>{null==Ye||Ye(it),Je?Ge(it):ee.next(it)},()=>{je=!0},void 0,()=>{if(je)try{for(tt--;at.length&&tt<Ae;){const it=at.shift();ot?(0,Ee.f)(ee,ot,()=>ut(it)):ut(it)}Qe()}catch(it){ee.error(it)}}))};return _e.subscribe((0,de.x)(ee,Ge,()=>{wt=!0,Qe()})),()=>{null==bt||bt()}}(Ae,Ye,_e,fe)))}},5363:(ke,ye,S)=>{S.d(ye,{Q:()=>Ee});var p=S(9672),M=S(4482),G=S(5403);function Ee(de,Te=0){return(0,M.e)((be,ce)=>{be.subscribe((0,G.x)(ce,_e=>(0,p.f)(ce,de,()=>ce.next(_e),Te),()=>(0,p.f)(ce,de,()=>ce.complete(),Te),_e=>(0,p.f)(ce,de,()=>ce.error(_e),Te)))})}},5026:(ke,ye,S)=>{S.d(ye,{R:()=>Ee});var p=S(4482),M=S(5403);function G(de,Te,be,ce,_e){return(ee,fe)=>{let Ae=be,Ye=Te,Je=0;ee.subscribe((0,M.x)(fe,ot=>{const bt=Je++;Ye=Ae?de(Ye,ot,bt):(Ae=!0,ot),ce&&fe.next(Ye)},_e&&(()=>{Ae&&fe.next(Ye),fe.complete()})))}}function Ee(de,Te){return(0,p.e)(G(de,Te,arguments.length>=2,!0))}},3099:(ke,ye,S)=>{S.d(ye,{B:()=>Te});var p=S(8996),M=S(5698),G=S(7579),Ee=S(930),de=S(4482);function Te(ce={}){const{connector:_e=(()=>new G.x),resetOnError:ee=!0,resetOnComplete:fe=!0,resetOnRefCountZero:Ae=!0}=ce;return Ye=>{let Je=null,ot=null,bt=null,at=0,tt=!1,xe=!1;const wt=()=>{null==ot||ot.unsubscribe(),ot=null},Qe=()=>{wt(),Je=bt=null,tt=xe=!1},Ge=()=>{const ut=Je;Qe(),null==ut||ut.unsubscribe()};return(0,de.e)((ut,At)=>{at++,!xe&&!tt&&wt();const je=bt=null!=bt?bt:_e();At.add(()=>{at--,0===at&&!xe&&!tt&&(ot=be(Ge,Ae))}),je.subscribe(At),Je||(Je=new Ee.Hp({next:it=>je.next(it),error:it=>{xe=!0,wt(),ot=be(Qe,ee,it),je.error(it)},complete:()=>{tt=!0,wt(),ot=be(Qe,fe),je.complete()}}),(0,p.D)(ut).subscribe(Je))})(Ye)}}function be(ce,_e,...ee){return!0===_e?(ce(),null):!1===_e?null:_e(...ee).pipe((0,M.q)(1)).subscribe(()=>ce())}},5684:(ke,ye,S)=>{S.d(ye,{T:()=>M});var p=S(9300);function M(G){return(0,p.h)((Ee,de)=>G<=de)}},8675:(ke,ye,S)=>{S.d(ye,{O:()=>Ee});var p=S(7272),M=S(7669),G=S(4482);function Ee(...de){const Te=(0,M.yG)(de);return(0,G.e)((be,ce)=>{(Te?(0,p.z)(de,be,Te):(0,p.z)(de,be)).subscribe(ce)})}},9468:(ke,ye,S)=>{S.d(ye,{R:()=>M});var p=S(4482);function M(G,Ee=0){return(0,p.e)((de,Te)=>{Te.add(G.schedule(()=>de.subscribe(Te),Ee))})}},3900:(ke,ye,S)=>{S.d(ye,{w:()=>Ee});var p=S(8421),M=S(4482),G=S(5403);function Ee(de,Te){return(0,M.e)((be,ce)=>{let _e=null,ee=0,fe=!1;const Ae=()=>fe&&!_e&&ce.complete();be.subscribe((0,G.x)(ce,Ye=>{null==_e||_e.unsubscribe();let Je=0;const ot=ee++;(0,p.Xf)(de(Ye,ot)).subscribe(_e=(0,G.x)(ce,bt=>ce.next(Te?Te(Ye,bt,ot,Je++):bt),()=>{_e=null,Ae()}))},()=>{fe=!0,Ae()}))})}},5698:(ke,ye,S)=>{S.d(ye,{q:()=>Ee});var p=S(515),M=S(4482),G=S(5403);function Ee(de){return de<=0?()=>p.E:(0,M.e)((Te,be)=>{let ce=0;Te.subscribe((0,G.x)(be,_e=>{++ce<=de&&(be.next(_e),de<=ce&&be.complete())}))})}},2722:(ke,ye,S)=>{S.d(ye,{R:()=>de});var p=S(4482),M=S(5403),G=S(8421),Ee=S(5032);function de(Te){return(0,p.e)((be,ce)=>{(0,G.Xf)(Te).subscribe((0,M.x)(ce,()=>ce.complete(),Ee.Z)),!ce.closed&&be.subscribe(ce)})}},8505:(ke,ye,S)=>{S.d(ye,{b:()=>de});var p=S(576),M=S(4482),G=S(5403),Ee=S(4671);function de(Te,be,ce){const _e=(0,p.m)(Te)||be||ce?{next:Te,error:be,complete:ce}:Te;return _e?(0,M.e)((ee,fe)=>{var Ae;null===(Ae=_e.subscribe)||void 0===Ae||Ae.call(_e);let Ye=!0;ee.subscribe((0,G.x)(fe,Je=>{var ot;null===(ot=_e.next)||void 0===ot||ot.call(_e,Je),fe.next(Je)},()=>{var Je;Ye=!1,null===(Je=_e.complete)||void 0===Je||Je.call(_e),fe.complete()},Je=>{var ot;Ye=!1,null===(ot=_e.error)||void 0===ot||ot.call(_e,Je),fe.error(Je)},()=>{var Je,ot;Ye&&(null===(Je=_e.unsubscribe)||void 0===Je||Je.call(_e)),null===(ot=_e.finalize)||void 0===ot||ot.call(_e)}))}):Ee.y}},8068:(ke,ye,S)=>{S.d(ye,{T:()=>Ee});var p=S(6805),M=S(4482),G=S(5403);function Ee(Te=de){return(0,M.e)((be,ce)=>{let _e=!1;be.subscribe((0,G.x)(ce,ee=>{_e=!0,ce.next(ee)},()=>_e?ce.complete():ce.error(Te())))})}function de(){return new p.K}},1749:(ke,ye,S)=>{S.d(ye,{V:()=>_e});var p=S(4986),G=S(4482),Ee=S(8421),de=S(3888),Te=S(5403),be=S(9672);const ce=(0,de.d)(fe=>function(Ye=null){fe(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=Ye});function _e(fe,Ae){const{first:Ye,each:Je,with:ot=ee,scheduler:bt=(null!=Ae?Ae:p.z),meta:at=null}=function M(fe){return fe instanceof Date&&!isNaN(fe)}(fe)?{first:fe}:"number"==typeof fe?{each:fe}:fe;if(null==Ye&&null==Je)throw new TypeError("No timeout provided.");return(0,G.e)((tt,xe)=>{let wt,Qe,Ge=null,ut=0;const At=je=>{Qe=(0,be.f)(xe,bt,()=>{try{wt.unsubscribe(),(0,Ee.Xf)(ot({meta:at,lastValue:Ge,seen:ut})).subscribe(xe)}catch(it){xe.error(it)}},je)};wt=tt.subscribe((0,Te.x)(xe,je=>{null==Qe||Qe.unsubscribe(),ut++,xe.next(Ge=je),Je>0&&At(Je)},void 0,void 0,()=>{(null==Qe?void 0:Qe.closed)||null==Qe||Qe.unsubscribe(),Ge=null})),!ut&&At(null!=Ye?"number"==typeof Ye?Ye:+Ye-bt.now():Je)})}function ee(fe){throw new ce(fe)}},1365:(ke,ye,S)=>{S.d(ye,{M:()=>be});var p=S(4482),M=S(5403),G=S(8421),Ee=S(4671),de=S(5032),Te=S(7669);function be(...ce){const _e=(0,Te.jO)(ce);return(0,p.e)((ee,fe)=>{const Ae=ce.length,Ye=new Array(Ae);let Je=ce.map(()=>!1),ot=!1;for(let bt=0;bt<Ae;bt++)(0,G.Xf)(ce[bt]).subscribe((0,M.x)(fe,at=>{Ye[bt]=at,!ot&&!Je[bt]&&(Je[bt]=!0,(ot=Je.every(Ee.y))&&(Je=null))},de.Z));ee.subscribe((0,M.x)(fe,bt=>{if(ot){const at=[bt,...Ye];fe.next(_e?_e(...at):at)}}))})}},4408:(ke,ye,S)=>{S.d(ye,{o:()=>de});var p=S(727);class M extends p.w0{constructor(be,ce){super()}schedule(be,ce=0){return this}}const G={setInterval(Te,be,...ce){const{delegate:_e}=G;return(null==_e?void 0:_e.setInterval)?_e.setInterval(Te,be,...ce):setInterval(Te,be,...ce)},clearInterval(Te){const{delegate:be}=G;return((null==be?void 0:be.clearInterval)||clearInterval)(Te)},delegate:void 0};var Ee=S(8737);class de extends M{constructor(be,ce){super(be,ce),this.scheduler=be,this.work=ce,this.pending=!1}schedule(be,ce=0){if(this.closed)return this;this.state=be;const _e=this.id,ee=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(ee,_e,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(ee,this.id,ce),this}requestAsyncId(be,ce,_e=0){return G.setInterval(be.flush.bind(be,this),_e)}recycleAsyncId(be,ce,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ce;G.clearInterval(ce)}execute(be,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(be,ce);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(be,ce){let ee,_e=!1;try{this.work(be)}catch(fe){_e=!0,ee=fe||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),ee}unsubscribe(){if(!this.closed){const{id:be,scheduler:ce}=this,{actions:_e}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ee.P)(_e,this),null!=be&&(this.id=this.recycleAsyncId(ce,be,null)),this.delay=null,super.unsubscribe()}}}},7565:(ke,ye,S)=>{S.d(ye,{v:()=>G});var p=S(6063);class M{constructor(de,Te=M.now){this.schedulerActionCtor=de,this.now=Te}schedule(de,Te=0,be){return new this.schedulerActionCtor(this,de).schedule(be,Te)}}M.now=p.l.now;class G extends M{constructor(de,Te=M.now){super(de,Te),this.actions=[],this._active=!1,this._scheduled=void 0}flush(de){const{actions:Te}=this;if(this._active)return void Te.push(de);let be;this._active=!0;do{if(be=de.execute(de.state,de.delay))break}while(de=Te.shift());if(this._active=!1,be){for(;de=Te.shift();)de.unsubscribe();throw be}}}},4986:(ke,ye,S)=>{S.d(ye,{z:()=>G});var p=S(4408);const G=new(S(7565).v)(p.o)},6063:(ke,ye,S)=>{S.d(ye,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},233:(ke,ye,S)=>{S.d(ye,{N:()=>de});var p=S(4408),G=S(7565);const de=new class Ee extends G.v{}(class M extends p.o{constructor(ce,_e){super(ce,_e),this.scheduler=ce,this.work=_e}schedule(ce,_e=0){return _e>0?super.schedule(ce,_e):(this.delay=_e,this.state=ce,this.scheduler.flush(this),this)}execute(ce,_e){return _e>0||this.closed?super.execute(ce,_e):this._execute(ce,_e)}requestAsyncId(ce,_e,ee=0){return null!=ee&&ee>0||null==ee&&this.delay>0?super.requestAsyncId(ce,_e,ee):ce.flush(this)}})},3410:(ke,ye,S)=>{S.d(ye,{z:()=>p});const p={setTimeout(M,G,...Ee){const{delegate:de}=p;return(null==de?void 0:de.setTimeout)?de.setTimeout(M,G,...Ee):setTimeout(M,G,...Ee)},clearTimeout(M){const{delegate:G}=p;return((null==G?void 0:G.clearTimeout)||clearTimeout)(M)},delegate:void 0}},2202:(ke,ye,S)=>{S.d(ye,{h:()=>M});const M=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ke,ye,S)=>{S.d(ye,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(ke,ye,S)=>{S.d(ye,{K:()=>M});const M=(0,S(3888).d)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(ke,ye,S)=>{S.d(ye,{_6:()=>Te,jO:()=>Ee,yG:()=>de});var p=S(576);function G(be){return be[be.length-1]}function Ee(be){return(0,p.m)(G(be))?be.pop():void 0}function de(be){return function M(be){return be&&(0,p.m)(be.schedule)}(G(be))?be.pop():void 0}function Te(be,ce){return"number"==typeof G(be)?be.pop():ce}},4742:(ke,ye,S)=>{S.d(ye,{D:()=>de});const{isArray:p}=Array,{getPrototypeOf:M,prototype:G,keys:Ee}=Object;function de(be){if(1===be.length){const ce=be[0];if(p(ce))return{args:ce,keys:null};if(function Te(be){return be&&"object"==typeof be&&M(be)===G}(ce)){const _e=Ee(ce);return{args:_e.map(ee=>ce[ee]),keys:_e}}}return{args:be,keys:null}}},8737:(ke,ye,S)=>{function p(M,G){if(M){const Ee=M.indexOf(G);0<=Ee&&M.splice(Ee,1)}}S.d(ye,{P:()=>p})},3888:(ke,ye,S)=>{function p(M){const Ee=M(de=>{Error.call(de),de.stack=(new Error).stack});return Ee.prototype=Object.create(Error.prototype),Ee.prototype.constructor=Ee,Ee}S.d(ye,{d:()=>p})},1810:(ke,ye,S)=>{function p(M,G){return M.reduce((Ee,de,Te)=>(Ee[de]=G[Te],Ee),{})}S.d(ye,{n:()=>p})},2806:(ke,ye,S)=>{S.d(ye,{O:()=>Ee,x:()=>G});var p=S(2416);let M=null;function G(de){if(p.v.useDeprecatedSynchronousErrorHandling){const Te=!M;if(Te&&(M={errorThrown:!1,error:null}),de(),Te){const{errorThrown:be,error:ce}=M;if(M=null,be)throw ce}}else de()}function Ee(de){p.v.useDeprecatedSynchronousErrorHandling&&M&&(M.errorThrown=!0,M.error=de)}},9672:(ke,ye,S)=>{function p(M,G,Ee,de=0,Te=!1){const be=G.schedule(function(){Ee(),Te?M.add(this.schedule(null,de)):this.unsubscribe()},de);if(M.add(be),!Te)return be}S.d(ye,{f:()=>p})},4671:(ke,ye,S)=>{function p(M){return M}S.d(ye,{y:()=>p})},1144:(ke,ye,S)=>{S.d(ye,{z:()=>p});const p=M=>M&&"number"==typeof M.length&&"function"!=typeof M},2206:(ke,ye,S)=>{S.d(ye,{D:()=>M});var p=S(576);function M(G){return Symbol.asyncIterator&&(0,p.m)(null==G?void 0:G[Symbol.asyncIterator])}},576:(ke,ye,S)=>{function p(M){return"function"==typeof M}S.d(ye,{m:()=>p})},3670:(ke,ye,S)=>{S.d(ye,{c:()=>G});var p=S(8822),M=S(576);function G(Ee){return(0,M.m)(Ee[p.L])}},6495:(ke,ye,S)=>{S.d(ye,{T:()=>G});var p=S(2202),M=S(576);function G(Ee){return(0,M.m)(null==Ee?void 0:Ee[p.h])}},8239:(ke,ye,S)=>{S.d(ye,{t:()=>M});var p=S(576);function M(G){return(0,p.m)(null==G?void 0:G.then)}},3260:(ke,ye,S)=>{S.d(ye,{L:()=>Ee,Q:()=>G});var p=S(655),M=S(576);function G(de){return(0,p.FC)(this,arguments,function*(){const be=de.getReader();try{for(;;){const{value:ce,done:_e}=yield(0,p.qq)(be.read());if(_e)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ce)}}finally{be.releaseLock()}})}function Ee(de){return(0,M.m)(null==de?void 0:de.getReader)}},4482:(ke,ye,S)=>{S.d(ye,{A:()=>M,e:()=>G});var p=S(576);function M(Ee){return(0,p.m)(null==Ee?void 0:Ee.lift)}function G(Ee){return de=>{if(M(de))return de.lift(function(Te){try{return Ee(Te,this)}catch(be){this.error(be)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(ke,ye,S)=>{S.d(ye,{Z:()=>Ee});var p=S(4004);const{isArray:M}=Array;function Ee(de){return(0,p.U)(Te=>function G(de,Te){return M(Te)?de(...Te):de(Te)}(de,Te))}},5032:(ke,ye,S)=>{function p(){}S.d(ye,{Z:()=>p})},7849:(ke,ye,S)=>{S.d(ye,{h:()=>G});var p=S(2416),M=S(3410);function G(Ee){M.z.setTimeout(()=>{const{onUnhandledError:de}=p.v;if(!de)throw Ee;de(Ee)})}},4532:(ke,ye,S)=>{function p(M){return new TypeError(`You provided ${null!==M&&"object"==typeof M?"an invalid object":`'${M}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}S.d(ye,{z:()=>p})},655:(ke,ye,S)=>{function Ee(Fe,ze){var et={};for(var dt in Fe)Object.prototype.hasOwnProperty.call(Fe,dt)&&ze.indexOf(dt)<0&&(et[dt]=Fe[dt]);if(null!=Fe&&"function"==typeof Object.getOwnPropertySymbols){var Ke=0;for(dt=Object.getOwnPropertySymbols(Fe);Ke<dt.length;Ke++)ze.indexOf(dt[Ke])<0&&Object.prototype.propertyIsEnumerable.call(Fe,dt[Ke])&&(et[dt[Ke]]=Fe[dt[Ke]])}return et}function ce(Fe,ze,et,dt){return new(et||(et=Promise))(function(_t,St){function nn(en){try{Ot(dt.next(en))}catch(Cn){St(Cn)}}function rn(en){try{Ot(dt.throw(en))}catch(Cn){St(Cn)}}function Ot(en){en.done?_t(en.value):function Ke(_t){return _t instanceof et?_t:new et(function(St){St(_t)})}(en.value).then(nn,rn)}Ot((dt=dt.apply(Fe,ze||[])).next())})}function at(Fe){return this instanceof at?(this.v=Fe,this):new at(Fe)}function tt(Fe,ze,et){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,dt=et.apply(Fe,ze||[]),_t=[];return Ke={},St("next"),St("throw"),St("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke;function St(En){dt[En]&&(Ke[En]=function(on){return new Promise(function(sn,Jt){_t.push([En,on,sn,Jt])>1||nn(En,on)})})}function nn(En,on){try{!function rn(En){En.value instanceof at?Promise.resolve(En.value.v).then(Ot,en):Cn(_t[0][2],En)}(dt[En](on))}catch(sn){Cn(_t[0][3],sn)}}function Ot(En){nn("next",En)}function en(En){nn("throw",En)}function Cn(En,on){En(on),_t.shift(),_t.length&&nn(_t[0][0],_t[0][1])}}function wt(Fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var et,ze=Fe[Symbol.asyncIterator];return ze?ze.call(Fe):(Fe=function Ae(Fe){var ze="function"==typeof Symbol&&Symbol.iterator,et=ze&&Fe[ze],dt=0;if(et)return et.call(Fe);if(Fe&&"number"==typeof Fe.length)return{next:function(){return Fe&&dt>=Fe.length&&(Fe=void 0),{value:Fe&&Fe[dt++],done:!Fe}}};throw new TypeError(ze?"Object is not iterable.":"Symbol.iterator is not defined.")}(Fe),et={},dt("next"),dt("throw"),dt("return"),et[Symbol.asyncIterator]=function(){return this},et);function dt(_t){et[_t]=Fe[_t]&&function(St){return new Promise(function(nn,rn){!function Ke(_t,St,nn,rn){Promise.resolve(rn).then(function(Ot){_t({value:Ot,done:nn})},St)}(nn,rn,(St=Fe[_t](St)).done,St.value)})}}}S.d(ye,{FC:()=>tt,KL:()=>wt,_T:()=>Ee,mG:()=>ce,qq:()=>at})},9808:(ke,ye,S)=>{S.d(ye,{Do:()=>Qe,EM:()=>Co,HT:()=>de,JF:()=>mr,K0:()=>be,Mx:()=>ti,O5:()=>le,PM:()=>ui,S$:()=>at,V_:()=>ee,Ye:()=>Ge,b0:()=>wt,bD:()=>ms,ez:()=>gs,lw:()=>ce,mr:()=>xe,q:()=>G,w_:()=>Te});var p=S(5e3);let M=null;function G(){return M}function de(V){M||(M=V)}class Te{}const be=new p.OlP("DocumentToken");let ce=(()=>{class V{historyGo(U){throw new Error("Not implemented")}}return V.\u0275fac=function(U){return new(U||V)},V.\u0275prov=p.Yz7({token:V,factory:function(){return function _e(){return(0,p.LFG)(fe)}()},providedIn:"platform"}),V})();const ee=new p.OlP("Location Initialized");let fe=(()=>{class V extends ce{constructor(U){super(),this._doc=U,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(U){const se=G().getGlobalEventTarget(this._doc,"window");return se.addEventListener("popstate",U,!1),()=>se.removeEventListener("popstate",U)}onHashChange(U){const se=G().getGlobalEventTarget(this._doc,"window");return se.addEventListener("hashchange",U,!1),()=>se.removeEventListener("hashchange",U)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(U){this.location.pathname=U}pushState(U,se,Ne){Ae()?this._history.pushState(U,se,Ne):this.location.hash=Ne}replaceState(U,se,Ne){Ae()?this._history.replaceState(U,se,Ne):this.location.hash=Ne}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return V.\u0275fac=function(U){return new(U||V)(p.LFG(be))},V.\u0275prov=p.Yz7({token:V,factory:function(){return function Ye(){return new fe((0,p.LFG)(be))}()},providedIn:"platform"}),V})();function Ae(){return!!window.history.pushState}function Je(V,J){if(0==V.length)return J;if(0==J.length)return V;let U=0;return V.endsWith("/")&&U++,J.startsWith("/")&&U++,2==U?V+J.substring(1):1==U?V+J:V+"/"+J}function ot(V){const J=V.match(/#|\?|$/),U=J&&J.index||V.length;return V.slice(0,U-("/"===V[U-1]?1:0))+V.slice(U)}function bt(V){return V&&"?"!==V[0]?"?"+V:V}let at=(()=>{class V{historyGo(U){throw new Error("Not implemented")}}return V.\u0275fac=function(U){return new(U||V)},V.\u0275prov=p.Yz7({token:V,factory:function(){return function tt(V){const J=(0,p.LFG)(be).location;return new wt((0,p.LFG)(ce),J&&J.origin||"")}()},providedIn:"root"}),V})();const xe=new p.OlP("appBaseHref");let wt=(()=>{class V extends at{constructor(U,se){if(super(),this._platformLocation=U,this._removeListenerFns=[],null==se&&(se=this._platformLocation.getBaseHrefFromDOM()),null==se)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=se}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return Je(this._baseHref,U)}path(U=!1){const se=this._platformLocation.pathname+bt(this._platformLocation.search),Ne=this._platformLocation.hash;return Ne&&U?`${se}${Ne}`:se}pushState(U,se,Ne,yt){const Mt=this.prepareExternalUrl(Ne+bt(yt));this._platformLocation.pushState(U,se,Mt)}replaceState(U,se,Ne,yt){const Mt=this.prepareExternalUrl(Ne+bt(yt));this._platformLocation.replaceState(U,se,Mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(U=0){var se,Ne;null===(Ne=(se=this._platformLocation).historyGo)||void 0===Ne||Ne.call(se,U)}}return V.\u0275fac=function(U){return new(U||V)(p.LFG(ce),p.LFG(xe,8))},V.\u0275prov=p.Yz7({token:V,factory:V.\u0275fac}),V})(),Qe=(()=>{class V extends at{constructor(U,se){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=se&&(this._baseHref=se)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let se=this._platformLocation.hash;return null==se&&(se="#"),se.length>0?se.substring(1):se}prepareExternalUrl(U){const se=Je(this._baseHref,U);return se.length>0?"#"+se:se}pushState(U,se,Ne,yt){let Mt=this.prepareExternalUrl(Ne+bt(yt));0==Mt.length&&(Mt=this._platformLocation.pathname),this._platformLocation.pushState(U,se,Mt)}replaceState(U,se,Ne,yt){let Mt=this.prepareExternalUrl(Ne+bt(yt));0==Mt.length&&(Mt=this._platformLocation.pathname),this._platformLocation.replaceState(U,se,Mt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(U=0){var se,Ne;null===(Ne=(se=this._platformLocation).historyGo)||void 0===Ne||Ne.call(se,U)}}return V.\u0275fac=function(U){return new(U||V)(p.LFG(ce),p.LFG(xe,8))},V.\u0275prov=p.Yz7({token:V,factory:V.\u0275fac}),V})(),Ge=(()=>{class V{constructor(U,se){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=U;const Ne=this._platformStrategy.getBaseHref();this._platformLocation=se,this._baseHref=ot(je(Ne)),this._platformStrategy.onPopState(yt=>{this._subject.emit({url:this.path(!0),pop:!0,state:yt.state,type:yt.type})})}path(U=!1){return this.normalize(this._platformStrategy.path(U))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(U,se=""){return this.path()==this.normalize(U+bt(se))}normalize(U){return V.stripTrailingSlash(function At(V,J){return V&&J.startsWith(V)?J.substring(V.length):J}(this._baseHref,je(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._platformStrategy.prepareExternalUrl(U)}go(U,se="",Ne=null){this._platformStrategy.pushState(Ne,"",U,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+bt(se)),Ne)}replaceState(U,se="",Ne=null){this._platformStrategy.replaceState(Ne,"",U,se),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+bt(se)),Ne)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(U=0){var se,Ne;null===(Ne=(se=this._platformStrategy).historyGo)||void 0===Ne||Ne.call(se,U)}onUrlChange(U){this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(se=>{this._notifyUrlChangeListeners(se.url,se.state)}))}_notifyUrlChangeListeners(U="",se){this._urlChangeListeners.forEach(Ne=>Ne(U,se))}subscribe(U,se,Ne){return this._subject.subscribe({next:U,error:se,complete:Ne})}}return V.normalizeQueryParams=bt,V.joinWithSlash=Je,V.stripTrailingSlash=ot,V.\u0275fac=function(U){return new(U||V)(p.LFG(at),p.LFG(ce))},V.\u0275prov=p.Yz7({token:V,factory:function(){return function ut(){return new Ge((0,p.LFG)(at),(0,p.LFG)(ce))}()},providedIn:"root"}),V})();function je(V){return V.replace(/\/index.html$/,"")}function ti(V,J){J=encodeURIComponent(J);for(const U of V.split(";")){const se=U.indexOf("="),[Ne,yt]=-1==se?[U,""]:[U.slice(0,se),U.slice(se+1)];if(Ne.trim()===J)return decodeURIComponent(yt)}return null}let le=(()=>{class V{constructor(U,se){this._viewContainer=U,this._context=new Q,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=se}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){me("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){me("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,se){return!0}}return V.\u0275fac=function(U){return new(U||V)(p.Y36(p.s_b),p.Y36(p.Rgc))},V.\u0275dir=p.lG2({type:V,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),V})();class Q{constructor(){this.$implicit=null,this.ngIf=null}}function me(V,J){if(J&&!J.createEmbeddedView)throw new Error(`${V} must be a TemplateRef, but received '${(0,p.AaK)(J)}'.`)}let gs=(()=>{class V{}return V.\u0275fac=function(U){return new(U||V)},V.\u0275mod=p.oAB({type:V}),V.\u0275inj=p.cJS({}),V})();const ms="browser";function ui(V){return"server"===V}let Co=(()=>{class V{}return V.\u0275prov=(0,p.Yz7)({token:V,providedIn:"root",factory:()=>new Do((0,p.LFG)(be),window)}),V})();class Do{constructor(J,U){this.document=J,this.window=U,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const U=function ys(V,J){const U=V.getElementById(J)||V.getElementsByName(J)[0];if(U)return U;if("function"==typeof V.createTreeWalker&&V.body&&(V.body.createShadowRoot||V.body.attachShadow)){const se=V.createTreeWalker(V.body,NodeFilter.SHOW_ELEMENT);let Ne=se.currentNode;for(;Ne;){const yt=Ne.shadowRoot;if(yt){const Mt=yt.getElementById(J)||yt.querySelector(`[name="${J}"]`);if(Mt)return Mt}Ne=se.nextNode()}}return null}(this.document,J);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(J){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=J)}}scrollToElement(J){const U=J.getBoundingClientRect(),se=U.left+this.window.pageXOffset,Ne=U.top+this.window.pageYOffset,yt=this.offset();this.window.scrollTo(se-yt[0],Ne-yt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const J=_s(this.window.history)||_s(Object.getPrototypeOf(this.window.history));return!(!J||!J.writable&&!J.set)}catch(J){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(J){return!1}}}function _s(V){return Object.getOwnPropertyDescriptor(V,"scrollRestoration")}class mr{}},5e3:(ke,ye,S)=>{S.d(ye,{$8M:()=>qs,$Z:()=>ju,AFp:()=>K0,AaK:()=>ce,CHM:()=>Kr,CRH:()=>T0,CZH:()=>dv,CqO:()=>df,EJc:()=>EI,EpF:()=>lm,F4k:()=>cm,FYo:()=>s0,FiY:()=>yo,G48:()=>WI,GfV:()=>o0,Gpc:()=>fe,JOm:()=>Su,LFG:()=>Yn,LSH:()=>Df,Lbi:()=>_I,MAs:()=>ef,NdJ:()=>uh,O4$:()=>Rn,OlP:()=>Xr,Oqu:()=>Hp,PXZ:()=>kI,Q6J:()=>af,QGY:()=>cf,Qsj:()=>cw,R0b:()=>Oc,RDi:()=>_s,Rgc:()=>K_,SBq:()=>W_,Sil:()=>II,Suo:()=>b0,TTD:()=>ls,TgZ:()=>Ko,VLi:()=>OI,X6Q:()=>$I,XFs:()=>Ut,Xpm:()=>gt,Y36:()=>hu,YKP:()=>c0,YNc:()=>tm,Yjl:()=>re,Yz7:()=>on,ZZ4:()=>bv,_Bn:()=>t0,_UZ:()=>Np,_Vd:()=>Ay,_c5:()=>sC,_uU:()=>Wp,aQg:()=>Tv,c2e:()=>yI,cJS:()=>Jt,cg1:()=>V_,dDg:()=>X0,deG:()=>Kl,dqk:()=>Bn,eFA:()=>nE,ekj:()=>yd,g9A:()=>Z0,h0i:()=>Sm,hGG:()=>oC,hij:()=>Ef,iGM:()=>D0,ifc:()=>Vt,ip1:()=>z0,kL8:()=>Dy,kcU:()=>_u,lG2:()=>he,n5z:()=>ii,oAB:()=>st,q4F:()=>a0,qLn:()=>kd,qOj:()=>nh,qZA:()=>Sc,sBO:()=>HI,sIi:()=>hd,s_b:()=>My,soG:()=>fv,tBr:()=>Yu,tb:()=>Y0,tp0:()=>El,uIk:()=>sh,vHH:()=>ot,vpe:()=>Ed,wAp:()=>er,xp6:()=>jf,z2F:()=>vv,zSh:()=>Ug,zs3:()=>Nu});var p=S(7579),M=S(727),G=S(8306),Ee=S(6451),de=S(3099);function Te(t){for(let r in t)if(t[r]===Te)return r;throw Error("Could not find renamed property on target object.")}function be(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function ce(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ce).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function _e(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const ee=Te({__forward_ref__:Te});function fe(t){return t.__forward_ref__=fe,t.toString=function(){return ce(this())},t}function Ae(t){return Ye(t)?t():t}function Ye(t){return"function"==typeof t&&t.hasOwnProperty(ee)&&t.__forward_ref__===fe}class ot extends Error{constructor(r,s){super(function bt(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function at(t){return"string"==typeof t?t:null==t?"":String(t)}function tt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():at(t)}function Ge(t,r){const s=r?` in ${r}`:"";throw new ot(-201,`No provider for ${tt(t)} found${s}`)}function rn(t,r){null==t&&function Ot(t,r,s,c){throw new Error(`ASSERTION ERROR: ${t}`+(null==c?"":` [Expected=> ${s} ${c} ${r} <=Actual]`))}(r,t,null,"!=")}function on(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Jt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Wn(t){return ar(t,ur)||ar(t,qn)}function ar(t,r){return t.hasOwnProperty(r)?t[r]:null}function Cr(t){return t&&(t.hasOwnProperty(Ar)||t.hasOwnProperty(jr))?t[Ar]:null}const ur=Te({\u0275prov:Te}),Ar=Te({\u0275inj:Te}),qn=Te({ngInjectableDef:Te}),jr=Te({ngInjectorDef:Te});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let pr;function pn(t){const r=pr;return pr=t,r}function Dr(t,r,s){const c=Wn(t);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:s&Ut.Optional?null:void 0!==r?r:void Ge(ce(t),"Injector")}function Gr(t){return{toString:t}.toString()}var Tn=(()=>((Tn=Tn||{})[Tn.OnPush=0]="OnPush",Tn[Tn.Default=1]="Default",Tn))(),Vt=(()=>{return(t=Vt||(Vt={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Vt;var t})();const an="undefined"!=typeof globalThis&&globalThis,Wt="undefined"!=typeof window&&window,Or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bn=an||"undefined"!=typeof global&&global||Wt||Or,jn={},Me=[],Pe=Te({\u0275cmp:Te}),Ue=Te({\u0275dir:Te}),Et=Te({\u0275pipe:Te}),ue=Te({\u0275mod:Te}),j=Te({\u0275fac:Te}),oe=Te({__NG_ELEMENT_ID__:Te});let He=0;function gt(t){return Gr(()=>{const s={},c={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Tn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Me,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Vt.Emulated,id:"c",styles:t.styles||Me,_:null,setInput:null,schemas:t.schemas||null,tView:null},h=t.directives,g=t.features,w=t.pipes;return c.id+=He++,c.inputs=te(t.inputs,s),c.outputs=te(t.outputs),g&&g.forEach(T=>T(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(wn):null,c.pipeDefs=w?()=>("function"==typeof w?w():w).map(Gt):null,c})}function wn(t){return Ve(t)||function ht(t){return t[Ue]||null}(t)}function Gt(t){return function Lt(t){return t[Et]||null}(t)}const Mn={};function st(t){return Gr(()=>{const r={type:t.type,bootstrap:t.bootstrap||Me,declarations:t.declarations||Me,imports:t.imports||Me,exports:t.exports||Me,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Mn[t.id]=t.type),r})}function te(t,r){if(null==t)return jn;const s={};for(const c in t)if(t.hasOwnProperty(c)){let h=t[c],g=h;Array.isArray(h)&&(g=h[1],h=h[0]),s[h]=c,r&&(r[h]=g)}return s}const he=gt;function re(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ve(t){return t[Pe]||null}function Yt(t,r){const s=t[ue]||null;if(!s&&!0===r)throw new Error(`Type ${ce(t)} does not have '\u0275mod' property.`);return s}const Q=20;function qe(t){return Array.isArray(t)&&"object"==typeof t[1]}function Rt(t){return Array.isArray(t)&&!0===t[1]}function yn(t){return 0!=(8&t.flags)}function Nn(t){return 2==(2&t.flags)}function gn(t){return 1==(1&t.flags)}function Sn(t){return null!==t.template}function ai(t){return 0!=(512&t[2])}function Ii(t,r){return t.hasOwnProperty(j)?t[j]:null}class Fs{constructor(r,s,c){this.previousValue=r,this.currentValue=s,this.firstChange=c}isFirstChange(){return this.firstChange}}function ls(){return bi}function bi(t){return t.type.prototype.ngOnChanges&&(t.setInput=ps),Hs}function Hs(){const t=ms(this),r=null==t?void 0:t.current;if(r){const s=t.previous;if(s===jn)t.previous=r;else for(let c in r)s[c]=r[c];t.current=null,this.ngOnChanges(r)}}function ps(t,r,s,c){const h=ms(t)||function fr(t,r){return t[gs]=r}(t,{previous:jn,current:null}),g=h.current||(h.current={}),w=h.previous,T=this.declaredInputs[s],O=w[T];g[T]=new Fs(O&&O.currentValue,r,w===jn),t[c]=r}ls.ngInherit=!0;const gs="__ngSimpleChanges__";function ms(t){return t[gs]||null}let Do;function _s(t){Do=t}function mr(t){return!!t.listen}const V={createRenderer:(t,r)=>function ys(){return void 0!==Do?Do:"undefined"!=typeof document?document:void 0}()};function U(t){for(;Array.isArray(t);)t=t[0];return t}function yt(t,r){return U(r[t])}function Mt(t,r){return U(r[t.index])}function In(t,r){return t.data[r]}function Un(t,r){const s=r[t];return qe(s)?s:s[0]}function lr(t){return 4==(4&t[2])}function Lr(t){return 128==(128&t[2])}function Nr(t,r){return null==r?null:t[r]}function vs(t){t[18]=0}function Li(t,r){t[5]+=r;let s=t,c=t[3];for(;null!==c&&(1===r&&1===s[5]||-1===r&&0===s[5]);)c[5]+=r,s=c,c=c[3]}const Dn={lFrame:So(null),bindingsEnabled:!0};function F(){return Dn.bindingsEnabled}function Se(){return Dn.lFrame.lView}function kt(){return Dn.lFrame.tView}function Kr(t){return Dn.lFrame.contextLView=t,t[8]}function yr(){let t=Es();for(;null!==t&&64===t.type;)t=t.parent;return t}function Es(){return Dn.lFrame.currentTNode}function Ui(t,r){const s=Dn.lFrame;s.currentTNode=t,s.isParent=r}function Us(){return Dn.lFrame.isParent}function ho(){return Dn.lFrame.bindingIndex++}function Wi(t,r){const s=Dn.lFrame;s.bindingIndex=s.bindingRootIndex=t,Ha(r)}function Ha(t){Dn.lFrame.currentDirectiveIndex=t}function Ga(){return Dn.lFrame.currentQueryIndex}function za(t){Dn.lFrame.currentQueryIndex=t}function Da(t){const r=t[1];return 2===r.type?r.declTNode:1===r.type?t[6]:null}function jo(t,r,s){if(s&Ut.SkipSelf){let h=r,g=t;for(;!(h=h.parent,null!==h||s&Ut.Host||(h=Da(g),null===h||(g=g[15],10&h.type))););if(null===h)return!1;r=h,t=g}const c=Dn.lFrame=Ao();return c.currentTNode=r,c.lView=t,!0}function Rs(t){const r=Ao(),s=t[1];Dn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Ao(){const t=Dn.lFrame,r=null===t?null:t.child;return null===r?So(t):r}function So(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Gu(){const t=Dn.lFrame;return Dn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const gu=Gu;function Ms(){const t=Gu();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ws(){return Dn.lFrame.selectedIndex}function Jo(t){Dn.lFrame.selectedIndex=t}function qr(){const t=Dn.lFrame;return In(t.tView,t.selectedIndex)}function Rn(){Dn.lFrame.currentNamespace="svg"}function _u(){!function $o(){Dn.lFrame.currentNamespace=null}()}function pi(t,r){for(let s=r.directiveStart,c=r.directiveEnd;s<c;s++){const g=t.data[s].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:T,ngAfterViewInit:O,ngAfterViewChecked:z,ngOnDestroy:X}=g;w&&(t.contentHooks||(t.contentHooks=[])).push(-s,w),T&&((t.contentHooks||(t.contentHooks=[])).push(s,T),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,T)),O&&(t.viewHooks||(t.viewHooks=[])).push(-s,O),z&&((t.viewHooks||(t.viewHooks=[])).push(s,z),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,z)),null!=X&&(t.destroyHooks||(t.destroyHooks=[])).push(s,X)}}function Aa(t,r,s){Ka(t,r,3,s)}function Hi(t,r,s,c){(3&t[2])===s&&Ka(t,r,s,c)}function kr(t,r){let s=t[2];(3&s)===r&&(s&=2047,s+=1,t[2]=s)}function Ka(t,r,s,c){const g=null!=c?c:-1,w=r.length-1;let T=0;for(let O=void 0!==c?65535&t[18]:0;O<w;O++)if("number"==typeof r[O+1]){if(T=r[O],null!=c&&T>=c)break}else r[O]<0&&(t[18]+=65536),(T<g||-1==g)&&(da(t,s,r,O),t[18]=(4294901760&t[18])+O+2),O++}function da(t,r,s,c){const h=s[c]<0,g=s[c+1],T=t[h?-s[c]:s[c]];if(h){if(t[2]>>11<t[18]>>16&&(3&t[2])===r){t[2]+=2048;try{g.call(T)}finally{}}}else try{g.call(T)}finally{}}class zs{constructor(r,s,c){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=c}}function Zr(t,r,s){const c=mr(t);let h=0;for(;h<s.length;){const g=s[h];if("number"==typeof g){if(0!==g)break;h++;const w=s[h++],T=s[h++],O=s[h++];c?t.setAttribute(r,T,O,w):r.setAttributeNS(w,T,O)}else{const w=g,T=s[++h];Vn(w)?c&&t.setProperty(r,w,T):c?t.setAttribute(r,w,T):r.setAttribute(w,T),h++}}return h}function tn(t){return 3===t||4===t||6===t}function Vn(t){return 64===t.charCodeAt(0)}function Xo(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let c=0;c<r.length;c++){const h=r[c];"number"==typeof h?s=h:0===s||Kt(t,s,h,null,-1===s||2===s?r[++c]:null)}}return t}function Kt(t,r,s,c,h){let g=0,w=t.length;if(-1===r)w=-1;else for(;g<t.length;){const T=t[g++];if("number"==typeof T){if(T===r){w=-1;break}if(T>r){w=g-1;break}}}for(;g<t.length;){const T=t[g];if("number"==typeof T)break;if(T===s){if(null===c)return void(null!==h&&(t[g+1]=h));if(c===t[g+1])return void(t[g+2]=h)}g++,null!==c&&g++,null!==h&&g++}-1!==w&&(t.splice(w,0,r),g=w+1),t.splice(g++,0,s),null!==c&&t.splice(g++,0,c),null!==h&&t.splice(g++,0,h)}function pt(t){return-1!==t}function It(t){return 32767&t}function On(t,r){let s=function _i(t){return t>>16}(t),c=r;for(;s>0;)c=c[15],s--;return c}let qa=!0;function Ks(t){const r=qa;return qa=t,r}let _l=0;function fo(t,r){const s=Sa(t,r);if(-1!==s)return s;const c=r[1];c.firstCreatePass&&(t.injectorIndex=r.length,gi(c.data,t),gi(r,null),gi(c.blueprint,null));const h=R(t,r),g=t.injectorIndex;if(pt(h)){const w=It(h),T=On(h,r),O=T[1].data;for(let z=0;z<8;z++)r[g+z]=T[w+z]|O[w+z]}return r[g+8]=h,g}function gi(t,r){t.push(0,0,0,0,0,0,0,0,r)}function Sa(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function R(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,c=null,h=r;for(;null!==h;){const g=h[1],w=g.type;if(c=2===w?g.declTNode:1===w?h[6]:null,null===c)return-1;if(s++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|s<<16}return-1}function C(t,r,s){!function ea(t,r,s){let c;"string"==typeof s?c=s.charCodeAt(0)||0:s.hasOwnProperty(oe)&&(c=s[oe]),null==c&&(c=s[oe]=_l++);const h=255&c;r.data[t+(h>>5)]|=1<<h}(t,r,s)}function L(t,r,s){if(s&Ut.Optional)return t;Ge(r,"NodeInjector")}function W(t,r,s,c){if(s&Ut.Optional&&void 0===c&&(c=null),0==(s&(Ut.Self|Ut.Host))){const h=t[9],g=pn(void 0);try{return h?h.get(r,c,s&Ut.Optional):Dr(r,c,s&Ut.Optional)}finally{pn(g)}}return L(c,r,s)}function q(t,r,s,c=Ut.Default,h){if(null!==t){const g=function vn(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(oe)?t[oe]:void 0;return"number"==typeof r?r>=0?255&r:Oe:r}(s);if("function"==typeof g){if(!jo(r,t,c))return c&Ut.Host?L(h,s,c):W(r,s,c,h);try{const w=g(c);if(null!=w||c&Ut.Optional)return w;Ge(s)}finally{gu()}}else if("number"==typeof g){let w=null,T=Sa(t,r),O=-1,z=c&Ut.Host?r[16][6]:null;for((-1===T||c&Ut.SkipSelf)&&(O=-1===T?R(t,r):r[T+8],-1!==O&&Ir(c,!1)?(w=r[1],T=It(O),r=On(O,r)):T=-1);-1!==T;){const X=r[1];if(Pn(g,T,X.data)){const we=Tt(T,r,s,w,c,z);if(we!==Ce)return we}O=r[T+8],-1!==O&&Ir(c,r[1].data[T+8]===z)&&Pn(g,T,r)?(w=X,T=It(O),r=On(O,r)):T=-1}}}return W(r,s,c,h)}const Ce={};function Oe(){return new ji(yr(),Se())}function Tt(t,r,s,c,h,g){const w=r[1],T=w.data[t+8],X=Xt(T,w,s,null==c?Nn(T)&&qa:c!=w&&0!=(3&T.type),h&Ut.Host&&g===T);return null!==X?qt(r,w,X,T):Ce}function Xt(t,r,s,c,h){const g=t.providerIndexes,w=r.data,T=1048575&g,O=t.directiveStart,X=g>>20,We=h?T+X:t.directiveEnd;for(let ct=c?T:T+X;ct<We;ct++){const xt=w[ct];if(ct<O&&s===xt||ct>=O&&xt.type===s)return ct}if(h){const ct=w[O];if(ct&&Sn(ct)&&ct.type===s)return O}return null}function qt(t,r,s,c){let h=t[s];const g=r.data;if(function li(t){return t instanceof zs}(h)){const w=h;w.resolving&&function xe(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new ot(-200,`Circular dependency in DI detected for ${t}${s}`)}(tt(g[s]));const T=Ks(w.canSeeViewProviders);w.resolving=!0;const O=w.injectImpl?pn(w.injectImpl):null;jo(t,c,Ut.Default);try{h=t[s]=w.factory(void 0,g,t,c),r.firstCreatePass&&s>=c.directiveStart&&function Ta(t,r,s){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:g}=r.type.prototype;if(c){const w=bi(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,w),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,w)}h&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,h),g&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,g),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,g))}(s,g[s],r)}finally{null!==O&&pn(O),Ks(T),w.resolving=!1,gu()}}return h}function Pn(t,r,s){return!!(s[r+(t>>5)]&1<<t)}function Ir(t,r){return!(t&Ut.Self||t&Ut.Host&&r)}class ji{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,c){return q(this._tNode,this._lView,r,c,s)}}function ii(t){return Gr(()=>{const r=t.prototype.constructor,s=r[j]||Mo(r),c=Object.prototype;let h=Object.getPrototypeOf(t.prototype).constructor;for(;h&&h!==c;){const g=h[j]||Mo(h);if(g&&g!==s)return g;h=Object.getPrototypeOf(h)}return g=>new g})}function Mo(t){return Ye(t)?()=>{const r=Mo(Ae(t));return r&&r()}:Ii(t)}function qs(t){return function I(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const c=s.length;let h=0;for(;h<c;){const g=s[h];if(tn(g))break;if(0===g)h+=2;else if("number"==typeof g)for(h++;h<c&&"string"==typeof s[h];)h++;else{if(g===r)return s[h+1];h+=2}}}return null}(yr(),t)}const Zs="__parameters__";function pa(t,r,s){return Gr(()=>{const c=function Ra(t){return function(...s){if(t){const c=t(...s);for(const h in c)this[h]=c[h]}}}(r);function h(...g){if(this instanceof h)return c.apply(this,g),this;const w=new h(...g);return T.annotation=w,T;function T(O,z,X){const we=O.hasOwnProperty(Zs)?O[Zs]:Object.defineProperty(O,Zs,{value:[]})[Zs];for(;we.length<=X;)we.push(null);return(we[X]=we[X]||[]).push(w),O}}return s&&(h.prototype=Object.create(s.prototype)),h.prototype.ngMetadataName=t,h.annotationCls=h,h})}class Xr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=on({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Kl=new Xr("AnalyzeForEntryComponents");function yi(t,r){void 0===r&&(r=t);for(let s=0;s<t.length;s++){let c=t[s];Array.isArray(c)?(r===t&&(r=t.slice(0,s)),yi(c,r)):r!==t&&r.push(c)}return r}function Gi(t,r){t.forEach(s=>Array.isArray(s)?Gi(s,r):r(s))}function Qs(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function Oo(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Xn(t,r,s){let c=ta(t,r);return c>=0?t[1|c]=s:(c=~c,function wd(t,r,s,c){let h=t.length;if(h==r)t.push(s,c);else if(1===h)t.push(c,t[0]),t[0]=s;else{for(h--,t.push(t[h-1],t[h]);h>r;)t[h]=t[h-2],h--;t[r]=s,t[r+1]=c}}(t,c,r,s)),c}function mo(t,r){const s=ta(t,r);if(s>=0)return t[1|s]}function ta(t,r){return function xr(t,r,s){let c=0,h=t.length>>s;for(;h!==c;){const g=c+(h-c>>1),w=t[g<<s];if(r===w)return g<<s;w>r?h=g:c=g+1}return~(h<<s)}(t,r,1)}const B={},ne="__NG_DI_FLAG__",Re="ngTempTokenPath",ft=/\n/gm,ln="__source",Kn=Te({provide:String,useValue:Te});let kn;function Vr(t){const r=kn;return kn=t,r}function sr(t,r=Ut.Default){if(void 0===kn)throw new ot(203,"");return null===kn?Dr(t,void 0,r):kn.get(t,r&Ut.Optional?null:void 0,r)}function Yn(t,r=Ut.Default){return(function An(){return pr}()||sr)(Ae(t),r)}const vl=Yn;function Ja(t){const r=[];for(let s=0;s<t.length;s++){const c=Ae(t[s]);if(Array.isArray(c)){if(0===c.length)throw new ot(900,"");let h,g=Ut.Default;for(let w=0;w<c.length;w++){const T=c[w],O=_a(T);"number"==typeof O?-1===O?h=T.token:g|=O:h=T}r.push(Yn(h,g))}else r.push(Yn(c))}return r}function na(t,r){return t[ne]=r,t.prototype[ne]=r,t}function _a(t){return t[ne]}const Yu=na(pa("Inject",t=>({token:t})),-1),yo=na(pa("Optional"),8),El=na(pa("SkipSelf"),4);class ec{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ia(t){return t instanceof ec?t.changingThisBreaksApplicationSecurity:t}const Fa=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var zi=(()=>((zi=zi||{})[zi.NONE=0]="NONE",zi[zi.HTML=1]="HTML",zi[zi.STYLE=2]="STYLE",zi[zi.SCRIPT=3]="SCRIPT",zi[zi.URL=4]="URL",zi[zi.RESOURCE_URL=5]="RESOURCE_URL",zi))();function Df(t){const r=function au(){const t=Se();return t&&t[12]}();return r?r.sanitize(zi.URL,t)||"":function tl(t,r){const s=function Sd(t){return t instanceof ec&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(t,"URL")?ia(t):function v(t){return(t=String(t)).match(Fa)||t.match(_)?t:"unsafe:"+t}(at(t))}const Tl="__ngContext__";function eo(t,r){t[Tl]=r}function nc(t){const r=function $c(t){return t[Tl]||null}(t);return r?Array.isArray(r)?r:r.lView:null}function vo(t){return t.ngOriginalError}function Nm(t,...r){t.error(...r)}class kd{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),c=function Tu(t){return t&&t.ngErrorLogger||Nm}(r);c(this._console,"ERROR",r),s&&c(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&vo(r);for(;s&&vo(s);)s=vo(s);return s||null}}const tg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bn))();function Au(t){return t instanceof Function?t():t}var Su=(()=>((Su=Su||{})[Su.Important=1]="Important",Su[Su.DashCase=2]="DashCase",Su))();function Gc(t,r){return undefined(t,r)}function Ud(t){const r=t[3];return Rt(r)?r[3]:r}function Vd(t){return Ct(t[13])}function bh(t){return Ct(t[4])}function Ct(t){for(;null!==t&&!Rt(t);)t=t[4];return t}function to(t,r,s,c,h){if(null!=c){let g,w=!1;Rt(c)?g=c:qe(c)&&(w=!0,c=c[0]);const T=U(c);0===t&&null!==s?null==h?oc(r,s,T):Ho(r,s,T,h||null,!0):1===t&&null!==s?Ho(r,s,T,h||null,!0):2===t?function jm(t,r,s){const c=uc(t,r);c&&function Ff(t,r,s,c){mr(t)?t.removeChild(r,s,c):r.removeChild(s)}(t,c,r,s)}(r,T,w):3===t&&r.destroyNode(T),null!=g&&function dc(t,r,s,c,h){const g=s[7];g!==U(s)&&to(r,t,c,g,h);for(let T=10;T<s.length;T++){const O=s[T];Wd(O[1],O,t,r,c,g)}}(r,t,g,s,h)}}function Ru(t,r,s){if(mr(t))return t.createElement(r,s);{const c=null!==s?function Co(t){const r=t.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===c?t.createElement(r):t.createElementNS(c,r)}}function Bd(t,r){const s=t[9],c=s.indexOf(r),h=r[3];1024&r[2]&&(r[2]&=-1025,Li(h,-1)),s.splice(c,1)}function qc(t,r){if(t.length<=10)return;const s=10+r,c=t[s];if(c){const h=c[17];null!==h&&h!==t&&Bd(h,c),r>0&&(t[s-1][4]=c[4]);const g=Oo(t,10+r);!function ic(t,r){Wd(t,r,r[11],2,null,null),r[0]=null,r[6]=null}(c[1],c);const w=g[19];null!==w&&w.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Mu(t,r){if(!(256&r[2])){const s=r[11];mr(s)&&s.destroyNode&&Wd(t,r,s,3,null,null),function ig(t){let r=t[13];if(!r)return sc(t[1],t);for(;r;){let s=null;if(qe(r))s=r[13];else{const c=r[10];c&&(s=c)}if(!s){for(;r&&!r[4]&&r!==t;)qe(r)&&sc(r[1],r),r=r[3];null===r&&(r=t),qe(r)&&sc(r[1],r),s=r&&r[4]}r=s}}(r)}}function sc(t,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Sh(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let c=0;c<s.length;c+=2){const h=r[s[c]];if(!(h instanceof zs)){const g=s[c+1];if(Array.isArray(g))for(let w=0;w<g.length;w+=2){const T=h[g[w]],O=g[w+1];try{O.call(T)}finally{}}else try{g.call(h)}finally{}}}}(t,r),function kf(t,r){const s=t.cleanup,c=r[7];let h=-1;if(null!==s)for(let g=0;g<s.length-1;g+=2)if("string"==typeof s[g]){const w=s[g+1],T="function"==typeof w?w(r):U(r[w]),O=c[h=s[g+2]],z=s[g+3];"boolean"==typeof z?T.removeEventListener(s[g],O,z):z>=0?c[h=z]():c[h=-z].unsubscribe(),g+=2}else{const w=c[h=s[g+1]];s[g].call(w)}if(null!==c){for(let g=h+1;g<c.length;g++)c[g]();r[7]=null}}(t,r),1===r[1].type&&mr(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&Rt(r[3])){s!==r[3]&&Bd(s,r);const c=r[19];null!==c&&c.detachView(t)}}}function jd(t,r,s){return function Al(t,r,s){let c=r;for(;null!==c&&40&c.type;)c=(r=c).parent;if(null===c)return s[0];if(2&c.flags){const h=t.data[c.directiveStart].encapsulation;if(h===Vt.None||h===Vt.Emulated)return null}return Mt(c,s)}(t,r.parent,s)}function Ho(t,r,s,c,h){mr(t)?t.insertBefore(r,s,c,h):r.insertBefore(s,c,h)}function oc(t,r,s){mr(t)?t.appendChild(r,s):r.appendChild(s)}function ac(t,r,s,c,h){null!==c?Ho(t,r,s,c,h):oc(t,r,s)}function uc(t,r){return mr(t)?t.parentNode(r):r.parentNode}let xu=function $d(t,r,s){return 40&t.type?Mt(t,s):null};function sa(t,r,s,c){const h=jd(t,c,r),g=r[11],T=function No(t,r,s){return xu(t,r,s)}(c.parent||r[6],c,r);if(null!=h)if(Array.isArray(s))for(let O=0;O<s.length;O++)ac(g,h,s[O],T,!1);else ac(g,h,s,T,!1)}function uu(t,r){if(null!==r){const s=r.type;if(3&s)return Mt(r,t);if(4&s)return Ou(-1,t[r.index]);if(8&s){const c=r.child;if(null!==c)return uu(t,c);{const h=t[r.index];return Rt(h)?Ou(-1,h):U(h)}}if(32&s)return Gc(r,t)()||U(t[r.index]);{const c=Lf(t,r);return null!==c?Array.isArray(c)?c[0]:uu(Ud(t[16]),c):uu(t,r.next)}}return null}function Lf(t,r){return null!==r?t[16][6].projection[r.projection]:null}function Ou(t,r){const s=10+t+1;if(s<r.length){const c=r[s],h=c[1].firstChild;if(null!==h)return uu(c,h)}return r[7]}function Uf(t,r,s,c,h,g,w){for(;null!=s;){const T=c[s.index],O=s.type;if(w&&0===r&&(T&&eo(U(T),c),s.flags|=4),64!=(64&s.flags))if(8&O)Uf(t,r,s.child,c,h,g,!1),to(r,t,h,T,g);else if(32&O){const z=Gc(s,c);let X;for(;X=z();)to(r,t,h,X,g);to(r,t,h,T,g)}else 16&O?Sl(t,r,c,s,h,g):to(r,t,h,T,g);s=w?s.projectionNext:s.next}}function Wd(t,r,s,c,h,g){Uf(s,c,t.firstChild,r,h,g,!1)}function Sl(t,r,s,c,h,g){const w=s[16],O=w[6].projection[c.projection];if(Array.isArray(O))for(let z=0;z<O.length;z++)to(r,t,h,O[z],g);else Uf(t,r,O,w[3],h,g,!0)}function og(t,r,s){mr(t)?t.setAttribute(r,"style",s):r.style.cssText=s}function Zc(t,r,s){mr(t)?""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s):r.className=s}function hc(t,r,s){let c=t.length;for(;;){const h=t.indexOf(r,s);if(-1===h)return h;if(0===h||t.charCodeAt(h-1)<=32){const g=r.length;if(h+g===c||t.charCodeAt(h+g)<=32)return h}s=h+1}}const Mh="ng-template";function Vf(t,r,s){let c=0;for(;c<t.length;){let h=t[c++];if(s&&"class"===h){if(h=t[c],-1!==hc(h.toLowerCase(),r,0))return!0}else if(1===h){for(;c<t.length&&"string"==typeof(h=t[c++]);)if(h.toLowerCase()===r)return!0;return!1}}return!1}function pc(t){return 4===t.type&&t.value!==Mh}function Hd(t,r,s){return r===(4!==t.type||s?t.value:Mh)}function Gd(t,r,s){let c=4;const h=t.attrs||[],g=function Bf(t){for(let r=0;r<t.length;r++)if(tn(t[r]))return r;return t.length}(h);let w=!1;for(let T=0;T<r.length;T++){const O=r[T];if("number"!=typeof O){if(!w)if(4&c){if(c=2|1&c,""!==O&&!Hd(t,O,s)||""===O&&1===r.length){if(wa(c))return!1;w=!0}}else{const z=8&c?O:r[++T];if(8&c&&null!==t.attrs){if(!Vf(t.attrs,z,s)){if(wa(c))return!1;w=!0}continue}const we=Ki(8&c?"class":O,h,pc(t),s);if(-1===we){if(wa(c))return!1;w=!0;continue}if(""!==z){let We;We=we>g?"":h[we+1].toLowerCase();const ct=8&c?We:null;if(ct&&-1!==hc(ct,z,0)||2&c&&z!==We){if(wa(c))return!1;w=!0}}}}else{if(!w&&!wa(c)&&!wa(O))return!1;if(w&&wa(O))continue;w=!1,c=O|1&c}}return wa(c)||w}function wa(t){return 0==(1&t)}function Ki(t,r,s,c){if(null===r)return-1;let h=0;if(c||!s){let g=!1;for(;h<r.length;){const w=r[h];if(w===t)return h;if(3===w||6===w)g=!0;else{if(1===w||2===w){let T=r[++h];for(;"string"==typeof T;)T=r[++h];continue}if(4===w)break;if(0===w){h+=4;continue}}h+=g?1:2}return-1}return function ag(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const c=t[s];if("number"==typeof c)return-1;if(c===r)return s;s++}return-1}(r,t)}function xh(t,r,s=!1){for(let c=0;c<r.length;c++)if(Gd(t,r[c],s))return!0;return!1}function gc(t,r){return t?":not("+r.trim()+")":r}function ug(t){let r=t[0],s=1,c=2,h="",g=!1;for(;s<t.length;){let w=t[s];if("string"==typeof w)if(2&c){const T=t[++s];h+="["+w+(T.length>0?'="'+T+'"':"")+"]"}else 8&c?h+="."+w:4&c&&(h+=" "+w);else""!==h&&!wa(w)&&(r+=gc(g,h),h=""),c=w,g=g||!wa(c);s++}return""!==h&&(r+=gc(g,h)),r}const nr={};function jf(t){il(kt(),Se(),ws()+t,!1)}function il(t,r,s,c){if(!c)if(3==(3&r[2])){const g=t.preOrderCheckHooks;null!==g&&Aa(r,g,s)}else{const g=t.preOrderHooks;null!==g&&Hi(r,g,0,s)}Jo(s)}function Yc(t,r){return t<<17|r<<2}function $a(t){return t>>17&32767}function $f(t){return 2|t}function sl(t){return(131068&t)>>2}function Qc(t,r){return-131069&t|r<<2}function Hf(t){return 1|t}function Km(t,r){const s=t.contentQueries;if(null!==s)for(let c=0;c<s.length;c+=2){const h=s[c],g=s[c+1];if(-1!==g){const w=t.data[g];za(h),w.contentQueries(2,r[g],g)}}}function Zd(t,r,s,c,h,g,w,T,O,z){const X=r.blueprint.slice();return X[0]=h,X[2]=140|c,vs(X),X[3]=X[15]=t,X[8]=s,X[10]=w||t&&t[10],X[11]=T||t&&t[11],X[12]=O||t&&t[12]||null,X[9]=z||t&&t[9]||null,X[6]=g,X[16]=2==r.type?t[16]:X,X}function Xc(t,r,s,c,h){let g=t.data[r];if(null===g)g=function Fh(t,r,s,c,h){const g=Es(),w=Us(),O=t.data[r]=function Cg(t,r,s,c,h,g){return{type:s,index:c,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?g:g&&g.parent,s,r,c,h);return null===t.firstChild&&(t.firstChild=O),null!==g&&(w?null==g.child&&null!==O.parent&&(g.child=O):null===g.next&&(g.next=O)),O}(t,r,s,c,h),function ni(){return Dn.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=s,g.value=c,g.attrs=h;const w=function cs(){const t=Dn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();g.injectorIndex=null===w?-1:w.injectorIndex}return Ui(g,!0),g}function xl(t,r,s,c){if(0===s)return-1;const h=r.length;for(let g=0;g<s;g++)r.push(c),t.blueprint.push(c),t.data.push(null);return h}function Ol(t,r,s){Rs(r);try{const c=t.viewQuery;null!==c&&Bh(1,c,s);const h=t.template;null!==h&&ip(t,r,h,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Km(t,r),t.staticViewQueries&&Bh(2,t.viewQuery,s);const g=t.components;null!==g&&function vg(t,r){for(let s=0;s<r.length;s++)Mg(t,r[s])}(r,g)}catch(c){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),c}finally{r[2]&=-5,Ms()}}function ul(t,r,s,c){const h=r[2];if(256!=(256&h)){Rs(r);try{vs(r),function To(t){return Dn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&ip(t,r,s,2,c);const w=3==(3&h);if(w){const z=t.preOrderCheckHooks;null!==z&&Aa(r,z,null)}else{const z=t.preOrderHooks;null!==z&&Hi(r,z,0,null),kr(r,0)}if(function e_(t){for(let r=Vd(t);null!==r;r=bh(r)){if(!r[2])continue;const s=r[9];for(let c=0;c<s.length;c++){const h=s[c],g=h[3];0==(1024&h[2])&&Li(g,1),h[2]|=1024}}}(r),function uy(t){for(let r=Vd(t);null!==r;r=bh(r))for(let s=10;s<r.length;s++){const c=r[s],h=c[1];Lr(c)&&ul(h,c,h.template,c[8])}}(r),null!==t.contentQueries&&Km(t,r),w){const z=t.contentCheckHooks;null!==z&&Aa(r,z)}else{const z=t.contentHooks;null!==z&&Hi(r,z,1),kr(r,1)}!function X_(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let c=0;c<s.length;c++){const h=s[c];if(h<0)Jo(~h);else{const g=h,w=s[++c],T=s[++c];Wi(w,g),T(2,r[g])}}}finally{Jo(-1)}}(t,r);const T=t.components;null!==T&&function ey(t,r){for(let s=0;s<r.length;s++)t_(t,r[s])}(r,T);const O=t.viewQuery;if(null!==O&&Bh(2,O,c),w){const z=t.viewCheckHooks;null!==z&&Aa(r,z)}else{const z=t.viewHooks;null!==z&&Hi(r,z,2),kr(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),r[2]&=-73,1024&r[2]&&(r[2]&=-1025,Li(r[3],-1))}finally{Ms()}}}function Eg(t,r,s,c){const h=r[10],w=lr(r);try{!w&&h.begin&&h.begin(),w&&Ol(t,r,c),ul(t,r,s,c)}finally{!w&&h.end&&h.end()}}function ip(t,r,s,c,h){const g=ws(),w=2&c;try{Jo(-1),w&&r.length>Q&&il(t,r,Q,!1),s(c,h)}finally{Jo(g)}}function op(t,r,s){!F()||(function bg(t,r,s,c){const h=s.directiveStart,g=s.directiveEnd;t.firstCreatePass||fo(s,r),eo(c,r);const w=s.initialInputs;for(let T=h;T<g;T++){const O=t.data[T],z=Sn(O);z&&fp(r,s,O);const X=qt(r,t,T,s);eo(X,r),null!==w&&Sg(0,T-h,X,O,0,w),z&&(Un(s.index,r)[8]=X)}}(t,r,s,Mt(s,r)),128==(128&s.flags)&&function Tg(t,r,s){const c=s.directiveStart,h=s.directiveEnd,w=s.index,T=function Qo(){return Dn.lFrame.currentDirectiveIndex}();try{Jo(w);for(let O=c;O<h;O++){const z=t.data[O],X=r[O];Ha(O),(null!==z.hostBindings||0!==z.hostVars||null!==z.hostAttrs)&&ll(z,X)}}finally{Jo(-1),Ha(T)}}(t,r,s))}function wg(t,r,s=Mt){const c=r.localNames;if(null!==c){let h=r.index+1;for(let g=0;g<c.length;g+=2){const w=c[g+1],T=-1===w?s(r,t):t[w];t[h++]=T}}}function Ig(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=ap(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):r}function ap(t,r,s,c,h,g,w,T,O,z){const X=Q+c,we=X+h,We=function ty(t,r){const s=[];for(let c=0;c<r;c++)s.push(c<t?null:nr);return s}(X,we),ct="function"==typeof z?z():z;return We[1]={type:t,blueprint:We,template:s,queries:null,viewQuery:T,declTNode:r,data:We.slice().fill(null,X),bindingStartIndex:X,expandoStartIndex:we,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:O,consts:ct,incompleteFirstPass:!1}}function Yd(t,r,s,c){const h=pp(r);null===s?h.push(c):(h.push(s),t.firstCreatePass&&id(t).push(c,h.length-1))}function Dg(t,r,s){for(let c in t)if(t.hasOwnProperty(c)){const h=t[c];(s=null===s?{}:s).hasOwnProperty(c)?s[c].push(r,h):s[c]=[r,h]}return s}function td(t,r,s,c){let h=!1;if(F()){const g=function Uh(t,r,s){const c=t.directiveRegistry;let h=null;if(c)for(let g=0;g<c.length;g++){const w=c[g];xh(s,w.selectors,!1)&&(h||(h=[]),C(fo(s,r),t,w.type),Sn(w)?(dp(t,s),h.unshift(w)):h.push(w))}return h}(t,r,s),w=null===c?null:{"":-1};if(null!==g){h=!0,nd(s,t.data.length,g.length);for(let X=0;X<g.length;X++){const we=g[X];we.providersResolver&&we.providersResolver(we)}let T=!1,O=!1,z=xl(t,r,g.length,null);for(let X=0;X<g.length;X++){const we=g[X];s.mergedAttrs=Xo(s.mergedAttrs,we.hostAttrs),Ag(t,s,r,z,we),ay(z,we,w),null!==we.contentQueries&&(s.flags|=8),(null!==we.hostBindings||null!==we.hostAttrs||0!==we.hostVars)&&(s.flags|=128);const We=we.type.prototype;!T&&(We.ngOnChanges||We.ngOnInit||We.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),T=!0),!O&&(We.ngOnChanges||We.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),O=!0),z++}!function ry(t,r){const c=r.directiveEnd,h=t.data,g=r.attrs,w=[];let T=null,O=null;for(let z=r.directiveStart;z<c;z++){const X=h[z],we=X.inputs,We=null===g||pc(r)?null:rd(we,g);w.push(We),T=Dg(we,z,T),O=Dg(X.outputs,z,O)}null!==T&&(T.hasOwnProperty("class")&&(r.flags|=16),T.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=T,r.outputs=O}(t,s)}w&&function hp(t,r,s){if(r){const c=t.localNames=[];for(let h=0;h<r.length;h+=2){const g=s[r[h+1]];if(null==g)throw new ot(-301,!1);c.push(r[h],g)}}}(s,c,w)}return s.mergedAttrs=Xo(s.mergedAttrs,s.attrs),h}function cp(t,r,s,c,h,g){const w=g.hostBindings;if(w){let T=t.hostBindingOpCodes;null===T&&(T=t.hostBindingOpCodes=[]);const O=~r.index;(function Qm(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(T)!=O&&T.push(O),T.push(c,h,w)}}function ll(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function dp(t,r){r.flags|=2,(t.components||(t.components=[])).push(r.index)}function ay(t,r,s){if(s){if(r.exportAs)for(let c=0;c<r.exportAs.length;c++)s[r.exportAs[c]]=t;Sn(r)&&(s[""]=t)}}function nd(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}function Ag(t,r,s,c,h){t.data[c]=h;const g=h.factory||(h.factory=Ii(h.type)),w=new zs(g,Sn(h),null);t.blueprint[c]=w,s[c]=w,cp(t,r,0,c,xl(t,s,h.hostVars,nr),h)}function fp(t,r,s){const c=Mt(r,t),h=Ig(s),g=t[10],w=Jd(t,Zd(t,h,null,s.onPush?64:16,c,r,g,g.createRenderer(c,s),null,null));t[r.index]=w}function Ia(t,r,s,c,h,g){const w=Mt(t,r);!function Qd(t,r,s,c,h,g,w){if(null==g)mr(t)?t.removeAttribute(r,h,s):r.removeAttribute(h);else{const T=null==w?at(g):w(g,c||"",h);mr(t)?t.setAttribute(r,h,T,s):s?r.setAttributeNS(s,h,T):r.setAttribute(h,T)}}(r[11],w,g,t.value,s,c,h)}function Sg(t,r,s,c,h,g){const w=g[r];if(null!==w){const T=c.setInput;for(let O=0;O<w.length;){const z=w[O++],X=w[O++],we=w[O++];null!==T?c.setInput(s,we,z,X):s[X]=we}}}function rd(t,r){let s=null,c=0;for(;c<r.length;){const h=r[c];if(0!==h)if(5!==h){if("number"==typeof h)break;t.hasOwnProperty(h)&&(null===s&&(s=[]),s.push(h,t[h],r[c+1])),c+=2}else c+=2;else c+=4}return s}function Xm(t,r,s,c){return new Array(t,!0,!1,r,null,0,c,s,null,null)}function t_(t,r){const s=Un(r,t);if(Lr(s)){const c=s[1];80&s[2]?ul(c,s,c.template,s[8]):s[5]>0&&Rg(s)}}function Rg(t){for(let c=Vd(t);null!==c;c=bh(c))for(let h=10;h<c.length;h++){const g=c[h];if(1024&g[2]){const w=g[1];ul(w,g,w.template,g[8])}else g[5]>0&&Rg(g)}const s=t[1].components;if(null!==s)for(let c=0;c<s.length;c++){const h=Un(s[c],t);Lr(h)&&h[5]>0&&Rg(h)}}function Mg(t,r){const s=Un(r,t),c=s[1];(function ly(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])})(c,s),Ol(c,s,s[8])}function Jd(t,r){return t[13]?t[14][4]=r:t[13]=r,t[14]=r,r}function xg(t){for(;t;){t[2]|=64;const r=Ud(t);if(ai(t)&&!r)return t;t=r}return null}function Ng(t){!function Pg(t){for(let r=0;r<t.components.length;r++){const s=t.components[r],c=nc(s),h=c[1];Eg(h,c,h.template,s)}}(t[8])}function Bh(t,r,s){za(0),r(t,s)}const yc=(()=>Promise.resolve(null))();function pp(t){return t[7]||(t[7]=[])}function id(t){return t.cleanup||(t.cleanup=[])}function kg(t,r){const s=t[9],c=s?s.get(kd,null):null;c&&c.handleError(r)}function od(t,r,s,c,h){for(let g=0;g<s.length;){const w=s[g++],T=s[g++],O=r[w],z=t.data[w];null!==z.setInput?z.setInput(O,h,c,T):O[T]=h}}function Pl(t,r,s){const c=yt(r,t);!function zc(t,r,s){mr(t)?t.setValue(r,s):r.textContent=s}(t[11],c,s)}function gp(t,r,s){let c=s?t.styles:null,h=s?t.classes:null,g=0;if(null!==r)for(let w=0;w<r.length;w++){const T=r[w];"number"==typeof T?g=T:1==g?h=_e(h,T):2==g&&(c=_e(c,T+": "+r[++w]+";"))}s?t.styles=c:t.stylesWithoutHost=c,s?t.classes=h:t.classesWithoutHost=h}const $h=new Xr("INJECTOR",-1);class s_{get(r,s=B){if(s===B){const c=new Error(`NullInjectorError: No provider for ${ce(r)}!`);throw c.name="NullInjectorError",c}return s}}const Ug=new Xr("Set Injector scope."),vc={},Vg={};let Bg;function jg(){return void 0===Bg&&(Bg=new s_),Bg}function o_(t,r=null,s=null,c){const h=$g(t,r,s,c);return h._resolveInjectorDefTypes(),h}function $g(t,r=null,s=null,c){return new a_(t,s,r||jg(),c)}class a_{constructor(r,s,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];s&&Gi(s,T=>this.processProvider(T,r,s)),Gi([r],T=>this.processInjectorType(T,[],g)),this.records.set($h,Xd(void 0,this));const w=this.records.get(Ug);this.scope=null!=w?w.value:null,this.source=h||("object"==typeof r?null:ce(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=B,c=Ut.Default){this.assertNotDestroyed();const h=Vr(this),g=pn(void 0);try{if(!(c&Ut.SkipSelf)){let T=this.records.get(r);if(void 0===T){const O=function zg(t){return"function"==typeof t||"object"==typeof t&&t instanceof Xr}(r)&&Wn(r);T=O&&this.injectableDefInScope(O)?Xd(mp(r),vc):null,this.records.set(r,T)}if(null!=T)return this.hydrate(r,T)}return(c&Ut.Self?jg():this.parent).get(r,s=c&Ut.Optional&&s===B?null:s)}catch(w){if("NullInjectorError"===w.name){if((w[Re]=w[Re]||[]).unshift(ce(r)),h)throw w;return function Pa(t,r,s,c){const h=t[Re];throw r[ln]&&h.unshift(r[ln]),t.message=function Xa(t,r,s,c=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let h=ce(r);if(Array.isArray(r))h=r.map(ce).join(" -> ");else if("object"==typeof r){let g=[];for(let w in r)if(r.hasOwnProperty(w)){let T=r[w];g.push(w+":"+("string"==typeof T?JSON.stringify(T):ce(T)))}h=`{${g.join(", ")}}`}return`${s}${c?"("+c+")":""}[${h}]: ${t.replace(ft,"\n  ")}`}("\n"+t.message,h,s,c),t.ngTokenPath=h,t[Re]=null,t}(w,r,"R3InjectorError",this.source)}throw w}finally{pn(g),Vr(h)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((c,h)=>r.push(ce(h))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ot(205,!1)}processInjectorType(r,s,c){if(!(r=Ae(r)))return!1;let h=Cr(r);const g=null==h&&r.ngModule||void 0,w=void 0===g?r:g,T=-1!==c.indexOf(w);if(void 0!==g&&(h=Cr(g)),null==h)return!1;if(null!=h.imports&&!T){let X;c.push(w);try{Gi(h.imports,we=>{this.processInjectorType(we,s,c)&&(void 0===X&&(X=[]),X.push(we))})}finally{}if(void 0!==X)for(let we=0;we<X.length;we++){const{ngModule:We,providers:ct}=X[we];Gi(ct,xt=>this.processProvider(xt,We,ct||Me))}}this.injectorDefTypes.add(w);const O=Ii(w)||(()=>new w);this.records.set(w,Xd(O,vc));const z=h.providers;if(null!=z&&!T){const X=r;Gi(z,we=>this.processProvider(we,X,z))}return void 0!==g&&void 0!==r.providers}processProvider(r,s,c){let h=Ec(r=Ae(r))?r:Ae(r&&r.provide);const g=function cy(t,r,s){return c_(t)?Xd(void 0,t.useValue):Xd(l_(t),vc)}(r);if(Ec(r)||!0!==r.multi)this.records.get(h);else{let w=this.records.get(h);w||(w=Xd(void 0,vc,!0),w.factory=()=>Ja(w.multi),this.records.set(h,w)),h=r,w.multi.push(r)}this.records.set(h,g)}hydrate(r,s){return s.value===vc&&(s.value=Vg,s.value=s.factory()),"object"==typeof s.value&&s.value&&function hy(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=Ae(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function mp(t){const r=Wn(t),s=null!==r?r.factory:Ii(t);if(null!==s)return s;if(t instanceof Xr)throw new ot(204,!1);if(t instanceof Function)return function u_(t){const r=t.length;if(r>0)throw function xa(t,r){const s=[];for(let c=0;c<t;c++)s.push(r);return s}(r,"?"),new ot(204,!1);const s=function Hn(t){const r=t&&(t[ur]||t[qn]);if(r){const s=function Ln(t){if(t.hasOwnProperty("name"))return t.name;const r=(""+t).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new ot(204,!1)}function l_(t,r,s){let c;if(Ec(t)){const h=Ae(t);return Ii(h)||mp(h)}if(c_(t))c=()=>Ae(t.useValue);else if(function Hg(t){return!(!t||!t.useFactory)}(t))c=()=>t.useFactory(...Ja(t.deps||[]));else if(function Wg(t){return!(!t||!t.useExisting)}(t))c=()=>Yn(Ae(t.useExisting));else{const h=Ae(t&&(t.useClass||t.provide));if(!function Gg(t){return!!t.deps}(t))return Ii(h)||mp(h);c=()=>new h(...Ja(t.deps))}return c}function Xd(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function c_(t){return null!==t&&"object"==typeof t&&Kn in t}function Ec(t){return"function"==typeof t}let Nu=(()=>{class t{static create(s,c){var h;if(Array.isArray(s))return o_({name:""},c,s,"");{const g=null!==(h=s.name)&&void 0!==h?h:"";return o_({name:g},s.parent,s.providers,g)}}}return t.THROW_IF_NOT_FOUND=B,t.NULL=new s_,t.\u0275prov=on({token:t,providedIn:"any",factory:()=>Yn($h)}),t.__NG_ELEMENT_ID__=-1,t})();function wp(t,r){pi(nc(t)[1],yr())}function nh(t){let r=function qh(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const c=[t];for(;r;){let h;if(Sn(t))h=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new ot(903,"");h=r.\u0275dir}if(h){if(s){c.push(h);const w=t;w.inputs=Zh(t.inputs),w.declaredInputs=Zh(t.declaredInputs),w.outputs=Zh(t.outputs);const T=h.hostBindings;T&&Yh(t,T);const O=h.viewQuery,z=h.contentQueries;if(O&&ld(t,O),z&&Jg(t,z),be(t.inputs,h.inputs),be(t.declaredInputs,h.declaredInputs),be(t.outputs,h.outputs),Sn(h)&&h.data.animation){const X=t.data;X.animation=(X.animation||[]).concat(h.data.animation)}}const g=h.features;if(g)for(let w=0;w<g.length;w++){const T=g[w];T&&T.ngInherit&&T(t),T===nh&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Ip(t){let r=0,s=null;for(let c=t.length-1;c>=0;c--){const h=t[c];h.hostVars=r+=h.hostVars,h.hostAttrs=Xo(h.hostAttrs,s=Xo(s,h.hostAttrs))}}(c)}function Zh(t){return t===jn?{}:t===Me?[]:t}function ld(t,r){const s=t.viewQuery;t.viewQuery=s?(c,h)=>{r(c,h),s(c,h)}:r}function Jg(t,r){const s=t.contentQueries;t.contentQueries=s?(c,h,g)=>{r(c,h,g),s(c,h,g)}:r}function Yh(t,r){const s=t.hostBindings;t.hostBindings=s?(c,h)=>{r(c,h),s(c,h)}:r}let cd=null;function dd(){if(!cd){const t=Bn.Symbol;if(t&&t.iterator)cd=t.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const c=r[s];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(cd=c)}}}return cd}function hd(t){return!!Cc(t)&&(Array.isArray(t)||!(t instanceof Map)&&dd()in t)}function Cc(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function ro(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function sh(t,r,s,c){const h=Se();return ro(h,ho(),r)&&(kt(),Ia(qr(),h,t,r,s,c)),sh}function tm(t,r,s,c,h,g,w,T){const O=Se(),z=kt(),X=t+Q,we=z.firstCreatePass?function f_(t,r,s,c,h,g,w,T,O){const z=r.consts,X=Xc(r,t,4,w||null,Nr(z,T));td(r,s,X,Nr(z,O)),pi(r,X);const we=X.tViews=ap(2,X,c,h,g,r.directiveRegistry,r.pipeRegistry,null,r.schemas,z);return null!==r.queries&&(r.queries.template(r,X),we.queries=r.queries.embeddedTView(X)),X}(X,z,O,r,s,c,h,g,w):z.data[X];Ui(we,!1);const We=O[11].createComment("");sa(z,O,We,we),eo(We,O),Jd(O,O[X]=Xm(We,O,We,we)),gn(we)&&op(z,O,we),null!=w&&wg(O,we,T)}function ef(t){return function _r(t,r){return t[r]}(function Mr(){return Dn.lFrame.contextLView}(),Q+t)}function hu(t,r=Ut.Default){const s=Se();return null===s?Yn(t,r):q(yr(),s,Ae(t),r)}function ju(){throw new Error("invalid")}function af(t,r,s){const c=Se();return ro(c,ho(),r)&&function Wa(t,r,s,c,h,g,w,T){const O=Mt(r,s);let X,z=r.inputs;!T&&null!=z&&(X=z[c])?(od(t,s,X,c,h),Nn(r)&&function sy(t,r){const s=Un(r,t);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(c=function iy(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(c),h=null!=w?w(h,r.value||"",c):h,mr(g)?g.setProperty(O,c,h):Vn(c)||(O.setProperty?O.setProperty(c,h):O[c]=h))}(kt(),qr(),c,t,r,c[11],s,!1),af}function Pp(t,r,s,c,h){const w=h?"class":"style";od(t,s,r.inputs[w],w,c)}function Ko(t,r,s,c){const h=Se(),g=kt(),w=Q+t,T=h[11],O=h[w]=Ru(T,r,function Wo(){return Dn.lFrame.currentNamespace}()),z=g.firstCreatePass?function um(t,r,s,c,h,g,w){const T=r.consts,z=Xc(r,t,2,h,Nr(T,g));return td(r,s,z,Nr(T,w)),null!==z.attrs&&gp(z,z.attrs,!1),null!==z.mergedAttrs&&gp(z,z.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,z),z}(w,g,h,0,r,s,c):g.data[w];Ui(z,!0);const X=z.mergedAttrs;null!==X&&Zr(T,O,X);const we=z.classes;null!==we&&Zc(T,O,we);const We=z.styles;return null!==We&&og(T,O,We),64!=(64&z.flags)&&sa(g,h,O,z),0===function bo(){return Dn.lFrame.elementDepthCount}()&&eo(O,h),function co(){Dn.lFrame.elementDepthCount++}(),gn(z)&&(op(g,h,z),function sp(t,r,s){if(yn(r)){const h=r.directiveEnd;for(let g=r.directiveStart;g<h;g++){const w=t.data[g];w.contentQueries&&w.contentQueries(1,s[g],g)}}}(g,z,h)),null!==c&&wg(h,z),Ko}function Sc(){let t=yr();Us()?function Bo(){Dn.lFrame.isParent=!1}():(t=t.parent,Ui(t,!1));const r=t;!function $(){Dn.lFrame.elementDepthCount--}();const s=kt();return s.firstCreatePass&&(pi(s,t),yn(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function ml(t){return 0!=(16&t.flags)}(r)&&Pp(s,r,Se(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function jt(t){return 0!=(32&t.flags)}(r)&&Pp(s,r,Se(),r.stylesWithoutHost,!1),Sc}function Np(t,r,s,c){return Ko(t,r,s,c),Sc(),Np}function lm(){return Se()}function cf(t){return!!t&&"function"==typeof t.then}function cm(t){return!!t&&"function"==typeof t.subscribe}const df=cm;function uh(t,r,s,c){const h=Se(),g=kt(),w=yr();return function ff(t,r,s,c,h,g,w,T){const O=gn(c),X=t.firstCreatePass&&id(t),we=r[8],We=pp(r);let ct=!0;if(3&c.type||T){const un=Mt(c,r),bn=T?T(un):un,Ft=We.length,Qn=T?ri=>T(U(ri[c.index])):c.index;if(mr(s)){let ri=null;if(!T&&O&&(ri=function hl(t,r,s,c){const h=t.cleanup;if(null!=h)for(let g=0;g<h.length-1;g+=2){const w=h[g];if(w===s&&h[g+1]===c){const T=r[7],O=h[g+2];return T.length>O?T[O]:null}"string"==typeof w&&(g+=2)}return null}(t,r,h,c.index)),null!==ri)(ri.__ngLastListenerFn__||ri).__ngNextListenerFn__=g,ri.__ngLastListenerFn__=g,ct=!1;else{g=lh(c,r,we,g,!1);const xi=s.listen(bn,h,g);We.push(g,xi),X&&X.push(h,Qn,Ft,Ft+1)}}else g=lh(c,r,we,g,!0),bn.addEventListener(h,g,w),We.push(g),X&&X.push(h,Qn,Ft,w)}else g=lh(c,r,we,g,!1);const xt=c.outputs;let Zt;if(ct&&null!==xt&&(Zt=xt[h])){const un=Zt.length;if(un)for(let bn=0;bn<un;bn+=2){const pl=r[Zt[bn]][Zt[bn+1]].subscribe(g),qp=We.length;We.push(g,pl),X&&X.push(h,c.index,qp,-(qp+1))}}}(g,h,h[11],w,t,r,!!s,c),uh}function kp(t,r,s,c){try{return!1!==s(c)}catch(h){return kg(t,h),!1}}function lh(t,r,s,c,h){return function g(w){if(w===Function)return c;const T=2&t.flags?Un(t.index,r):r;0==(32&r[2])&&xg(T);let O=kp(r,0,c,w),z=g.__ngNextListenerFn__;for(;z;)O=kp(r,0,z,w)&&O,z=z.__ngNextListenerFn__;return h&&!1===O&&(w.preventDefault(),w.returnValue=!1),O}}function hm(t,r,s,c,h){const g=t[s+1],w=null===r;let T=c?$a(g):sl(g),O=!1;for(;0!==T&&(!1===O||w);){const X=t[T+1];D_(t[T],r)&&(O=!0,t[T+1]=c?Hf(X):$f(X)),T=c?$a(X):sl(X)}O&&(t[s+1]=c?$f(g):Hf(g))}function D_(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&ta(t,r)>=0}function yd(t,r){return function fu(t,r,s,c){const h=Se(),g=kt(),w=function ts(t){const r=Dn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);g.firstUpdatePass&&function vm(t,r,s,c){const h=t.data;if(null===h[s+1]){const g=h[ws()],w=function jp(t,r){return r>=t.expandoStartIndex}(t,s);(function Im(t,r){return 0!=(t.flags&(r?16:32))})(g,c)&&null===r&&!w&&(r=!1),r=function Em(t,r,s,c){const h=function Ai(t){const r=Dn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let g=c?r.residualClasses:r.residualStyles;if(null===h)0===(c?r.classBindings:r.styleBindings)&&(s=hh(s=$p(null,t,r,s,c),r.attrs,c),g=null);else{const w=r.directiveStylingLast;if(-1===w||t[w]!==h)if(s=$p(h,t,r,s,c),null===g){let O=function _f(t,r,s){const c=s?r.classBindings:r.styleBindings;if(0!==sl(c))return t[$a(c)]}(t,r,c);void 0!==O&&Array.isArray(O)&&(O=$p(null,t,r,O[1],c),O=hh(O,r.attrs,c),function R_(t,r,s,c){t[$a(s?r.classBindings:r.styleBindings)]=c}(t,r,c,O))}else g=function M_(t,r,s){let c;const h=r.directiveEnd;for(let g=1+r.directiveStylingLast;g<h;g++)c=hh(c,t[g].hostAttrs,s);return hh(c,r.attrs,s)}(t,r,c)}return void 0!==g&&(c?r.residualClasses=g:r.residualStyles=g),s}(h,g,r,c),function gf(t,r,s,c,h,g){let w=g?r.classBindings:r.styleBindings,T=$a(w),O=sl(w);t[c]=s;let X,z=!1;if(Array.isArray(s)){const we=s;X=we[1],(null===X||ta(we,X)>0)&&(z=!0)}else X=s;if(h)if(0!==O){const We=$a(t[T+1]);t[c+1]=Yc(We,T),0!==We&&(t[We+1]=Qc(t[We+1],c)),t[T+1]=function Wm(t,r){return 131071&t|r<<17}(t[T+1],c)}else t[c+1]=Yc(T,0),0!==T&&(t[T+1]=Qc(t[T+1],c)),T=c;else t[c+1]=Yc(O,0),0===T?T=c:t[O+1]=Qc(t[O+1],c),O=c;z&&(t[c+1]=$f(t[c+1])),hm(t,X,c,!0),hm(t,X,c,!1),function C_(t,r,s,c,h){const g=h?t.residualClasses:t.residualStyles;null!=g&&"string"==typeof r&&ta(g,r)>=0&&(s[c+1]=Hf(s[c+1]))}(r,X,t,c,g),w=Yc(T,O),g?r.classBindings=w:r.styleBindings=w}(h,g,r,s,w,c)}}(g,t,w,c),r!==nr&&ro(h,w,r)&&function Mc(t,r,s,c,h,g,w,T){if(!(3&r.type))return;const O=t.data,z=O[T+1];vf(function Wf(t){return 1==(1&t)}(z)?yf(O,r,s,h,sl(z),w):void 0)||(vf(g)||function lg(t){return 2==(2&t)}(z)&&(g=yf(O,null,s,h,T,w)),function sg(t,r,s,c,h){const g=mr(t);if(r)h?g?t.addClass(s,c):s.classList.add(c):g?t.removeClass(s,c):s.classList.remove(c);else{let w=-1===c.indexOf("-")?void 0:Su.DashCase;if(null==h)g?t.removeStyle(s,c,w):s.style.removeProperty(c);else{const T="string"==typeof h&&h.endsWith("!important");T&&(h=h.slice(0,-10),w|=Su.Important),g?t.setStyle(s,c,h,w):s.style.setProperty(c,h,T?"important":"")}}}(c,w,yt(ws(),s),h,g))}(g,g.data[ws()],h,h[11],t,h[w+1]=function wm(t,r){return null==t||("string"==typeof r?t+=r:"object"==typeof t&&(t=ce(ia(t)))),t}(r,s),c,w)}(t,r,null,!0),yd}function $p(t,r,s,c,h){let g=null;const w=s.directiveEnd;let T=s.directiveStylingLast;for(-1===T?T=s.directiveStart:T++;T<w&&(g=r[T],c=hh(c,g.hostAttrs,h),g!==t);)T++;return null!==t&&(s.directiveStylingLast=T),c}function hh(t,r,s){const c=s?1:2;let h=-1;if(null!==r)for(let g=0;g<r.length;g++){const w=r[g];"number"==typeof w?h=w:h===c&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Xn(t,w,!!s||r[++g]))}return void 0===t?null:t}function yf(t,r,s,c,h,g){const w=null===r;let T;for(;h>0;){const O=t[h],z=Array.isArray(O),X=z?O[1]:O,we=null===X;let We=s[h+1];We===nr&&(We=we?Me:void 0);let ct=we?mo(We,c):X===c?We:void 0;if(z&&!vf(ct)&&(ct=mo(O,c)),vf(ct)&&(T=ct,w))return T;const xt=t[h+1];h=w?$a(xt):sl(xt)}if(null!==r){let O=g?r.residualClasses:r.residualStyles;null!=O&&(T=mo(O,c))}return T}function vf(t){return void 0!==t}function Wp(t,r=""){const s=Se(),c=kt(),h=t+Q,g=c.firstCreatePass?Xc(c,h,1,r,null):c.data[h],w=s[h]=function Th(t,r){return mr(t)?t.createText(r):t.createTextNode(r)}(s[11],r);sa(c,s,w,g),Ui(g,!1)}function Hp(t){return Ef("",t,""),Hp}function Ef(t,r,s){const c=Se(),h=function kl(t,r,s,c){return ro(t,ho(),s)?r+at(s)+c:nr}(c,t,r,s);return h!==nr&&Pl(c,ws(),h),Ef}const vd=void 0;var Uy=["en",[["a","p"],["AM","PM"],vd],[["AM","PM"],vd,vd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vd,"{1} 'at' {0}",vd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ly(t){const s=Math.floor(Math.abs(t)),c=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===c?1:5}];let fh={};function V_(t){const r=function Vy(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=by(r);if(s)return s;const c=r.split("-")[0];if(s=by(c),s)return s;if("en"===c)return Uy;throw new Error(`Missing locale data for the locale "${t}".`)}function Dy(t){return V_(t)[er.PluralCase]}function by(t){return t in fh||(fh[t]=Bn.ng&&Bn.ng.common&&Bn.ng.common.locales&&Bn.ng.common.locales[t]),fh[t]}var er=(()=>((er=er||{})[er.LocaleId=0]="LocaleId",er[er.DayPeriodsFormat=1]="DayPeriodsFormat",er[er.DayPeriodsStandalone=2]="DayPeriodsStandalone",er[er.DaysFormat=3]="DaysFormat",er[er.DaysStandalone=4]="DaysStandalone",er[er.MonthsFormat=5]="MonthsFormat",er[er.MonthsStandalone=6]="MonthsStandalone",er[er.Eras=7]="Eras",er[er.FirstDayOfWeek=8]="FirstDayOfWeek",er[er.WeekendRange=9]="WeekendRange",er[er.DateFormat=10]="DateFormat",er[er.TimeFormat=11]="TimeFormat",er[er.DateTimeFormat=12]="DateTimeFormat",er[er.NumberSymbols=13]="NumberSymbols",er[er.NumberFormats=14]="NumberFormats",er[er.CurrencyCode=15]="CurrencyCode",er[er.CurrencySymbol=16]="CurrencySymbol",er[er.CurrencyName=17]="CurrencyName",er[er.Currencies=18]="Currencies",er[er.Directionality=19]="Directionality",er[er.PluralCase=20]="PluralCase",er[er.ExtraData=21]="ExtraData",er))();const B_="en-US";let f=B_;function Gy(t,r,s,c,h){if(t=Ae(t),Array.isArray(t))for(let g=0;g<t.length;g++)Gy(t[g],r,s,c,h);else{const g=kt(),w=Se();let T=Ec(t)?t:Ae(t.provide),O=l_(t);const z=yr(),X=1048575&z.providerIndexes,we=z.directiveStart,We=z.providerIndexes>>20;if(Ec(t)||!t.multi){const ct=new zs(O,h,hu),xt=Ky(T,r,h?X:X+We,we);-1===xt?(C(fo(z,w),g,T),zy(g,t,r.length),r.push(T),z.directiveStart++,z.directiveEnd++,h&&(z.providerIndexes+=1048576),s.push(ct),w.push(ct)):(s[xt]=ct,w[xt]=ct)}else{const ct=Ky(T,r,X+We,we),xt=Ky(T,r,X,X+We),Zt=ct>=0&&s[ct],un=xt>=0&&s[xt];if(h&&!un||!h&&!Zt){C(fo(z,w),g,T);const bn=function iw(t,r,s,c,h){const g=new zs(t,s,hu);return g.multi=[],g.index=r,g.componentProviders=0,e0(g,h,c&&!s),g}(h?rw:nw,s.length,h,c,O);!h&&un&&(s[xt].providerFactory=bn),zy(g,t,r.length,0),r.push(T),z.directiveStart++,z.directiveEnd++,h&&(z.providerIndexes+=1048576),s.push(bn),w.push(bn)}else zy(g,t,ct>-1?ct:xt,e0(s[h?xt:ct],O,!h&&c));!h&&c&&un&&s[xt].componentProviders++}}}function zy(t,r,s,c){const h=Ec(r),g=function dy(t){return!!t.useClass}(r);if(h||g){const O=(g?Ae(r.useClass):r).prototype.ngOnDestroy;if(O){const z=t.destroyHooks||(t.destroyHooks=[]);if(!h&&r.multi){const X=z.indexOf(s);-1===X?z.push(s,[c,O]):z[X+1].push(c,O)}else z.push(s,O)}}}function e0(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function Ky(t,r,s,c){for(let h=s;h<c;h++)if(r[h]===t)return h;return-1}function nw(t,r,s,c){return qy(this.multi,[])}function rw(t,r,s,c){const h=this.multi;let g;if(this.providerFactory){const w=this.providerFactory.componentProviders,T=qt(s,s[1],this.providerFactory.index,c);g=T.slice(0,w),qy(h,g);for(let O=w;O<T.length;O++)g.push(T[O])}else g=[],qy(h,g);return g}function qy(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function t0(t,r=[]){return s=>{s.providersResolver=(c,h)=>function tw(t,r,s){const c=kt();if(c.firstCreatePass){const h=Sn(t);Gy(s,c.data,c.blueprint,h,!0),Gy(r,c.data,c.blueprint,h,!1)}}(c,h?h(t):t,r)}}class n0{}class aw{resolveComponentFactory(r){throw function ow(t){const r=Error(`No component factory found for ${ce(t)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=t,r}(r)}}let Ay=(()=>{class t{}return t.NULL=new aw,t})();function uw(){return Am(yr(),Se())}function Am(t,r){return new W_(Mt(t,r))}let W_=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=uw,t})();function lw(t){return t instanceof W_?t.nativeElement:t}class s0{}let cw=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function hw(){const t=Se(),s=Un(yr().index,t);return function dw(t){return t[11]}(qe(s)?s:t)}(),t})(),fw=(()=>{class t{}return t.\u0275prov=on({token:t,providedIn:"root",factory:()=>null}),t})();class o0{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const a0=new o0("13.3.11"),Zy={};function Sy(t,r,s,c,h=!1){for(;null!==s;){const g=r[s.index];if(null!==g&&c.push(U(g)),Rt(g))for(let T=10;T<g.length;T++){const O=g[T],z=O[1].firstChild;null!==z&&Sy(O[1],O,z,c)}const w=s.type;if(8&w)Sy(t,r,s.child,c);else if(32&w){const T=Gc(s,r);let O;for(;O=T();)c.push(O)}else if(16&w){const T=Lf(r,s);if(Array.isArray(T))c.push(...T);else{const O=Ud(r[16]);Sy(O[1],O,T,c,!0)}}s=h?s.projectionNext:s.next}return c}class H_{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Sy(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Rt(r)){const s=r[8],c=s?s.indexOf(this):-1;c>-1&&(qc(r,c),Oo(s,c))}this._attachedToViewContainer=!1}Mu(this._lView[1],this._lView)}onDestroy(r){Yd(this._lView[1],this._lView,null,r)}markForCheck(){xg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Vh(t,r,s){const c=r[10];c.begin&&c.begin();try{ul(t,r,t.template,s)}catch(h){throw kg(r,h),h}finally{c.end&&c.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ot(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Kc(t,r){Wd(t,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new ot(902,"");this._appRef=r}}class pw extends H_{constructor(r){super(r),this._view=r}detectChanges(){Ng(this._view)}checkNoChanges(){}get context(){return null}}class u0 extends Ay{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Ve(r);return new Yy(s,this.ngModule)}}function l0(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class Yy extends n0{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function mc(t){return t.map(ug).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return l0(this.componentDef.inputs)}get outputs(){return l0(this.componentDef.outputs)}create(r,s,c,h){const g=(h=h||this.ngModule)?function mw(t,r){return{get:(s,c,h)=>{const g=t.get(s,Zy,h);return g!==Zy||c===Zy?g:r.get(s,c,h)}}}(r,h.injector):r,w=g.get(s0,V),T=g.get(fw,null),O=w.createRenderer(null,this.componentDef),z=this.componentDef.selectors[0][0]||"div",X=c?function Lh(t,r,s){if(mr(t))return t.selectRootElement(r,s===Vt.ShadowDom);let c="string"==typeof r?t.querySelector(r):r;return c.textContent="",c}(O,c,this.componentDef.encapsulation):Ru(w.createRenderer(null,this.componentDef),z,function gw(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(z)),we=this.componentDef.onPush?576:528,We=function Ep(t,r){return{components:[],scheduler:t||tg,clean:yc,playerHandler:r||null,flags:0}}(),ct=ap(0,null,null,1,0,null,null,null,null,null),xt=Zd(null,ct,We,we,null,null,w,O,T,g);let Zt,un;Rs(xt);try{const bn=function Qg(t,r,s,c,h,g){const w=s[1];s[20]=t;const O=Xc(w,20,2,"#host",null),z=O.mergedAttrs=r.hostAttrs;null!==z&&(gp(O,z,!0),null!==t&&(Zr(h,t,z),null!==O.classes&&Zc(h,t,O.classes),null!==O.styles&&og(h,t,O.styles)));const X=c.createRenderer(t,r),we=Zd(s,Ig(r),null,r.onPush?64:16,s[20],O,c,X,g||null,null);return w.firstCreatePass&&(C(fo(O,s),w,r.type),dp(w,O),nd(O,s.length,1)),Jd(s,we),s[20]=we}(X,this.componentDef,xt,w,O);if(X)if(c)Zr(O,X,["ng-version",a0.full]);else{const{attrs:Ft,classes:Qn}=function $m(t){const r=[],s=[];let c=1,h=2;for(;c<t.length;){let g=t[c];if("string"==typeof g)2===h?""!==g&&r.push(g,t[++c]):8===h&&s.push(g);else{if(!wa(h))break;h=g}c++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Ft&&Zr(O,X,Ft),Qn&&Qn.length>0&&Zc(O,X,Qn.join(" "))}if(un=In(ct,Q),void 0!==s){const Ft=un.projection=[];for(let Qn=0;Qn<this.ngContentSelectors.length;Qn++){const ri=s[Qn];Ft.push(null!=ri?Array.from(ri):null)}}Zt=function Kh(t,r,s,c,h){const g=s[1],w=function lp(t,r,s){const c=yr();t.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Ag(t,c,r,xl(t,r,1,null),s));const h=qt(r,t,c.directiveStart,c);eo(h,r);const g=Mt(c,r);return g&&eo(g,r),h}(g,s,r);if(c.components.push(w),t[8]=w,h&&h.forEach(O=>O(w,r)),r.contentQueries){const O=yr();r.contentQueries(1,w,O.directiveStart)}const T=yr();return!g.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Jo(T.index),cp(s[1],T,0,T.directiveStart,T.directiveEnd,r),ll(r,w)),w}(bn,this.componentDef,xt,We,[wp]),Ol(ct,xt,null)}finally{Ms()}return new yw(this.componentType,Zt,Am(un,xt),xt,un)}}class yw extends class sw{}{constructor(r,s,c,h,g){super(),this.location=c,this._rootLView=h,this._tNode=g,this.instance=s,this.hostView=this.changeDetectorRef=new pw(h),this.componentType=r}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class Sm{}class c0{}const Rm=new Map;class f0 extends Sm{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new u0(this);const c=Yt(r);this._bootstrapComponents=Au(c.bootstrap),this._r3Injector=$g(r,s,[{provide:Sm,useValue:this},{provide:Ay,useValue:this.componentFactoryResolver}],ce(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=Nu.THROW_IF_NOT_FOUND,c=Ut.Default){return r===Nu||r===Sm||r===$h?this:this._r3Injector.get(r,s,c)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Qy extends c0{constructor(r){super(),this.moduleType=r,null!==Yt(r)&&function Ew(t){const r=new Set;!function s(c){const h=Yt(c,!0),g=h.id;null!==g&&(function d0(t,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${t} - ${ce(r)} vs ${ce(r.name)}`)}(g,Rm.get(g),c),Rm.set(g,c));const w=Au(h.imports);for(const T of w)r.has(T)||(r.add(T),s(T))}(t)}(r)}create(r){return new f0(this.moduleType,r)}}function Jy(t){return r=>{setTimeout(t,void 0,r)}}const Ed=class Uw extends p.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,c){var h,g,w;let T=r,O=s||(()=>null),z=c;if(r&&"object"==typeof r){const we=r;T=null===(h=we.next)||void 0===h?void 0:h.bind(we),O=null===(g=we.error)||void 0===g?void 0:g.bind(we),z=null===(w=we.complete)||void 0===w?void 0:w.bind(we)}this.__isAsync&&(O=Jy(O),T&&(T=Jy(T)),z&&(z=Jy(z)));const X=super.subscribe({next:T,error:O,complete:z});return r instanceof M.w0&&r.add(X),X}};function Vw(){return this._results[dd()]()}class Xy{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=dd(),c=Xy.prototype;c[s]||(c[s]=Vw)}get changes(){return this._changes||(this._changes=new Ed)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const c=this;c.dirty=!1;const h=yi(r);(this._changesDetected=!function go(t,r,s){if(t.length!==r.length)return!1;for(let c=0;c<t.length;c++){let h=t[c],g=r[c];if(s&&(h=s(h),g=s(g)),g!==h)return!1}return!0}(c._results,h,s))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let K_=(()=>{class t{}return t.__NG_ELEMENT_ID__=$w,t})();const Bw=K_,jw=class extends Bw{constructor(r,s,c){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=c}createEmbeddedView(r){const s=this._declarationTContainer.tViews,c=Zd(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(s)),Ol(s,c,r),new H_(c)}};function $w(){return Ry(yr(),Se())}function Ry(t,r){return 4&t.type?new jw(r,t,Am(t,r)):null}let My=(()=>{class t{}return t.__NG_ELEMENT_ID__=Ww,t})();function Ww(){return w0(yr(),Se())}const Hw=My,v0=class extends Hw{constructor(r,s,c){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=c}get element(){return Am(this._hostTNode,this._hostLView)}get injector(){return new ji(this._hostTNode,this._hostLView)}get parentInjector(){const r=R(this._hostTNode,this._hostLView);if(pt(r)){const s=On(r,this._hostLView),c=It(r);return new ji(s[1].data[c+8],s)}return new ji(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=E0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,c){const h=r.createEmbeddedView(s||{});return this.insert(h,c),h}createComponent(r,s,c,h,g){const w=r&&!function Os(t){return"function"==typeof t}(r);let T;if(w)T=s;else{const we=s||{};T=we.index,c=we.injector,h=we.projectableNodes,g=we.ngModuleRef}const O=w?r:new Yy(Ve(r)),z=c||this.parentInjector;if(!g&&null==O.ngModule){const We=(w?z:this.parentInjector).get(Sm,null);We&&(g=We)}const X=O.create(z,h,void 0,g);return this.insert(X.hostView,T),X}insert(r,s){const c=r._lView,h=c[1];if(function wr(t){return Rt(t[3])}(c)){const X=this.indexOf(r);if(-1!==X)this.detach(X);else{const we=c[3],We=new v0(we,we[6],we[3]);We.detach(We.indexOf(r))}}const g=this._adjustIndex(s),w=this._lContainer;!function is(t,r,s,c){const h=10+c,g=s.length;c>0&&(s[h-1][4]=r),c<g-10?(r[4]=s[h],Qs(s,10+c,r)):(s.push(r),r[4]=null),r[3]=s;const w=r[17];null!==w&&s!==w&&function Nf(t,r){const s=t[9];r[16]!==r[3][3][16]&&(t[2]=!0),null===s?t[9]=[r]:s.push(r)}(w,r);const T=r[19];null!==T&&T.insertView(t),r[2]|=128}(h,c,w,g);const T=Ou(g,w),O=c[11],z=uc(O,w[7]);return null!==z&&function Ah(t,r,s,c,h,g){c[0]=h,c[6]=r,Wd(t,c,s,1,h,g)}(h,w[6],O,c,z,T),r.attachToViewContainerRef(),Qs(ev(w),g,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=E0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),c=qc(this._lContainer,s);c&&(Oo(ev(this._lContainer),s),Mu(c[1],c))}detach(r){const s=this._adjustIndex(r,-1),c=qc(this._lContainer,s);return c&&null!=Oo(ev(this._lContainer),s)?new H_(c):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function E0(t){return t[8]}function ev(t){return t[8]||(t[8]=[])}function w0(t,r){let s;const c=r[t.index];if(Rt(c))s=c;else{let h;if(8&t.type)h=U(c);else{const g=r[11];h=g.createComment("");const w=Mt(t,r);Ho(g,uc(g,w),h,function Rh(t,r){return mr(t)?t.nextSibling(r):r.nextSibling}(g,w),!1)}r[t.index]=s=Xm(c,r,h,t),Jd(r,s)}return new v0(s,t,r)}class tv{constructor(r){this.queryList=r,this.matches=null}clone(){return new tv(this.queryList)}setDirty(){this.queryList.setDirty()}}class nv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const c=null!==r.contentQueries?r.contentQueries[0]:s.length,h=[];for(let g=0;g<c;g++){const w=s.getByIndex(g);h.push(this.queries[w.indexInDeclarationView].clone())}return new nv(h)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==R0(r,s).matches&&this.queries[s].setDirty()}}class I0{constructor(r,s,c=null){this.predicate=r,this.flags=s,this.read=c}}class rv{constructor(r=[]){this.queries=r}elementStart(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let c=0;c<this.length;c++){const h=null!==s?s.length:0,g=this.getByIndex(c).embeddedTView(r,h);g&&(g.indexInDeclarationView=c,null!==s?s.push(g):s=[g])}return null!==s?new rv(s):null}template(r,s){for(let c=0;c<this.queries.length;c++)this.queries[c].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class iv{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new iv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let c=r.parent;for(;null!==c&&8&c.type&&c.index!==s;)c=c.parent;return s===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const g=c[h];this.matchTNodeWithReadOption(r,s,Kw(s,g)),this.matchTNodeWithReadOption(r,s,Xt(s,r,g,!1,!1))}else c===K_?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Xt(s,r,c,!1,!1))}matchTNodeWithReadOption(r,s,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===W_||h===My||h===K_&&4&s.type)this.addMatch(s.index,-2);else{const g=Xt(s,r,h,!1,!1);null!==g&&this.addMatch(s.index,g)}else this.addMatch(s.index,c)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Kw(t,r){const s=t.localNames;if(null!==s)for(let c=0;c<s.length;c+=2)if(s[c]===r)return s[c+1];return null}function Zw(t,r,s,c){return-1===s?function qw(t,r){return 11&t.type?Am(t,r):4&t.type?Ry(t,r):null}(r,t):-2===s?function Yw(t,r,s){return s===W_?Am(r,t):s===K_?Ry(r,t):s===My?w0(r,t):void 0}(t,r,c):qt(t,t[1],s,r)}function C0(t,r,s,c){const h=r[19].queries[c];if(null===h.matches){const g=t.data,w=s.matches,T=[];for(let O=0;O<w.length;O+=2){const z=w[O];T.push(z<0?null:Zw(r,g[z],w[O+1],s.metadata.read))}h.matches=T}return h.matches}function sv(t,r,s,c){const h=t.queries.getByIndex(s),g=h.matches;if(null!==g){const w=C0(t,r,h,s);for(let T=0;T<g.length;T+=2){const O=g[T];if(O>0)c.push(w[T/2]);else{const z=g[T+1],X=r[-O];for(let we=10;we<X.length;we++){const We=X[we];We[17]===We[3]&&sv(We[1],We,z,c)}if(null!==X[9]){const we=X[9];for(let We=0;We<we.length;We++){const ct=we[We];sv(ct[1],ct,z,c)}}}}}return c}function D0(t){const r=Se(),s=kt(),c=Ga();za(c+1);const h=R0(s,c);if(t.dirty&&lr(r)===(2==(2&h.metadata.flags))){if(null===h.matches)t.reset([]);else{const g=h.crossesNgTemplate?sv(s,r,c,[]):C0(s,r,h,c);t.reset(g,lw),t.notifyOnChanges()}return!0}return!1}function b0(t,r,s,c){const h=kt();if(h.firstCreatePass){const g=yr();(function S0(t,r,s){null===t.queries&&(t.queries=new rv),t.queries.track(new iv(r,s))})(h,new I0(r,s,c),g.index),function Xw(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(h,t),2==(2&s)&&(h.staticContentQueries=!0)}!function A0(t,r,s){const c=new Xy(4==(4&s));Yd(t,r,c,c.destroy),null===r[19]&&(r[19]=new nv),r[19].queries.push(new tv(c))}(h,Se(),s)}function T0(){return function Jw(t,r){return t[19].queries[r].queryList}(Se(),Ga())}function R0(t,r){return t.queries.getByIndex(r)}function Py(...t){}const z0=new Xr("Application Initializer");let dv=(()=>{class t{constructor(s){this.appInits=s,this.resolve=Py,this.reject=Py,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const s=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const g=this.appInits[h]();if(cf(g))s.push(g);else if(df(g)){const w=new Promise((T,O)=>{g.subscribe({complete:T,error:O})});s.push(w)}}Promise.all(s).then(()=>{c()}).catch(h=>{this.reject(h)}),0===s.length&&c(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)(Yn(z0,8))},t.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const K0=new Xr("AppId",{providedIn:"root",factory:function q0(){return`${hv()}${hv()}${hv()}`}});function hv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Z0=new Xr("Platform Initializer"),_I=new Xr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Y0=new Xr("appBootstrapListener");let yI=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const fv=new Xr("LocaleId",{providedIn:"root",factory:()=>vl(fv,Ut.Optional|Ut.SkipSelf)||function vI(){return"undefined"!=typeof $localize&&$localize.locale||B_}()}),EI=new Xr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class wI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let II=(()=>{class t{compileModuleSync(s){return new Qy(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const c=this.compileModuleSync(s),g=Au(Yt(s).declarations).reduce((w,T)=>{const O=Ve(T);return O&&w.push(new Yy(O)),w},[]);return new wI(c,g)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const DI=(()=>Promise.resolve(0))();function pv(t){"undefined"==typeof Zone?DI.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Oc{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ed(!1),this.onMicrotaskEmpty=new Ed(!1),this.onStable=new Ed(!1),this.onError=new Ed(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&s,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function bI(){let t=Bn.requestAnimationFrame,r=Bn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&r){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const c=r[Zone.__symbol__("OriginalDelegate")];c&&(r=c)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function SI(t){const r=()=>{!function AI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Bn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,mv(t),t.isCheckStableRunning=!0,gv(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),mv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,c,h,g,w,T)=>{try{return Q0(t),s.invokeTask(h,g,w,T)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||t.shouldCoalesceRunChangeDetection)&&r(),J0(t)}},onInvoke:(s,c,h,g,w,T,O)=>{try{return Q0(t),s.invoke(h,g,w,T,O)}finally{t.shouldCoalesceRunChangeDetection&&r(),J0(t)}},onHasTask:(s,c,h,g)=>{s.hasTask(h,g),c===h&&("microTask"==g.change?(t._hasPendingMicrotasks=g.microTask,mv(t),gv(t)):"macroTask"==g.change&&(t.hasPendingMacrotasks=g.macroTask))},onHandleError:(s,c,h,g)=>(s.handleError(h,g),t.runOutsideAngular(()=>t.onError.emit(g)),!1)})}(h)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Oc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Oc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,c){return this._inner.run(r,s,c)}runTask(r,s,c,h){const g=this._inner,w=g.scheduleEventTask("NgZoneEvent: "+h,r,TI,Py,Py);try{return g.runTask(w,s,c)}finally{g.cancelTask(w)}}runGuarded(r,s,c){return this._inner.runGuarded(r,s,c)}runOutsideAngular(r){return this._outer.run(r)}}const TI={};function gv(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function mv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Q0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function J0(t){t._nesting--,gv(t)}class RI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ed,this.onMicrotaskEmpty=new Ed,this.onStable=new Ed,this.onError=new Ed}run(r,s,c){return r.apply(s,c)}runGuarded(r,s,c){return r.apply(s,c)}runOutsideAngular(r){return r()}runTask(r,s,c,h){return r.apply(s,c)}}let X0=(()=>{class t{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Oc.assertNotInAngularZone(),pv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())pv(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(s)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,c,h){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==g),s(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:s,timeoutId:g,updateCb:h})}whenStable(s,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,c,h){return[]}}return t.\u0275fac=function(s){return new(s||t)(Yn(Oc))},t.\u0275prov=on({token:t,factory:t.\u0275fac}),t})(),MI=(()=>{class t{constructor(){this._applications=new Map,_v.addToWindow(this)}registerApplication(s,c){this._applications.set(s,c)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,c=!0){return _v.findTestabilityInTree(this,s,c)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();class xI{addToWindow(r){}findTestabilityInTree(r,s,c){return null}}function OI(t){_v=t}let _v=new xI,zp=null;const eE=new Xr("AllowMultipleToken"),tE=new Xr("PlatformOnDestroy");class kI{constructor(r,s){this.name=r,this.token=s}}function nE(t,r,s=[]){const c=`Platform: ${r}`,h=new Xr(c);return(g=[])=>{let w=yv();if(!w||w.injector.get(eE,!1)){const T=[...s,...g,{provide:h,useValue:!0}];t?t(T):function FI(t){if(zp&&!zp.get(eE,!1))throw new ot(400,"");zp=t;const r=t.get(rE),s=t.get(Z0,null);s&&s.forEach(c=>c())}(function UI(t=[],r){return Nu.create({name:r,providers:[{provide:Ug,useValue:"platform"},{provide:tE,useValue:()=>zp=null},...t]})}(T,c))}return function LI(t){const r=yv();if(!r)throw new ot(401,"");return r}()}}function yv(){var t;return null!==(t=null==zp?void 0:zp.get(rE))&&void 0!==t?t:null}let rE=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,c){const T=function VI(t,r){let s;return s="noop"===t?new RI:("zone.js"===t?void 0:t)||new Oc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),O=[{provide:Oc,useValue:T}];return T.run(()=>{const z=Nu.create({providers:O,parent:this.injector,name:s.moduleType.name}),X=s.create(z),we=X.injector.get(kd,null);if(!we)throw new ot(402,"");return T.runOutsideAngular(()=>{const We=T.onError.subscribe({next:ct=>{we.handleError(ct)}});X.onDestroy(()=>{Ev(this._modules,X),We.unsubscribe()})}),function BI(t,r,s){try{const c=s();return cf(c)?c.catch(h=>{throw r.runOutsideAngular(()=>t.handleError(h)),h}):c}catch(c){throw r.runOutsideAngular(()=>t.handleError(c)),c}}(we,T,()=>{const We=X.injector.get(dv);return We.runInitializers(),We.donePromise.then(()=>(function y(t){rn(t,"Expected localeId to be defined"),"string"==typeof t&&(f=t.toLowerCase().replace(/_/g,"-"))}(X.injector.get(fv,B_)||B_),this._moduleDoBootstrap(X),X))})})}bootstrapModule(s,c=[]){const h=iE({},c);return function PI(t,r,s){const c=new Qy(s);return Promise.resolve(c)}(0,0,s).then(g=>this.bootstrapModuleFactory(g,h))}_moduleDoBootstrap(s){const c=s.injector.get(vv);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!s.instance.ngDoBootstrap)throw new ot(403,"");s.instance.ngDoBootstrap(c)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ot(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const s=this._injector.get(tE,null);null==s||s(),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)(Yn(Nu))},t.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function iE(t,r){return Array.isArray(r)?r.reduce(iE,t):Object.assign(Object.assign({},t),r)}let vv=(()=>{class t{constructor(s,c,h,g){this._zone=s,this._injector=c,this._exceptionHandler=h,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new G.y(O=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{O.next(this._stable),O.complete()})}),T=new G.y(O=>{let z;this._zone.runOutsideAngular(()=>{z=this._zone.onStable.subscribe(()=>{Oc.assertNotInAngularZone(),pv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,O.next(!0))})})});const X=this._zone.onUnstable.subscribe(()=>{Oc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{O.next(!1)}))});return()=>{z.unsubscribe(),X.unsubscribe()}});this.isStable=(0,Ee.T)(w,T.pipe((0,de.B)()))}bootstrap(s,c){if(!this._initStatus.done)throw new ot(405,"");let h;h=s instanceof n0?s:this._injector.get(Ay).resolveComponentFactory(s),this.componentTypes.push(h.componentType);const g=function NI(t){return t.isBoundToModule}(h)?void 0:this._injector.get(Sm),T=h.create(Nu.NULL,[],c||h.selector,g),O=T.location.nativeElement,z=T.injector.get(X0,null),X=z&&T.injector.get(MI);return z&&X&&X.registerApplication(O,z),T.onDestroy(()=>{this.detachView(T.hostView),Ev(this.components,T),X&&X.unregisterApplication(O)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new ot(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const c=s;this._views.push(c),c.attachToAppRef(this)}detachView(s){const c=s;Ev(this._views,c),c.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(Y0,[]).concat(this._bootstrapListeners).forEach(h=>h(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(s){return new(s||t)(Yn(Oc),Yn(Nu),Yn(kd),Yn(dv))},t.\u0275prov=on({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ev(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}let oE=!0,aE=!1;function $I(){return aE=!0,oE}function WI(){if(aE)throw new Error("Cannot enable prod mode after platform setup.");oE=!1}let HI=(()=>{class t{}return t.__NG_ELEMENT_ID__=GI,t})();function GI(t){return function zI(t,r,s){if(Nn(t)&&!s){const c=Un(t.index,r);return new H_(c,c)}return 47&t.type?new H_(r[16],r):null}(yr(),Se(),16==(16&t))}class dE{constructor(){}supports(r){return hd(r)}create(r){return new JI(r)}}const QI=(t,r)=>r;class JI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||QI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,c=this._removalsHead,h=0,g=null;for(;s||c;){const w=!c||s&&s.currentIndex<fE(c,h,g)?s:c,T=fE(w,h,g),O=w.currentIndex;if(w===c)h--,c=c._nextRemoved;else if(s=s._next,null==w.previousIndex)h++;else{g||(g=[]);const z=T-h,X=O-h;if(z!=X){for(let We=0;We<z;We++){const ct=We<g.length?g[We]:g[We]=0,xt=ct+We;X<=xt&&xt<z&&(g[We]=ct+1)}g[w.previousIndex]=X-z}}T!==O&&r(w,T,O)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!hd(r))throw new ot(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let h,g,w,s=this._itHead,c=!1;if(Array.isArray(r)){this.length=r.length;for(let T=0;T<this.length;T++)g=r[T],w=this._trackByFn(T,g),null!==s&&Object.is(s.trackById,w)?(c&&(s=this._verifyReinsertion(s,g,w,T)),Object.is(s.item,g)||this._addIdentityChange(s,g)):(s=this._mismatch(s,g,w,T),c=!0),s=s._next}else h=0,function Cp(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[dd()]();let c;for(;!(c=s.next()).done;)r(c.value)}}(r,T=>{w=this._trackByFn(h,T),null!==s&&Object.is(s.trackById,w)?(c&&(s=this._verifyReinsertion(s,T,w,h)),Object.is(s.item,T)||this._addIdentityChange(s,T)):(s=this._mismatch(s,T,w,h),c=!0),s=s._next,h++}),this.length=h;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,c,h){let g;return null===r?g=this._itTail:(g=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,g,h)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,g,h)):r=this._addAfter(new XI(s,c),g,h),r}_verifyReinsertion(r,s,c,h){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?r=this._reinsertAfter(g,r._prev,h):r.currentIndex!=h&&(r.currentIndex=h,this._addToMoves(r,h)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const h=r._prevRemoved,g=r._nextRemoved;return null===h?this._removalsHead=g:h._nextRemoved=g,null===g?this._removalsTail=h:g._prevRemoved=h,this._insertAfter(r,s,c),this._addToMoves(r,c),r}_moveAfter(r,s,c){return this._unlink(r),this._insertAfter(r,s,c),this._addToMoves(r,c),r}_addAfter(r,s,c){return this._insertAfter(r,s,c),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,c){const h=null===s?this._itHead:s._next;return r._next=h,r._prev=s,null===h?this._itTail=r:h._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new hE),this._linkedRecords.put(r),r.currentIndex=c,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,c=r._next;return null===s?this._itHead=c:s._next=c,null===c?this._itTail=s:c._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class XI{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===s||s<=c.currentIndex)&&Object.is(c.trackById,r))return c;return null}remove(r){const s=r._prevDup,c=r._nextDup;return null===s?this._head=c:s._nextDup=c,null===c?this._tail=s:c._prevDup=s,null===this._head}}class hE{constructor(){this.map=new Map}put(r){const s=r.trackById;let c=this.map.get(s);c||(c=new eC,this.map.set(s,c)),c.add(r)}get(r,s){const h=this.map.get(r);return h?h.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function fE(t,r,s){const c=t.previousIndex;if(null===c)return c;let h=0;return s&&c<s.length&&(h=s[c]),c+r+h}class pE{constructor(){}supports(r){return r instanceof Map||Cc(r)}create(){return new tC}}class tC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||Cc(r)))throw new ot(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(c,h)=>{if(s&&s.key===h)this._maybeAddToChanges(s,c),this._appendAfter=s,s=s._next;else{const g=this._getOrCreateRecordForKey(h,c);s=this._insertBeforeOrAppend(s,g)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let c=s;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const c=r._prev;return s._next=r,s._prev=c,r._prev=s,c&&(c._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const h=this._records.get(r);this._maybeAddToChanges(h,s);const g=h._prev,w=h._next;return g&&(g._next=w),w&&(w._prev=g),h._next=null,h._prev=null,h}const c=new nC(r);return this._records.set(r,c),c.currentValue=s,this._addToAdditions(c),c}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(c=>s(r[c],c))}}class nC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gE(){return new bv([new dE])}let bv=(()=>{class t{constructor(s){this.factories=s}static create(s,c){if(null!=c){const h=c.factories.slice();s=s.concat(h)}return new t(s)}static extend(s){return{provide:t,useFactory:c=>t.create(s,c||gE()),deps:[[t,new El,new yo]]}}find(s){const c=this.factories.find(h=>h.supports(s));if(null!=c)return c;throw new ot(901,"")}}return t.\u0275prov=on({token:t,providedIn:"root",factory:gE}),t})();function mE(){return new Tv([new pE])}let Tv=(()=>{class t{constructor(s){this.factories=s}static create(s,c){if(c){const h=c.factories.slice();s=s.concat(h)}return new t(s)}static extend(s){return{provide:t,useFactory:c=>t.create(s,c||mE()),deps:[[t,new El,new yo]]}}find(s){const c=this.factories.find(g=>g.supports(s));if(c)return c;throw new ot(901,"")}}return t.\u0275prov=on({token:t,providedIn:"root",factory:mE}),t})();const sC=nE(null,"core",[]);let oC=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)(Yn(vv))},t.\u0275mod=st({type:t}),t.\u0275inj=Jt({}),t})()},2382:(ke,ye,S)=>{S.d(ye,{Fj:()=>Qe,NI:()=>ve,u:()=>bi,cw:()=>le,sg:()=>ki,u5:()=>Dn,JJ:()=>Tn,JL:()=>vr,F:()=>qe,On:()=>Zo,wV:()=>Ws,UX:()=>es,Q7:()=>se,kI:()=>Xe,_Y:()=>la});var p=S(5e3),M=S(9808),G=S(8306),Ee=S(4742),de=S(8421),Te=S(7669),be=S(5403),ce=S(3268),_e=S(1810),fe=S(8996),Ae=S(4004);let Ye=(()=>{class ${constructor(k,ie){this._renderer=k,this._elementRef=ie,this.onChange=Se=>{},this.onTouched=()=>{}}setProperty(k,ie){this._renderer.setProperty(this._elementRef.nativeElement,k,ie)}registerOnTouched(k){this.onTouched=k}registerOnChange(k){this.onChange=k}setDisabledState(k){this.setProperty("disabled",k)}}return $.\u0275fac=function(k){return new(k||$)(p.Y36(p.Qsj),p.Y36(p.SBq))},$.\u0275dir=p.lG2({type:$}),$})(),Je=(()=>{class $ extends Ye{}return $.\u0275fac=function(){let F;return function(ie){return(F||(F=p.n5z($)))(ie||$)}}(),$.\u0275dir=p.lG2({type:$,features:[p.qOj]}),$})();const ot=new p.OlP("NgValueAccessor"),tt={provide:ot,useExisting:(0,p.Gpc)(()=>Qe),multi:!0},wt=new p.OlP("CompositionEventMode");let Qe=(()=>{class $ extends Ye{constructor(k,ie,Se){super(k,ie),this._compositionMode=Se,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xe(){const $=(0,M.q)()?(0,M.q)().getUserAgent():"";return/android (\d+)/.test($.toLowerCase())}())}writeValue(k){this.setProperty("value",null==k?"":k)}_handleInput(k){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(k)}_compositionStart(){this._composing=!0}_compositionEnd(k){this._composing=!1,this._compositionMode&&this.onChange(k)}}return $.\u0275fac=function(k){return new(k||$)(p.Y36(p.Qsj),p.Y36(p.SBq),p.Y36(wt,8))},$.\u0275dir=p.lG2({type:$,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(k,ie){1&k&&p.NdJ("input",function(kt){return ie._handleInput(kt.target.value)})("blur",function(){return ie.onTouched()})("compositionstart",function(){return ie._compositionStart()})("compositionend",function(kt){return ie._compositionEnd(kt.target.value)})},features:[p._Bn([tt]),p.qOj]}),$})();function Ge($){return null==$||0===$.length}function ut($){return null!=$&&"number"==typeof $.length}const At=new p.OlP("NgValidators"),je=new p.OlP("NgAsyncValidators"),it=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Xe{static min(F){return function Fe($){return F=>{if(Ge(F.value)||Ge($))return null;const k=parseFloat(F.value);return!isNaN(k)&&k<$?{min:{min:$,actual:F.value}}:null}}(F)}static max(F){return function ze($){return F=>{if(Ge(F.value)||Ge($))return null;const k=parseFloat(F.value);return!isNaN(k)&&k>$?{max:{max:$,actual:F.value}}:null}}(F)}static required(F){return et(F)}static requiredTrue(F){return function dt($){return!0===$.value?null:{required:!0}}(F)}static email(F){return function Ke($){return Ge($.value)||it.test($.value)?null:{email:!0}}(F)}static minLength(F){return function _t($){return F=>Ge(F.value)||!ut(F.value)?null:F.value.length<$?{minlength:{requiredLength:$,actualLength:F.value.length}}:null}(F)}static maxLength(F){return function St($){return F=>ut(F.value)&&F.value.length>$?{maxlength:{requiredLength:$,actualLength:F.value.length}}:null}(F)}static pattern(F){return function nn($){if(!$)return rn;let F,k;return"string"==typeof $?(k="","^"!==$.charAt(0)&&(k+="^"),k+=$,"$"!==$.charAt($.length-1)&&(k+="$"),F=new RegExp(k)):(k=$.toString(),F=$),ie=>{if(Ge(ie.value))return null;const Se=ie.value;return F.test(Se)?null:{pattern:{requiredPattern:k,actualValue:Se}}}}(F)}static nullValidator(F){return null}static compose(F){return Jt(F)}static composeAsync(F){return ar(F)}}function et($){return Ge($.value)?{required:!0}:null}function rn($){return null}function Ot($){return null!=$}function en($){const F=(0,p.QGY)($)?(0,fe.D)($):$;return(0,p.CqO)(F),F}function Cn($){let F={};return $.forEach(k=>{F=null!=k?Object.assign(Object.assign({},F),k):F}),0===Object.keys(F).length?null:F}function En($,F){return F.map(k=>k($))}function sn($){return $.map(F=>function on($){return!$.validate}(F)?F:k=>F.validate(k))}function Jt($){if(!$)return null;const F=$.filter(Ot);return 0==F.length?null:function(k){return Cn(En(k,F))}}function Wn($){return null!=$?Jt(sn($)):null}function ar($){if(!$)return null;const F=$.filter(Ot);return 0==F.length?null:function(k){return function ee(...$){const F=(0,Te.jO)($),{args:k,keys:ie}=(0,Ee.D)($),Se=new G.y(kt=>{const{length:Kr}=k;if(!Kr)return void kt.complete();const yr=new Array(Kr);let Es=Kr,cs=Kr;for(let Ui=0;Ui<Kr;Ui++){let Us=!1;(0,de.Xf)(k[Ui]).subscribe((0,be.x)(kt,Bo=>{Us||(Us=!0,cs--),yr[Ui]=Bo},()=>Es--,void 0,()=>{(!Es||!Us)&&(cs||kt.next(ie?(0,_e.n)(ie,yr):yr),kt.complete())}))}});return F?Se.pipe((0,ce.Z)(F)):Se}(En(k,F).map(en)).pipe((0,Ae.U)(Cn))}}function Hn($){return null!=$?ar(sn($)):null}function Ln($,F){return null===$?[F]:Array.isArray($)?[...$,F]:[$,F]}function Cr($){return $._rawValidators}function ur($){return $._rawAsyncValidators}function Ar($){return $?Array.isArray($)?$:[$]:[]}function qn($,F){return Array.isArray($)?$.includes(F):$===F}function jr($,F){const k=Ar(F);return Ar($).forEach(Se=>{qn(k,Se)||k.push(Se)}),k}function Ut($,F){return Ar(F).filter(k=>!qn($,k))}class pr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(F){this._rawValidators=F||[],this._composedValidatorFn=Wn(this._rawValidators)}_setAsyncValidators(F){this._rawAsyncValidators=F||[],this._composedAsyncValidatorFn=Hn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(F){this._onDestroyCallbacks.push(F)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(F=>F()),this._onDestroyCallbacks=[]}reset(F){this.control&&this.control.reset(F)}hasError(F,k){return!!this.control&&this.control.hasError(F,k)}getError(F,k){return this.control?this.control.getError(F,k):null}}class An extends pr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pn extends pr{get formDirective(){return null}get path(){return null}}class Dr{constructor(F){this._cd=F}is(F){var k,ie,Se;return"submitted"===F?!!(null===(k=this._cd)||void 0===k?void 0:k.submitted):!!(null===(Se=null===(ie=this._cd)||void 0===ie?void 0:ie.control)||void 0===Se?void 0:Se[F])}}let Tn=(()=>{class $ extends Dr{constructor(k){super(k)}}return $.\u0275fac=function(k){return new(k||$)(p.Y36(An,2))},$.\u0275dir=p.lG2({type:$,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(k,ie){2&k&&p.ekj("ng-untouched",ie.is("untouched"))("ng-touched",ie.is("touched"))("ng-pristine",ie.is("pristine"))("ng-dirty",ie.is("dirty"))("ng-valid",ie.is("valid"))("ng-invalid",ie.is("invalid"))("ng-pending",ie.is("pending"))},features:[p.qOj]}),$})(),vr=(()=>{class $ extends Dr{constructor(k){super(k)}}return $.\u0275fac=function(k){return new(k||$)(p.Y36(pn,10))},$.\u0275dir=p.lG2({type:$,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(k,ie){2&k&&p.ekj("ng-untouched",ie.is("untouched"))("ng-touched",ie.is("touched"))("ng-pristine",ie.is("pristine"))("ng-dirty",ie.is("dirty"))("ng-valid",ie.is("valid"))("ng-invalid",ie.is("invalid"))("ng-pending",ie.is("pending"))("ng-submitted",ie.is("submitted"))},features:[p.qOj]}),$})();function oe($,F){return[...F.path,$]}function He($,F){Gt($,F),F.valueAccessor.writeValue($.value),function st($,F){F.valueAccessor.registerOnChange(k=>{$._pendingValue=k,$._pendingChange=!0,$._pendingDirty=!0,"change"===$.updateOn&&te($,F)})}($,F),function he($,F){const k=(ie,Se)=>{F.valueAccessor.writeValue(ie),Se&&F.viewToModelUpdate(ie)};$.registerOnChange(k),F._registerOnDestroy(()=>{$._unregisterOnChange(k)})}($,F),function Le($,F){F.valueAccessor.registerOnTouched(()=>{$._pendingTouched=!0,"blur"===$.updateOn&&$._pendingChange&&te($,F),"submit"!==$.updateOn&&$.markAsTouched()})}($,F),function wn($,F){if(F.valueAccessor.setDisabledState){const k=ie=>{F.valueAccessor.setDisabledState(ie)};$.registerOnDisabledChange(k),F._registerOnDestroy(()=>{$._unregisterOnDisabledChange(k)})}}($,F)}function gt($,F,k=!0){const ie=()=>{};F.valueAccessor&&(F.valueAccessor.registerOnChange(ie),F.valueAccessor.registerOnTouched(ie)),Mn($,F),$&&(F._invokeOnDestroyCallbacks(),$._registerOnCollectionChange(()=>{}))}function Ht($,F){$.forEach(k=>{k.registerOnValidatorChange&&k.registerOnValidatorChange(F)})}function Gt($,F){const k=Cr($);null!==F.validator?$.setValidators(Ln(k,F.validator)):"function"==typeof k&&$.setValidators([k]);const ie=ur($);null!==F.asyncValidator?$.setAsyncValidators(Ln(ie,F.asyncValidator)):"function"==typeof ie&&$.setAsyncValidators([ie]);const Se=()=>$.updateValueAndValidity();Ht(F._rawValidators,Se),Ht(F._rawAsyncValidators,Se)}function Mn($,F){let k=!1;if(null!==$){if(null!==F.validator){const Se=Cr($);if(Array.isArray(Se)&&Se.length>0){const kt=Se.filter(Kr=>Kr!==F.validator);kt.length!==Se.length&&(k=!0,$.setValidators(kt))}}if(null!==F.asyncValidator){const Se=ur($);if(Array.isArray(Se)&&Se.length>0){const kt=Se.filter(Kr=>Kr!==F.asyncValidator);kt.length!==Se.length&&(k=!0,$.setAsyncValidators(kt))}}}const ie=()=>{};return Ht(F._rawValidators,ie),Ht(F._rawAsyncValidators,ie),k}function te($,F){$._pendingDirty&&$.markAsDirty(),$.setValue($._pendingValue,{emitModelToViewChange:!1}),F.viewToModelUpdate($._pendingValue),$._pendingChange=!1}function re($,F){Gt($,F)}function Gn($,F){if(!$.hasOwnProperty("model"))return!1;const k=$.model;return!!k.isFirstChange()||!Object.is(F,k.currentValue)}function rr($,F){$._syncPendingControls(),F.forEach(k=>{const ie=k.control;"submit"===ie.updateOn&&ie._pendingChange&&(k.viewToModelUpdate(ie._pendingValue),ie._pendingChange=!1)})}function pe($,F){if(!F)return null;let k,ie,Se;return Array.isArray(F),F.forEach(kt=>{kt.constructor===Qe?k=kt:function fn($){return Object.getPrototypeOf($.constructor)===Je}(kt)?ie=kt:Se=kt}),Se||ie||k||null}function Sr($,F){const k=$.indexOf(F);k>-1&&$.splice(k,1)}const Pt="VALID",_n="INVALID",ir="PENDING",Qr="DISABLED";function dr($){return(Pr($)?$.validators:$)||null}function wi($){return Array.isArray($)?Wn($):$||null}function zn($,F){return(Pr(F)?F.asyncValidators:$)||null}function mi($){return Array.isArray($)?Hn($):$||null}function Pr($){return null!=$&&!Array.isArray($)&&"object"==typeof $}const xn=$=>$ instanceof ve,ti=$=>$ instanceof le;function Pi($){return xn($)?$.value:$.getRawValue()}function Rr($,F){const k=ti($),ie=$.controls;if(!(k?Object.keys(ie):ie).length)throw new p.vHH(1e3,"");if(!ie[F])throw new p.vHH(1001,"")}function Er($,F){ti($),$._forEachChild((ie,Se)=>{if(void 0===F[Se])throw new p.vHH(1002,"")})}class Jr{constructor(F,k){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=F,this._rawAsyncValidators=k,this._composedValidatorFn=wi(this._rawValidators),this._composedAsyncValidatorFn=mi(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(F){this._rawValidators=this._composedValidatorFn=F}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(F){this._rawAsyncValidators=this._composedAsyncValidatorFn=F}get parent(){return this._parent}get valid(){return this.status===Pt}get invalid(){return this.status===_n}get pending(){return this.status==ir}get disabled(){return this.status===Qr}get enabled(){return this.status!==Qr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(F){this._rawValidators=F,this._composedValidatorFn=wi(F)}setAsyncValidators(F){this._rawAsyncValidators=F,this._composedAsyncValidatorFn=mi(F)}addValidators(F){this.setValidators(jr(F,this._rawValidators))}addAsyncValidators(F){this.setAsyncValidators(jr(F,this._rawAsyncValidators))}removeValidators(F){this.setValidators(Ut(F,this._rawValidators))}removeAsyncValidators(F){this.setAsyncValidators(Ut(F,this._rawAsyncValidators))}hasValidator(F){return qn(this._rawValidators,F)}hasAsyncValidator(F){return qn(this._rawAsyncValidators,F)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(F={}){this.touched=!0,this._parent&&!F.onlySelf&&this._parent.markAsTouched(F)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(F=>F.markAllAsTouched())}markAsUntouched(F={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(k=>{k.markAsUntouched({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}markAsDirty(F={}){this.pristine=!1,this._parent&&!F.onlySelf&&this._parent.markAsDirty(F)}markAsPristine(F={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(k=>{k.markAsPristine({onlySelf:!0})}),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}markAsPending(F={}){this.status=ir,!1!==F.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!F.onlySelf&&this._parent.markAsPending(F)}disable(F={}){const k=this._parentMarkedDirty(F.onlySelf);this.status=Qr,this.errors=null,this._forEachChild(ie=>{ie.disable(Object.assign(Object.assign({},F),{onlySelf:!0}))}),this._updateValue(),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},F),{skipPristineCheck:k})),this._onDisabledChange.forEach(ie=>ie(!0))}enable(F={}){const k=this._parentMarkedDirty(F.onlySelf);this.status=Pt,this._forEachChild(ie=>{ie.enable(Object.assign(Object.assign({},F),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},F),{skipPristineCheck:k})),this._onDisabledChange.forEach(ie=>ie(!1))}_updateAncestors(F){this._parent&&!F.onlySelf&&(this._parent.updateValueAndValidity(F),F.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(F){this._parent=F}updateValueAndValidity(F={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pt||this.status===ir)&&this._runAsyncValidator(F.emitEvent)),!1!==F.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!F.onlySelf&&this._parent.updateValueAndValidity(F)}_updateTreeValidity(F={emitEvent:!0}){this._forEachChild(k=>k._updateTreeValidity(F)),this.updateValueAndValidity({onlySelf:!0,emitEvent:F.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qr:Pt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(F){if(this.asyncValidator){this.status=ir,this._hasOwnPendingAsyncValidator=!0;const k=en(this.asyncValidator(this));this._asyncValidationSubscription=k.subscribe(ie=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ie,{emitEvent:F})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(F,k={}){this.errors=F,this._updateControlsErrors(!1!==k.emitEvent)}get(F){return function Ei($,F,k){if(null==F||(Array.isArray(F)||(F=F.split(k)),Array.isArray(F)&&0===F.length))return null;let ie=$;return F.forEach(Se=>{ie=ti(ie)?ie.controls.hasOwnProperty(Se)?ie.controls[Se]:null:($=>$ instanceof Q)(ie)&&ie.at(Se)||null}),ie}(this,F,".")}getError(F,k){const ie=k?this.get(k):this;return ie&&ie.errors?ie.errors[F]:null}hasError(F,k){return!!this.getError(F,k)}get root(){let F=this;for(;F._parent;)F=F._parent;return F}_updateControlsErrors(F){this.status=this._calculateStatus(),F&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(F)}_initObservables(){this.valueChanges=new p.vpe,this.statusChanges=new p.vpe}_calculateStatus(){return this._allControlsDisabled()?Qr:this.errors?_n:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ir)?ir:this._anyControlsHaveStatus(_n)?_n:Pt}_anyControlsHaveStatus(F){return this._anyControls(k=>k.status===F)}_anyControlsDirty(){return this._anyControls(F=>F.dirty)}_anyControlsTouched(){return this._anyControls(F=>F.touched)}_updatePristine(F={}){this.pristine=!this._anyControlsDirty(),this._parent&&!F.onlySelf&&this._parent._updatePristine(F)}_updateTouched(F={}){this.touched=this._anyControlsTouched(),this._parent&&!F.onlySelf&&this._parent._updateTouched(F)}_isBoxedValue(F){return"object"==typeof F&&null!==F&&2===Object.keys(F).length&&"value"in F&&"disabled"in F}_registerOnCollectionChange(F){this._onCollectionChange=F}_setUpdateStrategy(F){Pr(F)&&null!=F.updateOn&&(this._updateOn=F.updateOn)}_parentMarkedDirty(F){return!F&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ve extends Jr{constructor(F=null,k,ie){super(dr(k),zn(ie,k)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(F),this._setUpdateStrategy(k),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pr(k)&&k.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(F)?F.value:F)}setValue(F,k={}){this.value=this._pendingValue=F,this._onChange.length&&!1!==k.emitModelToViewChange&&this._onChange.forEach(ie=>ie(this.value,!1!==k.emitViewToModelChange)),this.updateValueAndValidity(k)}patchValue(F,k={}){this.setValue(F,k)}reset(F=this.defaultValue,k={}){this._applyFormState(F),this.markAsPristine(k),this.markAsUntouched(k),this.setValue(this.value,k),this._pendingChange=!1}_updateValue(){}_anyControls(F){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(F){this._onChange.push(F)}_unregisterOnChange(F){Sr(this._onChange,F)}registerOnDisabledChange(F){this._onDisabledChange.push(F)}_unregisterOnDisabledChange(F){Sr(this._onDisabledChange,F)}_forEachChild(F){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(F){this._isBoxedValue(F)?(this.value=this._pendingValue=F.value,F.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=F}}class le extends Jr{constructor(F,k,ie){super(dr(k),zn(ie,k)),this.controls=F,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(F,k){return this.controls[F]?this.controls[F]:(this.controls[F]=k,k.setParent(this),k._registerOnCollectionChange(this._onCollectionChange),k)}addControl(F,k,ie={}){this.registerControl(F,k),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}removeControl(F,k={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}setControl(F,k,ie={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),delete this.controls[F],k&&this.registerControl(F,k),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}contains(F){return this.controls.hasOwnProperty(F)&&this.controls[F].enabled}setValue(F,k={}){Er(this,F),Object.keys(F).forEach(ie=>{Rr(this,ie),this.controls[ie].setValue(F[ie],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(F,k={}){null!=F&&(Object.keys(F).forEach(ie=>{this.controls[ie]&&this.controls[ie].patchValue(F[ie],{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(F={},k={}){this._forEachChild((ie,Se)=>{ie.reset(F[Se],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this._reduceChildren({},(F,k,ie)=>(F[ie]=Pi(k),F))}_syncPendingControls(){let F=this._reduceChildren(!1,(k,ie)=>!!ie._syncPendingControls()||k);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){Object.keys(this.controls).forEach(k=>{const ie=this.controls[k];ie&&F(ie,k)})}_setUpControls(){this._forEachChild(F=>{F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(F){for(const k of Object.keys(this.controls)){const ie=this.controls[k];if(this.contains(k)&&F(ie))return!0}return!1}_reduceValue(){return this._reduceChildren({},(F,k,ie)=>((k.enabled||this.disabled)&&(F[ie]=k.value),F))}_reduceChildren(F,k){let ie=F;return this._forEachChild((Se,kt)=>{ie=k(ie,Se,kt)}),ie}_allControlsDisabled(){for(const F of Object.keys(this.controls))if(this.controls[F].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Q extends Jr{constructor(F,k,ie){super(dr(k),zn(ie,k)),this.controls=F,this._initObservables(),this._setUpdateStrategy(k),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(F){return this.controls[F]}push(F,k={}){this.controls.push(F),this._registerControl(F),this.updateValueAndValidity({emitEvent:k.emitEvent}),this._onCollectionChange()}insert(F,k,ie={}){this.controls.splice(F,0,k),this._registerControl(k),this.updateValueAndValidity({emitEvent:ie.emitEvent})}removeAt(F,k={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),this.controls.splice(F,1),this.updateValueAndValidity({emitEvent:k.emitEvent})}setControl(F,k,ie={}){this.controls[F]&&this.controls[F]._registerOnCollectionChange(()=>{}),this.controls.splice(F,1),k&&(this.controls.splice(F,0,k),this._registerControl(k)),this.updateValueAndValidity({emitEvent:ie.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(F,k={}){Er(this,F),F.forEach((ie,Se)=>{Rr(this,Se),this.at(Se).setValue(ie,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k)}patchValue(F,k={}){null!=F&&(F.forEach((ie,Se)=>{this.at(Se)&&this.at(Se).patchValue(ie,{onlySelf:!0,emitEvent:k.emitEvent})}),this.updateValueAndValidity(k))}reset(F=[],k={}){this._forEachChild((ie,Se)=>{ie.reset(F[Se],{onlySelf:!0,emitEvent:k.emitEvent})}),this._updatePristine(k),this._updateTouched(k),this.updateValueAndValidity(k)}getRawValue(){return this.controls.map(F=>Pi(F))}clear(F={}){this.controls.length<1||(this._forEachChild(k=>k._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:F.emitEvent}))}_syncPendingControls(){let F=this.controls.reduce((k,ie)=>!!ie._syncPendingControls()||k,!1);return F&&this.updateValueAndValidity({onlySelf:!0}),F}_forEachChild(F){this.controls.forEach((k,ie)=>{F(k,ie)})}_updateValue(){this.value=this.controls.filter(F=>F.enabled||this.disabled).map(F=>F.value)}_anyControls(F){return this.controls.some(k=>k.enabled&&F(k))}_setUpControls(){this._forEachChild(F=>this._registerControl(F))}_allControlsDisabled(){for(const F of this.controls)if(F.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(F){F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange)}}const me={provide:pn,useExisting:(0,p.Gpc)(()=>qe)},$e=(()=>Promise.resolve(null))();let qe=(()=>{class $ extends pn{constructor(k,ie){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new p.vpe,this.form=new le({},Wn(k),Hn(ie))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(k){$e.then(()=>{const ie=this._findContainer(k.path);k.control=ie.registerControl(k.name,k.control),He(k.control,k),k.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(k)})}getControl(k){return this.form.get(k.path)}removeControl(k){$e.then(()=>{const ie=this._findContainer(k.path);ie&&ie.removeControl(k.name),this._directives.delete(k)})}addFormGroup(k){$e.then(()=>{const ie=this._findContainer(k.path),Se=new le({});re(Se,k),ie.registerControl(k.name,Se),Se.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(k){$e.then(()=>{const ie=this._findContainer(k.path);ie&&ie.removeControl(k.name)})}getFormGroup(k){return this.form.get(k.path)}updateModel(k,ie){$e.then(()=>{this.form.get(k.path).setValue(ie)})}setValue(k){this.control.setValue(k)}onSubmit(k){return this.submitted=!0,rr(this.form,this._directives),this.ngSubmit.emit(k),!1}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(k){return k.pop(),k.length?this.form.get(k):this.form}}return $.\u0275fac=function(k){return new(k||$)(p.Y36(At,10),p.Y36(je,10))},$.\u0275dir=p.lG2({type:$,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(k,ie){1&k&&p.NdJ("submit",function(kt){return ie.onSubmit(kt)})("reset",function(){return ie.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([me]),p.qOj]}),$})();const os={provide:An,useExisting:(0,p.Gpc)(()=>Zo)},Fr=(()=>Promise.resolve(null))();let Zo=(()=>{class $ extends An{constructor(k,ie,Se,kt,Kr){super(),this._changeDetectorRef=Kr,this.control=new ve,this._registered=!1,this.update=new p.vpe,this._parent=k,this._setValidators(ie),this._setAsyncValidators(Se),this.valueAccessor=pe(0,kt)}ngOnChanges(k){if(this._checkForErrors(),!this._registered||"name"in k){if(this._registered&&(this._checkName(),this.formDirective)){const ie=k.name.previousValue;this.formDirective.removeControl({name:ie,path:this._getPath(ie)})}this._setUpControl()}"isDisabled"in k&&this._updateDisabled(k),Gn(k,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){He(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(k){Fr.then(()=>{var ie;this.control.setValue(k,{emitViewToModelChange:!1}),null===(ie=this._changeDetectorRef)||void 0===ie||ie.markForCheck()})}_updateDisabled(k){const ie=k.isDisabled.currentValue,Se=""===ie||ie&&"false"!==ie;Fr.then(()=>{var kt;Se&&!this.control.disabled?this.control.disable():!Se&&this.control.disabled&&this.control.enable(),null===(kt=this._changeDetectorRef)||void 0===kt||kt.markForCheck()})}_getPath(k){return this._parent?oe(k,this._parent):[k]}}return $.\u0275fac=function(k){return new(k||$)(p.Y36(pn,9),p.Y36(At,10),p.Y36(je,10),p.Y36(ot,10),p.Y36(p.sBO,8))},$.\u0275dir=p.lG2({type:$,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[p._Bn([os]),p.qOj,p.TTD]}),$})(),la=(()=>{class ${}return $.\u0275fac=function(k){return new(k||$)},$.\u0275dir=p.lG2({type:$,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),$})();const as={provide:ot,useExisting:(0,p.Gpc)(()=>Ws),multi:!0};let Ws=(()=>{class $ extends Je{writeValue(k){this.setProperty("value",null==k?"":k)}registerOnChange(k){this.onChange=ie=>{k(""==ie?null:parseFloat(ie))}}}return $.\u0275fac=function(){let F;return function(ie){return(F||(F=p.n5z($)))(ie||$)}}(),$.\u0275dir=p.lG2({type:$,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(k,ie){1&k&&p.NdJ("input",function(kt){return ie.onChange(kt.target.value)})("blur",function(){return ie.onTouched()})},features:[p._Bn([as]),p.qOj]}),$})(),Ji=(()=>{class ${}return $.\u0275fac=function(k){return new(k||$)},$.\u0275mod=p.oAB({type:$}),$.\u0275inj=p.cJS({}),$})();const us=new p.OlP("NgModelWithFormControlWarning"),Uo={provide:pn,useExisting:(0,p.Gpc)(()=>ki)};let ki=(()=>{class $ extends pn{constructor(k,ie){super(),this.validators=k,this.asyncValidators=ie,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new p.vpe,this._setValidators(k),this._setAsyncValidators(ie)}ngOnChanges(k){this._checkFormPresent(),k.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(k){const ie=this.form.get(k.path);return He(ie,k),ie.updateValueAndValidity({emitEvent:!1}),this.directives.push(k),ie}getControl(k){return this.form.get(k.path)}removeControl(k){gt(k.control||null,k,!1),Sr(this.directives,k)}addFormGroup(k){this._setUpFormContainer(k)}removeFormGroup(k){this._cleanUpFormContainer(k)}getFormGroup(k){return this.form.get(k.path)}addFormArray(k){this._setUpFormContainer(k)}removeFormArray(k){this._cleanUpFormContainer(k)}getFormArray(k){return this.form.get(k.path)}updateModel(k,ie){this.form.get(k.path).setValue(ie)}onSubmit(k){return this.submitted=!0,rr(this.form,this.directives),this.ngSubmit.emit(k),!1}onReset(){this.resetForm()}resetForm(k){this.form.reset(k),this.submitted=!1}_updateDomValue(){this.directives.forEach(k=>{const ie=k.control,Se=this.form.get(k.path);ie!==Se&&(gt(ie||null,k),xn(Se)&&(He(Se,k),k.control=Se))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(k){const ie=this.form.get(k.path);re(ie,k),ie.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(k){if(this.form){const ie=this.form.get(k.path);ie&&function Ve($,F){return Mn($,F)}(ie,k)&&ie.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Gt(this.form,this),this._oldForm&&Mn(this._oldForm,this)}_checkFormPresent(){}}return $.\u0275fac=function(k){return new(k||$)(p.Y36(At,10),p.Y36(je,10))},$.\u0275dir=p.lG2({type:$,selectors:[["","formGroup",""]],hostBindings:function(k,ie){1&k&&p.NdJ("submit",function(kt){return ie.onSubmit(kt)})("reset",function(){return ie.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[p._Bn([Uo]),p.qOj,p.TTD]}),$})();const ls={provide:An,useExisting:(0,p.Gpc)(()=>bi)};let bi=(()=>{class $ extends An{constructor(k,ie,Se,kt,Kr){super(),this._ngModelWarningConfig=Kr,this._added=!1,this.update=new p.vpe,this._ngModelWarningSent=!1,this._parent=k,this._setValidators(ie),this._setAsyncValidators(Se),this.valueAccessor=pe(0,kt)}set isDisabled(k){}ngOnChanges(k){this._added||this._setUpControl(),Gn(k,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(k){this.viewModel=k,this.update.emit(k)}get path(){return oe(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return $._ngModelWarningSentOnce=!1,$.\u0275fac=function(k){return new(k||$)(p.Y36(pn,13),p.Y36(At,10),p.Y36(je,10),p.Y36(ot,10),p.Y36(us,8))},$.\u0275dir=p.lG2({type:$,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[p._Bn([ls]),p.qOj,p.TTD]}),$})(),_s=(()=>{class ${constructor(){this._validator=rn}ngOnChanges(k){if(this.inputName in k){const ie=this.normalizeInput(k[this.inputName].currentValue);this._enabled=this.enabled(ie),this._validator=this._enabled?this.createValidator(ie):rn,this._onChange&&this._onChange()}}validate(k){return this._validator(k)}registerOnValidatorChange(k){this._onChange=k}enabled(k){return null!=k}}return $.\u0275fac=function(k){return new(k||$)},$.\u0275dir=p.lG2({type:$,features:[p.TTD]}),$})();const J={provide:At,useExisting:(0,p.Gpc)(()=>se),multi:!0};let se=(()=>{class $ extends _s{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=k=>function Co($){return null!=$&&!1!==$&&"false"!=`${$}`}(k),this.createValidator=k=>et}enabled(k){return k}}return $.\u0275fac=function(){let F;return function(ie){return(F||(F=p.n5z($)))(ie||$)}}(),$.\u0275dir=p.lG2({type:$,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(k,ie){2&k&&p.uIk("required",ie._enabled?"":null)},inputs:{required:"required"},features:[p._Bn([J]),p.qOj]}),$})(),Li=(()=>{class ${}return $.\u0275fac=function(k){return new(k||$)},$.\u0275mod=p.oAB({type:$}),$.\u0275inj=p.cJS({imports:[[Ji]]}),$})(),Dn=(()=>{class ${}return $.\u0275fac=function(k){return new(k||$)},$.\u0275mod=p.oAB({type:$}),$.\u0275inj=p.cJS({imports:[Li]}),$})(),es=(()=>{class ${static withConfig(k){return{ngModule:$,providers:[{provide:us,useValue:k.warnOnNgModelWithFormControl}]}}}return $.\u0275fac=function(k){return new(k||$)},$.\u0275mod=p.oAB({type:$}),$.\u0275inj=p.cJS({imports:[Li]}),$})()},2313:(ke,ye,S)=>{S.d(ye,{Dx:()=>pn,b2:()=>qn,q6:()=>ur});var p=S(9808),M=S(5e3);class G extends p.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Ee extends G{static makeCurrent(){(0,p.HT)(new Ee)}onAndCancel(he,re,Ve){return he.addEventListener(re,Ve,!1),()=>{he.removeEventListener(re,Ve,!1)}}dispatchEvent(he,re){he.dispatchEvent(re)}remove(he){he.parentNode&&he.parentNode.removeChild(he)}createElement(he,re){return(re=re||this.getDefaultDocument()).createElement(he)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(he){return he.nodeType===Node.ELEMENT_NODE}isShadowRoot(he){return he instanceof DocumentFragment}getGlobalEventTarget(he,re){return"window"===re?window:"document"===re?he:"body"===re?he.body:null}getBaseHref(he){const re=function Te(){return de=de||document.querySelector("base"),de?de.getAttribute("href"):null}();return null==re?null:function ce(te){be=be||document.createElement("a"),be.setAttribute("href",te);const he=be.pathname;return"/"===he.charAt(0)?he:`/${he}`}(re)}resetBaseElement(){de=null}getUserAgent(){return window.navigator.userAgent}getCookie(he){return(0,p.Mx)(document.cookie,he)}}let be,de=null;const _e=new M.OlP("TRANSITION_ID"),fe=[{provide:M.ip1,useFactory:function ee(te,he,re){return()=>{re.get(M.CZH).donePromise.then(()=>{const Ve=(0,p.q)(),ht=he.querySelectorAll(`style[ng-transition="${te}"]`);for(let Lt=0;Lt<ht.length;Lt++)Ve.remove(ht[Lt])})}},deps:[_e,p.K0,M.zs3],multi:!0}];class Ae{static init(){(0,M.VLi)(new Ae)}addToWindow(he){M.dqk.getAngularTestability=(Ve,ht=!0)=>{const Lt=he.findTestabilityInTree(Ve,ht);if(null==Lt)throw new Error("Could not find testability for element.");return Lt},M.dqk.getAllAngularTestabilities=()=>he.getAllTestabilities(),M.dqk.getAllAngularRootElements=()=>he.getAllRootElements(),M.dqk.frameworkStabilizers||(M.dqk.frameworkStabilizers=[]),M.dqk.frameworkStabilizers.push(Ve=>{const ht=M.dqk.getAllAngularTestabilities();let Lt=ht.length,Yt=!1;const Jn=function(Gn){Yt=Yt||Gn,Lt--,0==Lt&&Ve(Yt)};ht.forEach(function(Gn){Gn.whenStable(Jn)})})}findTestabilityInTree(he,re,Ve){if(null==re)return null;const ht=he.getTestability(re);return null!=ht?ht:Ve?(0,p.q)().isShadowRoot(re)?this.findTestabilityInTree(he,re.host,!0):this.findTestabilityInTree(he,re.parentElement,!0):null}}let Ye=(()=>{class te{build(){return new XMLHttpRequest}}return te.\u0275fac=function(re){return new(re||te)},te.\u0275prov=M.Yz7({token:te,factory:te.\u0275fac}),te})();const Je=new M.OlP("EventManagerPlugins");let ot=(()=>{class te{constructor(re,Ve){this._zone=Ve,this._eventNameToPlugin=new Map,re.forEach(ht=>ht.manager=this),this._plugins=re.slice().reverse()}addEventListener(re,Ve,ht){return this._findPluginFor(Ve).addEventListener(re,Ve,ht)}addGlobalEventListener(re,Ve,ht){return this._findPluginFor(Ve).addGlobalEventListener(re,Ve,ht)}getZone(){return this._zone}_findPluginFor(re){const Ve=this._eventNameToPlugin.get(re);if(Ve)return Ve;const ht=this._plugins;for(let Lt=0;Lt<ht.length;Lt++){const Yt=ht[Lt];if(Yt.supports(re))return this._eventNameToPlugin.set(re,Yt),Yt}throw new Error(`No event manager plugin found for event ${re}`)}}return te.\u0275fac=function(re){return new(re||te)(M.LFG(Je),M.LFG(M.R0b))},te.\u0275prov=M.Yz7({token:te,factory:te.\u0275fac}),te})();class bt{constructor(he){this._doc=he}addGlobalEventListener(he,re,Ve){const ht=(0,p.q)().getGlobalEventTarget(this._doc,he);if(!ht)throw new Error(`Unsupported event target ${ht} for event ${re}`);return this.addEventListener(ht,re,Ve)}}let at=(()=>{class te{constructor(){this._stylesSet=new Set}addStyles(re){const Ve=new Set;re.forEach(ht=>{this._stylesSet.has(ht)||(this._stylesSet.add(ht),Ve.add(ht))}),this.onStylesAdded(Ve)}onStylesAdded(re){}getAllStyles(){return Array.from(this._stylesSet)}}return te.\u0275fac=function(re){return new(re||te)},te.\u0275prov=M.Yz7({token:te,factory:te.\u0275fac}),te})(),tt=(()=>{class te extends at{constructor(re){super(),this._doc=re,this._hostNodes=new Map,this._hostNodes.set(re.head,[])}_addStylesToHost(re,Ve,ht){re.forEach(Lt=>{const Yt=this._doc.createElement("style");Yt.textContent=Lt,ht.push(Ve.appendChild(Yt))})}addHost(re){const Ve=[];this._addStylesToHost(this._stylesSet,re,Ve),this._hostNodes.set(re,Ve)}removeHost(re){const Ve=this._hostNodes.get(re);Ve&&Ve.forEach(xe),this._hostNodes.delete(re)}onStylesAdded(re){this._hostNodes.forEach((Ve,ht)=>{this._addStylesToHost(re,ht,Ve)})}ngOnDestroy(){this._hostNodes.forEach(re=>re.forEach(xe))}}return te.\u0275fac=function(re){return new(re||te)(M.LFG(p.K0))},te.\u0275prov=M.Yz7({token:te,factory:te.\u0275fac}),te})();function xe(te){(0,p.q)().remove(te)}const wt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qe=/%COMP%/g;function Fe(te,he,re){for(let Ve=0;Ve<he.length;Ve++){let ht=he[Ve];Array.isArray(ht)?Fe(te,ht,re):(ht=ht.replace(Qe,te),re.push(ht))}return re}function ze(te){return he=>{if("__ngUnwrap__"===he)return te;!1===te(he)&&(he.preventDefault(),he.returnValue=!1)}}let dt=(()=>{class te{constructor(re,Ve,ht){this.eventManager=re,this.sharedStylesHost=Ve,this.appId=ht,this.rendererByCompId=new Map,this.defaultRenderer=new Ke(re)}createRenderer(re,Ve){if(!re||!Ve)return this.defaultRenderer;switch(Ve.encapsulation){case M.ifc.Emulated:{let ht=this.rendererByCompId.get(Ve.id);return ht||(ht=new nn(this.eventManager,this.sharedStylesHost,Ve,this.appId),this.rendererByCompId.set(Ve.id,ht)),ht.applyToHost(re),ht}case 1:case M.ifc.ShadowDom:return new rn(this.eventManager,this.sharedStylesHost,re,Ve);default:if(!this.rendererByCompId.has(Ve.id)){const ht=Fe(Ve.id,Ve.styles,[]);this.sharedStylesHost.addStyles(ht),this.rendererByCompId.set(Ve.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return te.\u0275fac=function(re){return new(re||te)(M.LFG(ot),M.LFG(tt),M.LFG(M.AFp))},te.\u0275prov=M.Yz7({token:te,factory:te.\u0275fac}),te})();class Ke{constructor(he){this.eventManager=he,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(he,re){return re?document.createElementNS(wt[re]||re,he):document.createElement(he)}createComment(he){return document.createComment(he)}createText(he){return document.createTextNode(he)}appendChild(he,re){he.appendChild(re)}insertBefore(he,re,Ve){he&&he.insertBefore(re,Ve)}removeChild(he,re){he&&he.removeChild(re)}selectRootElement(he,re){let Ve="string"==typeof he?document.querySelector(he):he;if(!Ve)throw new Error(`The selector "${he}" did not match any elements`);return re||(Ve.textContent=""),Ve}parentNode(he){return he.parentNode}nextSibling(he){return he.nextSibling}setAttribute(he,re,Ve,ht){if(ht){re=ht+":"+re;const Lt=wt[ht];Lt?he.setAttributeNS(Lt,re,Ve):he.setAttribute(re,Ve)}else he.setAttribute(re,Ve)}removeAttribute(he,re,Ve){if(Ve){const ht=wt[Ve];ht?he.removeAttributeNS(ht,re):he.removeAttribute(`${Ve}:${re}`)}else he.removeAttribute(re)}addClass(he,re){he.classList.add(re)}removeClass(he,re){he.classList.remove(re)}setStyle(he,re,Ve,ht){ht&(M.JOm.DashCase|M.JOm.Important)?he.style.setProperty(re,Ve,ht&M.JOm.Important?"important":""):he.style[re]=Ve}removeStyle(he,re,Ve){Ve&M.JOm.DashCase?he.style.removeProperty(re):he.style[re]=""}setProperty(he,re,Ve){he[re]=Ve}setValue(he,re){he.nodeValue=re}listen(he,re,Ve){return"string"==typeof he?this.eventManager.addGlobalEventListener(he,re,ze(Ve)):this.eventManager.addEventListener(he,re,ze(Ve))}}class nn extends Ke{constructor(he,re,Ve,ht){super(he),this.component=Ve;const Lt=Fe(ht+"-"+Ve.id,Ve.styles,[]);re.addStyles(Lt),this.contentAttr=function it(te){return"_ngcontent-%COMP%".replace(Qe,te)}(ht+"-"+Ve.id),this.hostAttr=function Xe(te){return"_nghost-%COMP%".replace(Qe,te)}(ht+"-"+Ve.id)}applyToHost(he){super.setAttribute(he,this.hostAttr,"")}createElement(he,re){const Ve=super.createElement(he,re);return super.setAttribute(Ve,this.contentAttr,""),Ve}}class rn extends Ke{constructor(he,re,Ve,ht){super(he),this.sharedStylesHost=re,this.hostEl=Ve,this.shadowRoot=Ve.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Lt=Fe(ht.id,ht.styles,[]);for(let Yt=0;Yt<Lt.length;Yt++){const Jn=document.createElement("style");Jn.textContent=Lt[Yt],this.shadowRoot.appendChild(Jn)}}nodeOrShadowRoot(he){return he===this.hostEl?this.shadowRoot:he}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(he,re){return super.appendChild(this.nodeOrShadowRoot(he),re)}insertBefore(he,re,Ve){return super.insertBefore(this.nodeOrShadowRoot(he),re,Ve)}removeChild(he,re){return super.removeChild(this.nodeOrShadowRoot(he),re)}parentNode(he){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(he)))}}let Ot=(()=>{class te extends bt{constructor(re){super(re)}supports(re){return!0}addEventListener(re,Ve,ht){return re.addEventListener(Ve,ht,!1),()=>this.removeEventListener(re,Ve,ht)}removeEventListener(re,Ve,ht){return re.removeEventListener(Ve,ht)}}return te.\u0275fac=function(re){return new(re||te)(M.LFG(p.K0))},te.\u0275prov=M.Yz7({token:te,factory:te.\u0275fac}),te})();const en=["alt","control","meta","shift"],En={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},on={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},sn={alt:te=>te.altKey,control:te=>te.ctrlKey,meta:te=>te.metaKey,shift:te=>te.shiftKey};let Jt=(()=>{class te extends bt{constructor(re){super(re)}supports(re){return null!=te.parseEventName(re)}addEventListener(re,Ve,ht){const Lt=te.parseEventName(Ve),Yt=te.eventCallback(Lt.fullKey,ht,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,p.q)().onAndCancel(re,Lt.domEventName,Yt))}static parseEventName(re){const Ve=re.toLowerCase().split("."),ht=Ve.shift();if(0===Ve.length||"keydown"!==ht&&"keyup"!==ht)return null;const Lt=te._normalizeKey(Ve.pop());let Yt="";if(en.forEach(Gn=>{const fn=Ve.indexOf(Gn);fn>-1&&(Ve.splice(fn,1),Yt+=Gn+".")}),Yt+=Lt,0!=Ve.length||0===Lt.length)return null;const Jn={};return Jn.domEventName=ht,Jn.fullKey=Yt,Jn}static getEventFullKey(re){let Ve="",ht=function Wn(te){let he=te.key;if(null==he){if(he=te.keyIdentifier,null==he)return"Unidentified";he.startsWith("U+")&&(he=String.fromCharCode(parseInt(he.substring(2),16)),3===te.location&&on.hasOwnProperty(he)&&(he=on[he]))}return En[he]||he}(re);return ht=ht.toLowerCase()," "===ht?ht="space":"."===ht&&(ht="dot"),en.forEach(Lt=>{Lt!=ht&&sn[Lt](re)&&(Ve+=Lt+".")}),Ve+=ht,Ve}static eventCallback(re,Ve,ht){return Lt=>{te.getEventFullKey(Lt)===re&&ht.runGuarded(()=>Ve(Lt))}}static _normalizeKey(re){return"esc"===re?"escape":re}}return te.\u0275fac=function(re){return new(re||te)(M.LFG(p.K0))},te.\u0275prov=M.Yz7({token:te,factory:te.\u0275fac}),te})();const ur=(0,M.eFA)(M._c5,"browser",[{provide:M.Lbi,useValue:p.bD},{provide:M.g9A,useValue:function ar(){Ee.makeCurrent(),Ae.init()},multi:!0},{provide:p.K0,useFactory:function Ln(){return(0,M.RDi)(document),document},deps:[]}]),Ar=[{provide:M.zSh,useValue:"root"},{provide:M.qLn,useFactory:function Hn(){return new M.qLn},deps:[]},{provide:Je,useClass:Ot,multi:!0,deps:[p.K0,M.R0b,M.Lbi]},{provide:Je,useClass:Jt,multi:!0,deps:[p.K0]},{provide:dt,useClass:dt,deps:[ot,tt,M.AFp]},{provide:M.FYo,useExisting:dt},{provide:at,useExisting:tt},{provide:tt,useClass:tt,deps:[p.K0]},{provide:M.dDg,useClass:M.dDg,deps:[M.R0b]},{provide:ot,useClass:ot,deps:[Je,M.R0b]},{provide:p.JF,useClass:Ye,deps:[]}];let qn=(()=>{class te{constructor(re){if(re)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(re){return{ngModule:te,providers:[{provide:M.AFp,useValue:re.appId},{provide:_e,useExisting:M.AFp},fe]}}}return te.\u0275fac=function(re){return new(re||te)(M.LFG(te,12))},te.\u0275mod=M.oAB({type:te}),te.\u0275inj=M.cJS({providers:Ar,imports:[p.ez,M.hGG]}),te})(),pn=(()=>{class te{constructor(re){this._doc=re}getTitle(){return this._doc.title}setTitle(re){this._doc.title=re||""}}return te.\u0275fac=function(re){return new(re||te)(M.LFG(p.K0))},te.\u0275prov=M.Yz7({token:te,factory:function(re){let Ve=null;return Ve=re?new re:function An(){return new pn((0,M.LFG)(p.K0))}(),Ve},providedIn:"root"}),te})();"undefined"!=typeof window&&window},4232:(ke,ye,S)=>{S.d(ye,{F0:()=>kr,rH:()=>Vs,yS:()=>zs,Bz:()=>pt,lC:()=>Co});var p=S(5e3),M=S(8306),G=S(4742),Ee=S(8996),de=S(4671),Te=S(3268),be=S(7669),ce=S(1810),_e=S(5403),ee=S(9672);function Ye(R,C,I){R?(0,ee.f)(I,R,C):C()}var Je=S(576);function ot(R,C){const I=(0,Je.m)(R)?R:()=>R,L=W=>W.error(I());return new M.y(C?W=>C.schedule(L,0,W):L)}var bt=S(8421);function at(R){return new M.y(C=>{(0,bt.Xf)(R()).subscribe(C)})}var tt=S(727),xe=S(4482);function wt(){return(0,xe.e)((R,C)=>{let I=null;R._refCount++;const L=(0,_e.x)(C,void 0,void 0,void 0,()=>{if(!R||R._refCount<=0||0<--R._refCount)return void(I=null);const W=R._connection,q=I;I=null,W&&(!q||W===q)&&W.unsubscribe(),C.unsubscribe()});R.subscribe(L),L.closed||(I=R.connect())})}class Qe extends M.y{constructor(C,I){super(),this.source=C,this.subjectFactory=I,this._subject=null,this._refCount=0,this._connection=null,(0,xe.A)(C)&&(this.lift=C.lift)}_subscribe(C){return this.getSubject().subscribe(C)}getSubject(){const C=this._subject;return(!C||C.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:C}=this;this._subject=this._connection=null,null==C||C.unsubscribe()}connect(){let C=this._connection;if(!C){C=this._connection=new tt.w0;const I=this.getSubject();C.add(this.source.subscribe((0,_e.x)(I,void 0,()=>{this._teardown(),I.complete()},L=>{this._teardown(),I.error(L)},()=>this._teardown()))),C.closed&&(this._connection=null,C=tt.w0.EMPTY)}return C}refCount(){return wt()(this)}}var Ge=S(9646),ut=S(1135),At=S(6805),je=S(7272),it=S(515),Xe=S(7579),Fe=S(9300);function ze(R){return R<=0?()=>it.E:(0,xe.e)((C,I)=>{let L=[];C.subscribe((0,_e.x)(I,W=>{L.push(W),R<L.length&&L.shift()},()=>{for(const W of L)I.next(W);I.complete()},void 0,()=>{L=null}))})}var et=S(8068),dt=S(6590),St=S(4004),nn=S(3900),rn=S(5698),Ot=S(8675),en=S(5026),Cn=S(262),En=S(4351),on=S(590),sn=S(5577),Jt=S(8505),Wn=S(8189),ar=S(9808);class Hn{constructor(C,I){this.id=C,this.url=I}}class Ln extends Hn{constructor(C,I,L="imperative",W=null){super(C,I),this.navigationTrigger=L,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Cr extends Hn{constructor(C,I,L){super(C,I),this.urlAfterRedirects=L}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ur extends Hn{constructor(C,I,L){super(C,I),this.reason=L}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ar extends Hn{constructor(C,I,L){super(C,I),this.error=L}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qn extends Hn{constructor(C,I,L,W){super(C,I),this.urlAfterRedirects=L,this.state=W}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class jr extends Hn{constructor(C,I,L,W){super(C,I),this.urlAfterRedirects=L,this.state=W}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ut extends Hn{constructor(C,I,L,W,q){super(C,I),this.urlAfterRedirects=L,this.state=W,this.shouldActivate=q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pr extends Hn{constructor(C,I,L,W){super(C,I),this.urlAfterRedirects=L,this.state=W}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class An extends Hn{constructor(C,I,L,W){super(C,I),this.urlAfterRedirects=L,this.state=W}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pn{constructor(C){this.route=C}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dr{constructor(C){this.route=C}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hr{constructor(C){this.snapshot=C}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gr{constructor(C){this.snapshot=C}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tn{constructor(C){this.snapshot=C}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class vr{constructor(C){this.snapshot=C}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $r{constructor(C,I,L){this.routerEvent=C,this.position=I,this.anchor=L}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Vt="primary";class an{constructor(C){this.params=C||{}}has(C){return Object.prototype.hasOwnProperty.call(this.params,C)}get(C){if(this.has(C)){const I=this.params[C];return Array.isArray(I)?I[0]:I}return null}getAll(C){if(this.has(C)){const I=this.params[C];return Array.isArray(I)?I:[I]}return[]}get keys(){return Object.keys(this.params)}}function Wt(R){return new an(R)}const Or="ngNavigationCancelingError";function zr(R){const C=Error("NavigationCancelingError: "+R);return C[Or]=!0,C}function di(R,C,I){const L=I.path.split("/");if(L.length>R.length||"full"===I.pathMatch&&(C.hasChildren()||L.length<R.length))return null;const W={};for(let q=0;q<L.length;q++){const Ce=L[q],Oe=R[q];if(Ce.startsWith(":"))W[Ce.substring(1)]=Oe;else if(Ce!==Oe.path)return null}return{consumed:R.slice(0,L.length),posParams:W}}function jn(R,C){const I=R?Object.keys(R):void 0,L=C?Object.keys(C):void 0;if(!I||!L||I.length!=L.length)return!1;let W;for(let q=0;q<I.length;q++)if(W=I[q],!Me(R[W],C[W]))return!1;return!0}function Me(R,C){if(Array.isArray(R)&&Array.isArray(C)){if(R.length!==C.length)return!1;const I=[...R].sort(),L=[...C].sort();return I.every((W,q)=>L[q]===W)}return R===C}function Pe(R){return Array.prototype.concat.apply([],R)}function Ue(R){return R.length>0?R[R.length-1]:null}function ue(R,C){for(const I in R)R.hasOwnProperty(I)&&C(R[I],I)}function j(R){return(0,p.CqO)(R)?R:(0,p.QGY)(R)?(0,Ee.D)(Promise.resolve(R)):(0,Ge.of)(R)}const He={exact:function Gt(R,C,I){if(!Lt(R.segments,C.segments)||!te(R.segments,C.segments,I)||R.numberOfChildren!==C.numberOfChildren)return!1;for(const L in C.children)if(!R.children[L]||!Gt(R.children[L],C.children[L],I))return!1;return!0},subset:st},gt={exact:function wn(R,C){return jn(R,C)},subset:function Mn(R,C){return Object.keys(C).length<=Object.keys(R).length&&Object.keys(C).every(I=>Me(R[I],C[I]))},ignored:()=>!0};function Ht(R,C,I){return He[I.paths](R.root,C.root,I.matrixParams)&&gt[I.queryParams](R.queryParams,C.queryParams)&&!("exact"===I.fragment&&R.fragment!==C.fragment)}function st(R,C,I){return Le(R,C,C.segments,I)}function Le(R,C,I,L){if(R.segments.length>I.length){const W=R.segments.slice(0,I.length);return!(!Lt(W,I)||C.hasChildren()||!te(W,I,L))}if(R.segments.length===I.length){if(!Lt(R.segments,I)||!te(R.segments,I,L))return!1;for(const W in C.children)if(!R.children[W]||!st(R.children[W],C.children[W],L))return!1;return!0}{const W=I.slice(0,R.segments.length),q=I.slice(R.segments.length);return!!(Lt(R.segments,W)&&te(R.segments,W,L)&&R.children[Vt])&&Le(R.children[Vt],C,q,L)}}function te(R,C,I){return C.every((L,W)=>gt[I](R[W].parameters,L.parameters))}class he{constructor(C,I,L){this.root=C,this.queryParams=I,this.fragment=L}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wt(this.queryParams)),this._queryParamMap}toString(){return fn.serialize(this)}}class re{constructor(C,I){this.segments=C,this.children=I,this.parent=null,ue(I,(L,W)=>L.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rr(this)}}class Ve{constructor(C,I){this.path=C,this.parameters=I}get parameterMap(){return this._parameterMap||(this._parameterMap=Wt(this.parameters)),this._parameterMap}toString(){return Qr(this)}}function Lt(R,C){return R.length===C.length&&R.every((I,L)=>I.path===C[L].path)}class Jn{}class Gn{parse(C){const I=new Qi(C);return new he(I.parseRootSegment(),I.parseQueryParams(),I.parseFragment())}serialize(C){const I=`/${pe(C.root,!0)}`,L=function dr(R){const C=Object.keys(R).map(I=>{const L=R[I];return Array.isArray(L)?L.map(W=>`${Oi(I)}=${Oi(W)}`).join("&"):`${Oi(I)}=${Oi(L)}`}).filter(I=>!!I);return C.length?`?${C.join("&")}`:""}(C.queryParams);return`${I}${L}${"string"==typeof C.fragment?`#${function oi(R){return encodeURI(R)}(C.fragment)}`:""}`}}const fn=new Gn;function rr(R){return R.segments.map(C=>Qr(C)).join("/")}function pe(R,C){if(!R.hasChildren())return rr(R);if(C){const I=R.children[Vt]?pe(R.children[Vt],!1):"",L=[];return ue(R.children,(W,q)=>{q!==Vt&&L.push(`${q}:${pe(W,!1)}`)}),L.length>0?`${I}(${L.join("//")})`:I}{const I=function Yt(R,C){let I=[];return ue(R.children,(L,W)=>{W===Vt&&(I=I.concat(C(L,W)))}),ue(R.children,(L,W)=>{W!==Vt&&(I=I.concat(C(L,W)))}),I}(R,(L,W)=>W===Vt?[pe(R.children[Vt],!1)]:[`${W}:${pe(L,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[Vt]?`${rr(R)}/${I[0]}`:`${rr(R)}/(${I.join("//")})`}}function Sr(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Oi(R){return Sr(R).replace(/%3B/gi,";")}function Pt(R){return Sr(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _n(R){return decodeURIComponent(R)}function ir(R){return _n(R.replace(/\+/g,"%20"))}function Qr(R){return`${Pt(R.path)}${function Ei(R){return Object.keys(R).map(C=>`;${Pt(C)}=${Pt(R[C])}`).join("")}(R.parameters)}`}const wi=/^[^\/()?;=#]+/;function zn(R){const C=R.match(wi);return C?C[0]:""}const mi=/^[^=?&#]+/,xn=/^[^&#]+/;class Qi{constructor(C){this.url=C,this.remaining=C}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new re([],{}):new re([],this.parseChildren())}parseQueryParams(){const C={};if(this.consumeOptional("?"))do{this.parseQueryParam(C)}while(this.consumeOptional("&"));return C}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const C=[];for(this.peekStartsWith("(")||C.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),C.push(this.parseSegment());let I={};this.peekStartsWith("/(")&&(this.capture("/"),I=this.parseParens(!0));let L={};return this.peekStartsWith("(")&&(L=this.parseParens(!1)),(C.length>0||Object.keys(I).length>0)&&(L[Vt]=new re(C,I)),L}parseSegment(){const C=zn(this.remaining);if(""===C&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(C),new Ve(_n(C),this.parseMatrixParams())}parseMatrixParams(){const C={};for(;this.consumeOptional(";");)this.parseParam(C);return C}parseParam(C){const I=zn(this.remaining);if(!I)return;this.capture(I);let L="";if(this.consumeOptional("=")){const W=zn(this.remaining);W&&(L=W,this.capture(L))}C[_n(I)]=_n(L)}parseQueryParam(C){const I=function Pr(R){const C=R.match(mi);return C?C[0]:""}(this.remaining);if(!I)return;this.capture(I);let L="";if(this.consumeOptional("=")){const Ce=function ti(R){const C=R.match(xn);return C?C[0]:""}(this.remaining);Ce&&(L=Ce,this.capture(L))}const W=ir(I),q=ir(L);if(C.hasOwnProperty(W)){let Ce=C[W];Array.isArray(Ce)||(Ce=[Ce],C[W]=Ce),Ce.push(q)}else C[W]=q}parseParens(C){const I={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const L=zn(this.remaining),W=this.remaining[L.length];if("/"!==W&&")"!==W&&";"!==W)throw new Error(`Cannot parse url '${this.url}'`);let q;L.indexOf(":")>-1?(q=L.substr(0,L.indexOf(":")),this.capture(q),this.capture(":")):C&&(q=Vt);const Ce=this.parseChildren();I[q]=1===Object.keys(Ce).length?Ce[Vt]:new re([],Ce),this.consumeOptional("//")}return I}peekStartsWith(C){return this.remaining.startsWith(C)}consumeOptional(C){return!!this.peekStartsWith(C)&&(this.remaining=this.remaining.substring(C.length),!0)}capture(C){if(!this.consumeOptional(C))throw new Error(`Expected "${C}".`)}}class Pi{constructor(C){this._root=C}get root(){return this._root.value}parent(C){const I=this.pathFromRoot(C);return I.length>1?I[I.length-2]:null}children(C){const I=Rr(C,this._root);return I?I.children.map(L=>L.value):[]}firstChild(C){const I=Rr(C,this._root);return I&&I.children.length>0?I.children[0].value:null}siblings(C){const I=Er(C,this._root);return I.length<2?[]:I[I.length-2].children.map(W=>W.value).filter(W=>W!==C)}pathFromRoot(C){return Er(C,this._root).map(I=>I.value)}}function Rr(R,C){if(R===C.value)return C;for(const I of C.children){const L=Rr(R,I);if(L)return L}return null}function Er(R,C){if(R===C.value)return[C];for(const I of C.children){const L=Er(R,I);if(L.length)return L.unshift(C),L}return[]}class Jr{constructor(C,I){this.value=C,this.children=I}toString(){return`TreeNode(${this.value})`}}function ve(R){const C={};return R&&R.children.forEach(I=>C[I.value.outlet]=I),C}class le extends Pi{constructor(C,I){super(C),this.snapshot=I,gn(this,C)}toString(){return this.snapshot.toString()}}function Q(R,C){const I=function me(R,C){const Ce=new yn([],{},{},"",{},Vt,C,null,R.root,-1,{});return new Nn("",new Jr(Ce,[]))}(R,C),L=new ut.X([new Ve("",{})]),W=new ut.X({}),q=new ut.X({}),Ce=new ut.X({}),Oe=new ut.X(""),Tt=new $e(L,W,Ce,Oe,q,Vt,C,I.root);return Tt.snapshot=I.root,new le(new Jr(Tt,[]),I)}class $e{constructor(C,I,L,W,q,Ce,Oe,Tt){this.url=C,this.params=I,this.queryParams=L,this.fragment=W,this.data=q,this.outlet=Ce,this.component=Oe,this._futureSnapshot=Tt}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,St.U)(C=>Wt(C)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,St.U)(C=>Wt(C)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qe(R,C="emptyOnly"){const I=R.pathFromRoot;let L=0;if("always"!==C)for(L=I.length-1;L>=1;){const W=I[L],q=I[L-1];if(W.routeConfig&&""===W.routeConfig.path)L--;else{if(q.component)break;L--}}return function Rt(R){return R.reduce((C,I)=>({params:Object.assign(Object.assign({},C.params),I.params),data:Object.assign(Object.assign({},C.data),I.data),resolve:Object.assign(Object.assign({},C.resolve),I._resolvedData)}),{params:{},data:{},resolve:{}})}(I.slice(L))}class yn{constructor(C,I,L,W,q,Ce,Oe,Tt,Xt,qt,vn){this.url=C,this.params=I,this.queryParams=L,this.fragment=W,this.data=q,this.outlet=Ce,this.component=Oe,this.routeConfig=Tt,this._urlSegment=Xt,this._lastPathIndex=qt,this._resolve=vn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Wt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Wt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(L=>L.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Nn extends Pi{constructor(C,I){super(I),this.url=C,gn(this,I)}toString(){return Sn(this._root)}}function gn(R,C){C.value._routerState=R,C.children.forEach(I=>gn(R,I))}function Sn(R){const C=R.children.length>0?` { ${R.children.map(Sn).join(", ")} } `:"";return`${R.value}${C}`}function ai(R){if(R.snapshot){const C=R.snapshot,I=R._futureSnapshot;R.snapshot=I,jn(C.queryParams,I.queryParams)||R.queryParams.next(I.queryParams),C.fragment!==I.fragment&&R.fragment.next(I.fragment),jn(C.params,I.params)||R.params.next(I.params),function gr(R,C){if(R.length!==C.length)return!1;for(let I=0;I<R.length;++I)if(!jn(R[I],C[I]))return!1;return!0}(C.url,I.url)||R.url.next(I.url),jn(C.data,I.data)||R.data.next(I.data)}else R.snapshot=R._futureSnapshot,R.data.next(R._futureSnapshot.data)}function hr(R,C){const I=jn(R.params,C.params)&&function ht(R,C){return Lt(R,C)&&R.every((I,L)=>jn(I.parameters,C[L].parameters))}(R.url,C.url);return I&&!(!R.parent!=!C.parent)&&(!R.parent||hr(R.parent,C.parent))}function Fr(R,C,I){if(I&&R.shouldReuseRoute(C.value,I.value.snapshot)){const L=I.value;L._futureSnapshot=C.value;const W=function Zo(R,C,I){return C.children.map(L=>{for(const W of I.children)if(R.shouldReuseRoute(L.value,W.value.snapshot))return Fr(R,L,W);return Fr(R,L)})}(R,C,I);return new Jr(L,W)}{if(R.shouldAttach(C.value)){const q=R.retrieve(C.value);if(null!==q){const Ce=q.route;return Ce.value._futureSnapshot=C.value,Ce.children=C.children.map(Oe=>Fr(R,Oe)),Ce}}const L=function la(R){return new $e(new ut.X(R.url),new ut.X(R.params),new ut.X(R.queryParams),new ut.X(R.fragment),new ut.X(R.data),R.outlet,R.component,R)}(C.value),W=C.children.map(q=>Fr(R,q));return new Jr(L,W)}}function Ws(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function ks(R){return"object"==typeof R&&null!=R&&R.outlets}function Fo(R,C,I,L,W){let q={};if(L&&ue(L,(Oe,Tt)=>{q[Tt]=Array.isArray(Oe)?Oe.map(Xt=>`${Xt}`):`${Oe}`}),R===C)return new he(I,q,W);const Ce=Ji(R,C,I);return new he(Ce,q,W)}function Ji(R,C,I){const L={};return ue(R.children,(W,q)=>{L[q]=W===C?I:Ji(W,C,I)}),new re(R.segments,L)}class uo{constructor(C,I,L){if(this.isAbsolute=C,this.numberOfDoubleDots=I,this.commands=L,C&&L.length>0&&Ws(L[0]))throw new Error("Root segment cannot have matrix parameters");const W=L.find(ks);if(W&&W!==Ue(L))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ca{constructor(C,I,L){this.segmentGroup=C,this.processChildren=I,this.index=L}}function Lo(R,C,I){if(R||(R=new re([],{})),0===R.segments.length&&R.hasChildren())return Uo(R,C,I);const L=function ki(R,C,I){let L=0,W=C;const q={match:!1,pathIndex:0,commandIndex:0};for(;W<R.segments.length;){if(L>=I.length)return q;const Ce=R.segments[W],Oe=I[L];if(ks(Oe))break;const Tt=`${Oe}`,Xt=L<I.length-1?I[L+1]:null;if(W>0&&void 0===Tt)break;if(Tt&&Xt&&"object"==typeof Xt&&void 0===Xt.outlets){if(!Ii(Tt,Xt,Ce))return q;L+=2}else{if(!Ii(Tt,{},Ce))return q;L++}W++}return{match:!0,pathIndex:W,commandIndex:L}}(R,C,I),W=I.slice(L.commandIndex);if(L.match&&L.pathIndex<R.segments.length){const q=new re(R.segments.slice(0,L.pathIndex),{});return q.children[Vt]=new re(R.segments.slice(L.pathIndex),R.children),Uo(q,0,W)}return L.match&&0===W.length?new re(R.segments,{}):L.match&&!R.hasChildren()?lo(R,C,I):L.match?Uo(R,0,W):lo(R,C,I)}function Uo(R,C,I){if(0===I.length)return new re(R.segments,{});{const L=function Ni(R){return ks(R[0])?R[0].outlets:{[Vt]:R}}(I),W={};return ue(L,(q,Ce)=>{"string"==typeof q&&(q=[q]),null!==q&&(W[Ce]=Lo(R.children[Ce],C,q))}),ue(R.children,(q,Ce)=>{void 0===L[Ce]&&(W[Ce]=q)}),new re(R.segments,W)}}function lo(R,C,I){const L=R.segments.slice(0,C);let W=0;for(;W<I.length;){const q=I[W];if(ks(q)){const Tt=bs(q.outlets);return new re(L,Tt)}if(0===W&&Ws(I[0])){L.push(new Ve(R.segments[C].path,Di(I[0]))),W++;continue}const Ce=ks(q)?q.outlets[Vt]:`${q}`,Oe=W<I.length-1?I[W+1]:null;Ce&&Oe&&Ws(Oe)?(L.push(new Ve(Ce,Di(Oe))),W+=2):(L.push(new Ve(Ce,{})),W++)}return new re(L,{})}function bs(R){const C={};return ue(R,(I,L)=>{"string"==typeof I&&(I=[I]),null!==I&&(C[L]=lo(new re([],{}),0,I))}),C}function Di(R){const C={};return ue(R,(I,L)=>C[L]=`${I}`),C}function Ii(R,C,I){return R==I.path&&jn(C,I.parameters)}class ls{constructor(C,I,L,W){this.routeReuseStrategy=C,this.futureState=I,this.currState=L,this.forwardEvent=W}activate(C){const I=this.futureState._root,L=this.currState?this.currState._root:null;this.deactivateChildRoutes(I,L,C),ai(this.futureState.root),this.activateChildRoutes(I,L,C)}deactivateChildRoutes(C,I,L){const W=ve(I);C.children.forEach(q=>{const Ce=q.value.outlet;this.deactivateRoutes(q,W[Ce],L),delete W[Ce]}),ue(W,(q,Ce)=>{this.deactivateRouteAndItsChildren(q,L)})}deactivateRoutes(C,I,L){const W=C.value,q=I?I.value:null;if(W===q)if(W.component){const Ce=L.getContext(W.outlet);Ce&&this.deactivateChildRoutes(C,I,Ce.children)}else this.deactivateChildRoutes(C,I,L);else q&&this.deactivateRouteAndItsChildren(I,L)}deactivateRouteAndItsChildren(C,I){C.value.component&&this.routeReuseStrategy.shouldDetach(C.value.snapshot)?this.detachAndStoreRouteSubtree(C,I):this.deactivateRouteAndOutlet(C,I)}detachAndStoreRouteSubtree(C,I){const L=I.getContext(C.value.outlet),W=L&&C.value.component?L.children:I,q=ve(C);for(const Ce of Object.keys(q))this.deactivateRouteAndItsChildren(q[Ce],W);if(L&&L.outlet){const Ce=L.outlet.detach(),Oe=L.children.onOutletDeactivated();this.routeReuseStrategy.store(C.value.snapshot,{componentRef:Ce,route:C,contexts:Oe})}}deactivateRouteAndOutlet(C,I){const L=I.getContext(C.value.outlet),W=L&&C.value.component?L.children:I,q=ve(C);for(const Ce of Object.keys(q))this.deactivateRouteAndItsChildren(q[Ce],W);L&&L.outlet&&(L.outlet.deactivate(),L.children.onOutletDeactivated(),L.attachRef=null,L.resolver=null,L.route=null)}activateChildRoutes(C,I,L){const W=ve(I);C.children.forEach(q=>{this.activateRoutes(q,W[q.value.outlet],L),this.forwardEvent(new vr(q.value.snapshot))}),C.children.length&&this.forwardEvent(new Gr(C.value.snapshot))}activateRoutes(C,I,L){const W=C.value,q=I?I.value:null;if(ai(W),W===q)if(W.component){const Ce=L.getOrCreateContext(W.outlet);this.activateChildRoutes(C,I,Ce.children)}else this.activateChildRoutes(C,I,L);else if(W.component){const Ce=L.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const Oe=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),Ce.children.onOutletReAttached(Oe.contexts),Ce.attachRef=Oe.componentRef,Ce.route=Oe.route.value,Ce.outlet&&Ce.outlet.attach(Oe.componentRef,Oe.route.value),ai(Oe.route.value),this.activateChildRoutes(C,null,Ce.children)}else{const Oe=function bi(R){for(let C=R.parent;C;C=C.parent){const I=C.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig;if(I&&I.component)return null}return null}(W.snapshot),Tt=Oe?Oe.module.componentFactoryResolver:null;Ce.attachRef=null,Ce.route=W,Ce.resolver=Tt,Ce.outlet&&Ce.outlet.activateWith(W,Tt),this.activateChildRoutes(C,null,Ce.children)}}else this.activateChildRoutes(C,null,L)}}class Hs{constructor(C,I){this.routes=C,this.module=I}}function ps(R){return"function"==typeof R}function ms(R){return R instanceof he}const ui=Symbol("INITIAL_VALUE");function Xi(){return(0,nn.w)(R=>function fe(...R){const C=(0,be.yG)(R),I=(0,be.jO)(R),{args:L,keys:W}=(0,G.D)(R);if(0===L.length)return(0,Ee.D)([],C);const q=new M.y(function Ae(R,C,I=de.y){return L=>{Ye(C,()=>{const{length:W}=R,q=new Array(W);let Ce=W,Oe=W;for(let Tt=0;Tt<W;Tt++)Ye(C,()=>{const Xt=(0,Ee.D)(R[Tt],C);let qt=!1;Xt.subscribe((0,_e.x)(L,vn=>{q[Tt]=vn,qt||(qt=!0,Oe--),Oe||L.next(I(q.slice()))},()=>{--Ce||L.complete()}))},L)},L)}}(L,C,W?Ce=>(0,ce.n)(W,Ce):de.y));return I?q.pipe((0,Te.Z)(I)):q}(R.map(C=>C.pipe((0,rn.q)(1),(0,Ot.O)(ui)))).pipe((0,en.R)((C,I)=>{let L=!1;return I.reduce((W,q,Ce)=>W!==ui?W:(q===ui&&(L=!0),L||!1!==q&&Ce!==I.length-1&&!ms(q)?W:q),C)},ui),(0,Fe.h)(C=>C!==ui),(0,St.U)(C=>ms(C)?C:!0===C),(0,rn.q)(1)))}class Ca{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ts,this.attachRef=null}}class Ts{constructor(){this.contexts=new Map}onChildOutletCreated(C,I){const L=this.getOrCreateContext(C);L.outlet=I,this.contexts.set(C,L)}onChildOutletDestroyed(C){const I=this.getContext(C);I&&(I.outlet=null,I.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let I=this.getContext(C);return I||(I=new Ca,this.contexts.set(C,I)),I}getContext(C){return this.contexts.get(C)||null}}let Co=(()=>{class R{constructor(I,L,W,q,Ce){this.parentContexts=I,this.location=L,this.resolver=W,this.changeDetector=Ce,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=q||Vt,I.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const I=this.parentContexts.getContext(this.name);I&&I.route&&(I.attachRef?this.attach(I.attachRef,I.route):this.activateWith(I.route,I.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const I=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(I.instance),I}attach(I,L){this.activated=I,this._activatedRoute=L,this.location.insert(I.hostView),this.attachEvents.emit(I.instance)}deactivate(){if(this.activated){const I=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(I)}}activateWith(I,L){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=I;const Ce=(L=L||this.resolver).resolveComponentFactory(I._futureSnapshot.routeConfig.component),Oe=this.parentContexts.getOrCreateContext(this.name).children,Tt=new Do(I,Oe,this.location.injector);this.activated=this.location.createComponent(Ce,this.location.length,Tt),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return R.\u0275fac=function(I){return new(I||R)(p.Y36(Ts),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},R.\u0275dir=p.lG2({type:R,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),R})();class Do{constructor(C,I,L){this.route=C,this.childContexts=I,this.parent=L}get(C,I){return C===$e?this.route:C===Ts?this.childContexts:this.parent.get(C,I)}}let _s=(()=>{class R{}return R.\u0275fac=function(I){return new(I||R)},R.\u0275cmp=p.Xpm({type:R,selectors:[["ng-component"]],decls:1,vars:0,template:function(I,L){1&I&&p._UZ(0,"router-outlet")},directives:[Co],encapsulation:2}),R})();function ys(R,C=""){for(let I=0;I<R.length;I++){const L=R[I];Gs(L,mr(C,L))}}function Gs(R,C){R.children&&ys(R.children,C)}function mr(R,C){return C?R||C.path?R&&!C.path?`${R}/`:!R&&C.path?C.path:`${R}/${C.path}`:"":R}function V(R){const C=R.children&&R.children.map(V),I=C?Object.assign(Object.assign({},R),{children:C}):Object.assign({},R);return!I.component&&(C||I.loadChildren)&&I.outlet&&I.outlet!==Vt&&(I.component=_s),I}function J(R){return R.outlet||Vt}function U(R,C){const I=R.filter(L=>J(L)===C);return I.push(...R.filter(L=>J(L)!==C)),I}const se={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ne(R,C,I){var L;if(""===C.path)return"full"===C.pathMatch&&(R.hasChildren()||I.length>0)?Object.assign({},se):{matched:!0,consumedSegments:[],remainingSegments:I,parameters:{},positionalParamSegments:{}};const q=(C.matcher||di)(I,R,C);if(!q)return Object.assign({},se);const Ce={};ue(q.posParams,(Tt,Xt)=>{Ce[Xt]=Tt.path});const Oe=q.consumed.length>0?Object.assign(Object.assign({},Ce),q.consumed[q.consumed.length-1].parameters):Ce;return{matched:!0,consumedSegments:q.consumed,remainingSegments:I.slice(q.consumed.length),parameters:Oe,positionalParamSegments:null!==(L=q.posParams)&&void 0!==L?L:{}}}function yt(R,C,I,L,W="corrected"){if(I.length>0&&function In(R,C,I){return I.some(L=>Un(R,C,L)&&J(L)!==Vt)}(R,I,L)){const Ce=new re(C,function hn(R,C,I,L){const W={};W[Vt]=L,L._sourceSegment=R,L._segmentIndexShift=C.length;for(const q of I)if(""===q.path&&J(q)!==Vt){const Ce=new re([],{});Ce._sourceSegment=R,Ce._segmentIndexShift=C.length,W[J(q)]=Ce}return W}(R,C,L,new re(I,R.children)));return Ce._sourceSegment=R,Ce._segmentIndexShift=C.length,{segmentGroup:Ce,slicedSegments:[]}}if(0===I.length&&function _r(R,C,I){return I.some(L=>Un(R,C,L))}(R,I,L)){const Ce=new re(R.segments,function Mt(R,C,I,L,W,q){const Ce={};for(const Oe of L)if(Un(R,I,Oe)&&!W[J(Oe)]){const Tt=new re([],{});Tt._sourceSegment=R,Tt._segmentIndexShift="legacy"===q?R.segments.length:C.length,Ce[J(Oe)]=Tt}return Object.assign(Object.assign({},W),Ce)}(R,C,I,L,R.children,W));return Ce._sourceSegment=R,Ce._segmentIndexShift=C.length,{segmentGroup:Ce,slicedSegments:I}}const q=new re(R.segments,R.children);return q._sourceSegment=R,q._segmentIndexShift=C.length,{segmentGroup:q,slicedSegments:I}}function Un(R,C,I){return(!(R.hasChildren()||C.length>0)||"full"!==I.pathMatch)&&""===I.path}function lr(R,C,I,L){return!!(J(R)===L||L!==Vt&&Un(C,I,R))&&("**"===R.path||Ne(C,R,I).matched)}function Lr(R,C,I){return 0===C.length&&!R.children[I]}class wr{constructor(C){this.segmentGroup=C||null}}class Nr{constructor(C){this.urlTree=C}}function vs(R){return ot(new wr(R))}function Li(R){return ot(new Nr(R))}class bo{constructor(C,I,L,W,q){this.configLoader=I,this.urlSerializer=L,this.urlTree=W,this.config=q,this.allowRedirects=!0,this.ngModule=C.get(p.h0i)}apply(){const C=yt(this.urlTree.root,[],[],this.config).segmentGroup,I=new re(C.segments,C.children);return this.expandSegmentGroup(this.ngModule,this.config,I,Vt).pipe((0,St.U)(q=>this.createUrlTree($(q),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Cn.K)(q=>{if(q instanceof Nr)return this.allowRedirects=!1,this.match(q.urlTree);throw q instanceof wr?this.noMatchError(q):q}))}match(C){return this.expandSegmentGroup(this.ngModule,this.config,C.root,Vt).pipe((0,St.U)(W=>this.createUrlTree($(W),C.queryParams,C.fragment))).pipe((0,Cn.K)(W=>{throw W instanceof wr?this.noMatchError(W):W}))}noMatchError(C){return new Error(`Cannot match any routes. URL Segment: '${C.segmentGroup}'`)}createUrlTree(C,I,L){const W=C.segments.length>0?new re([],{[Vt]:C}):C;return new he(W,I,L)}expandSegmentGroup(C,I,L,W){return 0===L.segments.length&&L.hasChildren()?this.expandChildren(C,I,L).pipe((0,St.U)(q=>new re([],q))):this.expandSegment(C,L,I,L.segments,W,!0)}expandChildren(C,I,L){const W=[];for(const q of Object.keys(L.children))"primary"===q?W.unshift(q):W.push(q);return(0,Ee.D)(W).pipe((0,En.b)(q=>{const Ce=L.children[q],Oe=U(I,q);return this.expandSegmentGroup(C,Oe,Ce,q).pipe((0,St.U)(Tt=>({segment:Tt,outlet:q})))}),(0,en.R)((q,Ce)=>(q[Ce.outlet]=Ce.segment,q),{}),function Ke(R,C){const I=arguments.length>=2;return L=>L.pipe(R?(0,Fe.h)((W,q)=>R(W,q,L)):de.y,ze(1),I?(0,dt.d)(C):(0,et.T)(()=>new At.K))}())}expandSegment(C,I,L,W,q,Ce){return(0,Ee.D)(L).pipe((0,En.b)(Oe=>this.expandSegmentAgainstRoute(C,I,L,Oe,W,q,Ce).pipe((0,Cn.K)(Xt=>{if(Xt instanceof wr)return(0,Ge.of)(null);throw Xt}))),(0,on.P)(Oe=>!!Oe),(0,Cn.K)((Oe,Tt)=>{if(Oe instanceof At.K||"EmptyError"===Oe.name)return Lr(I,W,q)?(0,Ge.of)(new re([],{})):vs(I);throw Oe}))}expandSegmentAgainstRoute(C,I,L,W,q,Ce,Oe){return lr(W,I,q,Ce)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(C,I,W,q,Ce):Oe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(C,I,L,W,q,Ce):vs(I):vs(I)}expandSegmentAgainstRouteUsingRedirect(C,I,L,W,q,Ce){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(C,L,W,Ce):this.expandRegularSegmentAgainstRouteUsingRedirect(C,I,L,W,q,Ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(C,I,L,W){const q=this.applyRedirectCommands([],L.redirectTo,{});return L.redirectTo.startsWith("/")?Li(q):this.lineralizeSegments(L,q).pipe((0,sn.z)(Ce=>{const Oe=new re(Ce,{});return this.expandSegment(C,Oe,I,Ce,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(C,I,L,W,q,Ce){const{matched:Oe,consumedSegments:Tt,remainingSegments:Xt,positionalParamSegments:qt}=Ne(I,W,q);if(!Oe)return vs(I);const vn=this.applyRedirectCommands(Tt,W.redirectTo,qt);return W.redirectTo.startsWith("/")?Li(vn):this.lineralizeSegments(W,vn).pipe((0,sn.z)(Pn=>this.expandSegment(C,I,L,Pn.concat(Xt),Ce,!1)))}matchSegmentAgainstRoute(C,I,L,W,q){if("**"===L.path)return L.loadChildren?(L._loadedConfig?(0,Ge.of)(L._loadedConfig):this.configLoader.load(C.injector,L)).pipe((0,St.U)(vn=>(L._loadedConfig=vn,new re(W,{})))):(0,Ge.of)(new re(W,{}));const{matched:Ce,consumedSegments:Oe,remainingSegments:Tt}=Ne(I,L,W);return Ce?this.getChildConfig(C,L,W).pipe((0,sn.z)(qt=>{const vn=qt.module,Pn=qt.routes,{segmentGroup:Ir,slicedSegments:ji}=yt(I,Oe,Tt,Pn),ii=new re(Ir.segments,Ir.children);if(0===ji.length&&ii.hasChildren())return this.expandChildren(vn,Pn,ii).pipe((0,St.U)(Zs=>new re(Oe,Zs)));if(0===Pn.length&&0===ji.length)return(0,Ge.of)(new re(Oe,{}));const Mo=J(L)===q;return this.expandSegment(vn,ii,Pn,ji,Mo?Vt:q,!0).pipe((0,St.U)(br=>new re(Oe.concat(br.segments),br.children)))})):vs(I)}getChildConfig(C,I,L){return I.children?(0,Ge.of)(new Hs(I.children,C)):I.loadChildren?void 0!==I._loadedConfig?(0,Ge.of)(I._loadedConfig):this.runCanLoadGuards(C.injector,I,L).pipe((0,sn.z)(W=>W?this.configLoader.load(C.injector,I).pipe((0,St.U)(q=>(I._loadedConfig=q,q))):function es(R){return ot(zr(`Cannot load children because the guard of the route "path: '${R.path}'" returned false`))}(I))):(0,Ge.of)(new Hs([],C))}runCanLoadGuards(C,I,L){const W=I.canLoad;if(!W||0===W.length)return(0,Ge.of)(!0);const q=W.map(Ce=>{const Oe=C.get(Ce);let Tt;if(function fr(R){return R&&ps(R.canLoad)}(Oe))Tt=Oe.canLoad(I,L);else{if(!ps(Oe))throw new Error("Invalid CanLoad guard");Tt=Oe(I,L)}return j(Tt)});return(0,Ge.of)(q).pipe(Xi(),(0,Jt.b)(Ce=>{if(!ms(Ce))return;const Oe=zr(`Redirecting to "${this.urlSerializer.serialize(Ce)}"`);throw Oe.url=Ce,Oe}),(0,St.U)(Ce=>!0===Ce))}lineralizeSegments(C,I){let L=[],W=I.root;for(;;){if(L=L.concat(W.segments),0===W.numberOfChildren)return(0,Ge.of)(L);if(W.numberOfChildren>1||!W.children[Vt])return ot(new Error(`Only absolute redirects can have named outlets. redirectTo: '${C.redirectTo}'`));W=W.children[Vt]}}applyRedirectCommands(C,I,L){return this.applyRedirectCreatreUrlTree(I,this.urlSerializer.parse(I),C,L)}applyRedirectCreatreUrlTree(C,I,L,W){const q=this.createSegmentGroup(C,I.root,L,W);return new he(q,this.createQueryParams(I.queryParams,this.urlTree.queryParams),I.fragment)}createQueryParams(C,I){const L={};return ue(C,(W,q)=>{if("string"==typeof W&&W.startsWith(":")){const Oe=W.substring(1);L[q]=I[Oe]}else L[q]=W}),L}createSegmentGroup(C,I,L,W){const q=this.createSegments(C,I.segments,L,W);let Ce={};return ue(I.children,(Oe,Tt)=>{Ce[Tt]=this.createSegmentGroup(C,Oe,L,W)}),new re(q,Ce)}createSegments(C,I,L,W){return I.map(q=>q.path.startsWith(":")?this.findPosParam(C,q,W):this.findOrReturn(q,L))}findPosParam(C,I,L){const W=L[I.path.substring(1)];if(!W)throw new Error(`Cannot redirect to '${C}'. Cannot find '${I.path}'.`);return W}findOrReturn(C,I){let L=0;for(const W of I){if(W.path===C.path)return I.splice(L),W;L++}return C}}function $(R){const C={};for(const L of Object.keys(R.children)){const q=$(R.children[L]);(q.segments.length>0||q.hasChildren())&&(C[L]=q)}return function co(R){if(1===R.numberOfChildren&&R.children[Vt]){const C=R.children[Vt];return new re(R.segments.concat(C.segments),C.children)}return R}(new re(R.segments,C))}class k{constructor(C){this.path=C,this.route=this.path[this.path.length-1]}}class ie{constructor(C,I){this.component=C,this.route=I}}function Se(R,C,I){const L=R._root;return Es(L,C?C._root:null,I,[L.value])}function Kr(R,C,I){const L=function yr(R){if(!R)return null;for(let C=R.parent;C;C=C.parent){const I=C.routeConfig;if(I&&I._loadedConfig)return I._loadedConfig}return null}(C);return(L?L.module.injector:I).get(R)}function Es(R,C,I,L,W={canDeactivateChecks:[],canActivateChecks:[]}){const q=ve(C);return R.children.forEach(Ce=>{(function cs(R,C,I,L,W={canDeactivateChecks:[],canActivateChecks:[]}){const q=R.value,Ce=C?C.value:null,Oe=I?I.getContext(R.value.outlet):null;if(Ce&&q.routeConfig===Ce.routeConfig){const Tt=function Ui(R,C,I){if("function"==typeof I)return I(R,C);switch(I){case"pathParamsChange":return!Lt(R.url,C.url);case"pathParamsOrQueryParamsChange":return!Lt(R.url,C.url)||!jn(R.queryParams,C.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hr(R,C)||!jn(R.queryParams,C.queryParams);default:return!hr(R,C)}}(Ce,q,q.routeConfig.runGuardsAndResolvers);Tt?W.canActivateChecks.push(new k(L)):(q.data=Ce.data,q._resolvedData=Ce._resolvedData),Es(R,C,q.component?Oe?Oe.children:null:I,L,W),Tt&&Oe&&Oe.outlet&&Oe.outlet.isActivated&&W.canDeactivateChecks.push(new ie(Oe.outlet.component,Ce))}else Ce&&Us(C,Oe,W),W.canActivateChecks.push(new k(L)),Es(R,null,q.component?Oe?Oe.children:null:I,L,W)})(Ce,q[Ce.value.outlet],I,L.concat([Ce.value]),W),delete q[Ce.value.outlet]}),ue(q,(Ce,Oe)=>Us(Ce,I.getContext(Oe),W)),W}function Us(R,C,I){const L=ve(R),W=R.value;ue(L,(q,Ce)=>{Us(q,W.component?C?C.children.getContext(Ce):null:C,I)}),I.canDeactivateChecks.push(new ie(W.component&&C&&C.outlet&&C.outlet.isActivated?C.outlet.component:null,W))}class ho{}function ts(R){return new M.y(C=>C.error(R))}class Zn{constructor(C,I,L,W,q,Ce){this.rootComponentType=C,this.config=I,this.urlTree=L,this.url=W,this.paramsInheritanceStrategy=q,this.relativeLinkResolution=Ce}recognize(){const C=yt(this.urlTree.root,[],[],this.config.filter(Ce=>void 0===Ce.redirectTo),this.relativeLinkResolution).segmentGroup,I=this.processSegmentGroup(this.config,C,Vt);if(null===I)return null;const L=new yn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Vt,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new Jr(L,I),q=new Nn(this.url,W);return this.inheritParamsAndData(q._root),q}inheritParamsAndData(C){const I=C.value,L=qe(I,this.paramsInheritanceStrategy);I.params=Object.freeze(L.params),I.data=Object.freeze(L.data),C.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(C,I,L){return 0===I.segments.length&&I.hasChildren()?this.processChildren(C,I):this.processSegment(C,I,I.segments,L)}processChildren(C,I){const L=[];for(const q of Object.keys(I.children)){const Ce=I.children[q],Oe=U(C,q),Tt=this.processSegmentGroup(Oe,Ce,q);if(null===Tt)return null;L.push(...Tt)}const W=Ai(L);return function Wi(R){R.sort((C,I)=>C.value.outlet===Vt?-1:I.value.outlet===Vt?1:C.value.outlet.localeCompare(I.value.outlet))}(W),W}processSegment(C,I,L,W){for(const q of C){const Ce=this.processSegmentAgainstRoute(q,I,L,W);if(null!==Ce)return Ce}return Lr(I,L,W)?[]:null}processSegmentAgainstRoute(C,I,L,W){if(C.redirectTo||!lr(C,I,L,W))return null;let q,Ce=[],Oe=[];if("**"===C.path){const Ir=L.length>0?Ue(L).parameters:{};q=new yn(L,Ir,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jo(C),J(C),C.component,C,za(I),Da(I)+L.length,Rs(C))}else{const Ir=Ne(I,C,L);if(!Ir.matched)return null;Ce=Ir.consumedSegments,Oe=Ir.remainingSegments,q=new yn(Ce,Ir.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jo(C),J(C),C.component,C,za(I),Da(I)+Ce.length,Rs(C))}const Tt=function Qo(R){return R.children?R.children:R.loadChildren?R._loadedConfig.routes:[]}(C),{segmentGroup:Xt,slicedSegments:qt}=yt(I,Ce,Oe,Tt.filter(Ir=>void 0===Ir.redirectTo),this.relativeLinkResolution);if(0===qt.length&&Xt.hasChildren()){const Ir=this.processChildren(Tt,Xt);return null===Ir?null:[new Jr(q,Ir)]}if(0===Tt.length&&0===qt.length)return[new Jr(q,[])];const vn=J(C)===W,Pn=this.processSegment(Tt,Xt,qt,vn?Vt:W);return null===Pn?null:[new Jr(q,Pn)]}}function Ha(R){const C=R.value.routeConfig;return C&&""===C.path&&void 0===C.redirectTo}function Ai(R){const C=[],I=new Set;for(const L of R){if(!Ha(L)){C.push(L);continue}const W=C.find(q=>L.value.routeConfig===q.value.routeConfig);void 0!==W?(W.children.push(...L.children),I.add(W)):C.push(L)}for(const L of I){const W=Ai(L.children);C.push(new Jr(L.value,W))}return C.filter(L=>!I.has(L))}function za(R){let C=R;for(;C._sourceSegment;)C=C._sourceSegment;return C}function Da(R){let C=R,I=C._segmentIndexShift?C._segmentIndexShift:0;for(;C._sourceSegment;)C=C._sourceSegment,I+=C._segmentIndexShift?C._segmentIndexShift:0;return I-1}function jo(R){return R.data||{}}function Rs(R){return R.resolve||{}}function Ms(R){return[...Object.keys(R),...Object.getOwnPropertySymbols(R)]}function ba(R){return(0,nn.w)(C=>{const I=R(C);return I?(0,Ee.D)(I).pipe((0,St.U)(()=>C)):(0,Ge.of)(C)})}class qr extends class Jo{shouldDetach(C){return!1}store(C,I){}shouldAttach(C){return!1}retrieve(C){return null}shouldReuseRoute(C,I){return C.routeConfig===I.routeConfig}}{}const Rn=new p.OlP("ROUTES");class mu{constructor(C,I,L,W){this.injector=C,this.compiler=I,this.onLoadStartListener=L,this.onLoadEndListener=W}load(C,I){if(I._loader$)return I._loader$;this.onLoadStartListener&&this.onLoadStartListener(I);const W=this.loadModuleFactory(I.loadChildren).pipe((0,St.U)(q=>{this.onLoadEndListener&&this.onLoadEndListener(I);const Ce=q.create(C);return new Hs(Pe(Ce.injector.get(Rn,void 0,p.XFs.Self|p.XFs.Optional)).map(V),Ce)}),(0,Cn.K)(q=>{throw I._loader$=void 0,q}));return I._loader$=new Qe(W,()=>new Xe.x).pipe(wt()),I._loader$}loadModuleFactory(C){return j(C()).pipe((0,sn.z)(I=>I instanceof p.YKP?(0,Ge.of)(I):(0,Ee.D)(this.compiler.compileModuleAsync(I))))}}class $o{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,I){return C}}function Wo(R){throw R}function Ta(R,C,I){return C.parse("/")}function pi(R,C){return(0,Ge.of)(null)}const Aa={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let kr=(()=>{class R{constructor(I,L,W,q,Ce,Oe,Tt){this.rootComponentType=I,this.urlSerializer=L,this.rootContexts=W,this.location=q,this.config=Tt,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Xe.x,this.errorHandler=Wo,this.malformedUriErrorHandler=Ta,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:pi,afterPreactivation:pi},this.urlHandlingStrategy=new $o,this.routeReuseStrategy=new qr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Ce.get(p.h0i),this.console=Ce.get(p.c2e);const vn=Ce.get(p.R0b);this.isNgZoneEnabled=vn instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(Tt),this.currentUrlTree=function oe(){return new he(new re([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mu(Ce,Oe,Pn=>this.triggerEvent(new pn(Pn)),Pn=>this.triggerEvent(new Dr(Pn))),this.routerState=Q(this.currentUrlTree,this.rootComponentType),this.transitions=new ut.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var I;return null===(I=this.location.getState())||void 0===I?void 0:I.\u0275routerPageId}setupNavigations(I){const L=this.events;return I.pipe((0,Fe.h)(W=>0!==W.id),(0,St.U)(W=>Object.assign(Object.assign({},W),{extractedUrl:this.urlHandlingStrategy.extract(W.rawUrl)})),(0,nn.w)(W=>{let q=!1,Ce=!1;return(0,Ge.of)(W).pipe((0,Jt.b)(Oe=>{this.currentNavigation={id:Oe.id,initialUrl:Oe.currentRawUrl,extractedUrl:Oe.extractedUrl,trigger:Oe.source,extras:Oe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,nn.w)(Oe=>{const Tt=this.browserUrlTree.toString(),Xt=!this.navigated||Oe.extractedUrl.toString()!==Tt||Tt!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Xt)&&this.urlHandlingStrategy.shouldProcessUrl(Oe.rawUrl))return da(Oe.source)&&(this.browserUrlTree=Oe.extractedUrl),(0,Ge.of)(Oe).pipe((0,nn.w)(vn=>{const Pn=this.transitions.getValue();return L.next(new Ln(vn.id,this.serializeUrl(vn.extractedUrl),vn.source,vn.restoredState)),Pn!==this.transitions.getValue()?it.E:Promise.resolve(vn)}),function F(R,C,I,L){return(0,nn.w)(W=>function Ls(R,C,I,L,W){return new bo(R,C,I,L,W).apply()}(R,C,I,W.extractedUrl,L).pipe((0,St.U)(q=>Object.assign(Object.assign({},W),{urlAfterRedirects:q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Jt.b)(vn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:vn.urlAfterRedirects})}),function Ao(R,C,I,L,W){return(0,sn.z)(q=>function ni(R,C,I,L,W="emptyOnly",q="legacy"){try{const Ce=new Zn(R,C,I,L,W,q).recognize();return null===Ce?ts(new ho):(0,Ge.of)(Ce)}catch(Ce){return ts(Ce)}}(R,C,q.urlAfterRedirects,I(q.urlAfterRedirects),L,W).pipe((0,St.U)(Ce=>Object.assign(Object.assign({},q),{targetSnapshot:Ce}))))}(this.rootComponentType,this.config,vn=>this.serializeUrl(vn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Jt.b)(vn=>{if("eager"===this.urlUpdateStrategy){if(!vn.extras.skipLocationChange){const Ir=this.urlHandlingStrategy.merge(vn.urlAfterRedirects,vn.rawUrl);this.setBrowserUrl(Ir,vn)}this.browserUrlTree=vn.urlAfterRedirects}const Pn=new qn(vn.id,this.serializeUrl(vn.extractedUrl),this.serializeUrl(vn.urlAfterRedirects),vn.targetSnapshot);L.next(Pn)}));if(Xt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Pn,extractedUrl:Ir,source:ji,restoredState:ii,extras:Mo}=Oe,qs=new Ln(Pn,this.serializeUrl(Ir),ji,ii);L.next(qs);const br=Q(Ir,this.rootComponentType).snapshot;return(0,Ge.of)(Object.assign(Object.assign({},Oe),{targetSnapshot:br,urlAfterRedirects:Ir,extras:Object.assign(Object.assign({},Mo),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Oe.rawUrl,Oe.resolve(null),it.E}),ba(Oe=>{const{targetSnapshot:Tt,id:Xt,extractedUrl:qt,rawUrl:vn,extras:{skipLocationChange:Pn,replaceUrl:Ir}}=Oe;return this.hooks.beforePreactivation(Tt,{navigationId:Xt,appliedUrlTree:qt,rawUrlTree:vn,skipLocationChange:!!Pn,replaceUrl:!!Ir})}),(0,Jt.b)(Oe=>{const Tt=new jr(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot);this.triggerEvent(Tt)}),(0,St.U)(Oe=>Object.assign(Object.assign({},Oe),{guards:Se(Oe.targetSnapshot,Oe.currentSnapshot,this.rootContexts)})),function Bo(R,C){return(0,sn.z)(I=>{const{targetSnapshot:L,currentSnapshot:W,guards:{canActivateChecks:q,canDeactivateChecks:Ce}}=I;return 0===Ce.length&&0===q.length?(0,Ge.of)(Object.assign(Object.assign({},I),{guardsResult:!0})):function Ur(R,C,I,L){return(0,Ee.D)(R).pipe((0,sn.z)(W=>function To(R,C,I,L,W){const q=C&&C.routeConfig?C.routeConfig.canDeactivate:null;if(!q||0===q.length)return(0,Ge.of)(!0);const Ce=q.map(Oe=>{const Tt=Kr(Oe,C,W);let Xt;if(function Fi(R){return R&&ps(R.canDeactivate)}(Tt))Xt=j(Tt.canDeactivate(R,C,I,L));else{if(!ps(Tt))throw new Error("Invalid CanDeactivate guard");Xt=j(Tt(R,C,I,L))}return Xt.pipe((0,on.P)())});return(0,Ge.of)(Ce).pipe(Xi())}(W.component,W.route,I,C,L)),(0,on.P)(W=>!0!==W,!0))}(Ce,L,W,R).pipe((0,sn.z)(Oe=>Oe&&function gs(R){return"boolean"==typeof R}(Oe)?function Mr(R,C,I,L){return(0,Ee.D)(C).pipe((0,En.b)(W=>(0,je.z)(function As(R,C){return null!==R&&C&&C(new Hr(R)),(0,Ge.of)(!0)}(W.route.parent,L),function $n(R,C){return null!==R&&C&&C(new Tn(R)),(0,Ge.of)(!0)}(W.route,L),function Ss(R,C,I){const L=C[C.length-1],q=C.slice(0,C.length-1).reverse().map(Ce=>function kt(R){const C=R.routeConfig?R.routeConfig.canActivateChild:null;return C&&0!==C.length?{node:R,guards:C}:null}(Ce)).filter(Ce=>null!==Ce).map(Ce=>at(()=>{const Oe=Ce.guards.map(Tt=>{const Xt=Kr(Tt,Ce.node,I);let qt;if(function Vo(R){return R&&ps(R.canActivateChild)}(Xt))qt=j(Xt.canActivateChild(L,R));else{if(!ps(Xt))throw new Error("Invalid CanActivateChild guard");qt=j(Xt(L,R))}return qt.pipe((0,on.P)())});return(0,Ge.of)(Oe).pipe(Xi())}));return(0,Ge.of)(q).pipe(Xi())}(R,W.path,I),function tr(R,C,I){const L=C.routeConfig?C.routeConfig.canActivate:null;if(!L||0===L.length)return(0,Ge.of)(!0);const W=L.map(q=>at(()=>{const Ce=Kr(q,C,I);let Oe;if(function Ti(R){return R&&ps(R.canActivate)}(Ce))Oe=j(Ce.canActivate(C,R));else{if(!ps(Ce))throw new Error("Invalid CanActivate guard");Oe=j(Ce(C,R))}return Oe.pipe((0,on.P)())}));return(0,Ge.of)(W).pipe(Xi())}(R,W.route,I))),(0,on.P)(W=>!0!==W,!0))}(L,q,R,C):(0,Ge.of)(Oe)),(0,St.U)(Oe=>Object.assign(Object.assign({},I),{guardsResult:Oe})))})}(this.ngModule.injector,Oe=>this.triggerEvent(Oe)),(0,Jt.b)(Oe=>{if(ms(Oe.guardsResult)){const Xt=zr(`Redirecting to "${this.serializeUrl(Oe.guardsResult)}"`);throw Xt.url=Oe.guardsResult,Xt}const Tt=new Ut(Oe.id,this.serializeUrl(Oe.extractedUrl),this.serializeUrl(Oe.urlAfterRedirects),Oe.targetSnapshot,!!Oe.guardsResult);this.triggerEvent(Tt)}),(0,Fe.h)(Oe=>!!Oe.guardsResult||(this.restoreHistory(Oe),this.cancelNavigationTransition(Oe,""),!1)),ba(Oe=>{if(Oe.guards.canActivateChecks.length)return(0,Ge.of)(Oe).pipe((0,Jt.b)(Tt=>{const Xt=new pr(Tt.id,this.serializeUrl(Tt.extractedUrl),this.serializeUrl(Tt.urlAfterRedirects),Tt.targetSnapshot);this.triggerEvent(Xt)}),(0,nn.w)(Tt=>{let Xt=!1;return(0,Ge.of)(Tt).pipe(function So(R,C){return(0,sn.z)(I=>{const{targetSnapshot:L,guards:{canActivateChecks:W}}=I;if(!W.length)return(0,Ge.of)(I);let q=0;return(0,Ee.D)(W).pipe((0,En.b)(Ce=>function Gu(R,C,I,L){return function gu(R,C,I,L){const W=Ms(R);if(0===W.length)return(0,Ge.of)({});const q={};return(0,Ee.D)(W).pipe((0,sn.z)(Ce=>function gl(R,C,I,L){const W=Kr(R,C,L);return j(W.resolve?W.resolve(C,I):W(C,I))}(R[Ce],C,I,L).pipe((0,Jt.b)(Oe=>{q[Ce]=Oe}))),ze(1),(0,sn.z)(()=>Ms(q).length===W.length?(0,Ge.of)(q):it.E))}(R._resolve,R,C,L).pipe((0,St.U)(q=>(R._resolvedData=q,R.data=Object.assign(Object.assign({},R.data),qe(R,I).resolve),null)))}(Ce.route,L,R,C)),(0,Jt.b)(()=>q++),ze(1),(0,sn.z)(Ce=>q===W.length?(0,Ge.of)(I):it.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Jt.b)({next:()=>Xt=!0,complete:()=>{Xt||(this.restoreHistory(Tt),this.cancelNavigationTransition(Tt,"At least one route resolver didn't emit any value."))}}))}),(0,Jt.b)(Tt=>{const Xt=new An(Tt.id,this.serializeUrl(Tt.extractedUrl),this.serializeUrl(Tt.urlAfterRedirects),Tt.targetSnapshot);this.triggerEvent(Xt)}))}),ba(Oe=>{const{targetSnapshot:Tt,id:Xt,extractedUrl:qt,rawUrl:vn,extras:{skipLocationChange:Pn,replaceUrl:Ir}}=Oe;return this.hooks.afterPreactivation(Tt,{navigationId:Xt,appliedUrlTree:qt,rawUrlTree:vn,skipLocationChange:!!Pn,replaceUrl:!!Ir})}),(0,St.U)(Oe=>{const Tt=function os(R,C,I){const L=Fr(R,C._root,I?I._root:void 0);return new le(L,C)}(this.routeReuseStrategy,Oe.targetSnapshot,Oe.currentRouterState);return Object.assign(Object.assign({},Oe),{targetRouterState:Tt})}),(0,Jt.b)(Oe=>{this.currentUrlTree=Oe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Oe.urlAfterRedirects,Oe.rawUrl),this.routerState=Oe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Oe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Oe),this.browserUrlTree=Oe.urlAfterRedirects)}),((R,C,I)=>(0,St.U)(L=>(new ls(C,L.targetRouterState,L.currentRouterState,I).activate(R),L)))(this.rootContexts,this.routeReuseStrategy,Oe=>this.triggerEvent(Oe)),(0,Jt.b)({next(){q=!0},complete(){q=!0}}),function _t(R){return(0,xe.e)((C,I)=>{try{C.subscribe(I)}finally{I.add(R)}})}(()=>{var Oe;q||Ce||this.cancelNavigationTransition(W,`Navigation ID ${W.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Oe=this.currentNavigation)||void 0===Oe?void 0:Oe.id)===W.id&&(this.currentNavigation=null)}),(0,Cn.K)(Oe=>{if(Ce=!0,function Bn(R){return R&&R[Or]}(Oe)){const Tt=ms(Oe.url);Tt||(this.navigated=!0,this.restoreHistory(W,!0));const Xt=new ur(W.id,this.serializeUrl(W.extractedUrl),Oe.message);L.next(Xt),Tt?setTimeout(()=>{const qt=this.urlHandlingStrategy.merge(Oe.url,this.rawUrlTree),vn={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||da(W.source)};this.scheduleNavigation(qt,"imperative",null,vn,{resolve:W.resolve,reject:W.reject,promise:W.promise})},0):W.resolve(!1)}else{this.restoreHistory(W,!0);const Tt=new Ar(W.id,this.serializeUrl(W.extractedUrl),Oe);L.next(Tt);try{W.resolve(this.errorHandler(Oe))}catch(Xt){W.reject(Xt)}}return it.E}))}))}resetRootComponentType(I){this.rootComponentType=I,this.routerState.root.component=this.rootComponentType}setTransition(I){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),I))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(I=>{const L="popstate"===I.type?"popstate":"hashchange";"popstate"===L&&setTimeout(()=>{var W;const q={replaceUrl:!0},Ce=(null===(W=I.state)||void 0===W?void 0:W.navigationId)?I.state:null;if(Ce){const Tt=Object.assign({},Ce);delete Tt.navigationId,delete Tt.\u0275routerPageId,0!==Object.keys(Tt).length&&(q.state=Tt)}const Oe=this.parseUrl(I.url);this.scheduleNavigation(Oe,L,Ce,q)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(I){this.events.next(I)}resetConfig(I){ys(I),this.config=I.map(V),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(I,L={}){const{relativeTo:W,queryParams:q,fragment:Ce,queryParamsHandling:Oe,preserveFragment:Tt}=L,Xt=W||this.routerState.root,qt=Tt?this.currentUrlTree.fragment:Ce;let vn=null;switch(Oe){case"merge":vn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),q);break;case"preserve":vn=this.currentUrlTree.queryParams;break;default:vn=q||null}return null!==vn&&(vn=this.removeEmptyProps(vn)),function as(R,C,I,L,W){if(0===I.length)return Fo(C.root,C.root,C.root,L,W);const q=function fs(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new uo(!0,0,R);let C=0,I=!1;const L=R.reduce((W,q,Ce)=>{if("object"==typeof q&&null!=q){if(q.outlets){const Oe={};return ue(q.outlets,(Tt,Xt)=>{Oe[Xt]="string"==typeof Tt?Tt.split("/"):Tt}),[...W,{outlets:Oe}]}if(q.segmentPath)return[...W,q.segmentPath]}return"string"!=typeof q?[...W,q]:0===Ce?(q.split("/").forEach((Oe,Tt)=>{0==Tt&&"."===Oe||(0==Tt&&""===Oe?I=!0:".."===Oe?C++:""!=Oe&&W.push(Oe))}),W):[...W,q]},[]);return new uo(I,C,L)}(I);if(q.toRoot())return Fo(C.root,C.root,new re([],{}),L,W);const Ce=function Yo(R,C,I){if(R.isAbsolute)return new ca(C.root,!0,0);if(-1===I.snapshot._lastPathIndex){const q=I.snapshot._urlSegment;return new ca(q,q===C.root,0)}const L=Ws(R.commands[0])?0:1;return function us(R,C,I){let L=R,W=C,q=I;for(;q>W;){if(q-=W,L=L.parent,!L)throw new Error("Invalid number of '../'");W=L.segments.length}return new ca(L,!1,W-q)}(I.snapshot._urlSegment,I.snapshot._lastPathIndex+L,R.numberOfDoubleDots)}(q,C,R),Oe=Ce.processChildren?Uo(Ce.segmentGroup,Ce.index,q.commands):Lo(Ce.segmentGroup,Ce.index,q.commands);return Fo(C.root,Ce.segmentGroup,Oe,L,W)}(Xt,this.currentUrlTree,I,vn,null!=qt?qt:null)}navigateByUrl(I,L={skipLocationChange:!1}){const W=ms(I)?I:this.parseUrl(I),q=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(q,"imperative",null,L)}navigate(I,L={skipLocationChange:!1}){return function Ka(R){for(let C=0;C<R.length;C++){const I=R[C];if(null==I)throw new Error(`The requested path contains ${I} segment at index ${C}`)}}(I),this.navigateByUrl(this.createUrlTree(I,L),L)}serializeUrl(I){return this.urlSerializer.serialize(I)}parseUrl(I){let L;try{L=this.urlSerializer.parse(I)}catch(W){L=this.malformedUriErrorHandler(W,this.urlSerializer,I)}return L}isActive(I,L){let W;if(W=!0===L?Object.assign({},Aa):!1===L?Object.assign({},Hi):L,ms(I))return Ht(this.currentUrlTree,I,W);const q=this.parseUrl(I);return Ht(this.currentUrlTree,q,W)}removeEmptyProps(I){return Object.keys(I).reduce((L,W)=>{const q=I[W];return null!=q&&(L[W]=q),L},{})}processNavigations(){this.navigations.subscribe(I=>{this.navigated=!0,this.lastSuccessfulId=I.id,this.currentPageId=I.targetPageId,this.events.next(new Cr(I.id,this.serializeUrl(I.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,I.resolve(!0)},I=>{this.console.warn(`Unhandled Navigation Error: ${I}`)})}scheduleNavigation(I,L,W,q,Ce){var Oe,Tt;if(this.disposed)return Promise.resolve(!1);let Xt,qt,vn;Ce?(Xt=Ce.resolve,qt=Ce.reject,vn=Ce.promise):vn=new Promise((ji,ii)=>{Xt=ji,qt=ii});const Pn=++this.navigationId;let Ir;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(W=this.location.getState()),Ir=W&&W.\u0275routerPageId?W.\u0275routerPageId:q.replaceUrl||q.skipLocationChange?null!==(Oe=this.browserPageId)&&void 0!==Oe?Oe:0:(null!==(Tt=this.browserPageId)&&void 0!==Tt?Tt:0)+1):Ir=0,this.setTransition({id:Pn,targetPageId:Ir,source:L,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:I,extras:q,resolve:Xt,reject:qt,promise:vn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),vn.catch(ji=>Promise.reject(ji))}setBrowserUrl(I,L){const W=this.urlSerializer.serialize(I),q=Object.assign(Object.assign({},L.extras.state),this.generateNgRouterState(L.id,L.targetPageId));this.location.isCurrentPathEqualTo(W)||L.extras.replaceUrl?this.location.replaceState(W,"",q):this.location.go(W,"",q)}restoreHistory(I,L=!1){var W,q;if("computed"===this.canceledNavigationResolution){const Ce=this.currentPageId-I.targetPageId;"popstate"!==I.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)||0===Ce?this.currentUrlTree===(null===(q=this.currentNavigation)||void 0===q?void 0:q.finalUrl)&&0===Ce&&(this.resetState(I),this.browserUrlTree=I.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ce)}else"replace"===this.canceledNavigationResolution&&(L&&this.resetState(I),this.resetUrlToCurrentUrlTree())}resetState(I){this.routerState=I.currentRouterState,this.currentUrlTree=I.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,I.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(I,L){const W=new ur(I.id,this.serializeUrl(I.extractedUrl),L);this.triggerEvent(W),I.resolve(!1)}generateNgRouterState(I,L){return"computed"===this.canceledNavigationResolution?{navigationId:I,\u0275routerPageId:L}:{navigationId:I}}}return R.\u0275fac=function(I){p.$Z()},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac}),R})();function da(R){return"imperative"!==R}let Vs=(()=>{class R{constructor(I,L,W,q,Ce){this.router=I,this.route=L,this.tabIndexAttribute=W,this.renderer=q,this.el=Ce,this.commands=null,this.onChanges=new Xe.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(I){if(null!=this.tabIndexAttribute)return;const L=this.renderer,W=this.el.nativeElement;null!==I?L.setAttribute(W,"tabindex",I):L.removeAttribute(W,"tabindex")}ngOnChanges(I){this.onChanges.next(this)}set routerLink(I){null!=I?(this.commands=Array.isArray(I)?I:[I],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const I={skipLocationChange:li(this.skipLocationChange),replaceUrl:li(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,I),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:li(this.preserveFragment)})}}return R.\u0275fac=function(I){return new(I||R)(p.Y36(kr),p.Y36($e),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},R.\u0275dir=p.lG2({type:R,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(I,L){1&I&&p.NdJ("click",function(){return L.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),R})(),zs=(()=>{class R{constructor(I,L,W){this.router=I,this.route=L,this.locationStrategy=W,this.commands=null,this.href=null,this.onChanges=new Xe.x,this.subscription=I.events.subscribe(q=>{q instanceof Cr&&this.updateTargetUrlAndHref()})}set routerLink(I){this.commands=null!=I?Array.isArray(I)?I:[I]:null}ngOnChanges(I){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(I,L,W,q,Ce){if(0!==I||L||W||q||Ce||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Oe={skipLocationChange:li(this.skipLocationChange),replaceUrl:li(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Oe),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:li(this.preserveFragment)})}}return R.\u0275fac=function(I){return new(I||R)(p.Y36(kr),p.Y36($e),p.Y36(ar.S$))},R.\u0275dir=p.lG2({type:R,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(I,L){1&I&&p.NdJ("click",function(q){return L.onClick(q.button,q.ctrlKey,q.shiftKey,q.altKey,q.metaKey)}),2&I&&p.uIk("target",L.target)("href",L.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),R})();function li(R){return""===R||!!R}class ha{}class jt{preload(C,I){return(0,Ge.of)(null)}}let Vi=(()=>{class R{constructor(I,L,W,q){this.router=I,this.injector=W,this.preloadingStrategy=q,this.loader=new mu(W,L,Tt=>I.triggerEvent(new pn(Tt)),Tt=>I.triggerEvent(new Dr(Tt)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Fe.h)(I=>I instanceof Cr),(0,En.b)(()=>this.preload())).subscribe(()=>{})}preload(){const I=this.injector.get(p.h0i);return this.processRoutes(I,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(I,L){const W=[];for(const q of L)if(q.loadChildren&&!q.canLoad&&q._loadedConfig){const Ce=q._loadedConfig;W.push(this.processRoutes(Ce.module,Ce.routes))}else q.loadChildren&&!q.canLoad?W.push(this.preloadConfig(I,q)):q.children&&W.push(this.processRoutes(I,q.children));return(0,Ee.D)(W).pipe((0,Wn.J)(),(0,St.U)(q=>{}))}preloadConfig(I,L){return this.preloadingStrategy.preload(L,()=>(L._loadedConfig?(0,Ge.of)(L._loadedConfig):this.loader.load(I.injector,L)).pipe((0,sn.z)(q=>(L._loadedConfig=q,this.processRoutes(q.module,q.routes)))))}}return R.\u0275fac=function(I){return new(I||R)(p.LFG(kr),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(ha))},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac}),R})(),Bi=(()=>{class R{constructor(I,L,W={}){this.router=I,this.viewportScroller=L,this.options=W,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},W.scrollPositionRestoration=W.scrollPositionRestoration||"disabled",W.anchorScrolling=W.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(I=>{I instanceof Ln?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=I.navigationTrigger,this.restoredId=I.restoredState?I.restoredState.navigationId:0):I instanceof Cr&&(this.lastId=I.id,this.scheduleScrollEvent(I,this.router.parseUrl(I.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(I=>{I instanceof $r&&(I.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(I.position):I.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(I.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(I,L){this.router.triggerEvent(new $r(I,"popstate"===this.lastSource?this.store[this.restoredId]:null,L))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return R.\u0275fac=function(I){p.$Z()},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac}),R})();const tn=new p.OlP("ROUTER_CONFIGURATION"),Vn=new p.OlP("ROUTER_FORROOT_GUARD"),Xo=[ar.Ye,{provide:Jn,useClass:Gn},{provide:kr,useFactory:function Ks(R,C,I,L,W,q,Ce={},Oe,Tt){const Xt=new kr(null,R,C,I,L,W,Pe(q));return Oe&&(Xt.urlHandlingStrategy=Oe),Tt&&(Xt.routeReuseStrategy=Tt),function Pc(R,C){R.errorHandler&&(C.errorHandler=R.errorHandler),R.malformedUriErrorHandler&&(C.malformedUriErrorHandler=R.malformedUriErrorHandler),R.onSameUrlNavigation&&(C.onSameUrlNavigation=R.onSameUrlNavigation),R.paramsInheritanceStrategy&&(C.paramsInheritanceStrategy=R.paramsInheritanceStrategy),R.relativeLinkResolution&&(C.relativeLinkResolution=R.relativeLinkResolution),R.urlUpdateStrategy&&(C.urlUpdateStrategy=R.urlUpdateStrategy),R.canceledNavigationResolution&&(C.canceledNavigationResolution=R.canceledNavigationResolution)}(Ce,Xt),Ce.enableTracing&&Xt.events.subscribe(qt=>{var vn,Pn;null===(vn=console.group)||void 0===vn||vn.call(console,`Router Event: ${qt.constructor.name}`),console.log(qt.toString()),console.log(qt),null===(Pn=console.groupEnd)||void 0===Pn||Pn.call(console)}),Xt},deps:[Jn,Ts,ar.Ye,p.zs3,p.Sil,Rn,tn,[class _u{},new p.FiY],[class ws{},new p.FiY]]},Ts,{provide:$e,useFactory:function hi(R){return R.routerState.root},deps:[kr]},Vi,jt,class ml{preload(C,I){return I().pipe((0,Cn.K)(()=>(0,Ge.of)(null)))}},{provide:tn,useValue:{enableTracing:!1}}];function Kt(){return new p.PXZ("Router",kr)}let pt=(()=>{class R{constructor(I,L){}static forRoot(I,L){return{ngModule:R,providers:[Xo,qa(I),{provide:Vn,useFactory:On,deps:[[kr,new p.FiY,new p.tp0]]},{provide:tn,useValue:L||{}},{provide:ar.S$,useFactory:_i,deps:[ar.lw,[new p.tBr(ar.mr),new p.FiY],tn]},{provide:Bi,useFactory:It,deps:[kr,ar.EM,tn]},{provide:ha,useExisting:L&&L.preloadingStrategy?L.preloadingStrategy:jt},{provide:p.PXZ,multi:!0,useFactory:Kt},[fa,{provide:p.ip1,multi:!0,useFactory:_l,deps:[fa]},{provide:fo,useFactory:ea,deps:[fa]},{provide:p.tb,multi:!0,useExisting:fo}]]}}static forChild(I){return{ngModule:R,providers:[qa(I)]}}}return R.\u0275fac=function(I){return new(I||R)(p.LFG(Vn,8),p.LFG(kr,8))},R.\u0275mod=p.oAB({type:R}),R.\u0275inj=p.cJS({}),R})();function It(R,C,I){return I.scrollOffset&&C.setOffset(I.scrollOffset),new Bi(R,C,I)}function _i(R,C,I={}){return I.useHash?new ar.Do(R,C):new ar.b0(R,C)}function On(R){return"guarded"}function qa(R){return[{provide:p.deG,multi:!0,useValue:R},{provide:Rn,multi:!0,useValue:R}]}let fa=(()=>{class R{constructor(I){this.injector=I,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Xe.x}appInitializer(){return this.injector.get(ar.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let L=null;const W=new Promise(Oe=>L=Oe),q=this.injector.get(kr),Ce=this.injector.get(tn);return"disabled"===Ce.initialNavigation?(q.setUpLocationChangeListener(),L(!0)):"enabled"===Ce.initialNavigation||"enabledBlocking"===Ce.initialNavigation?(q.hooks.afterPreactivation=()=>this.initNavigation?(0,Ge.of)(null):(this.initNavigation=!0,L(!0),this.resultOfPreactivationDone),q.initialNavigation()):L(!0),W})}bootstrapListener(I){const L=this.injector.get(tn),W=this.injector.get(Vi),q=this.injector.get(Bi),Ce=this.injector.get(kr),Oe=this.injector.get(p.z2F);I===Oe.components[0]&&(("enabledNonBlocking"===L.initialNavigation||void 0===L.initialNavigation)&&Ce.initialNavigation(),W.setUpPreloading(),q.init(),Ce.resetRootComponentType(Oe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return R.\u0275fac=function(I){return new(I||R)(p.LFG(p.zs3))},R.\u0275prov=p.Yz7({token:R,factory:R.\u0275fac}),R})();function _l(R){return R.appInitializer.bind(R)}function ea(R){return R.bootstrapListener.bind(R)}const fo=new p.OlP("Router Initializer")},3942:(ke,ye,S)=>{S.d(ye,{Z:()=>ot});var p=S(2090),M=S(4859),G=S(9681),Ee=S(1877);class de{constructor(at,tt){this._delegate=at,this.firebase=tt,(0,G._addComponent)(at,new M.wA("app-compat",()=>this,"PUBLIC")),this.container=at.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(at){this._delegate.automaticDataCollectionEnabled=at}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(at=>{this._delegate.checkDestroyed(),at()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,G.deleteApp)(this._delegate)))}_getService(at,tt=G._DEFAULT_ENTRY_NAME){var xe;this._delegate.checkDestroyed();const wt=this._delegate.container.getProvider(at);return!wt.isInitialized()&&"EXPLICIT"===(null===(xe=wt.getComponent())||void 0===xe?void 0:xe.instantiationMode)&&wt.initialize(),wt.getImmediate({identifier:tt})}_removeServiceInstance(at,tt=G._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(at).clearInstance(tt)}_addComponent(at){(0,G._addComponent)(this._delegate,at)}_addOrOverwriteComponent(at){(0,G._addOrOverwriteComponent)(this._delegate,at)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const be=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ee=function _e(){const bt=function ce(bt){const at={},tt={__esModule:!0,initializeApp:function Qe(je,it={}){const Xe=G.initializeApp(je,it);if((0,p.r3)(at,Xe.name))return at[Xe.name];const Fe=new bt(Xe,tt);return at[Xe.name]=Fe,Fe},app:wt,registerVersion:G.registerVersion,setLogLevel:G.setLogLevel,onLog:G.onLog,apps:null,SDK_VERSION:G.SDK_VERSION,INTERNAL:{registerComponent:function ut(je){const it=je.name,Xe=it.replace("-compat","");if(G._registerComponent(je)&&"PUBLIC"===je.type){const Fe=(ze=wt())=>{if("function"!=typeof ze[Xe])throw be.create("invalid-app-argument",{appName:it});return ze[Xe]()};void 0!==je.serviceProps&&(0,p.ZB)(Fe,je.serviceProps),tt[Xe]=Fe,bt.prototype[Xe]=function(...ze){return this._getService.bind(this,it).apply(this,je.multipleInstances?ze:[])}}return"PUBLIC"===je.type?tt[Xe]:null},removeApp:function xe(je){delete at[je]},useAsService:function At(je,it){return"serverAuth"===it?null:it},modularAPIs:G}};function wt(je){if(!(0,p.r3)(at,je=je||G._DEFAULT_ENTRY_NAME))throw be.create("no-app",{appName:je});return at[je]}return tt.default=tt,Object.defineProperty(tt,"apps",{get:function Ge(){return Object.keys(at).map(je=>at[je])}}),wt.App=bt,tt}(de);return bt.INTERNAL=Object.assign(Object.assign({},bt.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function at(tt){(0,p.ZB)(bt,tt)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),bt}(),fe=new Ee.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const bt=self.firebase.SDK_VERSION;bt&&bt.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ot=ee;!function Je(bt){(0,G.registerVersion)("@firebase/app-compat","0.1.26",bt)}()},9681:(ke,ye,S)=>{S.r(ye),S.d(ye,{FirebaseError:()=>Ee.ZR,SDK_VERSION:()=>ur,_DEFAULT_ENTRY_NAME:()=>rn,_addComponent:()=>En,_addOrOverwriteComponent:()=>on,_apps:()=>en,_clearComponents:()=>ar,_components:()=>Cn,_getProvider:()=>Jt,_registerComponent:()=>sn,_removeServiceInstance:()=>Wn,deleteApp:()=>Ut,getApp:()=>qn,getApps:()=>jr,initializeApp:()=>Ar,onLog:()=>pn,registerVersion:()=>An,setLogLevel:()=>Dr});var p=S(5861),M=S(4859),G=S(1877),Ee=S(2090),de=S(8766);class Te{constructor(j){this.container=j}getPlatformInfoString(){return this.container.getProviders().map(oe=>{if(function be(ue){const j=ue.getComponent();return"VERSION"===(null==j?void 0:j.type)}(oe)){const He=oe.getImmediate();return`${He.library}/${He.version}`}return null}).filter(oe=>oe).join(" ")}}const ce="@firebase/app",ee=new G.Yd("@firebase/app"),rn="[DEFAULT]",Ot={[ce]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,Cn=new Map;function En(ue,j){try{ue.container.addComponent(j)}catch(oe){ee.debug(`Component ${j.name} failed to register with FirebaseApp ${ue.name}`,oe)}}function on(ue,j){ue.container.addOrOverwriteComponent(j)}function sn(ue){const j=ue.name;if(Cn.has(j))return ee.debug(`There were multiple attempts to register component ${j}.`),!1;Cn.set(j,ue);for(const oe of en.values())En(oe,ue);return!0}function Jt(ue,j){const oe=ue.container.getProvider("heartbeat").getImmediate({optional:!0});return oe&&oe.triggerHeartbeat(),ue.container.getProvider(j)}function Wn(ue,j,oe=rn){Jt(ue,j).clearInstance(oe)}function ar(){Cn.clear()}const Ln=new Ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Cr{constructor(j,oe,He){this._isDeleted=!1,this._options=Object.assign({},j),this._config=Object.assign({},oe),this._name=oe.name,this._automaticDataCollectionEnabled=oe.automaticDataCollectionEnabled,this._container=He,this.container.addComponent(new M.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(j){this.checkDestroyed(),this._automaticDataCollectionEnabled=j}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(j){this._isDeleted=j}checkDestroyed(){if(this.isDeleted)throw Ln.create("app-deleted",{appName:this._name})}}const ur="9.8.2";function Ar(ue,j={}){"object"!=typeof j&&(j={name:j});const oe=Object.assign({name:rn,automaticDataCollectionEnabled:!1},j),He=oe.name;if("string"!=typeof He||!He)throw Ln.create("bad-app-name",{appName:String(He)});const gt=en.get(He);if(gt){if((0,Ee.vZ)(ue,gt.options)&&(0,Ee.vZ)(oe,gt.config))return gt;throw Ln.create("duplicate-app",{appName:He})}const Ht=new M.H0(He);for(const Gt of Cn.values())Ht.addComponent(Gt);const wn=new Cr(ue,oe,Ht);return en.set(He,wn),wn}function qn(ue=rn){const j=en.get(ue);if(!j)throw Ln.create("no-app",{appName:ue});return j}function jr(){return Array.from(en.values())}function Ut(ue){return pr.apply(this,arguments)}function pr(){return(pr=(0,p.Z)(function*(ue){const j=ue.name;en.has(j)&&(en.delete(j),yield Promise.all(ue.container.getProviders().map(oe=>oe.delete())),ue.isDeleted=!0)})).apply(this,arguments)}function An(ue,j,oe){var He;let gt=null!==(He=Ot[ue])&&void 0!==He?He:ue;oe&&(gt+=`-${oe}`);const Ht=gt.match(/\s|\//),wn=j.match(/\s|\//);if(Ht||wn){const Gt=[`Unable to register library "${gt}" with version "${j}":`];return Ht&&Gt.push(`library name "${gt}" contains illegal characters (whitespace or "/")`),Ht&&wn&&Gt.push("and"),wn&&Gt.push(`version name "${j}" contains illegal characters (whitespace or "/")`),void ee.warn(Gt.join(" "))}sn(new M.wA(`${gt}-version`,()=>({library:gt,version:j}),"VERSION"))}function pn(ue,j){if(null!==ue&&"function"!=typeof ue)throw Ln.create("invalid-log-argument");(0,G.Am)(ue,j)}function Dr(ue){(0,G.Ub)(ue)}const Tn="firebase-heartbeat-store";let vr=null;function $r(){return vr||(vr=(0,de.X3)("firebase-heartbeat-database",1,{upgrade:(ue,j)=>{0===j&&ue.createObjectStore(Tn)}}).catch(ue=>{throw Ln.create("storage-open",{originalErrorMessage:ue.message})})),vr}function an(){return(an=(0,p.Z)(function*(ue){try{return(yield $r()).transaction(Tn).objectStore(Tn).get(zr(ue))}catch(j){throw Ln.create("storage-get",{originalErrorMessage:j.message})}})).apply(this,arguments)}function Wt(ue,j){return Or.apply(this,arguments)}function Or(){return(Or=(0,p.Z)(function*(ue,j){try{const He=(yield $r()).transaction(Tn,"readwrite");return yield He.objectStore(Tn).put(j,zr(ue)),He.done}catch(oe){throw Ln.create("storage-set",{originalErrorMessage:oe.message})}})).apply(this,arguments)}function zr(ue){return`${ue.name}!${ue.options.appId}`}class gr{constructor(j){this.container=j,this._heartbeatsCache=null;const oe=this.container.getProvider("app").getImmediate();this._storage=new Pe(oe),this._heartbeatsCachePromise=this._storage.read().then(He=>(this._heartbeatsCache=He,He))}triggerHeartbeat(){var j=this;return(0,p.Z)(function*(){const He=j.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),gt=jn();if(null===j._heartbeatsCache&&(j._heartbeatsCache=yield j._heartbeatsCachePromise),j._heartbeatsCache.lastSentHeartbeatDate!==gt&&!j._heartbeatsCache.heartbeats.some(Ht=>Ht.date===gt))return j._heartbeatsCache.heartbeats.push({date:gt,agent:He}),j._heartbeatsCache.heartbeats=j._heartbeatsCache.heartbeats.filter(Ht=>{const wn=new Date(Ht.date).valueOf();return Date.now()-wn<=2592e6}),j._storage.overwrite(j._heartbeatsCache)})()}getHeartbeatsHeader(){var j=this;return(0,p.Z)(function*(){if(null===j._heartbeatsCache&&(yield j._heartbeatsCachePromise),null===j._heartbeatsCache||0===j._heartbeatsCache.heartbeats.length)return"";const oe=jn(),{heartbeatsToSend:He,unsentEntries:gt}=function Me(ue,j=1024){const oe=[];let He=ue.slice();for(const gt of ue){const Ht=oe.find(wn=>wn.agent===gt.agent);if(Ht){if(Ht.dates.push(gt.date),Ue(oe)>j){Ht.dates.pop();break}}else if(oe.push({agent:gt.agent,dates:[gt.date]}),Ue(oe)>j){oe.pop();break}He=He.slice(1)}return{heartbeatsToSend:oe,unsentEntries:He}}(j._heartbeatsCache.heartbeats),Ht=(0,Ee.L)(JSON.stringify({version:2,heartbeats:He}));return j._heartbeatsCache.lastSentHeartbeatDate=oe,gt.length>0?(j._heartbeatsCache.heartbeats=gt,yield j._storage.overwrite(j._heartbeatsCache)):(j._heartbeatsCache.heartbeats=[],j._storage.overwrite(j._heartbeatsCache)),Ht})()}}function jn(){return(new Date).toISOString().substring(0,10)}class Pe{constructor(j){this.app=j,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,p.Z)(function*(){return!!(0,Ee.hl)()&&(0,Ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var j=this;return(0,p.Z)(function*(){return(yield j._canUseIndexedDBPromise)&&(yield function Vt(ue){return an.apply(this,arguments)}(j.app))||{heartbeats:[]}})()}overwrite(j){var oe=this;return(0,p.Z)(function*(){var He;if(yield oe._canUseIndexedDBPromise){const Ht=yield oe.read();return Wt(oe.app,{lastSentHeartbeatDate:null!==(He=j.lastSentHeartbeatDate)&&void 0!==He?He:Ht.lastSentHeartbeatDate,heartbeats:j.heartbeats})}})()}add(j){var oe=this;return(0,p.Z)(function*(){var He;if(yield oe._canUseIndexedDBPromise){const Ht=yield oe.read();return Wt(oe.app,{lastSentHeartbeatDate:null!==(He=j.lastSentHeartbeatDate)&&void 0!==He?He:Ht.lastSentHeartbeatDate,heartbeats:[...Ht.heartbeats,...j.heartbeats]})}})()}}function Ue(ue){return(0,Ee.L)(JSON.stringify({version:2,heartbeats:ue})).length}!function Et(ue){sn(new M.wA("platform-logger",j=>new Te(j),"PRIVATE")),sn(new M.wA("heartbeat",j=>new gr(j),"PRIVATE")),An(ce,"0.7.25",ue),An(ce,"0.7.25","esm2017"),An("fire-js","")}("")},4859:(ke,ye,S)=>{S.d(ye,{H0:()=>ce,wA:()=>G,zt:()=>de});var p=S(5861),M=S(2090);class G{constructor(ee,fe,Ae){this.name=ee,this.instanceFactory=fe,this.type=Ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ee){return this.instantiationMode=ee,this}setMultipleInstances(ee){return this.multipleInstances=ee,this}setServiceProps(ee){return this.serviceProps=ee,this}setInstanceCreatedCallback(ee){return this.onInstanceCreated=ee,this}}const Ee="[DEFAULT]";class de{constructor(ee,fe){this.name=ee,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ee){const fe=this.normalizeInstanceIdentifier(ee);if(!this.instancesDeferred.has(fe)){const Ae=new M.BH;if(this.instancesDeferred.set(fe,Ae),this.isInitialized(fe)||this.shouldAutoInitialize())try{const Ye=this.getOrInitializeService({instanceIdentifier:fe});Ye&&Ae.resolve(Ye)}catch(Ye){}}return this.instancesDeferred.get(fe).promise}getImmediate(ee){var fe;const Ae=this.normalizeInstanceIdentifier(null==ee?void 0:ee.identifier),Ye=null!==(fe=null==ee?void 0:ee.optional)&&void 0!==fe&&fe;if(!this.isInitialized(Ae)&&!this.shouldAutoInitialize()){if(Ye)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Ae})}catch(Je){if(Ye)return null;throw Je}}getComponent(){return this.component}setComponent(ee){if(ee.name!==this.name)throw Error(`Mismatching Component ${ee.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ee,this.shouldAutoInitialize()){if(function be(_e){return"EAGER"===_e.instantiationMode}(ee))try{this.getOrInitializeService({instanceIdentifier:Ee})}catch(fe){}for(const[fe,Ae]of this.instancesDeferred.entries()){const Ye=this.normalizeInstanceIdentifier(fe);try{const Je=this.getOrInitializeService({instanceIdentifier:Ye});Ae.resolve(Je)}catch(Je){}}}}clearInstance(ee=Ee){this.instancesDeferred.delete(ee),this.instancesOptions.delete(ee),this.instances.delete(ee)}delete(){var ee=this;return(0,p.Z)(function*(){const fe=Array.from(ee.instances.values());yield Promise.all([...fe.filter(Ae=>"INTERNAL"in Ae).map(Ae=>Ae.INTERNAL.delete()),...fe.filter(Ae=>"_delete"in Ae).map(Ae=>Ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ee=Ee){return this.instances.has(ee)}getOptions(ee=Ee){return this.instancesOptions.get(ee)||{}}initialize(ee={}){const{options:fe={}}=ee,Ae=this.normalizeInstanceIdentifier(ee.instanceIdentifier);if(this.isInitialized(Ae))throw Error(`${this.name}(${Ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ye=this.getOrInitializeService({instanceIdentifier:Ae,options:fe});for(const[Je,ot]of this.instancesDeferred.entries())Ae===this.normalizeInstanceIdentifier(Je)&&ot.resolve(Ye);return Ye}onInit(ee,fe){var Ae;const Ye=this.normalizeInstanceIdentifier(fe),Je=null!==(Ae=this.onInitCallbacks.get(Ye))&&void 0!==Ae?Ae:new Set;Je.add(ee),this.onInitCallbacks.set(Ye,Je);const ot=this.instances.get(Ye);return ot&&ee(ot,Ye),()=>{Je.delete(ee)}}invokeOnInitCallbacks(ee,fe){const Ae=this.onInitCallbacks.get(fe);if(Ae)for(const Ye of Ae)try{Ye(ee,fe)}catch(Je){}}getOrInitializeService({instanceIdentifier:ee,options:fe={}}){let Ae=this.instances.get(ee);if(!Ae&&this.component&&(Ae=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=ee,_e===Ee?void 0:_e),options:fe}),this.instances.set(ee,Ae),this.instancesOptions.set(ee,fe),this.invokeOnInitCallbacks(Ae,ee),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ee,Ae)}catch(Ye){}var _e;return Ae||null}normalizeInstanceIdentifier(ee=Ee){return this.component?this.component.multipleInstances?ee:Ee:ee}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(ee){this.name=ee,this.providers=new Map}addComponent(ee){const fe=this.getProvider(ee.name);if(fe.isComponentSet())throw new Error(`Component ${ee.name} has already been registered with ${this.name}`);fe.setComponent(ee)}addOrOverwriteComponent(ee){this.getProvider(ee.name).isComponentSet()&&this.providers.delete(ee.name),this.addComponent(ee)}getProvider(ee){if(this.providers.has(ee))return this.providers.get(ee);const fe=new de(ee,this);return this.providers.set(ee,fe),fe}getProviders(){return Array.from(this.providers.values())}}},1877:(ke,ye,S)=>{S.d(ye,{Am:()=>_e,Ub:()=>ce,Yd:()=>be,in:()=>M});const p=[];var M=(()=>{return(ee=M||(M={}))[ee.DEBUG=0]="DEBUG",ee[ee.VERBOSE=1]="VERBOSE",ee[ee.INFO=2]="INFO",ee[ee.WARN=3]="WARN",ee[ee.ERROR=4]="ERROR",ee[ee.SILENT=5]="SILENT",M;var ee})();const G={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},Ee=M.INFO,de={[M.DEBUG]:"log",[M.VERBOSE]:"log",[M.INFO]:"info",[M.WARN]:"warn",[M.ERROR]:"error"},Te=(ee,fe,...Ae)=>{if(fe<ee.logLevel)return;const Ye=(new Date).toISOString(),Je=de[fe];if(!Je)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[Je](`[${Ye}]  ${ee.name}:`,...Ae)};class be{constructor(fe){this.name=fe,this._logLevel=Ee,this._logHandler=Te,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in M))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?G[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,M.DEBUG,...fe),this._logHandler(this,M.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,M.VERBOSE,...fe),this._logHandler(this,M.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,M.INFO,...fe),this._logHandler(this,M.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,M.WARN,...fe),this._logHandler(this,M.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,M.ERROR,...fe),this._logHandler(this,M.ERROR,...fe)}}function ce(ee){p.forEach(fe=>{fe.setLogLevel(ee)})}function _e(ee,fe){for(const Ae of p){let Ye=null;fe&&fe.level&&(Ye=G[fe.level]),Ae.userLogHandler=null===ee?null:(Je,ot,...bt)=>{const at=bt.map(tt=>{if(null==tt)return null;if("string"==typeof tt)return tt;if("number"==typeof tt||"boolean"==typeof tt)return tt.toString();if(tt instanceof Error)return tt.message;try{return JSON.stringify(tt)}catch(xe){return null}}).filter(tt=>tt).join(" ");ot>=(null!=Ye?Ye:Je.logLevel)&&ee({level:M[ot].toLowerCase(),message:at,args:bt,type:Je.name})}}}},9565:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{FT:()=>StoreDevtoolsModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5e3),_ngrx_store__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(5620),rxjs__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(515),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8306),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(9646),rxjs__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(6451),rxjs__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(233),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(4707),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3099),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9300),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4004),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(4351),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(1749),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(8372),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(262),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5698),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2722),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3900),rxjs_operators__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(5684),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5363),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(1365),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5026);class StoreDevtoolsConfig{constructor(){this.maxAge=!1}}const STORE_DEVTOOLS_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Options"),INITIAL_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Initial Config");function noMonitor(){return null}const DEFAULT_NAME="NgRx Store DevTools";function createConfig(ke){const ye={maxAge:!1,monitor:noMonitor,actionSanitizer:void 0,stateSanitizer:void 0,name:DEFAULT_NAME,serialize:!1,logOnly:!1,autoPause:!1,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0}},S="function"==typeof ke?ke():ke,G=Object.assign({},ye,{features:S.features||!!S.logOnly&&{pause:!0,export:!0,test:!0}||ye.features},S);if(G.maxAge&&G.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${G.maxAge}`);return G}const PERFORM_ACTION="PERFORM_ACTION",REFRESH="REFRESH",RESET="RESET",ROLLBACK="ROLLBACK",COMMIT="COMMIT",SWEEP="SWEEP",TOGGLE_ACTION="TOGGLE_ACTION",SET_ACTIONS_ACTIVE="SET_ACTIONS_ACTIVE",JUMP_TO_STATE="JUMP_TO_STATE",JUMP_TO_ACTION="JUMP_TO_ACTION",IMPORT_STATE="IMPORT_STATE",LOCK_CHANGES="LOCK_CHANGES",PAUSE_RECORDING="PAUSE_RECORDING";class PerformAction{constructor(ye,S){if(this.action=ye,this.timestamp=S,this.type=PERFORM_ACTION,void 0===ye.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}}class Refresh{constructor(){this.type=REFRESH}}class Reset{constructor(ye){this.timestamp=ye,this.type=RESET}}class Rollback{constructor(ye){this.timestamp=ye,this.type=ROLLBACK}}class Commit{constructor(ye){this.timestamp=ye,this.type=COMMIT}}class Sweep{constructor(){this.type=SWEEP}}class ToggleAction{constructor(ye){this.id=ye,this.type=TOGGLE_ACTION}}class SetActionsActive{constructor(ye,S,p=!0){this.start=ye,this.end=S,this.active=p,this.type=SET_ACTIONS_ACTIVE}}class JumpToState{constructor(ye){this.index=ye,this.type=JUMP_TO_STATE}}class JumpToAction{constructor(ye){this.actionId=ye,this.type=JUMP_TO_ACTION}}class ImportState{constructor(ye){this.nextLiftedState=ye,this.type=IMPORT_STATE}}class LockChanges{constructor(ye){this.status=ye,this.type=LOCK_CHANGES}}class PauseRecording{constructor(ye){this.status=ye,this.type=PAUSE_RECORDING}}function difference(ke,ye){return ke.filter(S=>ye.indexOf(S)<0)}function unliftState(ke){const{computedStates:ye,currentStateIndex:S}=ke;if(S>=ye.length){const{state:M}=ye[ye.length-1];return M}const{state:p}=ye[S];return p}function unliftAction(ke){return ke.actionsById[ke.nextActionId-1]}function liftAction(ke){return new PerformAction(ke,+Date.now())}function sanitizeActions(ke,ye){return Object.keys(ye).reduce((S,p)=>{const M=Number(p);return S[M]=sanitizeAction(ke,ye[M],M),S},{})}function sanitizeAction(ke,ye,S){return Object.assign(Object.assign({},ye),{action:ke(ye.action,S)})}function sanitizeStates(ke,ye){return ye.map((S,p)=>({state:sanitizeState(ke,S.state,p),error:S.error}))}function sanitizeState(ke,ye,S){return ke(ye,S)}function shouldFilterActions(ke){return ke.predicate||ke.actionsSafelist||ke.actionsBlocklist}function filterLiftedState(ke,ye,S,p){const M=[],G={},Ee=[];return ke.stagedActionIds.forEach((de,Te)=>{const be=ke.actionsById[de];!be||Te&&isActionFiltered(ke.computedStates[Te],be,ye,S,p)||(G[de]=be,M.push(de),Ee.push(ke.computedStates[Te]))}),Object.assign(Object.assign({},ke),{stagedActionIds:M,actionsById:G,computedStates:Ee})}function isActionFiltered(ke,ye,S,p,M){const G=S&&!S(ke,ye.action),Ee=p&&!ye.action.type.match(p.map(Te=>escapeRegExp(Te)).join("|")),de=M&&ye.action.type.match(M.map(Te=>escapeRegExp(Te)).join("|"));return G||Ee||de}function escapeRegExp(ke){return ke.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const INIT_ACTION={type:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg},RECOMPUTE="@ngrx/store-devtools/recompute",RECOMPUTE_ACTION={type:RECOMPUTE};function computeNextEntry(ke,ye,S,p,M){if(p)return{state:S,error:"Interrupted by an error up the chain"};let Ee,G=S;try{G=ke(S,ye)}catch(de){Ee=de.toString(),M.handleError(de)}return{state:G,error:Ee}}function recomputeStates(ke,ye,S,p,M,G,Ee,de,Te){if(ye>=ke.length&&ke.length===G.length)return ke;const be=ke.slice(0,ye),ce=G.length-(Te?1:0);for(let _e=ye;_e<ce;_e++){const ee=G[_e],fe=M[ee].action,Ae=be[_e-1],Ye=Ae?Ae.state:p,Je=Ae?Ae.error:void 0,bt=Ee.indexOf(ee)>-1?Ae:computeNextEntry(S,fe,Ye,Je,de);be.push(bt)}return Te&&be.push(ke[ke.length-1]),be}function liftInitialState(ke,ye){return{monitorState:ye(void 0,{}),nextActionId:1,actionsById:{0:liftAction(INIT_ACTION)},stagedActionIds:[0],skippedActionIds:[],committedState:ke,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function liftReducerWith(ke,ye,S,p,M={}){return G=>(Ee,de)=>{let{monitorState:Te,actionsById:be,nextActionId:ce,stagedActionIds:_e,skippedActionIds:ee,committedState:fe,currentStateIndex:Ae,computedStates:Ye,isLocked:Je,isPaused:ot}=Ee||ye;function bt(xe){let wt=xe,Qe=_e.slice(1,wt+1);for(let Ge=0;Ge<Qe.length;Ge++){if(Ye[Ge+1].error){wt=Ge,Qe=_e.slice(1,wt+1);break}delete be[Qe[Ge]]}ee=ee.filter(Ge=>-1===Qe.indexOf(Ge)),_e=[0,..._e.slice(wt+1)],fe=Ye[wt].state,Ye=Ye.slice(wt),Ae=Ae>wt?Ae-wt:0}function at(){be={0:liftAction(INIT_ACTION)},ce=1,_e=[0],ee=[],fe=Ye[Ae].state,Ae=0,Ye=[]}Ee||(be=Object.create(be));let tt=0;switch(de.type){case LOCK_CHANGES:Je=de.status,tt=1/0;break;case PAUSE_RECORDING:ot=de.status,ot?(_e=[..._e,ce],be[ce]=new PerformAction({type:"@ngrx/devtools/pause"},+Date.now()),ce++,tt=_e.length-1,Ye=Ye.concat(Ye[Ye.length-1]),Ae===_e.length-2&&Ae++,tt=1/0):at();break;case RESET:be={0:liftAction(INIT_ACTION)},ce=1,_e=[0],ee=[],fe=ke,Ae=0,Ye=[];break;case COMMIT:at();break;case ROLLBACK:be={0:liftAction(INIT_ACTION)},ce=1,_e=[0],ee=[],Ae=0,Ye=[];break;case TOGGLE_ACTION:{const{id:xe}=de;ee=-1===ee.indexOf(xe)?[xe,...ee]:ee.filter(Qe=>Qe!==xe),tt=_e.indexOf(xe);break}case SET_ACTIONS_ACTIVE:{const{start:xe,end:wt,active:Qe}=de,Ge=[];for(let ut=xe;ut<wt;ut++)Ge.push(ut);ee=Qe?difference(ee,Ge):[...ee,...Ge],tt=_e.indexOf(xe);break}case JUMP_TO_STATE:Ae=de.index,tt=1/0;break;case JUMP_TO_ACTION:{const xe=_e.indexOf(de.actionId);-1!==xe&&(Ae=xe),tt=1/0;break}case SWEEP:_e=difference(_e,ee),ee=[],Ae=Math.min(Ae,_e.length-1);break;case PERFORM_ACTION:{if(Je)return Ee||ye;if(ot||Ee&&isActionFiltered(Ee.computedStates[Ae],de,M.predicate,M.actionsSafelist,M.actionsBlocklist)){const wt=Ye[Ye.length-1];Ye=[...Ye.slice(0,-1),computeNextEntry(G,de.action,wt.state,wt.error,S)],tt=1/0;break}M.maxAge&&_e.length===M.maxAge&&bt(1),Ae===_e.length-1&&Ae++;const xe=ce++;be[xe]=de,_e=[..._e,xe],tt=_e.length-1;break}case IMPORT_STATE:({monitorState:Te,actionsById:be,nextActionId:ce,stagedActionIds:_e,skippedActionIds:ee,committedState:fe,currentStateIndex:Ae,computedStates:Ye,isLocked:Je,isPaused:ot}=de.nextLiftedState);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.qg:tt=0,M.maxAge&&_e.length>M.maxAge&&(Ye=recomputeStates(Ye,tt,G,fe,be,_e,ee,S,ot),bt(_e.length-M.maxAge),tt=1/0);break;case _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb:if(Ye.filter(wt=>wt.error).length>0)tt=0,M.maxAge&&_e.length>M.maxAge&&(Ye=recomputeStates(Ye,tt,G,fe,be,_e,ee,S,ot),bt(_e.length-M.maxAge),tt=1/0);else{if(!ot&&!Je){Ae===_e.length-1&&Ae++;const wt=ce++;be[wt]=new PerformAction(de,+Date.now()),_e=[..._e,wt],tt=_e.length-1,Ye=recomputeStates(Ye,tt,G,fe,be,_e,ee,S,ot)}Ye=Ye.map(wt=>Object.assign(Object.assign({},wt),{state:G(wt.state,RECOMPUTE_ACTION)})),Ae=_e.length-1,M.maxAge&&_e.length>M.maxAge&&bt(_e.length-M.maxAge),tt=1/0}break;default:tt=1/0}return Ye=recomputeStates(Ye,tt,G,fe,be,_e,ee,S,ot),Te=p(Te,de),{monitorState:Te,actionsById:be,nextActionId:ce,stagedActionIds:_e,skippedActionIds:ee,committedState:fe,currentStateIndex:Ae,computedStates:Ye,isLocked:Je,isPaused:ot}}}let DevtoolsDispatcher=(()=>{class ke extends _ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO{}return ke.\u0275fac=function(){let ye;return function(p){return(ye||(ye=_angular_core__WEBPACK_IMPORTED_MODULE_0__.n5z(ke)))(p||ke)}}(),ke.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:ke,factory:ke.\u0275fac}),ke})();const ExtensionActionTypes={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},REDUX_DEVTOOLS_EXTENSION=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Redux Devtools Extension");let DevtoolsExtension=(()=>{class DevtoolsExtension{constructor(ke,ye,S){this.config=ye,this.dispatcher=S,this.devtoolsExtension=ke,this.createActionStreams()}notify(ke,ye){if(this.devtoolsExtension)if(ke.type===PERFORM_ACTION){if(ye.isLocked||ye.isPaused)return;const S=unliftState(ye);if(shouldFilterActions(this.config)&&isActionFiltered(S,ke,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;const p=this.config.stateSanitizer?sanitizeState(this.config.stateSanitizer,S,ye.currentStateIndex):S,M=this.config.actionSanitizer?sanitizeAction(this.config.actionSanitizer,ke,ye.nextActionId):ke;this.sendToReduxDevtools(()=>this.extensionConnection.send(M,p))}else{const S=Object.assign(Object.assign({},ye),{stagedActionIds:ye.stagedActionIds,actionsById:this.config.actionSanitizer?sanitizeActions(this.config.actionSanitizer,ye.actionsById):ye.actionsById,computedStates:this.config.stateSanitizer?sanitizeStates(this.config.stateSanitizer,ye.computedStates):ye.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,S,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new rxjs__WEBPACK_IMPORTED_MODULE_3__.y(ke=>{const ye=this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=ye,ye.init(),ye.subscribe(S=>ke.next(S)),ye.unsubscribe}):rxjs__WEBPACK_IMPORTED_MODULE_2__.E}createActionStreams(){const ke=this.createChangesObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.B)()),ye=ke.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(de=>de.type===ExtensionActionTypes.START)),S=ke.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(de=>de.type===ExtensionActionTypes.STOP)),p=ke.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(de=>de.type===ExtensionActionTypes.DISPATCH),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(de=>this.unwrapAction(de.payload)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(de=>de.type===IMPORT_STATE?this.dispatcher.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(Te=>Te.type===_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.wb),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.V)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.b)(1e3),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(()=>de),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.K)(()=>(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(de)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.q)(1)):(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.of)(de))),G=ke.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.h)(de=>de.type===ExtensionActionTypes.ACTION),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(de=>this.unwrapAction(de.payload))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(S)),Ee=p.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(S));this.start$=ye.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.R)(S)),this.actions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>G)),this.liftedActions$=this.start$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.w)(()=>Ee))}unwrapAction(action){return"string"==typeof action?eval(`(${action})`):action}getExtensionConfig(ke){var ye;const S={name:ke.name,features:ke.features,serialize:ke.serialize,autoPause:null!==(ye=ke.autoPause)&&void 0!==ye&&ye};return!1!==ke.maxAge&&(S.maxAge=ke.maxAge),S}sendToReduxDevtools(ke){try{ke()}catch(ye){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",ye)}}}return DevtoolsExtension.\u0275fac=function ke(ye){return new(ye||DevtoolsExtension)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(REDUX_DEVTOOLS_EXTENSION),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher))},DevtoolsExtension.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:DevtoolsExtension,factory:DevtoolsExtension.\u0275fac}),DevtoolsExtension})(),StoreDevtools=(()=>{class ke{constructor(S,p,M,G,Ee,de,Te,be){const ce=liftInitialState(Te,be.monitor),_e=liftReducerWith(Te,ce,de,be.monitor,be),ee=(0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_15__.T)(p.asObservable().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_16__.T)(1)),G.actions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(liftAction)),S,G.liftedActions$).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Q)(rxjs__WEBPACK_IMPORTED_MODULE_18__.N)),fe=M.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(_e)),Ae=new rxjs__WEBPACK_IMPORTED_MODULE_19__.t(1),Ye=ee.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.M)(fe),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.R)(({state:at},[tt,xe])=>{let wt=xe(at,tt);return tt.type!==PERFORM_ACTION&&shouldFilterActions(be)&&(wt=filterLiftedState(wt,be.predicate,be.actionsSafelist,be.actionsBlocklist)),G.notify(tt,wt),{state:wt,action:tt}},{state:ce,action:null})).subscribe(({state:at,action:tt})=>{Ae.next(at),tt.type===PERFORM_ACTION&&Ee.next(tt.action)}),Je=G.start$.subscribe(()=>{this.refresh()}),ot=Ae.asObservable(),bt=ot.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.U)(unliftState));this.extensionStartSubscription=Je,this.stateSubscription=Ye,this.dispatcher=S,this.liftedState=ot,this.state=bt}dispatch(S){this.dispatcher.next(S)}next(S){this.dispatcher.next(S)}error(S){}complete(){}performAction(S){this.dispatch(new PerformAction(S,+Date.now()))}refresh(){this.dispatch(new Refresh)}reset(){this.dispatch(new Reset(+Date.now()))}rollback(){this.dispatch(new Rollback(+Date.now()))}commit(){this.dispatch(new Commit(+Date.now()))}sweep(){this.dispatch(new Sweep)}toggleAction(S){this.dispatch(new ToggleAction(S))}jumpToAction(S){this.dispatch(new JumpToAction(S))}jumpToState(S){this.dispatch(new JumpToState(S))}importState(S){this.dispatch(new ImportState(S))}lockChanges(S){this.dispatch(new LockChanges(S))}pauseRecording(S){this.dispatch(new PauseRecording(S))}}return ke.\u0275fac=function(S){return new(S||ke)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsDispatcher),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.UO),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.n$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(DevtoolsExtension),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y$),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_0__.qLn),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.Y6),_angular_core__WEBPACK_IMPORTED_MODULE_0__.LFG(STORE_DEVTOOLS_CONFIG))},ke.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_0__.Yz7({token:ke,factory:ke.\u0275fac}),ke})();const IS_EXTENSION_OR_MONITOR_PRESENT=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.OlP("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function createIsExtensionOrMonitorPresent(ke,ye){return Boolean(ke)||ye.monitor!==noMonitor}function createReduxDevtoolsExtension(){const ke="__REDUX_DEVTOOLS_EXTENSION__";return"object"==typeof window&&void 0!==window[ke]?window[ke]:null}function createStateObservable(ke){return ke.state}let StoreDevtoolsModule=(()=>{class ke{static instrument(S={}){return{ngModule:ke,providers:[DevtoolsExtension,DevtoolsDispatcher,StoreDevtools,{provide:INITIAL_OPTIONS,useValue:S},{provide:IS_EXTENSION_OR_MONITOR_PRESENT,deps:[REDUX_DEVTOOLS_EXTENSION,STORE_DEVTOOLS_CONFIG],useFactory:createIsExtensionOrMonitorPresent},{provide:REDUX_DEVTOOLS_EXTENSION,useFactory:createReduxDevtoolsExtension},{provide:STORE_DEVTOOLS_CONFIG,deps:[INITIAL_OPTIONS],useFactory:createConfig},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.FR,deps:[StoreDevtools],useFactory:createStateObservable},{provide:_ngrx_store__WEBPACK_IMPORTED_MODULE_1__.mK,useExisting:DevtoolsDispatcher}]}}}return ke.\u0275fac=function(S){return new(S||ke)},ke.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.oAB({type:ke}),ke.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.cJS({}),ke})()},5620:(ke,ye,S)=>{S.d(ye,{UO:()=>At,qg:()=>ut,Y6:()=>Fe,mK:()=>Ut,n$:()=>jr,Y$:()=>Dr,FR:()=>Gr,Aw:()=>mi,wb:()=>pr,PH:()=>Je,Lq:()=>Jr,on:()=>Er,Ky:()=>ot});var p=S(5e3),M=S(1135),G=S(8306),Ee=S(7579),de=S(233),Te=S(4004),ce=S(5363),_e=S(1365),ee=S(5026),fe=S(1884);const Ae={};function Je(ve,le){if(Ae[ve]=(Ae[ve]||0)+1,"function"==typeof le)return at(ve,(...me)=>Object.assign(Object.assign({},le(...me)),{type:ve}));switch(le?le._as:"empty"){case"empty":return at(ve,()=>({type:ve}));case"props":return at(ve,me=>Object.assign(Object.assign({},me),{type:ve}));default:throw new Error("Unexpected config.")}}function ot(){return{_as:"props",_p:void 0}}function at(ve,le){return Object.defineProperty(le,"type",{value:ve,writable:!1})}const ut="@ngrx/store/init";let At=(()=>{class ve extends M.X{constructor(){super({type:ut})}next(Q){if("function"==typeof Q)throw new TypeError("\n        Dispatch expected an object, instead it received a function.\n        If you're using the createAction function, make sure to invoke the function\n        before dispatching the action. For example, someAction should be someAction().");if(void 0===Q)throw new TypeError("Actions must be objects");if(void 0===Q.type)throw new TypeError("Actions must have a type property");super.next(Q)}complete(){}ngOnDestroy(){super.complete()}}return ve.\u0275fac=function(Q){return new(Q||ve)},ve.\u0275prov=p.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const je=[At],it=new p.OlP("@ngrx/store Internal Root Guard"),Xe=new p.OlP("@ngrx/store Internal Initial State"),Fe=new p.OlP("@ngrx/store Initial State"),ze=new p.OlP("@ngrx/store Reducer Factory"),et=new p.OlP("@ngrx/store Internal Reducer Factory Provider"),dt=new p.OlP("@ngrx/store Initial Reducers"),Ke=new p.OlP("@ngrx/store Internal Initial Reducers"),_t=new p.OlP("@ngrx/store Store Features"),St=new p.OlP("@ngrx/store Internal Store Reducers"),nn=new p.OlP("@ngrx/store Internal Feature Reducers"),rn=new p.OlP("@ngrx/store Internal Feature Configs"),Ot=new p.OlP("@ngrx/store Internal Store Features"),en=new p.OlP("@ngrx/store Internal Feature Reducers Token"),Cn=new p.OlP("@ngrx/store Feature Reducers"),En=new p.OlP("@ngrx/store User Provided Meta Reducers"),on=new p.OlP("@ngrx/store Meta Reducers"),sn=new p.OlP("@ngrx/store Internal Resolved Meta Reducers"),Jt=new p.OlP("@ngrx/store User Runtime Checks Config"),Wn=new p.OlP("@ngrx/store Internal User Runtime Checks Config"),ar=new p.OlP("@ngrx/store Internal Runtime Checks"),Hn=new p.OlP("@ngrx/store Check if Action types are unique");function Ln(ve,le={}){const Q=Object.keys(ve),me={};for(let qe=0;qe<Q.length;qe++){const Rt=Q[qe];"function"==typeof ve[Rt]&&(me[Rt]=ve[Rt])}const $e=Object.keys(me);return function(Rt,yn){Rt=void 0===Rt?le:Rt;let Nn=!1;const gn={};for(let Sn=0;Sn<$e.length;Sn++){const ai=$e[Sn],os=Rt[ai],Fr=(0,me[ai])(os,yn);gn[ai]=Fr,Nn=Nn||Fr!==os}return Nn?gn:Rt}}function ur(...ve){return function(le){if(0===ve.length)return le;const Q=ve[ve.length-1];return ve.slice(0,-1).reduceRight(($e,qe)=>qe($e),Q(le))}}function Ar(ve,le){return Array.isArray(le)&&le.length>0&&(ve=ur.apply(null,[...le,ve])),(Q,me)=>{const $e=ve(Q);return(qe,Rt)=>$e(qe=void 0===qe?me:qe,Rt)}}class jr extends G.y{}class Ut extends At{}const pr="@ngrx/store/update-reducers";let An=(()=>{class ve extends M.X{constructor(Q,me,$e,qe){super(qe($e,me)),this.dispatcher=Q,this.initialState=me,this.reducers=$e,this.reducerFactory=qe}get currentReducers(){return this.reducers}addFeature(Q){this.addFeatures([Q])}addFeatures(Q){const me=Q.reduce(($e,{reducers:qe,reducerFactory:Rt,metaReducers:yn,initialState:Nn,key:gn})=>{const Sn="function"==typeof qe?function qn(ve){const le=Array.isArray(ve)&&ve.length>0?ur(...ve):Q=>Q;return(Q,me)=>(Q=le(Q),($e,qe)=>Q($e=void 0===$e?me:$e,qe))}(yn)(qe,Nn):Ar(Rt,yn)(qe,Nn);return $e[gn]=Sn,$e},{});this.addReducers(me)}removeFeature(Q){this.removeFeatures([Q])}removeFeatures(Q){this.removeReducers(Q.map(me=>me.key))}addReducer(Q,me){this.addReducers({[Q]:me})}addReducers(Q){this.reducers=Object.assign(Object.assign({},this.reducers),Q),this.updateReducers(Object.keys(Q))}removeReducer(Q){this.removeReducers([Q])}removeReducers(Q){Q.forEach(me=>{this.reducers=function Cr(ve,le){return Object.keys(ve).filter(Q=>Q!==le).reduce((Q,me)=>Object.assign(Q,{[me]:ve[me]}),{})}(this.reducers,me)}),this.updateReducers(Q)}updateReducers(Q){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:pr,features:Q})}ngOnDestroy(){this.complete()}}return ve.\u0275fac=function(Q){return new(Q||ve)(p.LFG(Ut),p.LFG(Fe),p.LFG(dt),p.LFG(ze))},ve.\u0275prov=p.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const pn=[An,{provide:jr,useExisting:An},{provide:Ut,useExisting:At}];let Dr=(()=>{class ve extends Ee.x{ngOnDestroy(){this.complete()}}return ve.\u0275fac=function(){let le;return function(me){return(le||(le=p.n5z(ve)))(me||ve)}}(),ve.\u0275prov=p.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const Hr=[Dr];class Gr extends G.y{}let Tn=(()=>{class ve extends M.X{constructor(Q,me,$e,qe){super(qe);const gn=Q.pipe((0,ce.Q)(de.N)).pipe((0,_e.M)(me)).pipe((0,ee.R)(vr,{state:qe}));this.stateSubscription=gn.subscribe(({state:Sn,action:ai})=>{this.next(Sn),$e.next(ai)})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}}return ve.INIT=ut,ve.\u0275fac=function(Q){return new(Q||ve)(p.LFG(At),p.LFG(jr),p.LFG(Dr),p.LFG(Fe))},ve.\u0275prov=p.Yz7({token:ve,factory:ve.\u0275fac}),ve})();function vr(ve={state:void 0},[le,Q]){const{state:me}=ve;return{state:Q(me,le),action:le}}const $r=[Tn,{provide:Gr,useExisting:Tn}];let Vt=(()=>{class ve extends G.y{constructor(Q,me,$e){super(),this.actionsObserver=me,this.reducerManager=$e,this.source=Q}select(Q,...me){return Wt.call(null,Q,...me)(this)}lift(Q){const me=new ve(this,this.actionsObserver,this.reducerManager);return me.operator=Q,me}dispatch(Q){this.actionsObserver.next(Q)}next(Q){this.actionsObserver.next(Q)}error(Q){this.actionsObserver.error(Q)}complete(){this.actionsObserver.complete()}addReducer(Q,me){this.reducerManager.addReducer(Q,me)}removeReducer(Q){this.reducerManager.removeReducer(Q)}}return ve.\u0275fac=function(Q){return new(Q||ve)(p.LFG(Gr),p.LFG(At),p.LFG(An))},ve.\u0275prov=p.Yz7({token:ve,factory:ve.\u0275fac}),ve})();const an=[Vt];function Wt(ve,le,...Q){return function($e){let qe;if("string"==typeof ve){const Rt=[le,...Q].filter(Boolean);qe=$e.pipe(function be(...ve){const le=ve.length;if(0===le)throw new Error("list of properties cannot be empty.");return(0,Te.U)(Q=>{let me=Q;for(let $e=0;$e<le;$e++){const qe=null==me?void 0:me[ve[$e]];if(void 0===qe)return;me=qe}return me})}(ve,...Rt))}else{if("function"!=typeof ve)throw new TypeError(`Unexpected type '${typeof ve}' in select operator, expected 'string' or 'function'`);qe=$e.pipe((0,Te.U)(Rt=>ve(Rt,le)))}return qe.pipe((0,fe.x)())}}const Or="https://ngrx.io/guide/store/configuration/runtime-checks";function zr(ve){return void 0===ve}function Bn(ve){return null===ve}function di(ve){return Array.isArray(ve)}function Pe(ve){return"object"==typeof ve&&null!==ve}function ue(ve){return"function"==typeof ve}function Jn(ve){Object.freeze(ve);const le=ue(ve);return Object.getOwnPropertyNames(ve).forEach(Q=>{if(!Q.startsWith("\u0275")&&function oe(ve,le){return Object.prototype.hasOwnProperty.call(ve,le)}(ve,Q)&&(!le||"caller"!==Q&&"callee"!==Q&&"arguments"!==Q)){const me=ve[Q];(Pe(me)||ue(me))&&!Object.isFrozen(me)&&Jn(me)}}),ve}function fn(ve,le=[]){return(zr(ve)||Bn(ve))&&0===le.length?{path:["root"],value:ve}:Object.keys(ve).reduce((me,$e)=>{if(me)return me;const qe=ve[$e];return function j(ve){return ue(ve)&&ve.hasOwnProperty("\u0275cmp")}(qe)?me:!(zr(qe)||Bn(qe)||function Me(ve){return"number"==typeof ve}(qe)||function jn(ve){return"boolean"==typeof ve}(qe)||function gr(ve){return"string"==typeof ve}(qe)||di(qe))&&(function Et(ve){if(!function Ue(ve){return Pe(ve)&&!di(ve)}(ve))return!1;const le=Object.getPrototypeOf(ve);return le===Object.prototype||null===le}(qe)?fn(qe,[...le,$e]):{path:[...le,$e],value:qe})},!1)}function rr(ve,le){if(!1===ve)return;const Q=ve.path.join("."),me=new Error(`Detected unserializable ${le} at "${Q}". ${Or}#strict${le}serializability`);throw me.value=ve.value,me.unserializablePath=Q,me}function Sr(ve){return(0,p.X6Q)()?Object.assign({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},ve):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function Oi({strictActionSerializability:ve,strictStateSerializability:le}){return Q=>ve||le?function Gn(ve,le){return function(Q,me){le.action(me)&&rr(fn(me),"action");const $e=ve(Q,me);return le.state()&&rr(fn($e),"state"),$e}}(Q,{action:me=>ve&&!Pt(me),state:()=>le}):Q}function oi({strictActionImmutability:ve,strictStateImmutability:le}){return Q=>ve||le?function Yt(ve,le){return function(Q,me){const $e=le.action(me)?Jn(me):me,qe=ve(Q,$e);return le.state()?Jn(qe):qe}}(Q,{action:me=>ve&&!Pt(me),state:()=>le}):Q}function Pt(ve){return ve.type.startsWith("@ngrx")}function _n({strictActionWithinNgZone:ve}){return le=>ve?function pe(ve,le){return function(Q,me){if(le.action(me)&&!p.R0b.isInAngularZone())throw new Error(`Action '${me.type}' running outside NgZone. ${Or}#strictactionwithinngzone`);return ve(Q,me)}}(le,{action:Q=>ve&&!Pt(Q)}):le}function ir(ve){return[{provide:Wn,useValue:ve},{provide:Jt,useFactory:Ei,deps:[Wn]},{provide:ar,deps:[Jt],useFactory:Sr},{provide:on,multi:!0,deps:[ar],useFactory:oi},{provide:on,multi:!0,deps:[ar],useFactory:Oi},{provide:on,multi:!0,deps:[ar],useFactory:_n}]}function Qr(){return[{provide:Hn,multi:!0,deps:[ar],useFactory:dr}]}function Ei(ve){return ve}function dr(ve){if(!ve.strictActionTypeUniqueness)return;const le=Object.entries(Ae).filter(([,Q])=>Q>1).map(([Q])=>Q);if(le.length)throw new Error(`Action types are registered more than once, ${le.map(Q=>`"${Q}"`).join(", ")}. ${Or}#strictactiontypeuniqueness`)}let wi=(()=>{class ve{constructor(Q,me,$e,qe,Rt,yn){}}return ve.\u0275fac=function(Q){return new(Q||ve)(p.LFG(At),p.LFG(jr),p.LFG(Dr),p.LFG(Vt),p.LFG(it,8),p.LFG(Hn,8))},ve.\u0275mod=p.oAB({type:ve}),ve.\u0275inj=p.cJS({}),ve})(),zn=(()=>{class ve{constructor(Q,me,$e,qe,Rt){this.features=Q,this.featureReducers=me,this.reducerManager=$e;const yn=Q.map((Nn,gn)=>{const ai=me.shift()[gn];return Object.assign(Object.assign({},Nn),{reducers:ai,initialState:Qi(Nn.initialState)})});$e.addFeatures(yn)}ngOnDestroy(){this.reducerManager.removeFeatures(this.features)}}return ve.\u0275fac=function(Q){return new(Q||ve)(p.LFG(Ot),p.LFG(Cn),p.LFG(An),p.LFG(wi),p.LFG(Hn,8))},ve.\u0275mod=p.oAB({type:ve}),ve.\u0275inj=p.cJS({}),ve})(),mi=(()=>{class ve{static forRoot(Q,me={}){return{ngModule:wi,providers:[{provide:it,useFactory:Rr,deps:[[Vt,new p.FiY,new p.tp0]]},{provide:Xe,useValue:me.initialState},{provide:Fe,useFactory:Qi,deps:[Xe]},{provide:Ke,useValue:Q},{provide:St,useExisting:Q instanceof p.OlP?Q:Ke},{provide:dt,deps:[p.zs3,Ke,[new p.tBr(St)]],useFactory:Pr},{provide:En,useValue:me.metaReducers?me.metaReducers:[]},{provide:sn,deps:[on,En],useFactory:Pi},{provide:et,useValue:me.reducerFactory?me.reducerFactory:Ln},{provide:ze,deps:[et,sn],useFactory:Ar},je,pn,Hr,$r,an,ir(me.runtimeChecks),Qr()]}}static forFeature(Q,me,$e={}){return{ngModule:zn,providers:[{provide:rn,multi:!0,useValue:Q instanceof Object?{}:$e},{provide:_t,multi:!0,useValue:{key:Q instanceof Object?Q.name:Q,reducerFactory:$e instanceof p.OlP||!$e.reducerFactory?Ln:$e.reducerFactory,metaReducers:$e instanceof p.OlP||!$e.metaReducers?[]:$e.metaReducers,initialState:$e instanceof p.OlP||!$e.initialState?void 0:$e.initialState}},{provide:Ot,deps:[p.zs3,rn,_t],useFactory:xn},{provide:nn,multi:!0,useValue:Q instanceof Object?Q.reducer:me},{provide:en,multi:!0,useExisting:me instanceof p.OlP?me:nn},{provide:Cn,multi:!0,deps:[p.zs3,nn,[new p.tBr(en)]],useFactory:ti},Qr()]}}}return ve.\u0275fac=function(Q){return new(Q||ve)},ve.\u0275mod=p.oAB({type:ve}),ve.\u0275inj=p.cJS({}),ve})();function Pr(ve,le){return le instanceof p.OlP?ve.get(le):le}function xn(ve,le,Q){return Q.map((me,$e)=>{if(le[$e]instanceof p.OlP){const qe=ve.get(le[$e]);return{key:me.key,reducerFactory:qe.reducerFactory?qe.reducerFactory:Ln,metaReducers:qe.metaReducers?qe.metaReducers:[],initialState:qe.initialState}}return me})}function ti(ve,le){return le.map(me=>me instanceof p.OlP?ve.get(me):me)}function Qi(ve){return"function"==typeof ve?ve():ve}function Pi(ve,le){return ve.concat(le)}function Rr(ve){if(ve)throw new TypeError("StoreModule.forRoot() called twice. Feature modules should use StoreModule.forFeature() instead.");return"guarded"}function Er(...ve){return{reducer:ve.pop(),types:ve.map(me=>me.type)}}function Jr(ve,...le){const Q=new Map;for(const me of le)for(const $e of me.types){const qe=Q.get($e);Q.set($e,qe?(yn,Nn)=>me.reducer(qe(yn,Nn),Nn):me.reducer)}return function(me=ve,$e){const qe=Q.get($e.type);return qe?qe(me,$e):me}}},8766:(ke,ye,S)=>{S.d(ye,{Lj:()=>Qe,X3:()=>wt});var p=S(5861);let G,Ee;const be=new WeakMap,ce=new WeakMap,_e=new WeakMap,ee=new WeakMap,fe=new WeakMap;let Je={get(it,Xe,Fe){if(it instanceof IDBTransaction){if("done"===Xe)return ce.get(it);if("objectStoreNames"===Xe)return it.objectStoreNames||_e.get(it);if("store"===Xe)return Fe.objectStoreNames[1]?void 0:Fe.objectStore(Fe.objectStoreNames[0])}return tt(it[Xe])},set:(it,Xe,Fe)=>(it[Xe]=Fe,!0),has:(it,Xe)=>it instanceof IDBTransaction&&("done"===Xe||"store"===Xe)||Xe in it};function at(it){return"function"==typeof it?function bt(it){return it!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Te(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(it)?function(...Xe){return it.apply(xe(this),Xe),tt(be.get(this))}:function(...Xe){return tt(it.apply(xe(this),Xe))}:function(Xe,...Fe){const ze=it.call(xe(this),Xe,...Fe);return _e.set(ze,Xe.sort?Xe.sort():[Xe]),tt(ze)}}(it):(it instanceof IDBTransaction&&function Ye(it){if(ce.has(it))return;const Xe=new Promise((Fe,ze)=>{const et=()=>{it.removeEventListener("complete",dt),it.removeEventListener("error",Ke),it.removeEventListener("abort",Ke)},dt=()=>{Fe(),et()},Ke=()=>{ze(it.error||new DOMException("AbortError","AbortError")),et()};it.addEventListener("complete",dt),it.addEventListener("error",Ke),it.addEventListener("abort",Ke)});ce.set(it,Xe)}(it),((it,Xe)=>Xe.some(Fe=>it instanceof Fe))(it,function de(){return G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(it,Je):it)}function tt(it){if(it instanceof IDBRequest)return function Ae(it){const Xe=new Promise((Fe,ze)=>{const et=()=>{it.removeEventListener("success",dt),it.removeEventListener("error",Ke)},dt=()=>{Fe(tt(it.result)),et()},Ke=()=>{ze(it.error),et()};it.addEventListener("success",dt),it.addEventListener("error",Ke)});return Xe.then(Fe=>{Fe instanceof IDBCursor&&be.set(Fe,it)}).catch(()=>{}),fe.set(Xe,it),Xe}(it);if(ee.has(it))return ee.get(it);const Xe=at(it);return Xe!==it&&(ee.set(it,Xe),fe.set(Xe,it)),Xe}const xe=it=>fe.get(it);function wt(it,Xe,{blocked:Fe,upgrade:ze,blocking:et,terminated:dt}={}){const Ke=indexedDB.open(it,Xe),_t=tt(Ke);return ze&&Ke.addEventListener("upgradeneeded",St=>{ze(tt(Ke.result),St.oldVersion,St.newVersion,tt(Ke.transaction))}),Fe&&Ke.addEventListener("blocked",()=>Fe()),_t.then(St=>{dt&&St.addEventListener("close",()=>dt()),et&&St.addEventListener("versionchange",()=>et())}).catch(()=>{}),_t}function Qe(it,{blocked:Xe}={}){const Fe=indexedDB.deleteDatabase(it);return Xe&&Fe.addEventListener("blocked",()=>Xe()),tt(Fe).then(()=>{})}const Ge=["get","getKey","getAll","getAllKeys","count"],ut=["put","add","delete","clear"],At=new Map;function je(it,Xe){if(!(it instanceof IDBDatabase)||Xe in it||"string"!=typeof Xe)return;if(At.get(Xe))return At.get(Xe);const Fe=Xe.replace(/FromIndex$/,""),ze=Xe!==Fe,et=ut.includes(Fe);if(!(Fe in(ze?IDBIndex:IDBObjectStore).prototype)||!et&&!Ge.includes(Fe))return;const dt=function(){var Ke=(0,p.Z)(function*(_t,...St){const nn=this.transaction(_t,et?"readwrite":"readonly");let rn=nn.store;return ze&&(rn=rn.index(St.shift())),(yield Promise.all([rn[Fe](...St),et&&nn.done]))[0]});return function(St){return Ke.apply(this,arguments)}}();return At.set(Xe,dt),dt}!function ot(it){Je=it(Je)}(it=>EE(vE({},it),{get:(Xe,Fe,ze)=>je(Xe,Fe)||it.get(Xe,Fe,ze),has:(Xe,Fe)=>!!je(Xe,Fe)||it.has(Xe,Fe)}))},5861:(ke,ye,S)=>{function p(G,Ee,de,Te,be,ce,_e){try{var ee=G[ce](_e),fe=ee.value}catch(Ae){return void de(Ae)}ee.done?Ee(fe):Promise.resolve(fe).then(Te,be)}function M(G){return function(){var Ee=this,de=arguments;return new Promise(function(Te,be){var ce=G.apply(Ee,de);function _e(fe){p(ce,Te,be,_e,ee,"next",fe)}function ee(fe){p(ce,Te,be,_e,ee,"throw",fe)}_e(void 0)})}}S.d(ye,{Z:()=>M})}},ke=>{ke(ke.s=4818)}]);